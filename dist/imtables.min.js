!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.imtables=a()}}(function(){var a;return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){(function(){var b,d,e,f,g,h,i;f=a("es6-promise").Promise,i=a("underscore"),b=a("jquery"),e=a("./options"),d={server:"http://cdn.intermine.org",imtables:"/js/intermine/im-tables/2.0.0-beta/",tests:{fontawesome:/font-awesome/,glyphicons:/bootstrap-icons/},resources:{prettify:["/js/google-code-prettify/latest/prettify.js"],d3:"/js/d3/3.0.6/d3.v3.min.js",glyphicons:"/css/bootstrap/2.3.2/css/bootstrap-icons.css",fontawesome:"/css/font-awesome/4.x/css/font-awesome.min.css",filesaver:"/js/filesaver.js/FileSaver.min.js"}},e.set("CDN",d),g=function(a){var b;return null!=a&&(b=i.asArray(document.querySelectorAll('link[rel="stylesheet"]')),i.any(b,function(b){return a.test(b.href)}))},h=function(a){return function(c,d){var e,h,j;return j=new f(function(a){return i.delay(a,50,!0)}),/\.css$/.test(c)?g(d)?j:(h=b('<link type="text/css" rel="stylesheet">'),h.appendTo("head").attr({href:a+c}),j):(e=b.ajax({url:a+c,cache:!0,dataType:"script"}),e.then(function(){return j}))}},c.load=function(a){var b,c,d,g,j;return g=e.get("CDN.server"),c=e.get(["CDN","resources",a]),j=e.get(["CDN","tests",a]),d=h(g),c?i.isArray(c)?f.all(function(){var a,e,f;for(f=[],a=0,e=c.length;a<e;a++)b=c[a],f.push(d(b));return f}()):d(c,j):f.reject("No resource is configured for "+a)}}).call(this)},{"./options":63,"es6-promise":238,jquery:256,underscore:262}],2:[function(a,b,c){(function(){var c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},g=[].slice;c=a("backbone"),d=function(a){return!a},b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.destroyed=!1,b.prototype.toggle=function(a){return this.swap(a,d)},b.prototype.swap=function(a,b){return this.set(a,b(this.get(a)))},b.prototype.toJSON=function(){return this.destroyed?"DESTROYED":b.__super__.toJSON.apply(this,arguments)},b.prototype.destroy=function(){if(!this.destroyed)return this.stopListening(),this.destroyed=!0,this.trigger("destroy",this,this.collection),this._frozen=[],this.clear(),this.off()},b.prototype._frozen=[],b.prototype._validate=function(a,c){var d,e,f,g,h;for(h=this._frozen,f=0,g=h.length;f<g;f++)if((e=h[f])in a&&a[e]!==this.get(e)){if(d=e+" is frozen (trying to set it to "+a[e]+" - is "+this.get(e)+")",!c.merge)throw new Error(d);a[e]=this.get(e)}return b.__super__._validate.apply(this,arguments)},b.prototype.freeze=function(){var a;return a=1<=arguments.length?g.call(arguments,0):[],this._frozen=this._frozen.concat(a),this},b}(c.Model)}).call(this)},{backbone:235}],3:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t={}.hasOwnProperty,u=function(a,b){function c(){this.constructor=a}for(var d in b)t.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},v=[].slice;a("./shim"),d=a("backbone"),s=a("underscore"),c=a("jquery"),e=a("./core-model"),i=a("./messages"),j=a("./templates"),g=a("./icons"),f=a("./event"),l=a("./templates/helpers"),r=a("./utils/on-change"),h=j.template("progress-bar")({doneness:1}),m=0,k=function(){return m++},o=function(){return q.call(this,"model")},p=function(){return q.call(this,"state")},n=function(){return q.call(this,"collection")},q=function(a){var b,c,d,e;if(b=s.result(this,a+"Events"),s.size(b)){if(null==this[a])throw new Error("Cannot listen to "+a+" - it is null.");e=[];for(c in b){if(d=b[c],null==(d=s.isFunction(d)?d:this[d]))throw new Error("No handler for "+a+":"+c);e.push(this.listenTo(this[a],c,d))}return e}},b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}var d;return u(b,a),b.include=function(a){return s.extend(this.prototype,a)},b.prototype.hasOwnModel=!0,b.prototype.parameters=[],b.prototype.optionalParameters=[],b.prototype.parameterTypes={},b.prototype.initState=function(){},b.prototype.initialize=function(a){var b,c,d,f,h,i,j,k,l;for(null==a&&(a={}),this.state=a.state,f=null!=(j=s.result(this,"parameters"))?j:[],c=null!=(k=s.result(this,"optionalParameters"))?k:[],s.extend(this,s.pick.apply(s,[a].concat(v.call(f)))),h=0,i=c.length;h<i;h++)d=c[h],null!=a[d]&&(this[d]=a[d]);return this.children={},b=this.Model||e,null!=(null!=(l=this.model)?l.toJSON:void 0)&&(this.hasOwnModel=!1),null==this.model&&(this.model=new b),null==this.model.toJSON&&(this.model=new b(this.model)),null==this.state&&(this.state=new e),null==this.state.toJSON&&(this.state=new e(this.state)),null!=this.RERENDER_EVENT&&this.listenTo(this.model,this.RERENDER_EVENT,this.reRender),this.on("rendering",this.preRender),this.on("rendered",this.postRender),this.assertInvariants(),this.initState(),o.call(this),p.call(this),n.call(this),this.listenTo(g,this.ICONS,function(){if(this.template)return this.reRender()}),this.listenTo(this.model,"destroy",function(){return this.remove()})},b.prototype.ICONS="change",b.prototype.stopListeningTo=function(a){return this.stopListening(a)},b.prototype.renderRequires=[],b.prototype.modelEvents={},b.prototype.stateEvents={},b.prototype.collectionEvents={},b.prototype.listenForChange=function(){var a,b,c;if(a=arguments[0],b=arguments[1],c=3<=arguments.length?v.call(arguments,2):[],!(null!=c?c.length:void 0))throw new Error("No properties listed");return this.listenTo(a,r(c),b)},b.prototype.renderError=function(a){return renderError(this.el)(a)},b.prototype.helpers=function(){return s.extend({IndeterminateProgressBar:h},l)},b.prototype.getBaseData=function(){var a;return l=s.result(this,"helpers"),a=s.result(this,"labels"),s.extend({state:this.state.toJSON(),Messages:i,Icons:g,labels:a},l)},b.prototype.getData=function(){var a,b;return s.extend(this.getBaseData(),this.model.toJSON(),{collection:null!=(a=null!=(b=this.collection)?b.toJSON():void 0)?a:[]})},b.prototype.reRender=function(){return this.rendered&&!this.removed&&this.render(),this},b.prototype.postRender=function(){},b.prototype.preRender=function(){},d=function(a,b){return s.all(b,function(b){return a.has(b)})},b.prototype.onRenderError=function(a){return console.error("RENDER FAILED",this,a),this.state.set({error:a})},b.prototype.render=function(){var a,b,c,e;if(!this.removed){if(e=s.result(this,"renderRequires"),(null!=e?e.length:void 0)&&!d(this.model,e))return b=r(e),this.listenToOnce(this.model,b,this.render),this;if(c=new f(this.rendered),this.trigger("rendering",c),c.cancelled)return this;if(this.removeAllChildren(),null!=this.template)try{this.$el.html(this.template(this.getData()))}catch(b){a=b,this.onRenderError(a)}return this.renderChildren(),this.trigger("rendered",this.rendered=!0),this}},b.prototype.renderChildren=function(){},b.prototype.renderChild=function(a,b,c,d){if(null==c&&(c=this.el),null==d&&(d="append"),null==a&&(a=k()),this.removeChild(a),this.children[a]=b,null==b)return this;switch(d){case"append":b.$el.appendTo(c);break;case"prepend":b.$el.prependTo(c);break;case"at":b.setElement(c[0]||c);break;default:throw new Error("Unknown position: "+d)}return b.render(),this},b.prototype.renderChildAt=function(a,b,c){return null==c&&(c=this.$(a)),this.renderChild(a,b,c,"at")},b.prototype.removeChild=function(a){var b;return null!=(b=this.children[a])&&b.remove(),delete this.children[a]},b.prototype.removeAllChildren=function(){var a,b,c,d,e;if(null!=this.children){for(d=s.keys(this.children),e=[],b=0,c=d.length;b<c;b++)a=d[b],e.push(this.removeChild(a));return e}},b.prototype.removed=!1,b.prototype.remove=function(){if(!this.removed)return this.stopListening(),this.removed=!0,this.$el.parent().trigger("childremoved",this),this.trigger("remove",this),this.hasOwnModel&&this.model.destroy(),this.removeAllChildren(),this.off(),b.__super__.remove.apply(this,arguments),this},b.prototype.make=function(a,b,d){var e,f,g,h,i,j,k;if(f=document.createElement(a),e=c(f),null!=b)for(g in b)h=b[g],"class"===g||"className"===g?e.addClass(h):e.attr(g,h);if(null!=d)if(s.isArray(d))for(j=0,k=d.length;j<k;j++)i=d[j],e.append(i);else e.append(d);return f},b.prototype.invariants=function(){return{}},b.prototype.assertInvariant=function(a,b){if(!a)throw new Error(b)},b.prototype.assertInvariants=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,t;for(g=null!=(n=s.result(this,"parameters"))?n:[],d=null!=(o=s.result(this,"optionalParameters"))?o:[],f=null!=(p=s.result(this,"parameterTypes"))?p:{},j=0,l=g.length;j<l;j++)e=g[j],i=this[e],this.assertInvariant(null!=i,"Missing required option: "+e);for(q=g.concat(d),k=0,m=q.length;k<m;k++)e=q[k],null!=(h=f[e])&&(i=this[e],a=h.test(i),c=h.message(e),this.assertInvariant(a,c));r=this.invariants(),t=[];for(b in r)c=r[b],t.push(this.assertInvariant(s.result(this,b),c));return t},b}(d.View)}).call(this)},{"./core-model":2,"./event":11,"./icons":14,"./messages":16,"./shim":66,"./templates":67,"./templates/helpers":68,"./utils/on-change":93,backbone:235,jquery:256,underscore:262}],4:[function(a,b,c){(function(){var c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("../core-view"),e=a("../templates"),d=a("../messages"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.class="checkbox",b.prototype.template=e.template("checkbox"),b.prototype.getData=function(){return{checked:this.checked(),label:this.label?d.getText(this.label):null}},b.prototype.initialize=function(a){return this.attr=a.attr,this.label=a.label,b.__super__.initialize.apply(this,arguments)},b.prototype.checked=function(){return this.model.get(this.attr)},b.prototype.toggle=function(a){return null!=a&&a.stopPropagation(),this.model.toggle(this.attr)},b.prototype.events=function(){return{click:"toggle"}},b.prototype.modelEvents=function(){var a;return a={},a["change:"+this.attr]=this.setCheckboxState,a},b.prototype.setCheckboxState=function(){return null==this.cb&&(this.cb=this.$("input")[0]),this.cb.checked=this.model.get(this.attr)},b}(c)}).call(this)},{"../core-view":3,"../messages":16,"../templates":67}],5:[function(a,b,c){(function(){var c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("backbone"),d=a("../core-model"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.model=d,b.prototype.close=function(){var a;for(this.trigger("close",this),this.off();a=this.pop();)a.collection===this&&(delete a.collection,a.destroy());return this.reset(),this.stopListening()},b}(c.Collection)}).call(this)},{"../core-model":2,backbone:235}],6:[function(a,b,c){(function(){var c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=a("underscore"),c=a("../core-view"),d=a("../templates"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.className="input-group",b.prototype.template=d.template("input-with-button"),b.prototype.getData=function(){return e.extend(this.getBaseData(),{value:this.model.get(this.sets),placeholder:this.placeholder,button:this.button})},b.prototype.initialize=function(a){return this.placeholder=a.placeholder,this.button=a.button,this.sets=a.sets,b.__super__.initialize.apply(this,arguments),null!=this.sets?this.sets:this.sets="value"},b.prototype.postRender=function(){return this.$el.addClass(this.className)},b.prototype.modelEvents=function(){var a;return a={},a["change:"+this.sets]=this.setDomValue,a},b.prototype.events=function(){return{"keyup input":"setModelValue","click button":"act"}},b.prototype.setModelValue=function(a){return this.model.set(this.sets,a.target.value)},b.prototype.setDomValue=function(){var a,b;if(b=this.model.get(this.sets),a=this.$("input"),a.val()!==b)return a.val(b)},b.prototype.act=function(){return this.trigger("act",this.model.get(this.sets))},b}(c)}).call(this)},{"../core-view":3,"../templates":67,underscore:262}],7:[function(a,b,c){(function(){var c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=a("underscore"),c=a("../core-view"),d=a("../templates"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.className="form-group",b.prototype.template=d.template("input-with-label"),b.prototype.parameters=function(){return["attr","placeholder","label"]},b.prototype.optionalParameters=function(){return["getProblem","helpMessage"]},b.prototype.getProblem=function(a){return null},b.prototype.helpMessage=null,b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.setValidity()},b.prototype.setValidity=function(){return this.state.set({problem:this.getProblem(this.model.get(this.attr))})},b.prototype.getData=function(){return e.extend(this.getBaseData(),{value:this.model.get(this.attr),label:this.label,placeholder:this.placeholder,helpMessage:this.helpMessage,hasProblem:this.state.get("problem")})},b.prototype.postRender=function(){return this.$el.addClass(this.className),this.onChangeValidity()},b.prototype.events=function(){return{"keyup input":"setModelValue"}},b.prototype.stateEvents=function(){return{"change:problem":this.onChangeValidity}},b.prototype.modelEvents=function(){var a;return a={},a["change:"+this.attr]=this.onChangeValue,a},b.prototype.onChangeValue=function(){return this.setValidity(),this.setDOMValue()},b.prototype.onChangeValidity=function(){var a,b;return b=this.state.get("problem"),a=this.$(".help-block"),b?(this.$el.toggleClass("has-warning","warning"===b.level),this.$el.toggleClass("has-error","warning"!==b.level),null!=b.message&&a.text(Messages.getText(b.message)),a.slideDown()):(this.$el.removeClass("has-warning has-error"),a.slideUp())},b.prototype.setModelValue=function(a){return this.model.set(this.attr,this.$(a.target).val())},b.prototype.setDOMValue=function(){var a,b,c;if(a=this.$("input"),b=a.val(),(c=this.model.get(this.attr))!==b)return a.val(c)},b}(c)}).call(this)},{"../core-view":3,"../templates":67,underscore:262}],8:[function(a,b,c){(function(){var c,d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},i=[].slice;f=a("underscore"),c=a("../core-model"),e=function(a,b){var c;return c=a[b],f.isObject(c)?c:a[b]={}},d=function(a){return f.isObject(a)&&!f.isFunction(a)&&!f.isArray(a)},b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype._triggerChangeRecursively=function(a,b){var c,d,e,g;g=[];for(c in b)e=b[c],d=a+"."+c,f.isObject(e)?g.push(this._triggerChangeRecursively(d,e)):g.push(this.trigger("change:"+d,this,this.get(d)));return g},b.prototype.get=function(a){var c,d;return f.isArray(a)?(c=a[0],d=2<=a.length?i.call(a,1):[],d.reduce(function(a,b){return a&&a[b]},b.__super__.get.call(this,c))):/\w+\.\w+/.test(a)?this.get(a.split(/\./)):b.__super__.get.call(this,a)},b.prototype.pick=function(){var a;return a=1<=arguments.length?i.call(arguments,0):[],f.object(f.flatten(a).map(function(a){return function(b){return[b,a.get(b)]}}(this)))},b.prototype._triggerPathChange=function(a,b){var c,d,e,f,g;for(c=[],this.trigger("change",this,a.join("."),b),g=[],e=0,f=a.length;e<f;e++)d=a[e],c.push(d),g.push(this.trigger("change:"+c.join("."),this,this.get(c)));return g},b.prototype._triggerUnsetPath=function(a,b){var c,d,e;if(f.isObject(b)){e=[];for(c in b)d=b[c],e.push(this._triggerUnsetPath(a.concat([c]),d));return e}return this.trigger("change:"+a.join("."))},b.prototype.set=function(a,c){var g,h,j,k,l,m,n,o,p,q,r;if(null==a)throw new Error("No key");if(!f.isArray(a)){if(f.isString(a))return/\w+\.\w+/.test(a)?this.set(a.split(/\./),c):f.isObject(c)&&!f.isArray(c)?this.set([a],c):b.__super__.set.apply(this,arguments);r=[];for(l in a)p=a[l],r.push(this.set(l,p));return r}if(d(c))for(l in c)p=c[l],this.set(a.concat([l]),p);else if(j=a[0],m=3<=a.length?i.call(a,1,q=a.length-1):(q=1,[]),h=a[q++],k=this.get(j),!k||!f.isFunction(k)&&f.isObject(k)||this.unset(j),o=null!=k?k:{},g=m.reduce(e,o),n=g[h],g[h]=c,b.__super__.set.call(this,j,o),this._triggerPathChange(a,c),null!=n&&null==c)return this._triggerUnsetPath(a,n)},b}(c)}).call(this)},{"../core-model":2,underscore:262}],9:[function(a,b,c){(function(){var c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=a("underscore"),d=a("../templates"),c=a("./input-with-label"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.parameters=function(){return["model","collection","attr","label","optionLabel"]},b.prototype.optionalParameters=function(){return["noOptionsMessage"].concat(b.__super__.optionalParameters.apply(this,arguments))},b.prototype.template=d.template("select-with-label"),b.prototype.noOptionsMessage="core.NoOptions",b.prototype.events=function(){return{"change select":"setModelValue"}},b.prototype.collectionEvents=function(){return{"add remove reset change":this.reRender}},b.prototype.getData=function(){var a;return a=this.model.get(this.attr),e.extend(this.getBaseData(),{label:this.label,model:this.model.toJSON(),selected:function(b){return b.name===a},options:this.collection.toJSON(),optionLabel:this.optionLabel,helpMessage:this.helpMessage,noOptionsMessage:this.noOptionsMessage,hasProblem:this.state.get("problem")})},b}(c)}).call(this)},{"../templates":67,"./input-with-label":7,underscore:262}],10:[function(a,b,c){(function(){var b,d,e,f,g,h,i,j,k,l,m,n,o=[].slice;n=a("underscore"),d=a("backbone"),g=a("../core-model"),f=a("./collection"),c.assertMatch=function(a,b,c){if(null==c&&(c="value"),!a.test(b))throw new Error(a.message(c))},i=function(){function a(b,c){if(this.type=b,this.name=c,!(this instanceof a))return new a(this.type,this.name)}return a.prototype.test=function(a){return a instanceof this.type},a.prototype.message=function(a){return a+" is not an instance of "+this.name},a}(),m=function(){function a(a,b){this.name=a,this.structure=b,this._msg=null}return a.prototype.failValidation=function(a){return this._msg=a,!1},a.prototype.test=function(a){var b,c,d,e;if(this._msg=null,null==a)return this.failValidation("it is null");if(null==a)return!1;e=this.structure;for(c in e)if(d=e[c],b=a[c],!d.test(b))return this.failValidation(d.message("."+c));return!0},a.prototype.message=function(a){return a+" failed "+this.name+" validation, because "+this._msg},a}(),c.InstanceOf=i,c.Structure=m,c.Model=new i(d.Model,"Backbone.Model"),c.CoreModel=new i(g,"core-model"),c.CoreCollection=new i(f,"core/collection"),c.Array=k={name:"array",test:n.isArray,message:function(a){return a+" is not an array"}},c.ArrayOf=b=function(a){return{name:"array of "+a.name,test:function(b){return this.passed=k.test(b)&&n.all(b,a.test)},message:function(b){var c;return b+" is not an array of "+(null!=(c=a.name)?c:"the correct type")}}},c.Function={name:"function",test:n.isFunction,message:function(a){return a+" is not a function"}},c.Number={name:"number",test:n.isNumber,message:function(a){return a+" is not a number"}},c.String=l={name:"string",test:n.isString,message:function(a){return a+" is not a string"}},c.Maybe=function(a){return{name:"maybe "+a.name,test:function(b){return null==b||a.test(b)},message:function(b){return a.message(b)}}},c.Callable=e={name:"callable",test:function(a){return null!=a&&n.isFunction(a.call)},message:function(a){return a+" is not callable"}},c.HasProperty=function(a){return{name:"has-property("+a+")",test:function(b){return null!=b&&a in b},message:function(b){return b+"."+a+" not found"}}},c.UnionOf=function(){var a;return a=1<=arguments.length?o.call(arguments,0):[],{name:function(){return"Union of "+a.map(function(a){return a.name}).join(", ")},test:function(b){return n.all(a,function(a){return function(c){return a._t=c,c.test(b)}}(this))},message:function(a){var b;return null!=(b=this._t)?b.message(a):void 0}}},c.Listenable=new m("Listenable",{on:c.Function,off:c.Function}),c.Service=j=new m("Service",{root:l,query:e,fetchModel:e,fetchLists:e,count:e,whoami:e}),c.DataModel=h=new m("imjs.Model",{name:l,makePath:e,findCommonType:e}),c.Query=new m("Query",{service:j,model:h,rows:e,count:e,toXML:e,root:l,views:b(l)})}).call(this)},{"../core-model":2,"./collection":5,backbone:235,underscore:262}],11:[function(a,b,c){(function(){b.exports=function(){function a(a,b){this.data=a,this.target=b}return a.prototype.cancel=function(){return this.cancelled=!0},a.prototype.preventDefault=function(){return this.cancel()},a.prototype.stopPropagation=function(){},a}()}).call(this)},{}],12:[function(a,b,c){(function(){c.suppress=function(a){return null!=a&&a.preventDefault(),null!=a?a.stopPropagation():void 0}}).call(this)},{}],13:[function(a,b,c){(function(){var b,d,e,f,g,h,i,j,k;k=a("underscore"),d=a("./templates"),b=a("./core/nested-model"),j=function(a){return a.isAttribute()?a.getParent().getType():a.getType()},h=function(a){var b;return b=j(a),[b.name].concat(a.model.getAncestorsOf(b))},e=function(a){return!!a},g=new b,c.getFormatter=i=function(a){var b,c,d,e,f,i,j,k,l;if(null==a||a.isRoot())throw new Error("No path or path is root");for(i=a.model,f=null!=(l=g.get([i.name]))?l:{},c=h(a),d=a.end.name,j=0,k=c.length;j<k;j++)if(b=c[j],e=f[b+"."+d]||f[b+".*"],!0===e&&(e=f[b]),null!=e)return e;return null},c.shouldFormat=function(a){if(null==a)throw new Error("no path");return!!a.isAttribute()&&e(i(a))},c.registerFormatter=function(a,b,c,d){if(null==d&&(d=["*"]),null==(null!=a?a.call:void 0))throw new Error("formatter is not a function");return 1===d.length&&"*"!==d[0]?g.set([b,c+"."+d[0]],a):(g.set([b,c],a),f(b,c,d))},c.disableFormatter=function(a,b,c){var d,e,f,h;for(null==c&&(c=["*"]),h=[],e=0,f=c.length;e<f;e++)d=c[e],h.push(g.set([a,b+"."+d],!1));return h},c.list=function(a){var b,c,d;c=g.get([a]),d=[];for(b in c)c[b]&&d.push(b);return d},c.enableFormatter=f=function(a,b,c){var d,e,f,h;for(null==c&&(c=["*"]),h=[],e=0,f=c.length;e<f;e++)d=c[e],h.push(g.set([a,b+"."+d],!0));return h},c.defaultFormatter=function(a,b,c){return null!=c?k.escape(c):d.null_value},c.reset=function(){return g.clear(),g.trigger("reset")}}).call(this)},{"./core/nested-model":8,"./templates":67,underscore:262}],14:[function(a,b,c){(function(){var c,d,e,f,g,h,i={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};h=a("underscore"),e=a("./core-model"),f=a("./options"),c={},g=function(a,b){return c[a]=h.extend({},b)},d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return j(b,a),b.prototype.icon=function(a,b,c){var d,e,f,g;return null==c&&(c={}),d=[],g=function(){var a;a=[];for(e in c)f=c[e],"className"!==e&&a.push(e+'="'+h.escape(f)+'"');return a}(),"className"in c&&d.push(h.escape(c.className)),d.push(this.iconClasses(a)),b&&d.push(this.getSize(b)),'<i class="'+d.join(" ")+'" '+g.join(" ")+"></i>"},b.prototype.iconWithProps=function(a,b){return this.icon(a,null,b)},b.prototype.getSize=function(a){var b;return null!=(b=this.get("size"+a.toUpperCase()))?b:""},b.prototype.iconClasses=function(a){return this.get("Base")+" "+this.get(a)},b.prototype._loadIconSet=function(){var a;if((a=c[this.options.get("icons")])&&(this.clear({silent:!0}),null!=a))return this.set(a)},b.prototype.initialize=function(a){return this.options=null!=a?a:f,this._loadIconSet(),this.listenTo(this.options,"change:icons",this._loadIconSet)},b}(e),c.glyphicons={Base:"glyphicon",unsorted:"glyphicon-resize-vertical",ASC:"glyphicon-arrow-up",DESC:"glyphicon-arrow-down",headerIcon:"icon",headerIconRemove:"glyphicon-remove",headerIconHide:"glyphicon-minus",headerIconReveal:"glyphicon-fullscreen",SortStringASC:"glyphicon-sort-by-alphabet",SortStringDESC:"glyphicon-sort-by-alphabet-alt",SortNumericASC:"glyphicon-sort-by-order",SortNumericDESC:"glyphicon-sort-by-order-alt",RootClass:"glyphicon-stop",Yes:"glyphicon-star",No:"glyphicon-star-empty",Table:"glyphicon-list",Script:"glyphicon-console",Export:"glyphicon-cloud-download",Error:"glyphicon-warning-sign",Info:"glyphicon-info-sign",Warning:"glyphicon-warning-sign",Remove:"glyphicon-minus-sign",OK:"glyphicon-ok",Cancel:"glyphicon-remove",Check:"glyphicon-check",UnCheck:"glyphicon-unchecked",CheckUnCheck:"glyphicon-ok-none",Add:"glyphicon-plus-sign",Move:"glyphicon-move",More:"glyphicon-plus-sign",Filter:"glyphicon-filter",Summary:"glyphicon-stats",Undo:"glyphicon-refresh",Refresh:"glyphicon-refresh",Columns:"glyphicon-pause",Collapsed:"glyphicon-chevron-right",Expanded:"glyphicon-chevron-down",CollapsedSection:"glyphicon-triangle-right",ExpandedSection:"glyphicon-triangle-bottom",MoveDown:"glyphicon-chevron-down",GoBack:"glyphicon-chevron-left",GoForward:"glyphicon-chevron-right",MoveUp:"glyphicon-chevron-up",Toggle:"glyphicon-random",ExpandCollapse:"glyphicon-chevron-right icon-chevron-down",Help:"glyphicon-question-sign",ReverseRef:"glyphicon-retweet",Reorder:"glyphicon-menu-hamburger",Edit:"glyphicon-edit",ExtraValue:"glyphicon-map-marker",Tree:"glyphicon-plus",Download:"glyphicon-save-file",download:"glyphicon-cloud-download",Options:"glyphicon-tasks",ClipBoard:"glyphicon-paperclip",Composed:"glyphicon-tags",RemoveConstraint:"glyphicon-remove-sign",Dismiss:"glyphicon-remove-sign",ClosedReference:"glyphicon-expand",OpenReference:"glyphicon-collapse-down",Lock:"glyphicon-lock",Lists:"glyphicon-list-alt",Attribute:"glyphicon-unchecked",ExternalLink:"glyphicon-globe",tsv:"glyphicon-list",csv:"glyphicon-list",xml:"glyphicon-xml",json:"glyphicon-json",fake:"glyphicon-bug",Bug:"glyphicon-bug",Rubbish:"glyphicon-trash",RubbishFull:"glyphicon-trash",Joins:"glyphicon-link",Mail:"glyphicon-envelope"},c.fontawesome={Base:"fa",unsorted:"fa-unsorted",ASC:"fa-sort-up",DESC:"fa-sort-down",SortStringASC:"fa-sort-alpha-asc",SortStringDESC:"fa-sort-alpha-desc",SortNumericASC:"fa-sort-numeric-asc",SortNumericDESC:"fa-sort-numeric-desc",headerIcon:"fa",headerIconRemove:"fa-times",headerIconHide:"fa-ellipsis-h",headerIconReveal:"fa-arrows-h",sizeLG:"fa-2x",Yes:"fa-star",No:"fa-star-o",Table:"fa-list",EmptyTable:"fa-table",Script:"fa-file-code-o",Export:"fa-cloud-download",Remove:"fa-minus-circle",OK:"fa-check",Cancel:"fa-remove",Check:"fa-toggle-on",UnCheck:"fa-toggle-off",CheckUnCheck:"fa-toggle-on fa-toggle-off",Add:"fa-plus",Move:"fa-arrows",More:"fa-plus",Dropbox:"fa-dropbox",Drive:"fa-google",download:"fa-cloud-download",Galaxy:"fa-cloud-upload",GenomeSpace:"fa-cloud-upload",Filter:"fa-filter",Summary:"fa-bar-chart-o",Undo:"fa-undo",Refresh:"fa-refresh",Columns:"fa-columns",Collapsed:"fa-chevron-right",Expanded:"fa-chevron-down",CollapsedSection:"fa-caret-right",ExpandedSection:"fa-caret-down",MoveDown:"fa-chevron-down",GoBack:"fa-chevron-left",GoForward:"fa-chevron-right",MoveUp:"fa-chevron-up",Toggle:"fa-retweet",ExpandCollapse:"fa-chevron-right fa-chevron-down",Help:"fa-question-circle",Tree:"fa-sitemap",ReverseRef:"fa-retweet",Reorder:"fa-reorder",Options:"fa-tasks",Edit:"fa-edit",ExtraValue:"fa-database",Download:"fa-file-archive-o",ClipBoard:"fa-paperclip",Composed:"fa-tags",RemoveConstraint:"fa-times-circle",Dismiss:"fa-times-circle",Error:"fa-warning",Info:"fa-info-circle",Warning:"fa-warning",Lock:"fa-lock",RootClass:"fa-square",Attribute:"fa-tag",ClosedReference:"fa-plus-square",OpenReference:"fa-plus-square-o",CodeFile:"fa-file-code-o",Rubbish:"fa-trash-o",RubbishFull:"fa-trash",Joins:"fa-share-alt",ExternalLink:"fa-globe",Lists:"fa-cloud-upload",tsv:"fa-file-excel-o",csv:"fa-file-excel-o",xml:"fa-code",json:"fa-json",fake:"fa-bug",Bug:"fa-bug",Mail:"fa-envelope"},b.exports=new d,b.exports.Icons=d,b.exports.registerIconSet=g,b.exports.names=function(){var a,b,d;return a=function(){var a;a=[];for(b in c)d=c[b],a.push(h.keys(d));return a}(),h.union.apply(null,a)}}).call(this)},{"./core-model":2,"./options":63,underscore:262}],15:[function(a,b,c){(function(){var b,d,e,f,g,h,i,j,k,l,m,n,o,p;p=a("underscore"),a("./shim"),k=a("imjs").Service.connect,g=a("es6-promise").Promise,o=a("./version"),i=a("./core/type-assertions"),b=a("./views/dashboard"),h=a("./views/table"),f=a("./options"),e=a("./messages"),d=a("./formatting"),n=a("./utils/simple-formatter"),m=function(a){var b;return b=function(c,d,e){var f,h,j;return i.Query.test(e)?new g(l(a,c,e,d)):(j=e.service,h=e.query,f=i.Service.test(j)?j:k(j),f.query(h).then(p.partial(b,c,d)))}},l=function(a,b,c,d){return null==d&&(d={}),function(e){var g,h,i,k,l,m,n;for(h=j(b),i="undefined"!=typeof page&&null!==page?p.pick(d,"start","size"):null,d=p.extend(p.omit(d,"start","size"),{model:i,query:c}),k=a(d),k.setElement(h),n=p.result(k,"className").split(" "),l=0,m=n.length;l<m;l++)g=n[l],h.classList.add(g);return h.classList.add(f.get("StylePrefix")),k.render(),e(k)}},j=function(a){var b,c;if(null==a)throw new Error("No target element provided");if(null==(b=p.isString(a)?document.querySelector(a):null!=(c=a[0])?c:a))throw new Error("Target("+a+") not found on page");return b},c.version=o,c.setMessages=e.set.bind(e),c.configure=f.set.bind(f),c.loadTable=m(h.create),c.loadDash=m(function(a){return new b(a)}),c.createFormatter=n,c.formatting=p.omit(d,"getFormatter","shouldFormat","reset")}).call(this)},{"./core/type-assertions":10,"./formatting":13,"./messages":16,"./options":63,"./shim":66,"./utils/simple-formatter":104,"./version":111,"./views/dashboard":136,"./views/table":209,"es6-promise":238,imjs:247,underscore:262}],16:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l,m=function(a,b){return function(){return a.apply(b,arguments)}},n={}.hasOwnProperty,o=function(a,b){function c(){this.constructor=a}for(var d in b)n.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("backbone"),k=a("underscore"),g=a("./messages/actions"),h=a("./messages/common"),l=a("./templates/helpers"),i=l.numToString,j=l.pluralise,d=[h,g],e={formatNumber:i,pluralise:j},f=function(a){function b(){return this.getText=m(this.getText,this),b.__super__.constructor.apply(this,arguments)}return o(b,a),b.prototype.initialize=function(){return this.cache={},this.on("change",function(a){return function(){return a.cache={}}}(this))},b.prototype.destroy=function(){var a,b;this.off(),b=[];for(a in this)b.push(delete this[a]);return b},b.prototype.getTemplate=function(a){var b,c;return b=null!=(c=this.cache[a])?c:this.get(a),null!=b&&null==b.call&&(b=k.template(b)),this.cache[a]=b},b.prototype.getText=function(a,b){var c,d;return null==b&&(b={}),c=this.getTemplate(a),null!=(d="function"==typeof c?c(k.extend({Messages:this},e,b)):void 0)?d:"!!!No message for "+a+"!!!"},
b.prototype.setWithPrefix=function(a,b){var c,d,e;e=[];for(c in b)d=b[c],e.push(this.set(a+"."+c,d));return e},b.prototype.defaults=function(){return k.extend.apply(null,[{}].concat(d))},b}(c.Model),b.exports=new f,b.exports.Messages=f}).call(this)},{"./messages/actions":17,"./messages/common":20,"./templates/helpers":68,backbone:235,underscore:262}],17:[function(a,b,c){(function(){b.exports={"export.Export":"Export","export.ExportQuery":"Export","export.DialogueTitle":"Export","export.category.Format":"<%= format.EXT %> Format","export.category.Columns":"<%= columns %> Columns","export.category.Preview":"Preview","export.preview.Limit":"Preview is limited to at most 3 results.","export.heading.Columns":"Columns","export.category.Rows":"<% if (rowCount === max) { %>\n  All\n<% } else { %>\n  <%= rowCount %> of <%= max %>\n<% } %>\nRows","export.category.Compression":"<% if (compression) { %>\n  <%= compression.toUpperCase() %>\n<% } else { %>\n  No\n<% } %> Compression","export.category.Options":"Options","export.category.JsonFormat":"As <%= (jsonFormat === 'objects') ? 'Objects' : 'Rows' %>","export.category.FastaFormat":"FASTA options","export.category.ColumnHeaders":"<% if (headers) { %>\n  <%= {friendly: 'Formatted', path: 'Raw'}[headerType] %>\n<% } else { %>\n  No\n<% } %>\nColumn Headers","export.category.Destination":"<% if (dest === 'download') { %>\n  Download <%= format.EXT %> file\n<% } else { %>\n  Send <%= format.EXT %> to <%= dest %>\n<% } %>","export.galaxy.name":["<% if (orgs.length === 1) { %><%= orgs[0] %> <% } %>","<%= cls %> data","<% if (branding) { %> from <%= branding.name %><% } %>"].join(""),"export.galaxy.info":"<%= query.root %> data from <%= query.service.root %>.\nUploaded from <%= currentLocation %>.\n<% if (lists.length) { %>source: <%= lists.join(', ') %><% } %>\n<% if (orgs.length)  { %>organisms: <%= orgs.join(', ') %><% } %>","export.format.description.TSV":"A flat file format suitable for spreadsheet programmes","export.format.name.TSV":"Tab separated values.","export.format.description.CSV":"A flat file format, suitable for spreadsheet programmes","export.format.name.CSV":"Comma separated values.","export.format.description.XML":"A text format suitable for machine processing.","export.format.name.XML":"XML","export.format.name.JSON":"JSON","export.format.description.JSON":"A text format suitable for machine processing.","export.format.name.FASTA":"FASTA sequence.","export.format.description.FASTA":"FASTA output for sequence data.","export.format.name.GFF3":"GFF3 features.","export.format.description.GFF3":"GFF3 output for sequence features.","export.format.name.BED":"BED locations.","export.format.description.BED":"BED output for sequence feature locations.","export.format.name.FAKE":"Fake","export.format.description.FAKE":"Fake format for testing. Should only appear if the\nquery has departments in the view.","export.format.name.FAKE_2":"Also Fake","export.format.description.FAKE_2":"Fake format for testing. Should only appear if the\nquery has companies in the view.","export.param.Size":"Size: <%= size %>","export.param.Format":"Format","export.param.Start":"Offset: <%= start %>","export.param.Destination":"Destination","export.param.Name":"File name","export.help.AdditionalCols":"You can add any attributes of objects which are already\nin the query.","rows.All":"No limit","export.cloud.FileLocation":"Upload to <%- cloud %> successful. Your file is available at:","export.UseCompression":"Compress results","export.UseGZIP":"Use GZIP compression (produces a .gzip archive)","export.UseZIP":"Use Zip compression (produces a .zip archive)","export.AddHeaders":"Add column headers","export.json.Rows":"Return results as rows - each row is an Array of JSON values, e.g.:","export.SetTablePage":"Select rows in table","export.ResetRowSelection":"Select all rows","export.json.RowsExample":'["eve", "2R", 5866824, 5868300]',"export.json.ObjExample":'{\n  "class": "Gene",\n  "symbol": "eve",\n  "chromosomeLocation": {\n    "class": "ChromosomeLocation",\n    "start": 5866824,\n    "end": 5868300\n    "locatedOn": {\n      "class": "Chromosome",\n      "primaryIdentifier": "2R"\n    }\n  }\n}',"export.json.Objects":"Return results as objects - each result is a nested graph of\ndata, e.g.:","export.json.ObjWarning":"Please note that it is not recommended to set the size parameters\nwhen requesting object results, since the size of the result\nset, and the position of the offsets will differ when multiple\nrows are replaced by a single object with a collection.","export.ff.FriendlyHeaders":'Human readable headers (eg. "Gene > Organism Name")',"export.ff.PathHeaders":'Raw path headers (eg. "Gene.organism.shortName)',"export.error.NoColumnsSelected":"No columns selected","export.error.OffsetOutOfBounds":"The offset is greater than the total number of results.",ListNameDuplicate:"List names must be unique. This name is already taken",ListNameEmpty:"Lists must have names. Please enter one",ListNameIllegal:"Some characters are not allowed in list names. This name contains the following\nillegal characters: <%- illegals.join(', ') %>. Please remove them.",ExportTitle:"Download results for <%= name || 'query' %>",ConfigureExport:"Configure Export",GetData:"Download Data",ExportHelp:"Download file containing results to your computer",ExportButton:"Download","download-file":"Download File",download:"Download file",Galaxy:"Send to Galaxy",GenomeSpace:"Upload to Genomespace",Drive:"Save to Google Drive",Dropbox:"Save to Dropbox","Destdownload-file":"File",DestGalaxy:"Galaxy",DestGenomespace:"Genomespace",ExportAlt:"Send Data Somewhere Else",ExportLong:'<span class="hidden-tablet">Download</span>\nFile\n<span class="im-only-widescreen">to your Computer</span>',SendToGalaxy:'<span class="hidden-tablet">Send to</span>\nGalaxy\n<span class="im-only-widescreen">for analysis</span>',SendToGenomespace:'<span class="hidden-tablet">Upload to</span>\n<span class="im-only-widescreen">your</span>\nGenomespace\n<span class="im-only-widescreen">account</span>',MyGalaxy:"Send to your Galaxy",ForgetGalaxy:"Clear this galaxy URL",GalaxyHelp:"Start a file upload job within Galaxy",GalaxyURILabel:"Galaxy Location:",GalaxyAlt:"Send to a specific Galaxy",SaveGalaxyURL:"Make this my default Galaxy",WhatIsGalaxy:"What is Galaxy?",WhatIsGalaxyURL:"http://wiki.g2.bx.psu.edu/",GalaxyAuthExplanation:"If you have already logged into Galaxy with this browser, then the data\nwill be sent into your active account. Otherwise it will appear in a \ntemporary anonymous account.",CopyToClipBoard:"Copy to clipboard: <CTL>+C, <ENTER>",IsPrivateData:"This link provides access to data stored in your private lists. In order to do so\nit uses the API access token provided on initialisation. If this is your permanent\nAPI token you should be as careful of this link as you would of the data is provides\naccess to. If this is just a 24 hour access token, then you will need to replace it\nonce it becomes invalid.",LongURI:"The normal URI for this query (which includes the full query XML in the \nparameters) is too long for a GET request. The URI you can see here uses a\nquery-id, which has a limited validity. You should not store this URI for long\nterm use.",SendToOtherGalaxy:"Send",AllRows:"Whole Result Set",SomeRows:"Specific Range",WhichRows:"Rows to Export",RowsHelp:"Export all rows, or define a range of rows to export.",AllColumns:"All Current Columns",SomeColumns:"Choose Columns",CompressResults:"Compress results",NoCompression:"No compression",GZIPCompression:"GZIP",ZIPCompression:"ZIP",Copy:"copy to clip-board",ResultsPermaLink:"Perma-link to results",ResultsPermaLinkText:"Results URI",QueryXML:"Query XML",ResultsPermaLinkTitle:"Get a permanent URL for these results, suitable for your own use",ResultsPermaLinkShareTitle:"Get a permanent URL for these results, suitable for sharing with others",ColumnsHelp:"Export all columns, or choose specific columns to export.",WhichColumns:"Columns to Export",ResetColumns:"Reset Columns.",FirstRow:"From",LastRow:"To",SpreadsheetOptions:"Spreadsheet Options",ColumnHeaders:"Include Column Headers",PossibleColumns:"You can add any attribute from these nodes without changing your results:",ExportedColumns:"Exported Columns (drag to reorder)",ChangeColumns:"You may add any of the columns in the right hand box by clicking on the\nplus sign. You may remove unwanted columns by clicking on the minus signs\nin the left hand box. Note that while adding these columns will not alter your query,\nif you remove all the attributes from an item, then you <b>may change</b> the results\nyou receive.",OuterJoinWarning:"This query has outer-joined collections. This means that the number of rows in \nthe table is likely to be different from the number of rows in the exported results.\n<b>You are strongly discouraged from specifying specific ranges for export</b>. If\nyou do specify a certain range, please check that you did in fact get all the \nresults you wanted.",IncludedFeatures:"Exportable parts of this Query - <strong>choose at least one</strong>:",FastaFeatures:"Features with Sequences in this Query - <strong>select one</strong>:",FastaOptions:"FASTA Specific Options",FastaExtension:"Extension (eg: 100/100bp/5kbp/0.5mbp):",ExtraAttributes:"Columns to include as extra attributes on each exported record:",NoSuitableColumns:"There are no columns of a suitable type for this format.",BEDOptions:"BED Specific Options",Gff3Options:"GFF3 Specific Options",ChrPrefix:'Prefix "chr" to the chromosome identifier as per UCSC convention (eg: chr2)',ConfigureExportHelp:"Configure the export options in these categories","largetable.ok":"Set page size to <%- size %>","largetable.abort":"Cancel","largetable.appeal":"You have requested a very large table size (<%= size %> rows per page). Your\nbrowser may struggle to render such a large table,\nand the page could become unresponsive. In any case,\nwill be very difficult for you to read the whole table\nin the page. We suggest the following alternatives:"}}).call(this)},{}],18:[function(a,b,c){(function(){var b;b=a("../messages"),b.setWithPrefix("codegen",{AsHTML:"As HTML page",DialogueTitle:'Generated <%= Messages.getText("codegen.Lang", {lang: lang}) %>\nCode for <%= query.name || "Query" %>',CannotExportXML:"You cannot save the XML as a file directly. Please use your browser's cut\nand paste functionality.",PrimaryAction:"Save",ChooseLang:"Choose Language",ShowBoilerPlate:"Show comments",HighlightSyntax:"Highlight Syntax",GenerateCodeIn:function(a){var c;return c=a.lang,"Generate "+b.getText("codegen.Lang",{lang:c})+"\n"+("xml"!==c?"code":"")},Lang:function(a){var b;switch(b=a.lang){case"py":return"Python";case"pl":return"Perl";case"java":return"Java";case"rb":return"Ruby";case"js":return"JavaScript";case"xml":return"XML";default:throw new Error("Unknown language "+b)}}})}).call(this)},{"../messages":16}],19:[function(a,b,c){(function(){var b;b=a("../messages"),b.setWithPrefix("columns",{DialogueTitle:"Manage Columns",ApplyChanges:"Apply Changes",FindColumnToAdd:"Add a Column",AddColumn:"<% if (num < 1) { %>\n  No columns chosen\n<% } else { %>\n  Add <%= num %> new <%= pluralise('column', num) %>\n<% } %>",AddColumnToSortOrder:"Sort by this column",NoChangesToApply:"There are no changes to apply.",OrderVerb:"Add / Remove / Re-Arrange",OrderTitle:"Columns",SortVerb:"Configure",SortTitle:"Sort-Order",OnlyColsInView:"Only show columns in the table:",SortingHelpTitle:"What Columns Can I Sort by?",ViewTabTitle:"Selected Columns",SortOrderTabTitle:"Sort Order",CurrentView:"Current Columns",CurrentViewHelp:"Re-arrange or remove columns by dragging, or by using the buttons",CurrentSortOrder:"<% if (oes.length) { %>\n  <%= oes.length %> Order <%= pluralise('Elements', oes.length) %>\n<% } else { %>\n  Not sorted.\n<% } %>",NoSortOrder:"No sort order. Drop columns here to sort the table.",RemoveOrderElement:"Remove this column from the sort-order",CurrentSortOrderHelp:"Re-arrange, add or remove columns. The full set of available\ncolumns is listed below.",ColumnsSelected:'<%= columns.length %> <%= pluralise("Column", columns.length) %>\nSelected<% if (removed) { %>, <%= removed %> Removed<% } %>',ChooseAPathFrom:"Choose a path from <%= root %>",RemoveColumn:"Remove this column",MoveUp:"Move this column up",MoveDown:"Move this column down",ColumnWillBeRemoved:"This column will be removed",RestoreColumn:"Add this column back to the table",ChangeDirection:"Change sort direction",CurrentDirection:"Sorted in\n<%= (dir === 'DESC') ? 'reverse' : void 0 %>\n<%= numeric ? 'numerical' : 'alphabetical' %>\norder.",ManageColumns:"Manage Columns",ManageColumnsShort:"Columns"})}).call(this)},{"../messages":16}],20:[function(a,b,c){(function(){b.exports={All:"All",Reset:"Reset",Export:"Download",Clear:"Clear",Cancel:"Cancel",Complete:"Complete",Error:"Error",Warning:"Warning",Filter:"Filter",Loading:"Loading",Undo:"Undo",and:"and",or:"or",comma:",",Number:"<%= formatNumber(n) %>","modal.DefaultTitle":"Excuse me...","modal.Dismiss":"Close","modal.OK":"OK","modal.ApplyChanges":"Apply Changes","core.NoOptions":"There are no options to select from.",ErrorTitle:function(a){switch(a.level){case"Error":return"Error";case"Warning":return"Warning";case"Info":return"nb";case"Positive":return"Success";default:return"Error"}}}}).call(this)},{}],21:[function(a,b,c){(function(){var b;b=a("../messages"),b.setWithPrefix("constraints",{Heading:'<%= n %> Active <%= pluralise("Filter", n) %>',AddNewFilter:"Add New Filter",AddFilter:"Add filter",AddNew:"Add Filter",DefineNew:"Define a new filter",EditOrRemove:"edit or remove the currently active filters",None:"No active filters",NoOfValues:'<%= (n === 1) ? "one" : formatNumber(n) %> <%= pluralise("value", n) %>',NoOfIds:'<%= (n === 1) ? "one" : formatNumber(n) %> <%= pluralise("ID", n) %>',ISA:"is a",LookupIn:"in",AddConFor:"Add filter to\n<% if (isAttribute && !hideType) { %><%= typeName %><% } %>\n<%= _.last(parts) %>",ManageFilters:"Manage Filters",ManageFiltersShort:"Filters"})}).call(this)},{"../messages":16}],22:[function(a,b,c){(function(){var b;b=a("../messages"),b.setWithPrefix("error",{Oops:"Oops! - Sorry we cannot get that table for you.",EmailHelp:"Send a bug report",ShowQuery:"Show query",ShowError:"Show error",ConnectionError:"Could not connect to server"}),b.setWithPrefix("error.mail",{Subject:"[IMTABLES] - Error running query."}),b.setWithPrefix("error.client",{Heading:"Application error.",Body:"This is due to an unexpected error in the tables\napplication - this is our fault, and we are sorry for the\ninconvenience. Please send us the pre-filled bug report so\nwe can fix this as soon as possible."}),b.setWithPrefix("error.server",{Heading:"Server error - our bad!",Body:"This is most likely related to the query that was just run. If you have\ntwo minutes, please send us an email with details of this query to help us\ndiagnose and fix this bug - we have already pre-filled the bug report,\nyou just need to hit send (and maybe give us some extra details).\nAlternatively, you might be able to fix this query by changing its column, \nfilters or joins; use the tools above to do so."})}).call(this)},{"../messages":16}],23:[function(a,b,c){(function(){var b;b=a("../messages"),b.setWithPrefix("joins",{Heading:"Manage Relationships",Manage:function(){return b.getText("joins.Heading")},ManageShort:"Relationships",Inner:"Required",Outer:"Optional",ExplanationTitle:"What does this do?",Explanation:"You can specify the entity relationships within the query here. This\nhas a couple of effects - one is to exclude a class of matched results, the\nother is to change the way the results are presented in the table.\nIf set to required, then an entity which matches the filters\nbut lacks the given relationship will not be returned in the results,\nwhereas if set to optional it will. This also has an effect on the\nway that results are laid out: required collection relationships\nare returned inline, whereas optional collection relationships are\nreturned as nested sub-tables within the main result set."})}).call(this)},{"../messages":16}],24:[function(a,b,c){(function(){var b;b=a("../messages"),b.setWithPrefix("lists",{DefaultName:"<%= typeName %> List (<%= new Date() %>)",Create:"Create List",Append:"Add to List",SaveAsList:"Save as List",CreateListTitle:"Create a new List\n<% if (state.count) { %>\n  of <%= formatNumber(state.count) %>\n  <%= pluralise(state.typeName, (state.count || 0)) %>\n<% } %>",AppendToListTitle:"Add\n<% if (state.count) { %>\n  <%= formatNumber(state.count) %>\n  <%= pluralise(state.typeName, (state.count || 0)) %>\n<% } %>\nto\n<%= target || 'a List' %>",NoTags:"No tags",AddTag:"Add a new tag",AddTagBtn:"add",RemoveTag:"Remove this tag",ShowExtraOptions:"<% if (minimised) { %>Show <% } %>Optional attributes",TargetDoesNotExist:"Your target list does not exist.",NoTargetSelected:"Please select a target list.",PossibleAppendTarget:"<%= name %> (<%= formatNumber(size) %> <%= pluralise((typeName || 'item'), size) %>)",NoObjectsSelected:"No objects selected. Choose objects from the table beneath. You can\ndrag this dialog around if it is in the way.",StartPicking:"Pick items from the table",NoCommonType:"There is no common type for these objects."}),b.setWithPrefix("lists.error",{MustBeLoggedIn:"You are not logged in. Anonymous users cannot create lists."}),b.setWithPrefix("lists.params",{Name:"List Name",NamePlaceholder:"List name is required",Desc:"List Description",DescPlaceholder:"Enter a description",Target:"Choose list to append items to"}),b.setWithPrefix("lists.params.help",{Name:"You must provide a unique list name",Target:"You must select a target list"}),b.setWithPrefix("lists.picker",{Expand:"show more options",Collapse:"show fewer options"}),b.setWithPrefix("lists.append",{NoSuitableLists:"No suitable lists were found\n<% if (model.type) { %>\n  for <%- model.type %>.\n<% } else { %>\n  because no items are selected, or they have no common type.\n<% } %>"})}).call(this)},{"../messages":16}],25:[function(a,b,c){(function(){var b;b=a("../messages"),b.setWithPrefix("logic",{Heading:"Manage Constraint Logic",Manage:function(){return b.getText("logic.Heading")},ManageShort:"Constraint Logic",LogicLabel:function(){return b.getText("logic.ManageShort")},ApplyLogic:"Change logic"})}).call(this)},{"../messages":16}],26:[function(a,b,c){(function(){var b;b=a("../messages"),b.setWithPrefix("subtables",{OpenHint:"Click to view/hide rows",RemoveColumn:"Remove this column"})}).call(this)},{"../messages":16}],27:[function(a,b,c){(function(){var b;b=a("../messages"),b.setWithPrefix("summary",{Got:"<% if (available > got) { %>Showing <%= formatNumber(got) %> of<% } %>",Max:"Maximum",Min:"Minimum",Bucket:"<%= range.min %> to <%= range.max %>: <%= count %> values",Count:"Count",Item:"Item",Average:"Average",StdDev:"Standard Deviation",OnlyOne:"There is only one <%- names.typeName %> <%- names.endName %>:\n<strong><%- item.item %></strong>, which occurs\n<strong>\n  <% if (item.count === 1) { %>\n    once\n  <% } else if (item.count === 2) { %>\n    twice\n  <% } else { %>\n    <%- formatNumber(item.count) %> times\n  <% } %>\n</strong>",NumericDistribution:"Showing distribution of <%= formatNumber(n) %>",FilterValuesPlaceholder:"Filter values",DownloadData:"Download data",DownloadFormat:"As",MoreItems:"Load more items",Include:"Restrict table to matching rows",Exclude:"Exclude matching rows from table",Reset:"Reset selection",Toggle:"Toggle selection",SelectFilter:"Select filter type",FacetBar:"rgba(206, 210, 222, <%= opacity %>)",NoResults:"No results for <%= path %>",SelectedCount:"<%= isApprox ? \"ca. \" : void 0 %><%= formatNumber(selectedCount) %>\n<%= pluralise('Item', selectedCount) %> Selected",Total:"<% if (filtered) { %>(filtered from <%= formatNumber(total) %>)<% } %>"})}).call(this)},{"../messages":16}],28:[function(a,b,c){(function(){var b;b=a("../messages"),b.setWithPrefix("table",{Building:"Loading Table ...",OverlayText:"Requesting data...",Empty:"No Results",EmptyWhy:"This query returns no results. You may wish to change its filters"}),b.setWithPrefix("table.lg",{ShowingAll:"Showing all <%= formatNumber(count) %> rows",ShowingRange:'Showing <%= formatNumber(first) %> to <%= formatNumber(last) %>\nof <%= formatNumber(count) %> <%= pluralise("row", count) %>'}),b.setWithPrefix("table.md",{ShowingAll:"All <%= formatNumber(count) %> rows",ShowingRange:"Showing rows <%= formatNumber(first) %> to <%= formatNumber(last) %>\nof <%= formatNumber(count) %>"}),b.setWithPrefix("table.sm",{ShowingAll:"All rows",ShowingRange:"Rows <%= formatNumber(first) %> to <%= formatNumber(last) %>\nof <%= formatNumber(count) %>"}),b.setWithPrefix("table.xs",{ShowingAll:"All rows",ShowingRange:"<%= formatNumber(first) %> to <%= formatNumber(last) %>\nof <%= formatNumber(count) %>"}),b.setWithPrefix("table.header",{FailedToInitSortMenu:"Could not initialise the sorting menu.",FailedToInitFilter:"Could not initialise the filter menu.",FailedToInitSummary:"Could not intitialise the column summary.",ViewSummary:"View column summary",ToggleColumn:"Toggle column visibility",RemoveColumn:"Remove this column",SortColumn:"<% if (dir === 'ASC') { %>\n  Sorted in ascending order.\n<% } else if (dir === 'DESC') { %>\n  Sorted in descending order.\n<% } else { %>\n  Sort this column.\n<% } %>",ToggleTables:"Expand/collapse all sub-tables",Composed:"This column replaces <%= replaces.length %> others. Click here\nto show the individual columns separately.",FilterTitle:"<% if (count > 0) { %>\n  <%= count %> active filters.\n<% } else { %>\n  Filter by values in this column.\n<% } %>"})}).call(this)},{"../messages":16}],29:[function(a,b,c){(function(){var b;b=a("../messages"),b.setWithPrefix("undo",{StepTitle:"<% if (label === 'Initial') { %>\n  Initial State\n<% } else if (verb === 'Added') { %>\n  <% if (label === 'sort order element') { %>\n    Added <%= formatNumber(number) %> <%= pluralise('column', number) %> to the sort order\n  <% } else if (label === 'column') { %>\n    Selected <%= formatNumber(number) %> <%= pluralise('column', number) %>\n  <% } else { %>\n    Added <%= formatNumber(number) %> <%= pluralise(label, number) %>\n  <% } %>\n<% } else if (verb === 'Removed') { %>\n  <% if (label === 'sort order element') { %>\n    Removed <%= formatNumber(number) %> <%= pluralise('column', number) %> from the sort order\n  <% } else if (label === 'column') { %>\n    Unselected <%= formatNumber(number) %> <%= pluralise('column', number) %>\n  <% } else { %>\n    Removed <%= formatNumber(number) %> <%= pluralise(label, number) %>\n  <% } %>\n<% } else if (verb === 'Changed') { %>\n  <% if (label === 'sort order element') { %>\n    Changed sort order\n  <% } else { %>\n    Changed <%= pluralise(label, 2) %>\n  <% } %>\n<% } else if (verb === 'Rearranged') { %>\n  Rearranged <%= pluralise(label, 2) %>\n<% } else { %>\n  !!!Cannot handle <%= verb %> <%= label %>!!!\n<% } %>",StepCount:'<%= formatNumber(count) %> <%= pluralise("row", count) %>',RevertToState:"Revert to this state",IsCurrentState:"This is the current state",ViewCount:'<%= n %> <%= pluralise("column", n) %> selected',ConstraintCount:"<% if (n) { %>\n  <%= n %> <%= pluralise('filter', n) %>\n<% } else { %>\n  No filters\n<% } %>",OrderElemCount:"<% if (n) { %>\n  Sorted on <%= n %> <%= pluralise('column', n) %>\n<% } else { %>\n  Not sorted\n<% } %>",ShowAllStates:"Show <%= n %> hidden <%= pluralise('state', n) %>",ToggleTrivial:'<%= hideTrivial ? "Hiding" : "Hide" %> minor steps',ToggleTrivialTitle:'<%= hideTrivial ? "Hiding" : "Hide" %> steps that did not change the row count',Revision:"no. <%= v %>",RevisionTitle:"revision <%= v %>",MoreSteps:'<%= more %> more <%= pluralise("step", more) %>'})}).call(this)},{"../messages":16}],30:[function(a,b,c){(function(){var b,d;b=a("jquery"),d=function(a){var c,d,e;return c=b("body"),d=c.width(),e=a.width(),a.css({left:(d-e)/2,top:50})},c._showModal=function(){var a;return a=this.$el,a.modal({show:!1}).addClass("im-floating").draggable({handle:".modal-header"}).show(function(){return d(a),a.animate({opacity:1},{complete:function(){return a.addClass("in")}})}),this.listenToOnce(this,"remove",function(a){return function(){return a.$el.draggable("destroy")}}(this))},c._hideModal=function(){return this.$el.removeClass("in"),this.onHidden()}}).call(this)},{jquery:256}],31:[function(a,b,c){(function(){var b;b=a("underscore"),c.setChildIndices=function(a,c,d){var e,f,g,h,i,j,k,l,m;for(null==c&&(c="top"),null==d&&(d="collection"),g=this.children,e=this[d],j=b.compact(e.map(function(b){return g[a(b)]})),h=b.sortBy(j,function(a){return a.el.getBoundingClientRect()[c]}),m=[],f=k=0,l=h.length;k<l;f=++k)i=h[f],m.push(i.model.set({index:f}));return m}}).call(this)},{underscore:262}],32:[function(a,b,c){(function(){var b;b=a("underscore"),c.initTypeaheads=function(){return null!=this._typeaheads?this._typeaheads:this._typeaheads=[]},c.removeTypeAheads=function(){var a,b;if(null!=this._typeaheads){for(b=[];a=this._typeaheads.shift();)a.off("typeahead:select"),a.off("typeahead:selected"),a.off("typeahead:autocompleted"),a.off("typeahead:close"),b.push(a.typeahead("destroy"));return b}},c.lastTypeahead=function(){var a;return b.last(null!=(a=this._typeaheads)?a:[])},c.activateTypeahead=function(a,b,c,d,e,f){return a.attr({placeholder:d}).typeahead(b,c),a.on("typeahead:selected",e),a.on("typeahead:select",e),a.on("typeahead:autocompleted",e),null!=f&&a.on("typeahead:close",f),this.initTypeaheads().push(a),a.focus(),this}}).call(this)},{underscore:262}],33:[function(a,b,c){(function(){var b,d;d=a("underscore"),b={},c.runQuery=function(a){var c,d,e,f,g;return null==a&&(a={}),f=this.getExportParameters(a),e="results:"+this.query.service.root+":"+JSON.stringify(f),c="query/results",d=this.model.get("format"),(null!=(g=d.needs)?g.length:void 0)&&(c+="/"+d.id),null!=b[e]?b[e]:b[e]=this.query.service.post(c,f)},c.getEstimatedSize=function(){var a,c;return c=this.getExportQuery(),a="count:"+c.service.root+":"+c.toXML(),null!=b[a]?b[a]:b[a]=c.count()},c.getExportQuery=function(){var a,b;return b=this.query.clone(),a=this.model.get("columns"),(null!=a?a.length:void 0)&&b.select(a),b},c.getExportURI=function(a){return this.getExportQuery().getExportURI(this.model.get("format").id,this.getExportParameters(a))},c.getFileName=function(){return this.getBaseName()+"."+this.getFileExtension()},c.getBaseName=function(){return this.model.get("filename")},c.getFileExtension=function(){return this.model.get("format").ext},c.getExportParameters=function(a){var b;return null==a&&(a={}),b=this.model.pick("start","size","format","filename"),b.format=b.format.id,b.query=this.getExportQuery().toXML(),this.model.get("compress")&&(b.compress=this.model.get("compression")),this.model.get("headers")&&(b.columnheaders=this.model.get("headerType")),"json"===b.format&&"rows"!==this.model.get("jsonFormat")&&(b.format+=this.model.get("jsonFormat")),"fasta"===b.format&&this.model.get("fastaExtension")&&(b.extension=this.model.get("fastaExtension")),"fasta"!==b.format&&"gff3"!==b.format||(b.view=this.model.get("columns")),d.extend(b,a)}}).call(this)},{underscore:262}],34:[function(a,b,c){(function(){c.setPathNames=function(){var a,b,c,d,e,f,g,h,i,j;return b=null!=(i=this.query)?i:this.model.query,h=null!=(j=this.view)?j:this.model.view,d=b.service,g=h.getParent().getType(),a=h.end,c=this.state,e=function(a){return function(b){return c.set(a,b)}},f=e("error"),h.getDisplayName().then(e("pathName"),f),g.getDisplayName().then(e("typeName"),f),d.get("model/"+g.name+"/"+a.name).then(function(a){return a.name}).then(e("endName"),f)}}).call(this)},{}],35:[function(a,b,c){(function(){var c,d={}.hasOwnProperty,e=function(a,b){function c(){this.constructor=a}for(var e in b)d.call(b,e)&&(a[e]=b[e]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};a("underscore"),c=a("../core-model"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return e(b,a),b.prototype.defaults=function(){return{target:null,type:null}},b}(c)}).call(this)},{"../core-model":2,underscore:262}],36:[function(a,b,c){(function(){var c,d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("../core/collection"),d=a("./path"),e=function(a,b,c){var d,e,f,g;return g=function(){var d,e,g,h;for(g=[b,c],h=[],d=0,e=g.length;d<e;d++)f=g[d],h.push(a(f));return h}(),d=g[0],e=g[1],d<e?-1:d>e?1:0},g=function(a){return a.get("parts").length},f=function(a){return a.get("displayName")},b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.model=d,b.prototype.add=function(a){var c;if((c=b.__super__.add.apply(this,arguments))&&null==c.collection)return c.collection=this},b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.on("change:parts change:displayName",function(a){return function(){return a.sort()}}(this))},b.prototype.comparator=function(a,b){return e(g,a,b)||e(f,a,b)},b}(c)}).call(this)},{"../core/collection":5,"./path":56}],37:[function(a,b,c){(function(){var c,d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};g=a("underscore"),f=a("es6-promise").Promise,e=a("../options"),c=a("../core-model"),d="DynamicObjects.NameDelimiter",b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.defaults=function(){return{columnName:null,typeName:null,typeNames:[],entity:null,column:null,node:null,field:null,value:null}},b.prototype.initialize=function(){var a,c,g,h,i,j;return b.__super__.initialize.apply(this,arguments),i=null!=(j=this.get("entity").get("classes"))?j:[this.get("node")],c=(a=this.get("column")).model,a.getDisplayName().then(function(a){return function(b){return a.set({columnName:b})}}(this)),g=function(){var a,b,d;for(d=[],a=0,b=i.length;a<b;a++)h=i[a],d.push(c.makePath(h).getDisplayName());return d}(),f.all(g).then(function(a){return function(b){return a.set({typeNames:b,typeName:b.join(e.get(d))})}}(this))},b.prototype.getPath=function(){return this.get("column")},b.prototype.toJSON=function(){return g.extend(b.__super__.toJSON.apply(this,arguments),{column:this.get("column").toString(),node:this.get("node").toString(),entity:this.get("entity").toJSON()})},b}(c)}).call(this)},{"../core-model":2,"../options":63,"es6-promise":238,underscore:262}],38:[function(a,b,c){(function(){var c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=a("../options"),c=a("../core-model"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.defaults=function(){return{lang:d.get("CodeGen.Default"),showBoilerPlate:!1,highlightSyntax:!0}},b}(c)}).call(this)},{"../core-model":2,"../options":63}],39:[function(a,b,c){(function(){var c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("../core/collection"),d=a("./header"),e=a("../utils/build-headers"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.model=d,b.prototype.comparator="index",b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.listenTo(this,"change:index",this.sort)},b.prototype.setHeaders=function(a,b){var c;return c=e(a,b),c.then(function(b){return function(c){var e;return b.set(function(){
var b,f,g;for(g=[],b=0,f=c.length;b<f;b++)e=c[b],g.push(new d(e,a));return g}())}}(this))},b}(c)}).call(this)},{"../core/collection":5,"../utils/build-headers":71,"./header":44}],40:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},m={}.hasOwnProperty,n=function(a,b){function c(){this.constructor=a}for(var d in b)m.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};j=a("underscore"),k=a("imjs").Query,c=k.LIST_OPS,d=k.LOOP_OPS,h=k.TERNARY_OPS,g=k.RANGE_OPS,e=k.NULL_OPS,f=a("./path"),i=function(a){var b,f,i,j,k;if(a.path.isAttribute())return a.values?"MULTI_VALUE":"ATTR_VALUE";if(a.type)return"TYPE";if(a.ids)return"IDS";if(a.values&&(b=a.op,l.call(g,b)>=0))return"RANGE";if(f=a.op,l.call(h,f)>=0)return"LOOKUP";if(i=a.op,l.call(c,i)>=0)return"LIST";if(j=a.op,l.call(d,j)>=0)return"LOOP";if(k=a.op,l.call(e,k)>=0)return a.op;throw new Error("Cannot determine constraint type: "+a.path+" "+a.op)},b.exports=function(a){function b(a){var c;b.__super__.constructor.call(this,a.path),c=a.type,this.unset("id"),this.unset("type"),this.set(j.omit(a,"path","type")),null!=c&&(this.set({type:c.toString()}),c.getDisplayName().then(function(a){return function(b){return a.set({typeName:b})}}(this))),this.set({CONSTRAINT_TYPE:i(a)})}return n(b,a),b.prototype.defaults=function(){return j.extend(b.__super__.defaults.apply(this,arguments),{value:null,values:[],ids:[],extraValue:null,code:null,CONSTRAINT_TYPE:"ATTR_VALUE"})},b}(f)}).call(this)},{"./path":56,imjs:247,underscore:262}],41:[function(a,b,c){(function(){var c,d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};g=a("underscore"),d=a("../core-model"),c=a("../core/collection"),e=/,\s*/,f=function(a){return a.replace(/(^\s+|\s+$)/g,"")},b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.defaults=function(){return{name:null,description:null}},b.prototype.initialize=function(){var a;return this.tags=new c,this.has("tags")&&this.tags.reset(function(){var b,c,d,e;for(d=this.get("tags"),e=[],b=0,c=d.length;b<c;b++)a=d[b],e.push({id:a});return e}.call(this)),this.listenTo(this.tags,"remove",function(a){return function(b){return a.trigger("remove:tag",b),a.trigger("change")}}(this)),this.listenTo(this.tags,"add",function(a){return function(b){return a.trigger("add:tag",b),a.trigger("change")}}(this))},b.prototype.toJSON=function(){return g.extend(b.__super__.toJSON.apply(this,arguments),{tags:this.tags.map(function(a){return a.get("id")})})},b.prototype.addTag=function(){var a,b,c,d,g,h;if(null==(b=this.get("nextTag")))throw new Error("No tag to add");for(this.unset("nextTag"),g=f(b).split(e),h=[],c=0,d=g.length;c<d;c++)a=g[c],h.push(this.tags.add({id:a}));return h},b.prototype.destroy=function(){var a;return null!=(a=this.tags)&&a.close(),b.__super__.destroy.apply(this,arguments)},b}(d)}).call(this)},{"../core-model":2,"../core/collection":5,underscore:262}],42:[function(a,b,c){(function(){var b,d,e;e=a("underscore"),b=function(){function a(a){var b,c,d,f,g,h;this.id=a.id,this.group=a.group,f=a.icon,h=a.needs,this.maxColumns=a.maxColumns,d="tab"===this.id?"tsv":this.id,b=d.toUpperCase(),null==f&&(f=d),null==h&&(h=[]),c="export.format.description."+b,g="export.format.name."+b,e.extend(this,{icon:f,desc:c,name:g,needs:h,ext:d,EXT:b})}return a.prototype.toString=function(){return this.ext},a.prototype.toJSON=function(){return{id:this.id,group:this.group,icon:this.icon,needs:this.needs,ext:this.ext}},a.prototype.isSuitable=function(a){return 0===this.needs.length||e.any(this.needs,function(b){return a[b]})},a}(),d=[new b({id:"tab",group:"flat"}),new b({id:"csv",group:"flat"}),new b({id:"xml",group:"machine"}),new b({id:"json",group:"machine"}),new b({id:"fasta",group:"bio",icon:"dna",needs:["Protein","SequenceFeature"],maxColumns:1}),new b({id:"gff3",group:"bio",icon:"dna",needs:["SequenceFeature"]}),new b({id:"bed",group:"bio",icon:"dna",needs:["SequenceFeature"]}),new b({id:"fake",group:"fake",icon:"fake",needs:["Department"]}),new b({id:"fake_2",group:"fake",icon:"fake",needs:["Company"]})],c.getFormat=function(a){return e.findWhere(d,{id:a})},c.getFormats=function(a){var b,c,e,f;for(f=[],c=0,e=d.length;c<e;c++)b=d[c],b.isSuitable(a)&&f.push(b);return f},c.registerFormat=function(a){var c,e,f;return e=a.id,c=a.icons,f=a.needs,d.push(new b(e,c,f))}}).call(this)},{underscore:262}],43:[function(a,b,c){(function(){var c,d={}.hasOwnProperty,e=function(a,b){function c(){this.constructor=a}for(var e in b)d.call(b,e)&&(a[e]=b[e]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("../core-model"),b.exports=function(a){function b(a,c){b.__super__.constructor.call(this),this.set({id:null,classes:[a.class],"service:base":"","service:url":"","report:uri":null}),this.set(c,a.value)}return e(b,a),b}(c)}).call(this)},{"../core-model":2}],44:[function(a,b,c){(function(){var c,d,e,f,g,h,i={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};h=a("underscore"),d=a("./path"),c=a("../options"),g=function(a){return null!=a?a.toUpperCase():void 0},e=h.compose(h.first,h.compact,h.map),f=function(a){return null!=a&&null!=a.isReference&&null!=a.isAttribute},b.exports=function(a){function b(a,c){var d;if(this.query=c,!(null!=(d=this.query)?d.on:void 0))throw new Error("no query");if(null==a)throw new Error("no options");b.__super__.constructor.call(this,a.path),this.set(h.omit(a,"path")),this.set({id:this.query.toXML()+"-"+this.get("path")}),this.listenTo(this.query,"change:joins",this.setOuterJoined),this.listenTo(this.query,"change:sortorder",this.setSortDirection),this.listenTo(this.query,"change:constraints",this.setConstraintNum),this._update_attrs()}return j(b,a),b.prototype.defaults=function(){return h.extend(b.__super__.defaults.apply(this,arguments),{replaces:[],isFormatted:!1,isComposed:!1,sortable:!0,sortDirection:null,numOfCons:0,minimised:!1,outerJoined:!1,expanded:c.get("Subtables.Initially.Expanded")})},b.prototype._update_attrs=function(){return this.setOuterJoined(),this.setSortDirection(),this.setConstraintNum()},b.prototype.toJSON=function(){return h.extend(b.__super__.toJSON.apply(this,arguments),{replaces:this.get("replaces").map(String)})},b.prototype.getView=function(){var a,b,c,d;return d=this.pick("replaces","isFormatted","path"),c=d.replaces,a=d.isFormatted,b=d.path,String(a&&1===c.length?c[0]:b)},b.prototype.validate=function(a,b){var c;if("replaces"in a){if(c=a.replaces,!h.isArray(c))return new Error("replaces must be an array");if(c.length&&!h.all(c,f))return new Error("all elements in replaces must be PathInfo objects")}},b.prototype.setOuterJoined=function(){var a,b,c,d,e;return e=this.getView(),c=this.get("replaces"),b=this.query.isOuterJoined(e),a=this.get("isFormatted")&&c.length>1,d=!b,this.set({outerJoined:b,isComposed:a,sortable:d})},b.prototype.setSortDirection=function(){var a,b,c,d;return c=this.get("replaces"),d=this.getView(),b=function(a){return function(b){return a.query.getSortDirection(b)}}(this),a=g(e(c.concat([d]),b)),this.set({sortDirection:a})},b.prototype.setConstraintNum=function(){var a,b,c;return c=this.getView(),b=h.size(function(){var b,d,e,f;for(e=this.query.constraints,f=[],b=0,d=e.length;b<d;b++)a=e[b],a.path.match(c)&&f.push(a);return f}.call(this)),this.set({numOfCons:b})},b}(d)}).call(this)},{"../options":63,"./path":56,underscore:262}],45:[function(a,b,c){(function(){var c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=a("underscore"),c=a("../core/collection"),d=a("./step"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.model=d,b.prototype.currentQuery=null,b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.listenTo(this,"remove",this.unwatch),this.listenTo(this,"add",this.watch)},b.prototype.currentStep=0,b.prototype.comparator="revision",b.prototype.getCurrentQuery=function(){return this.currentQuery},b.prototype.setCurrentQuery=function(a){return this.currentQuery=a.get("query").clone()},b.prototype.unwatch=function(a){var b,c;if(null!=(b=null!=(c=null!=a?a.get("query"):void 0)?c:this.getCurrentQuery()))return this.stopListening(b)},b.prototype.watch=function(a){var b;if(this.setCurrentQuery(a),null!=(b=this.getCurrentQuery()))return this.listenTo(b,"change:constraints",this.onChangeConstraints),this.listenTo(b,"change:views",this.onChangeViews),this.listenTo(b,"change:joins",this.onChangeJoins),this.listenTo(b,"change:sortorder",this.onChangeSortOrder),this.listenTo(b,"change:logic",this.onChangeLogic),this.listenTo(b,"undo",this.popState)},b.prototype.onChangeConstraints=function(){return this.onChange("constraints","filter",function(a){return e.map(a,JSON.stringify)})},b.prototype.onChangeViews=function(){return this.onChange("views","column")},b.prototype.onChangeJoins=function(){return this.onChange("joins","join",function(a){return e.map(a,function(a,b){return b+":"+a})})},b.prototype.onChangeSortOrder=function(){return this.onChange("sortOrder","sort order element",function(a){return e.map(a,JSON.stringify)})},b.prototype.onChangeLogic=function(){return this.onChange("constraintLogic","constraint logic element",function(a){var b;return null!=(b=null!=a?a.match(/([A-Z]+)/):void 0)?b:[]})},b.prototype.triggerChangedCurrent=function(){return this.trigger("changed:current",this.last())},b.prototype.onChange=function(a,b,c){var d,f,g,h,i,j,k,l;return null==c&&(c=function(a){return a}),h=this.currentQuery,g=this.last().get("query"),k=c(g[a]),l=c(h[a]),j=k.length,f=l.length,d=Math.abs(j-f),i=function(){switch(!1){case!(j<f):return"Added";case!(j>f):return"Removed";case f!==e.union(k,l).length:return"Rearranged";default:return"Changed"}}(),this.addStep(i,d,b,h)},b.prototype.setInitialState=function(a){return this.size()&&this.reset(),this.addStep(null,null,"Initial",a)},b.prototype.addStep=function(a,b,c,d){var e,f;return f=this.currentQuery,e=d.clone(),this.unwatch(),this.add({query:e,revision:this.currentStep++,title:{verb:a,number:b,label:c}}),null!=f&&f.trigger("replaced:by",e),this.triggerChangedCurrent()},b.prototype.popState=function(){return this.revertToIndex(-2)},b.prototype.revertToIndex=function(a){var b;return a<0&&(a=this.length+a),b=this.at(a),this.revertTo(b)},b.prototype.revertTo=function(a){var b,c;if(!this.contains(a))throw new Error("State not in history");for(c=this.getCurrentQuery(),b=a.get("revision");this.last().get("revision")>b;)this.pop();return this.watch(a),null!=c&&c.trigger("replaced:by",a.get("query")),this.triggerChangedCurrent()},b}(c)}).call(this)},{"../core/collection":5,"./step":59,underscore:262}],46:[function(a,b,c){(function(){var c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=a("underscore"),c=a("../core-model"),b.exports=function(a){function b(a,c,d){b.__super__.constructor.call(this,{classes:null!=c?c.map(String):void 0,id:d}),this.set({"service:base":a}),this.freeze("service:base","id","classes")}return f(b,a),b.prototype.toJSON=function(){var a,c;return c=this.get("service:url"),a=/^http/.test(c)?c:this.get("service:base")+c,d.extend(b.__super__.toJSON.apply(this,arguments),{"report:uri":a})},b.prototype.merge=function(a,b){return this.set(b,a.value),this.set({"service:url":a.url})},b}(c)}).call(this)},{"../core-model":2,underscore:262}],47:[function(a,b,c){(function(){var c,d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};g=a("underscore"),c=a("../core/collection"),f=a("./path"),d=function(a){function b(a){var c,d;c=a.path,d=a.style,b.__super__.constructor.call(this,c),null!=d&&this.set({style:d})}return i(b,a),b.prototype.defaults=function(){return g.extend(b.__super__.defaults.apply(this,arguments),{style:"INNER"})},b}(f),b.exports=e=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.model=d,b.prototype.comparator="displayName",b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.listenTo(this,"change:displayName",this.sort)},b.prototype.getJoins=function(){return g.object(this.where({style:"OUTER"}).map(function(a){return[a.get("path"),a.get("style")]}))},b}(c),e.fromQuery=function(a){var b,c,f,g,h,i,j,k,l;b=new e,k=a.joins;for(f in k)h=k[f],g=a.makePath(f),b.add(new d({style:h,path:g}));for(l=a.getQueryNodes(),i=0,j=l.length;i<j;i++)for(c=l[i];!c.isRoot();)b.add(new d({path:c})),c=c.getParent();return b}}).call(this)},{"../core/collection":5,"./path":56,underscore:262}],48:[function(a,b,c){(function(){var c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=a("underscore"),c=a("../core-model"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.defaults=function(){return{columnName:null,columnTypeName:null,columnName:null,typeName:null,column:null,node:null,fieldName:null,contentName:null,view:[],rows:[]}},b.prototype.initialize=function(){return this.onChangeColumn(),this.listenTo(this,"change:column",this.onChangeColumn)},b.prototype.onChangeColumn=function(){var a,b,c;return a=this.get("column"),b=this.get("node"),c=this.get("view"),1===c.length&&(a=a.model.makePath(c[0],a.subclasses),b=a.isAttribute()?a.getParent():a),b.getType().getDisplayName().then(function(a){return function(b){return a.set({columnTypeName:b})}}(this)),a.getDisplayName().then(function(b){return function(c){return b.set({columnName:c}),a.isAttribute()&&b.set({fieldName:d.last(c.split(" > "))}),b.set({contentName:d.compact([b.get("columnTypeName"),b.get("fieldName")]).join(" ")})}}(this))},b.prototype.getPath=function(){return this.get("column")},b.prototype.toJSON=function(){return d.extend(b.__super__.toJSON.apply(this,arguments),{column:this.get("column").toString(),node:this.get("node").toString(),rows:this.get("rows").map(function(a){return a.map(function(a){return a.toJSON()})})})},b}(c)}).call(this)},{"../core-model":2,underscore:262}],49:[function(a,b,c){(function(){var c,d={}.hasOwnProperty,e=function(a,b){function c(){this.constructor=a}for(var e in b)d.call(b,e)&&(a[e]=b[e]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("../core-model"),b.exports=function(a){function b(a,c){b.__super__.constructor.call(this),this.set({id:null,isNULL:!0,classes:[a],"service:base":"","service:url":"","report:uri":null}),c&&this.set(c,null)}return e(b,a),b}(c)}).call(this)},{"../core-model":2}],50:[function(a,b,c){(function(){var c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=a("underscore"),c=a("backbone"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype._defaults={},b.prototype.setLimits=function(a){return d.extend(this._defaults,a)},b.prototype.get=function(a){var c;return c=b.__super__.get.call(this,a),null!=c?c:a in this._defaults?this._defaults[a]:null},b.prototype.toJSON=function(){return d.extend({},this._defaults,this.attributes)},b.prototype.nullify=function(){var a,b,c,d,e;for(this.unset("min"),this.unset("max"),this.nulled=!0,d=["change:min","change:max","change"],e=[],b=0,c=d.length;b<c;b++)a=d[b],e.push(this.trigger(a,this));return e},b.prototype.reset=function(){return this.clear(),this.trigger("reset",this)},b.prototype.set=function(a,c){var e;return this.nulled=!1,d.isString(a)&&a in this._defaults?(e="min"===a?"max":"min",b.__super__.set.call(this,a,Math[e](this._defaults[a],c))):b.__super__.set.apply(this,arguments)},b.prototype.isAll=function(){return!this.isNotAll()},b.prototype.isNotAll=function(){var a,b,c;return!this.nulled&&(c=this.toJSON(),b=c.min,a=c.max,null!=b&&b!==this._defaults.min||null!=a&&a!==this._defaults.max)},b}(c.Model)}).call(this)},{backbone:235,underscore:262}],51:[function(a,b,c){(function(){var c;a("underscore"),c=a("./intermine-object"),b.exports=function(){function a(a,b){if(this.schema=b,null==a)throw new Error("No root");if(null==this.schema)throw new Error("no schema");this.base=a.replace(/\/service\/?$/,""),this._objects={}}return a.prototype.get=function(a,b){var c,d,e;return c=null!=(d=this._objects)[e=a.id]?d[e]:d[e]=this._newObject(a),c.merge(a,b),c},a.prototype._newObject=function(a){var b,d;return d=function(){var c,d,e,f,g,h;for(g=null!=(e=null!=(f=a.class)?f.split(","):void 0)?e:[],h=[],c=0,d=g.length;c<d;c++)b=g[c],h.push(this.schema.makePath(b));return h}.call(this),new c(this.base,d,a.id)},a.prototype.destroy=function(){var a,b,c;c=this._objects;for(a in c)b=c[a],b.destroy();return delete this.selectedObjects,delete this._objects},a}()}).call(this)},{"./intermine-object":46,underscore:262}],52:[function(a,b,c){(function(){var c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("backbone"),d=a("./uniq-items"),e=function(a,b){if(!(null!=a?a.equals:void 0)||!(null!=b?b.isRoot:void 0))return!1;for(;!a.equals(b);){if(b.isRoot())return!1;b=b.getParent()}return!0},b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.contains=function(a){return a instanceof c.Model?b.__super__.contains.call(this,a):this.any(function(b){return e(a,b.get("item"))})},b.prototype.remove=function(a){var d,f,g,h,i;if(null==a)return!1;for(a instanceof c.Model&&b.__super__.remove.call(this,a),d=this.filter(function(b){return e(a,b.get("item"))}),i=[],g=0,h=d.length;g<h;g++)f=d[g],i.push(b.__super__.remove.call(this,f));return i},b}(d)}).call(this)},{"./uniq-items":62,backbone:235}],53:[function(a,b,c){(function(){var c,d={}.hasOwnProperty,e=function(a,b){function c(){this.constructor=a}for(var e in b)d.call(b,e)&&(a[e]=b[e]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("./path"),b.exports=function(a){function b(a){var c,d;d=a.path,c=a.direction,b.__super__.constructor.call(this,d),null==c&&(c="ASC"),this.set({direction:c})}return e(b,a),b.prototype.asOrderElement=function(){return this.pick("path","direction")},b.prototype.toOrderString=function(){return this.get("path")+" "+this.get("direction")},b}(c)}).call(this)},{"./path":56}],54:[function(a,b,c){(function(){b.exports=function(){function a(a,b){if(this.start=a,this.size=null!=b?b:null,!(null!=this.start&&this.start>=0))throw new Error("Start must be >= 0");if(null!=this.size&&this.size<0)throw new Error("Size must be null or Natural")}return a.prototype.end=function(){return this.all()?null:this.start+this.size},a.prototype.all=function(){return!this.size},a.prototype.isBefore=function(a){return null!=this.size&&this.end()<a},a.prototype.isAfter=function(a){return a<this.start},a.prototype.leftGap=function(a){return this.isAfter(a)?this.start-a:null},a.prototype.rightGap=function(a){return this.isBefore(a)?a-this.end():null},a.prototype.next=function(){return new a(this.end(),this.size)},a.prototype.prev=function(){return new a(Math.max(0,this.start-this.size),this.size)},a.prototype.toString=function(){return"Page("+this.start+" .. "+this.end()+")"},a}()}).call(this)},{}],55:[function(a,b,c){(function(){var c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=a("./uniq-items"),c=a("backbone"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.paths=function(){return this.map(function(a){return a.get("item")})},b.prototype.contains=function(a){return this.any(function(b){return a.equals(b.get("item"))})},b.prototype.toggle=function(a){return this.contains(a)?this.remove(a):this.add(a)},b.prototype.remove=function(a){var d;return a instanceof c.Model?b.__super__.remove.apply(this,arguments):(d=this.find(function(b){return a.equals(b.get("item"))}),null!=d?b.__super__.remove.call(this,d):void 0)},b}(d)}).call(this)},{"./uniq-items":62,backbone:235}],56:[function(a,b,c){(function(){var c,d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},i=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};d=a("../core-model"),f=a("imjs").Model,e=f.NUMERIC_TYPES,c=f.BOOLEAN_TYPES,b.exports=function(a){function b(a){b.__super__.constructor.call(this),this.set(this.pathAttributes(a)),this.setDisplayName(a),this.setTypeName(a),this.pathInfo=function(){return a},this.freeze("path","isNumeric","isBoolean","isReference","isAttribute")}return h(b,a),b.prototype.defaults=function(){return{path:null,type:null,displayName:null,typeName:null,parts:[],isNumeric:!1,isBoolean:!1,isReference:!1,isAttribute:!0}},b.prototype.setDisplayName=function(a){return a.getDisplayName().then(function(a){return function(b){return a.set({displayName:b,parts:b.split(" > ")}),a.freeze("displayName","parts")}}(this))},b.prototype.setTypeName=function(a){var b;return b=(a.isAttribute()?a.getParent():a).getType(),b.getDisplayName().then(function(a){return function(b){return a.set({typeName:b})}}(this))},b.prototype.pathAttributes=function(a){var b,d,f,g,h;return f=String(a),d=a.isAttribute(),g=a.getType(),b={id:d?f:f+".id",path:f,type:null!=(h=g.name)?h:g},d?(b.isNumeric=i.call(e,g)>=0,b.isBoolean=i.call(c,g)>=0):(b.isReference=!0,b.isAttribute=!1),b},b}(d)}).call(this)},{"../core-model":2,imjs:247}],57:[function(a,b,c){(function(){var c,d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};f=a("underscore"),d=a("../core-model"),c=a("../core/collection"),e=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.defaults=function(){return{index:null,query:null,cells:[]}},b.prototype.toJSON=function(){var a;return f.extend(b.__super__.toJSON.apply(this,arguments),{cells:function(){var b,c,d,e;for(d=this.get("cells"),e=[],b=0,c=d.length;b<c;b++)a=d[b],e.push(a.toJSON());return e}.call(this)})},b}(d),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.model=e,b.prototype.comparator="index",b}(c)}).call(this)},{"../core-model":2,"../core/collection":5,underscore:262}],58:[function(a,b,c){(function(){var c,d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=a("../core-model"),c=a("../core/collection"),f=a("../core/type-assertions"),e=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.defaults=function(){return{class:null,id:null}},b.prototype.validate=function(a,b){return"class"in a&&null==a.class?'"class" must not be null':"id"in a&&null==a.id&&'"id" must not be null'},b}(d),b.exports=function(a){function b(a){b.__super__.constructor.call(this),f.assertMatch(f.Service,a,"service"),this.state=new d({node:null,commonType:null,typeName:null}),this.listenTo(this.state,"change:commonType",this.onChangeType),this.listenTo(this.state,"change:node",this.onChangeNode),this.listenTo(this,"add remove reset",this.setType),a.fetchModel().then(function(a){return function(b){return a.schema=b,a.setType()}}(this))}return h(b,a),b.prototype.model=e,b.prototype.onChangeNode=function(){return this.trigger("change:node change",this.state.get("node"))},b.prototype.onChangeType=function(){var a,b;if(null!=this.schema)return null==(b=this.state.get("commonType"))?this.state.set({typeName:null}):(a=this.schema.makePath(b),a.getDisplayName().then(function(a){return function(b){return a.state.set({typeName:b}),a.trigger("change:typeName change")}}(this)),this.trigger("change:commonType change"))},b.prototype.setType=function(){var a;if(null!=this.schema)return a=this.size()?a=this.schema.findCommonType(this.map(function(a){return a.get("class")})):null,null!=a?this.state.set({commonType:a}):this.state.set({commonType:null,typeName:null})},b}(c)}).call(this)},{"../core-model":2,"../core/collection":5,"../core/type-assertions":10}],59:[function(a,b,c){(function(){var c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=a("underscore"),c=a("../core-model"),d=a("../utils/count-executor"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.defaults=function(){return{count:0}},b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.set({createdAt:new Date}),this.listenTo(this,"change:query",this._setCount),this._setCount()},b.prototype._setCount=function(){var a;return a=this.get("query"),null!=a?d.count(a).then(function(a){return function(b){return a.set({count:b})}}(this)):this.set({count:0})},b.prototype.toJSON=function(){return e.extend(b.__super__.toJSON.apply(this,arguments),{query:this.get("query").toJSON()})},b}(c)}).call(this)},{"../core-model":2,"../utils/count-executor":77,underscore:262}],60:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l={}.hasOwnProperty,m=function(a,b){function c(){this.constructor=a}for(var d in b)l.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};k=a("underscore"),d=a("../core-model"),c=a("../core/collection"),e=a("../options"),i=a("../services/column-summary").getColumnSummary,j=function(a){return"int"===a||"Integer"===a||"long"===a||"Long"===a||"short"===a||"Short"===a},b.exports=function(a){function b(a){var c,d;if(this.query=a.query,this.view=a.view,b.__super__.constructor.call(this),null==this.query)throw new Error("No query in call to new SummaryModel");if(null==this.view)throw new Error("No view in call to new SummaryModel");this.fetch=k.partial(i,this.query,this.view),d=this.view.getType(),c=j(d),this.set({limit:e.get("INITIAL_SUMMARY_ROWS"),canHaveMultipleValues:this.query.canHaveMultipleValues(this.view),type:d,integral:c}),this.histogram=new f,this.items=new h,this.listenTo(this,"change:filterTerm",this.onFilterChange),this.listenTo(this,"change:summaryLimit",this.onLimitChange),this.listenTo(this.query,"change:constraints",this.load),this.load()}return m(b,a),b.prototype.defaults=function(){return{error:null,maxCount:null,loading:!1,initialized:!1,canHaveMultipleValues:!1,numeric:!1,filterTerm:null}},b.prototype.destroy=function(){return this.histogram.close(),this.items.close(),b.__super__.destroy.apply(this,arguments)},b.prototype.getMaxCount=function(){return this.get("maxCount")},b.prototype.hasMore=function(){return!this.get("numeric")&&this.get("got")<this.get("uniqueValues")},b.prototype.hasAll=function(){return!this.hasMore()},b.prototype.toJSON=function(){return k.extend(b.__super__.toJSON.apply(this,arguments),{items:this.items.toJSON(),histogram:this.getHistogram()})},b.prototype.onFilterChange=function(){return this.hasAll()?this.filterLocally():this.load()},b.prototype.filterLocally=function(){var a,b,c;return a=this.get("filterTerm"),null!=a?(b=a.toLowerCase().split(/\s+/),c=function(a){return k.all(b,function(b){return!(!a||!~a.toLowerCase().indexOf(b))})},this.items.each(function(a){return a.show(c(a.get("item")))})):this.items.each(function(a){return a.show()})},b.prototype.increaseLimit=function(a){var b;return null==a&&(a=2),b=a*this.get("limit"),this.set({limit:b})},b.prototype.onLimitChange=function(){return this.load()},b.prototype.setFilterTerm=function(a){return this.set({filterTerm:a})},b.prototype.fetchAll=function(){return this.set({limit:null})},b.prototype.load=function(){return this.set({loading:!0}),this.fetch(this.get("filterTerm"),this.get("limit")).then(this.getSummaryHandler()).then(null,function(a){return function(b){return a.set({error:b})}}(this))},b.prototype.getSummaryHandler=function(){var a;return this.lastSummaryHandlerCreatedAt=a=k.now(),function(b){return function(c){return b.handleSummary(a,c)}}(this)},b.prototype.getHistogram=function(){var a,b,c,d,e,f;if(!(b=this.get("buckets")))return[];for(f=[],a=c=1;1<=b?c<=b:c>=b;a=1<=b?++c:--c)f.push(null!=(d=null!=(e=this.histogram.get(a))?e.get("count"):void 0)?d:0);return f},b.prototype.handleSummary=function(a,b){var c,d,e,f,g,h,i,j,l,m,n,o,p,q;if(o=b.stats,n=b.results,a===this.lastSummaryHandlerCreatedAt)return m=null!=o.max,l={filteredCount:o.filteredCount,uniqueValues:o.uniqueValues,available:null!=(q=o.filteredCount)?q:o.uniqueValues,got:n.length,numeric:m,initialized:!0,loading:!1},m?(e=o.buckets,i=o.max,j=o.min,p=o.stdev,c=o.average,k.extend(l,{buckets:e,max:i,min:j,stdev:parseFloat(p),average:parseFloat(c)}),this.items.size()&&this.items.reset(),this.histogram.set(function(){var a,b,c,e;for(e=[],a=0,b=n.length;a<b;a++)c=n[a],d=c.bucket,f=c.count,e.push({item:d,count:f,id:d});return e}()),l.maxCount=this.histogram.getMaxCount()):(this.histogram.size()&&this.histogram.reset(),this.items.set(function(){var a,b,c,d;for(d=[],g=a=0,b=n.length;a<b;g=++a)c=n[g],h=c.item,f=c.count,d.push({item:h,count:f,id:g});return d}()),l.maxCount=this.items.getMaxCount()),this.set(l)},b}(d),g=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return m(b,a),b.prototype.defaults=function(){return{symbol:null,share:null,visible:!0,selected:!1,hover:!1,count:0,item:null}},b.prototype.select=function(){return this.set({selected:!1})},b.prototype.deselect=function(){return this.set({selected:!1})},b.prototype.hide=function(){return this.set({visible:!1})},b.prototype.show=function(a){return null==a&&(a=!0),this.set({visible:a})},b.prototype.mousein=function(){return this.set({hover:!0})},b.prototype.mouseout=function(){return this.set({hover:!1})},b}(d),h=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return m(b,a),b.prototype.model=g,b.prototype.getMaxCount=function(){var a;return null!=(a=this.first())?a.get("count"):void 0},b}(c),f=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return m(b,a),b.prototype.model=g,b.prototype.getMaxCount=function(){var a;return k.max(function(){var b,c,d,e;for(d=this.models,e=[],b=0,c=d.length;b<c;b++)a=d[b],e.push(a.get("count"));return e}.call(this))},b}(c)}).call(this)},{"../core-model":2,"../core/collection":5,"../options":63,"../services/column-summary":65,underscore:262}],61:[function(a,b,c){(function(){var c,d,e,f=function(a,b){return function(){return a.apply(b,arguments)}},g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=a("../options"),c=a("../core-model"),e=a("./path-set"),b.exports=function(a){function b(){return this.filled=f(this.filled,this),
b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.defaults=function(){return{phase:"FETCHING",start:0,size:d.get("DefaultPageSize"),count:null,fill:0,error:null,selecting:!1,previewOwner:null,highlitNode:null,minimisedColumns:new e}},b.prototype.initialize=function(){var a;return a=this.get("minimisedColumns"),this.listenTo(a,"add remove reset",function(){return this.trigger("change:minimisedColumns change")}),this.freeze("minimisedColumns")},b.prototype.filled=function(){return this.swap("fill",function(a){return a+1})},b.prototype.toJSON=function(){var a;return a=b.__super__.toJSON.apply(this,arguments),a.minimisedColumns=this.get("minimisedColumns").toJSON().map(String),a},b.prototype.destroy=function(){return this.get("minimisedColumns").close(),b.__super__.destroy.apply(this,arguments)},b}(c)}).call(this)},{"../core-model":2,"../options":63,"./path-set":55}],62:[function(a,b,c){(function(){var c,d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("backbone"),g=a("underscore"),e=a("../core-model"),d=a("../core/collection"),f=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.initialize=function(a,b){return null!=b&&this.set(b),this.set({item:a,id:String(a)})},b}(e),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.model=f,b.prototype.toJSON=function(){var a,b,c,d,e;for(d=this.models,e=[],b=0,c=d.length;b<c;b++)a=d[b],e.push(a.get("item"));return e},b.prototype.togglePresence=function(a){return this.contains(a)?this.remove(a):this.add(a)},b.prototype.get=function(a){return b.__super__.get.call(this,a instanceof c.Model?a:String(a))},b.prototype.contains=function(a){return a instanceof f?b.__super__.contains.call(this,a):null!=this.findWhere({item:a})},b.prototype.add=function(a,c){var d,e,h,i;for(a=g(a).isArray()?a:[a],i=[],e=0,h=a.length;e<h;e++)null!=(d=a[e])&&""!==d&&(this.contains(d)?i.push(void 0):i.push(b.__super__.add.call(this,new f(d,c))));return i},b.prototype.remove=function(a,c){var d,e,h,i;for(a=g(a).isArray()?a:[a],i=[],e=0,h=a.length;e<h;e++)d=a[e],d instanceof f?i.push(b.__super__.remove.call(this,d,c)):i.push(b.__super__.remove.call(this,this.findWhere({item:d}),c));return i},b}(d)}).call(this)},{"../core-model":2,"../core/collection":5,backbone:235,underscore:262}],63:[function(a,b,c){(function(){var c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("./core/nested-model"),d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.defaults=function(){return{INITIAL_SUMMARY_ROWS:1e3,NUM_SEPARATOR:",",NUM_CHUNK_SIZE:3,MAX_PIE_SLICES:15,DropdownMax:20,DefaultPageSize:25,DynamicObjects:{NameDelimiter:" / "},CodeGen:{Default:"py",Langs:["py","pl","java","rb","js","xml"],Extra:{js:"codegen.AsHTML"}},ListFreshness:250,MaxSuggestions:1e3,ListCategorisers:["organism.name","department.company.name"],PieColors:"category10",TableResults:{CacheFactor:10,RequestLimit:5e3},TableHeader:{FullPathPopoverEnabled:!0},TableCell:{AddDataClasses:!0,PreviewTrigger:"hover",HoverDelay:200,IndicateOffHostLinks:!0,ExternalLinkIcons:{"http://some.host.somewhere":"http://some.host.somewhere/logo.png"}},ItemDetails:{ShowReferenceCounts:!1,Fields:{},Count:{}},StylePrefix:"imtables",SuggestionDepth:2,Events:{ActivateTab:"mouseenter"},Subtables:{Initially:{expanded:!1}},Facets:{DrawAverageLine:!0,Initially:{Open:!0}},Destinations:["download","Galaxy","GenomeSpace","Drive","Dropbox"],Destination:{download:{Enabled:!0},Galaxy:{Main:"http://main.g2.bx.psu.edu",Current:null,Tool:"flymine",Save:!1,Enabled:!0},GenomeSpace:{Upload:"https://gsui.genomespace.org/jsui/upload/loadUrlToGenomespace.html",Enabled:!0},Drive:{Library:"https://apis.google.com/js/client.js",Enabled:!1},Dropbox:{Library:"https://www.dropbox.com/static/api/2/dropins.js",Enabled:!1}},ShowId:!1,TableWidgets:{Pagination:{enabled:!0,index:0},PageSizer:{enabled:!0,index:1},TableSummary:{enabled:!0,index:2}},CellCutoff:100,ShowHistory:!0,icons:"fontawesome",D3:{Transition:{Easing:"exp",Duration:500,DurationShort:200}},brand:{"http://www_flymine_org/query/service/":{name:"FlyMine"},"http://preview_flymine_org/preview/service/":{name:"FlyMine-Preview"},"http://www_mousemine_org/mousemine/service/":{name:"MouseMine (MGI)"}},Formatters:{testmodel:{},genomic:{}},ColumnManager:{SelectColumn:{Multi:!0}},UndoHistory:{ShowAllStatesCutOff:6}}},b}(c),b.exports=new d,b.exports.Options=d}).call(this)},{"./core/nested-model":8}],64:[function(a,b,c){(function(){c.IS_BLANK=/^\s*$/}).call(this)},{}],65:[function(a,b,c){(function(){var a,b;a={},b=function(a,b){return a.service.root+":"+a.service.token+":"+a.toXML()+":"+b},c.getColumnSummary=function(c,d,e,f){var g;return null!=a[g=b(c,d,e,f)]?a[g]:a[g]=function(){return c.filterSummary(d,e,f)}()}}).call(this)},{}],66:[function(a,b,c){(function(b){(function(){var c,d,e,f;f=b.jQuery,e=c=a("jquery"),d=a("backbone"),d.$=e,b.jQuery=c,a("bootstrap"),a("typeahead.js"),a("jquery-ui-bundle"),null!=f?b.jQuery=f:delete b.jQuery}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{backbone:235,bootstrap:236,jquery:256,"jquery-ui-bundle":255,"typeahead.js":261}],67:[function(a,b,c){function d(a){if(!a)throw new Error("Name is required.");if(a=a.replace(/-/g,"_"),templ=f[a],templ)return templ;throw new Error('No template registered as "'+a+'"')}var e=a("underscore"),f=c;c.template=function(a,b){return e.template(d(a),b)},c.templateFromParts=function(a,b){var c=a.map(d).join("\n");return e.template(c,b)},f.clear='<div style="clear:both"></div>',c.no_results="<% /* requires: selectList :: [], canUndo :: bool */ %>\n<td colspan=\"<%- selectList.length %>\">\n  <div class=\"alert alert-warning\">\n    <% if (canUndo) { %>\n      <button class=\"pull-right btn btn-large btn-default btn-undo\">\n        <%= Icons.icon('Undo') %>\n        <%- Messages.getText('Undo') %>\n      </button>\n    <% } %>\n    <strong><%- Messages.getText('table.Empty') %></strong>\n    <p><%- Messages.getText('table.EmptyWhy') %></p>\n  </div>\n</td>\n",c.code_gen_js='<% if (asHTML) { %>\n\x3c!-- The Element we will target --\x3e\n<div id="some-elem"></div>\n\x3c!-- The imtables source --\x3e\n<script src="<%= imtablesJS %>" charset="UTF-8"><\/script>\n<link rel="stylesheet" href="<%= imtablesCSS %>">\n<script>\n<% } %>\n<% if (!asHTML) { %>\n/* Install from npm: npm install imtables\n * This snippet assumes the presence on the page of an element like:\n * <div id="some-elem"></div>\n */\nvar imtables = require(\'imtables\');\n<% } %>\n\nvar selector = \'#some-elem\';\nvar service  = {root: \'<%= service.root %>\'};\nvar query    = <%= JSON.stringify(query, null, 2) %>;\n\nimtables.loadTable(\n  selector, // Can also be an element, or a jQuery object.\n  <%= JSON.stringify(page) %>, // May be null\n  {service: service, query: query} // May be an imjs.Query\n).then(\n  function (table) { console.log(\'Table loaded\', table); },\n  function (error) { console.error(\'Could not load table\', error); }\n);\n<% if (asHTML) { %>\n<\/script>\n<% } %>\n',c.table_subtable_summary="<% if (rows.length) { %>\n  <%= Icons.icon('Table') %>\n<% } else { %>\n  <%= Icons.icon('EmptyTable') %>\n<% } %>\n<%- rows.length %>\n<%- pluralise(contentName, rows.length) %>\n",c.column_manager_path_chooser_buttons="<button class=\"btn btn-default im-rearrange-columns\">\n  <%- Messages.getText('Cancel') %>\n</button>\n<button class=\"btn btn-success im-add-column\"\n  <%= collection.length ? (void 0) : 'disabled' %> >\n  <%- Messages.getText('columns.AddColumn', {num: collection.length}) %>\n</button>\n\n",c.too_many_suggestions="<span class=\"alert alert-info\">\n  {{{ icons.icon('Info') }}}\n  {{ messages.getText('conbuilder.TooManySuggestions') }}\n  There are {{ extra }} values we could not include.\n</span>\n",c.export_destination_radios='<label><%- Messages.getText(\'export.param.Destination\') %></label>\n<% _.each(destinations, function (d) { %>\n    <div class="radio im-dest-<%- d %>">\n        <label>\n            <input type="radio"\n                    name="dest"\n                    <%= (d === dest) ? \'checked\' : void 0 %>>\n            <%- Messages.getText(d) %>\n        </label>\n    </div>\n<% }); %>\n\n',c.active_constraint='<div class="im-con-overview">\n  <% if (data.con.editable != null && data.con.editable === false) { %>\n    <a title="<%- data.messages.getText(\'conbuilder.NotEditable\') %>">\n        <%= data.icons.icon(\'Lock\') %>\n    </a>\n  <% } else { %>\n    <a class="im-remove-constraint"\n        title="<%- data.messages.getText(\'conbuilder.Remove\') %>"\n        >\n        <%= data.icons.icon(\'RemoveConstraint\') %>\n    </a>\n    <a class="im-edit" title="<%- data.messages.getText(\'conbuilder.EditCon\') %>">\n        <%= data.icons.icon(\'Edit\') %>\n    </a>\n  <% } %>\n</div>\n\n<% /* We use the :empty selector on this element - hence it must be on one line */ %>\n<div class="im-constraint-editor"></div>\n',c.export_json_options="<h3><%- Messages.getText('export.category.Options') %></h3>\n\n<div class=\"radio\">\n    <label>\n        <input type=\"radio\"\n               name=\"rows\"\n               <%= (jsonFormat === 'rows') ? 'checked' : void 0 %>>\n        <%- Messages.getText('export.json.Rows') %>\n        <pre><%- Messages.getText('export.json.RowsExample') %></pre>\n    </label>\n</div>\n\n<div class=\"radio\">\n    <label>\n        <input type=\"radio\"\n               name=\"objects\"\n               <%= (jsonFormat === 'objects') ? 'checked' : void 0 %>>\n        <%- Messages.getText('export.json.Objects') %>\n        <pre><%- Messages.getText('export.json.ObjExample') %></pre>\n    </label>\n</div>\n\n<% if ((size || start) && jsonFormat === 'objects') { %>\n    <div class=\"alert alert-warning\">\n        <h4><%- Messages.get('Warning') %></h4>\n        <p><%- Messages.get('export.json.ObjWarning') %></p>\n    </div>\n<% } %>\n\n",c.progress_bar='<% /* requires: doneness (float: 0 <= i <= 1) */ %>\n<% if (doneness != null && doneness >= 0) { %>\n    <div class="progress">\n        <div class="progress-bar progress-bar-striped active"\n             role="progressbar"\n             aria-valuenow="<%- doneness %>"\n             aria-valuemin="0"\n             aria-valuemax="1"\n             style="width: <%- 100 * doneness %>%;">\n            <% if (doneness < 1) { %>\n              <span class="sr-only">\n                <%- Math.round(100 * doneness) %>% <%- Messages.getText(\'Complete\') %>\n              </span>\n            <% } %>\n        </div>\n    </div>\n<% } %>\n',c.export_row_controls='<h4 class="im-title"></h4>\n\n<div class="form-group">\n    <label class="size-label"></label>\n    <input name="size"\n           step="1"\n           type="range"\n           min="1"\n           max="<%= max %>"\n           value="<%= size || max %>">\n</div>\n\n<div class="form-group">\n    <label class="start-label"></label>\n    <input name="start"\n           step="1"\n           type="range"\n           min="0"\n           max="<%= max - 1 %>"\n           value="<%= start %>">\n</div>\n\n<div class="form-group im-reset">\n</div>\n',c.count_summary="<% if (size && count) { %>\n  <% var msg = (size == 0 ? '.ShowingAll' : '.ShowingRange'); %>\n  <% ['xs', 'sm', 'md', 'lg'].forEach(function (pageSize) { %>\n    <span class=\"visible-<%= pageSize %>-inline\">\n      <%- Messages.getText('table.' + pageSize + msg, page) %>\n    </span>\n  <% }); %>\n<% } %>\n",c.active_progress_bar='<div class="progress progress-info progress-striped active">\n  <div class="bar" style="width: 100%"></div>\n</div>\n',c.type_value_controls="<label class=\"span4\">\n    <%- messages.getText('conbuilder.IsA') %>\n</label>\n<% if (subclasses.length == 1) { %>\n  <select disabled class=\"form-control\">\n      <option><%- subclasses[0].text %></option>\n  </select>\n<% } else { %>\n  <%= select(subclasses, isSelected, 'form-control im-value-type') %>\n<% } %>\n  \n",c.list_dialogue_button_node='<a href="#">\n    <strong>\n        <%- displayName || path %>\n    </strong>\n    <% if (state.count) { %>\n        (<%- numToString(state.count) %>\n        <%- pluralise((typeName || type), state.count) %>)\n    <% } %>\n</a>\n',c.only_one_item="<div class=\"alert alert-info\">\n    <%= Icons.icon('Info') %>\n    <%= Messages.getText('summary.OnlyOne', {names: state, item: items[0]}) %>\n</div>\n\n",c.export_rows_reset_button="<button type=\"button\"\n        <%= (isAll) ? 'disabled' : void 0 %>\n        class=\"btn btn-default btn-reset\">\n        <%- Messages.getText('export.ResetRowSelection') %>\n</button>\n\n<% if (tablePage) { %>\n    <button type=\"button\"\n            <%= (tablePage.start === start && tablePage.size === size) ? 'disabled' : void 0 %>\n            class=\"btn btn-default im-set-table-page\">\n            <%- Messages.getText('export.SetTablePage') %>\n    </button>\n<% } %>\n        \n",c.download_popover='<% /* requires: formats, query, path */ %>\n<ul role="menu" class="im-export-summary">\n    <% _.each(formats, function (icon, param) { %>\n      <li role="presentation">\n        <a role="menuitem"\n            href="<%= query.getExportURI(param) %>&summaryPath=<%= path %>">\n            <%= Icons.icon(icon) %>\n            <%- icon.toUpperCase() %>\n        </a>\n      </li>\n    <% }); %>\n</ul>\n',c.logic_manager_body='<div class="form-group">\n  <label class="form-label">\n    <%- Messages.getText(\'logic.LogicLabel\') %>\n    <input type="text"\n          class="im-logic form-control"\n          placeholder="<%- state.defaultLogic %>"\n          value="<%- logic %>">\n  </label>\n</div>\n<div class="form-group">\n  <button class="pull-right btn btn-primary <%- (state.disabled) ? \'disabled\' : null %>"\n          type="submit">\n    <%- Messages.getText(\'logic.ApplyLogic\') %>\n  </button>\n</div>\n',c.new_filter_dialogue='<div class="modal-body">\n</div>\n<div class="modal-footer">\n    <button class="disabled btn btn-primary pull-right im-add-constraint">\n        <%- Messages.getText(\'constraints.AddFilter\') %>\n    </button>\n    <button class="btn im-close pull-left">\n        <%- Messages.getText(\'Cancel\') %>\n        Cancel\n    </button>\n</div>\n',c.input_with_button='<input type="text" class="form-control"\n       value="<%- value %>"\n       placeholder="<%- Messages.getText(placeholder) %>">\n<span class="input-group-btn">\n  <button class="btn btn-default" type="button">\n    <%- Messages.getText(button) %>\n  </button>\n</span>\n\n',c.modal_error='<% /* Renders an alert box at various levels, with appropriate icons and messages */ %>\n<% if (error) { %>\n    <div class="pull-left alert <%- errorAlert(error) %>">\n        <% if (!error.cannotDismiss) { %>\n            <button type="button" class="dismiss">\n                <span aria-hidden="true">&times;</span>\n                <span class="sr-only">Close</span>\n            </button>\n        <% } %>\n        <%= Icons.icon(errorIcon(error)) %>\n        <strong><%- Messages.getText(\'ErrorTitle\', error) %></strong>\n        <% if (error.key != null) { %>\n            <%- Messages.getText(error.key) %>\n        <% } else { %>\n            <%- error.message || error %>\n        <% } %>\n    </div>\n<% } %>\n',c.facet_item='<dd>\n    <a href=#>\n        <b class="im-facet-count pull-right">\n            (<%- count %>)\n        </b>\n        <%- item %>\n    </a>\n</dd>\n',c.table_cell='<% if (state.minimised) { %>\n  &hellip;\n<% } else if (entity.id == null) { %>\n  <% if (value != null && formattedValue != null) { %>\n    <span class="im-displayed-value"><%= value %></span>\n  <% } else if (entity.isNULL) { %>\n    <span class="im-null-entity">\n      <%- Messages.getText(\'table.cell.NullEntity\', {type: entity[\'class\']}) %>\n    </span>\n  <% } else { %>\n    <%= NULL_VALUE %>\n  <% } %>\n<% } else { %>\n  <input\n    class="im-list-chooser"\n    type="checkbox"\n    <% if (input.checked) { %>checked<% } %>\n    <% if (input.disabled) { %>disabled<% } %>\n    style="display:<%- input.display %>">\n\n  <a class="im-cell-link" target="<%- target %>" href="<%= url %>">\n\n    <% if (isForeign) { %>\n      <% if (icon) { %>\n        <img src="<%= icon %>" class="im-external-link"></img>\n      <% } else { %>\n        <%= Icons.icon(\'ExternalLink\') %>\n      <% } %>\n    <% } %>\n\n    <% if (value != null && formattedValue != null) { %>\n      <span class="im-displayed-value"><%= formattedValue %></span>\n    <% } else { %>\n      <%= NULL_VALUE %>\n    <% } %>\n\n  </a>\n\n  <% if (value != null && field === \'url\' && rawValue != url) { %>\n    <a class="im-cell-link external" href="<%= rawValue %>">\n      <%= Icons.icon(\'ExternalLink\') %>\n      <%- Messages.getText(\'table.cell.Link\') %>\n    </a>\n  <% } %>\n<% } %>\n',c.column_manager_path_remover='<% /* requires: removeTitle */ %>\n<span class="pull-right im-remove-view"\n      title="<%- Messages.getText(removeTitle) %>">\n    <%= Icons.icon(\'Remove\') %>\n</span>\n\n',c.export_column_control="<span class=\"badge\"><%- item.getType() %></span>\n<span class=\"im-active-state\">\n    <% if (active) { %>\n        <%= Icons.icon('Check') %>\n    <% } else { %>\n        <%= Icons.icon('UnCheck') %>\n    <% } %>\n</span>\n<%- name %>\n",c.undo_history='<button class="btn btn-default im-undo">\n  <%= Icons.icon(\'Undo\') %>\n  <span class="visible-lg-inline">\n    <%- Messages.getText(\'Undo\') %>\n  </span>\n</button>\n\n<button class="btn btn-default dropdown-toggle"\n        data-toggle="dropdown">\n  <span class="caret"></span>\n</button>\n\n<ul class="dropdown-menu im-state-list">\n    <li>\n      <button\n          title="<%- Messages.getText(\'undo.ToggleTrivialTitle\', state) %>"\n          class="btn btn-xs btn-default im-toggle-trivial <%= state.hideTrivial ? \'active\' : void 0 %>">\n        <%- Messages.getText(\'undo.ToggleTrivial\', state) %>\n      </button>\n    </li>\n</ul>\n',c.error_message="<% if (error) { %>\n    <div class=\"alert alert-<%= error.level || 'danger' %>\">\n        <%= icons.icon('Error') %>\n        <span class=\"im-conbuilder-error\">\n            <%- error.message || error %>\n        </span>\n    </div>\n<% } %>\n\n",c.boolean_value_controls="<button class=\"btn btn-default im-true {{ (value === true) ? ' active' : void 0 }}\">\n  True\n</button>\n<button class=\"btn btn-default im-false {{ (value === false) ? ' active' : void 0 }}\">\n  False\n</button>\n",c.facet_title="<%= Icons.icon(state.open ? 'Expanded' : 'Collapsed') %>\n<span class=\"im-facet-title\"><%- pathName %></span>\n&nbsp;\n<span class=\"im-facet-count\"><%- Messages.getText('Number', {n: got} %></span>\n",c.join_manager_body="<ul class=\"list-group\"></ul>\n\n<div class=\"alert alert-info\">\n  <%= Icons.icon('Info') %>\n  <strong class=\"im-clickable\">\n    <%- Messages.getText('joins.ExplanationTitle') %>\n  </strong>\n  <p class=\"<%= (!state.explaining) ? 'im-latent' : void 0 %>\">\n    <%- Messages.getText('joins.Explanation') %>\n  </p>\n</div>\n",c.summary_no_results="<div class=\"alert alert-warning\">\n    <%= Icons.icon('Warning') %>\n    <%- Messages.getText('summary.NoResults', {path: pathName}) %>\n</div>\n\n",c.add_value_control='<div class="im-table-height-wrapper">\n    <table class="table table-condensed"></table>\n</div>\n<div class="input-group">\n    <input type="text" class="im-new-multi-value form-control">\n    <span class="input-group-btn">\n        <button class="btn btn-primary im-add" type="button">\n            <span class="im-long"><%- messages.getText(\'multivalue.AddValue\') %></span>\n            <span class="im-short"><%- messages.getText(\'multivalue.AddValueShort\') %></span>\n        </button>\n    </span>\n</div>\n',c.table_throbber='<tr class="im-table-throbber">\n  <td colspan="<%= colcount %>">\n    <h2><%- Messages.getText(\'table.RequestingData\') %></h2>\n    <div class="progress progress-info progress-striped active">\n      <div class="bar" style="width: 100%"></div>\n    </div>\n  </td>\n</tr>\n',c.cell_preview_reference="<tr>\n    <td class=\"im-field-name\"><%- _.rest(parts).join(' ') %></td>\n    <td class=\"im-field-value <%- field.toLowerCase() %>\">\n        <%- values.join(', ') %>\n    </td>\n</tr>\n",c.code_gen_button_main="<%= Icons.icon('CodeFile') %>\n<span class=\"hidden-sm hidden-xs\">\n  <%- Messages.getText('codegen.GenerateCodeIn', {lang: lang}) %>\n</span>\n<span class=\"visible-sm-inline im-current-lang\">\n    <%- Messages.getText('codegen.Lang', {lang: lang}) %>\n</span>\n\n",c.export_compression_controls="<h4><%- Messages.getText('export.category.Compression', state) %></h4>\n\n<div class=\"checkbox im-compress\">\n    <label>\n        <input type=\"checkbox\" <%= compress ? 'checked' : void 0 %>>\n        <%- Messages.getText('export.UseCompression') %>\n    </label>\n</div>\n\n<fieldset <%= compress ? void 0 : 'disabled' %>>\n    <div class=\"radio\">\n        <label>\n            <input type=\"radio\"\n                name=\"gzip\"\n                <%= (compression === 'gzip') ? 'checked' : void 0 %>>\n            <%- Messages.getText('export.UseGZIP') %>\n        </label>\n    </div>\n\n    <div class=\"radio\">\n        <label>\n            <input type=\"radio\"\n                name=\"zip\"\n                <%= (compression === 'zip') ? 'checked' : void 0 %>>\n            <%- Messages.getText('export.UseZIP') %>\n        </label>\n    </div>\n</fieldset>\n\n",c.export_fasta_options='<h3><%- Messages.getText(\'export.category.Options\') %></h3>\n\n<div class="form-group">\n    <label><%- Messages.getText(\'FastaExtension\') %></label>\n    <input type="text"\n           value="<%- fastaExtension %>"\n           placeholder="5kbp"\n           class="form-control im-fasta-ext">\n</div>\n',c.facet_row='<% /* requires: selected, symbol, item, count, percent, opacity, share */ %>\n<td class="im-selector-col">\n  <span><%- symbol %></span>\n  <div class="checkbox"></div>\n</td>\n\n<td class="im-item-col">\n  <% if (item != null) { %>\n    <%- item %>\n  <% } else { %>\n    <span class=null-value>&nbsp;</span>\n  <% } %>\n</td>\n\n<td class="im-count-col">\n  <% if (max > 1) { %>\n    <div class="im-facet-bar"\n         style="width:<%- percent %>%;background:<%- Messages.getText(\'summary.FacetBar\', {opacity: opacity}) %>">\n    </div>\n  <% } %>\n  <span class="im-count"><%- numToString(count) %></span>\n</td>\n\n<% if (share != null) { %>\n    <td class="im-percent-col"><i><%- share.toFixed() %>%</i></td>\n<% } %>\n',c.list_tags_apology="<% if (!hasTags) { %>\n  <span>\n    <%- Messages.getText('lists.NoTags') %>\n  </span>\n<% } %>\n",c.slider='<div class="im-slider">\n    <% _.each(markers, function(marker) { %>\n        <span class="im-slider-marker"><%- marker.value %></span>\n    <% }); %>\n</div>\n',c.classy_popover='<div class="popover <%- classes %>" role="tooltip">\n  <div class="arrow"></div>\n  <h3 class="popover-title"></h3>\n  <div class="popover-content"></div>\n</div>\n',c.column_manager_order_direction="<% /* requires: direction, isNumeric */ %>\n<span class=\"im-change-direction\"\n  title=\"<%- Messages.getText('columns.ChangeDirection') %>\">\n  <span class=\"sr-only\">\n    <%- Messages.getText('columns.CurrentDirection', {\n      dir: direction, numeric: isNumeric\n    }) %>\n  </span>\n  <%= Icons.icon('Sort' + (isNumeric ? 'Numeric' : 'String') + direction) %>\n</span>\n",c.export_destination_options='<div class="form-group im-param-name">\n    <label><%- Messages.getText(\'export.param.Name\') %></label>\n    <div class="input-group">\n      <input type="text"\n             value="<%- filename %>"\n             class="form-control"\n             placeholder="<%- Messages.getText(\'export.param.Name\') %>"\n             aria-label="<%- Messages.getText(\'export.param.Name\') %>">\n      <div class="input-group-btn">\n        <button type="button"\n                class="btn btn-default dropdown-toggle"\n                data-toggle="dropdown"\n                aria-expanded="false">\n          .<%- format %>\n          <span class="caret"></span>\n        </button>\n        <ul class="dropdown-menu dropdown-menu-right" role="menu">\n          <% _.chain(formats).groupBy(\'group\').each(function (fmts, grp) { %>\n            <% if (this.i++) { %><li class="divider"></li><% } %>\n            <% _.each(fmts, function (fmt) { %>\n                <li>\n                    <a href="#"\n                       class="im-fmt-<%- fmt.id %>">\n                      <%= Icons.icon(fmt.icon) %>\n                      <%- Messages.getText(fmt.name) %>\n                    </a>\n                </li>\n            <% }); %>\n          <% }, {i: 0}); %>\n        </ul>\n      </div>\n    </div>\n</div>\n\n<% if (format && format.desc) { %>\n  <div class="alert alert-info">\n    <%- Messages.getText(format.desc) %>\n  </div>\n<% } %>\n\n<div class="row">\n    <div class="col-sm-6 im-param-dest">\n    </div>\n    <div class="col-sm-6 im-dest-opts">\n    </div>\n</div>\n',c.large_table_disuader='<div class="modal-dialog">\n    <div class="modal-content">\n        <div class="modal-header">\n            <h3>\n            <%= size %> rows - are you sure?\n            </h3>\n        </div>\n\n        <div class="modal-body">\n\n            <p><%= Messages.getText(\'largetable.appeal\', {size: size}) %></p>\n\n            <ul>\n                <li>\n                    <p>\n                        If you want to see all the data, you can page \n                        <span class="label label-info">\n                            <%= Icons.icon(\'GoBack\') %>\n                            backwards\n                        </span>\n                        and \n                        <span class="label label-info">\n                            forwards\n                            <%= Icons.icon(\'GoForward\') %>\n                        </span>\n                        through the results.\n                    </p>\n                    <div class="btn-group">\n                        <a class="btn btn-default im-alternative-action page-backwards" href="#">\n                            <%= Icons.icon(\'GoBack\') %>\n                            go one page back\n                        </a>\n                        <a class="btn btn-default im-alternative-action page-forwards" href="#">\n                            go one page forward\n                            <%= Icons.icon(\'GoForward\') %>\n                        </a>\n                    </div>\n                </li>\n\n                <li>\n                    <p>\n                        If you are looking for something specific, you can use the\n                        <span class="label label-info">filtering tools</span>\n                        to narrow down the result set. Then you \n                        might be able to fit the items you are interested in in a\n                        single page.\n                    </p>\n                    <button class="btn btn-default im-alternative-action add-filter-dialogue">\n                        <%= Icons.icon(\'Filter\') %>\n                        Add a new filter.\n                    </button>\n                </li>\n\n                <li>\n                    <p>\n                        If you want to get and save the results, we suggest\n                        <span class="label label-info">downloading</span>\n                        the results in a format that suits you. \n                    <p>\n                    <button class="btn btn-default im-alternative-action download-menu">\n                        <%= Icons.icon(\'Export\') %>\n                        Open the download menu.\n                    </buttn>\n                </li>\n\n            </ul>\n        </div>\n\n        <div class="modal-footer">\n            <button class="btn btn-primary pull-right">\n                <%- Messages.getText(\'largetable.ok\', {size: size}) %>\n            </button>\n            <button class="btn pull-left close">\n                <%- Messages.getText(\'largetable.abort\') %>\n            </button>\n        </div>\n    </div>\n</div>\n',c.modal_dialogue_opener='<button class="btn btn-default im-open-dialogue">\n  <%= Icons.icon(labels.ICON) %>\n  <span class="im-hidden-sm hidden-sm hidden-xs">\n    <%- Messages.getText(labels.LONG, state) %>\n  </span>\n  <span class="im-visible-sm-inline visible-sm-inline">\n    <%- Messages.getText(labels.SHORT, state) %>\n  <span>\n</button>\n',c.select_with_label='<label><%- Messages.getText(label) %></label>\n\n<% if (options.length) { %>\n    <select class="form-control">\n        <% _.each(options, function (option) { %>\n            <option selected="<%= selected(option) ? \'selected\' : void 0 %>"\n                    value="<%- option.name %>">\n                <%- Messages.getText(optionLabel, option) %>\n            </option>\n        <% }) %>\n    </select>\n    <% if (helpMessage) { %>\n        <span style="display:<%= hasProblem ? \'block\' : \'none\' %>"\n              class="help-block">\n                <%- Messages.getText(helpMessage) %>\n        </span>\n    <% } %>\n<% } else { %>\n    <span class="help-block">\n        <%- Messages.getText(noOptionsMessage, {model: model}) %>\n    </span>\n<% } %>\n\n',c.list_dialogue_body='<div class="im-list-name"></div>\n\n<div class="row">\n  <div class="col-sm-12 im-more-options">\n    <h4>\n      <%= Icons.icon(\'Options\') %>\n      <span class="msg"><%- Messages.getText(\'lists.ShowExtraOptions\', state) %></span>\n    </h4>\n  </div>\n</div>\n\n<div class="im-optional-attributes" style="<%- state.minimised ? \'display:none\' : void 0 %>">\n  <div class="im-list-desc"></div>\n\n  <div class="well im-tags">\n    <div class="row im-active-tags">\n    </div>\n    <div class="row">\n      <div class="col-sm-6 im-apology">\n      </div>\n      <div class="col-sm-6">\n        <div class="im-next-tag">\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n',c.undo_history_step='<% if (!state.current) { %>\n  <button class="btn btn-default btn-small im-state-revert"\n      title="<%- Messages.getText(\'undo.RevertToState\') %>">\n      <%= Icons.icon(\'Undo\') %>\n  </button>\n<% } %>\n\n<h4>\n    <%- Messages.getText(\'undo.StepTitle\', title) %>\n</h4>\n\n<% if (state.current) { %>\n  <span class="help-block"><%- Messages.getText(\'undo.IsCurrentState\') %></span>\n<% } %>\n<div style="clear:both"></div>\n\n<span class="im-revision" title="<%- Messages.getText(\'undo.RevisionTitle\', {v: revision}) %>">\n  <%- Messages.getText(\'undo.Revision\', {v: revision}) %>\n</span>\n\n<div class="im-step-count">\n  <span><%- Messages.getText(\'undo.StepCount\', {count: count}) %></span>\n  <% if (diff) { %>\n    <span class="label im-label-<%= (diff > 0 ) ? \'pos\' : \'neg\' %>">\n      <% if (diff > 0) { %>+<% } %><%- numToString(diff) %>\n    </span>\n  <% } %>\n</div>\n\n<div class="im-step-details"></div>\n\n<div style="clear:both"></div>\n',
c.code_gen_body='<div class="row">\n  <div class="col-sm-2">\n    <% /* requires lang :: string, options :: {Extra :: {}, Langs :: [string]} */ %>\n    <div class="btn-group language-selector">\n      <button type="button"\n              data-toggle="dropdown"\n              aria-expanded="false"\n              class="btn btn-default dropdown-toggle">\n        <span class="im-current-lang">\n          <%- Messages.getText(\'codegen.Lang\', {lang: lang}) %>\n        </span>\n        <span class="caret"></span>\n      </button>\n      <ul class="dropdown-menu im-code-gen-langs" role="menu">\n        <% _.each(options.Langs, function (l) { %>\n            <li data-lang="<%- l %>"\n                class="<%= (l === lang) ? \'active\' : void 0 %>">\n              <a href="#"><%- Messages.getText(\'codegen.Lang\', {lang: l}) %></a>\n            </li>\n        <% }); %>\n      </ul>\n    </div>\n    <div class="im-show-boilerplate"></div>\n    <div class="im-highlight-syntax"></div>\n    <div class="im-extra-options"></div>\n  </div>\n  <div class="col-sm-10">\n    <pre class="im-generated-code"><%- generatedCode %></pre>\n  </div>\n</div>\n',c.active_constraints='<% /* requires: constraints.length */ %>\n<div class="well im-current-constraints">\n    <p class="well-help">\n      <% if (constraints.length) { %>\n        <%- Messages.getText(\'constraints.EditOrRemove\') %>\n      <% } else { %>\n        <%- Messages.getText(\'constraints.None\') %>\n      <% } %>\n    </p>\n\n    <ul class="im-active-constraints">\n    </ul>\n</div>\n',c.checkbox="<label>\n    <input type=\"checkbox\" \n           <%= checked ? 'checked' : void 0 %>\n           >\n    <%- label %>\n</label>\n",c.modal_footer='<button type="button" class="btn btn-cancel">\n    <%- dismissAction %>\n</button>\n<% if (exportLink != null) { %>\n    <a class="btn btn-primary"\n        <%= (error) ? \'disabled\' : void 0 %>\n        href="<%- exportLink %>">\n        <%= Icons.icon(primaryIcon) %>\n        <%- primaryAction %>\n    </a>\n<% } else { %>\n    <% /* We need the wrapper to deal with the fact that tooltips do not\n        * work on disabled buttons. */ %>\n    <div class="im-tooltip-wrapper"\n        <% if (disabled && disabledReason) { %>\n          title="<%- Messages.getText(disabledReason)  %>"\n        <% } %>>\n        <button type="button"\n                <%= (error || disabled) ? \'disabled\' : void 0 %>\n                class="btn btn-primary">\n            <%= Icons.icon(primaryIcon) %>\n            <%- primaryAction %>\n        </button>\n    </div>\n<% } %>\n',c.cell_preview_error='<div class="alert alert-error">\n    <h4>Error</h4>\n    <p>Sorry. We could not fetch the preview due to an error:</p>\n    <code><%- message %></code>\n</div>\n',c.column_manager_path_name='<% /* requires parts */ %>\n<span class="im-path-name">\n    <% _.each(parts, function (part) { %>\n        <span class="im-name-part"><%- part %></span>\n    <% }); %>\n</span>\n\n',c.value_control_row='<td>\n  <input type="checkbox" {{ (selected) ? \'checked\' : void 0 }}>\n</td>\n<td class="im-multi-value">\n  {{# if (editing) { }}\n    <div class="input-group">\n      <input type="text" value="{{ value }}" class="form-control">\n      <span class="input-group-btn">\n        <button class="btn btn-success im-save"\n                title="{{ messages.getText(\'multivalue.SaveValue\') }}"\n                type="button">\n            {{{ icons.icon(\'OK\') }}}\n            <span class="im-long">{{ messages.getText(\'multivalue.SaveValue\') }}</span>\n        </button>\n        <button class="btn btn-danger im-cancel"\n                title="{{ messages.getText(\'Cancel\') }}"\n                type="button">\n            {{{ icons.icon(\'Cancel\') }}}\n            <span class="im-long">{{ messages.getText(\'Cancel\') }}</span>\n        </button>\n      </span>\n    </div>\n  {{# } else { }}\n    <a class="im-edit pull-right">{{{ icons.icon(\'Edit\') }}}</a>\n    {{ value }}\n  {{# } }}\n</td>\n',c.attribute_value_controls='<div>\n    <input class="form-control im-constraint-value im-value-options im-con-value im-con-value-attr"\n           type="text"\n           placeholder="<%- state.valuePlaceholder %>"\n           value="<%- con.value %>">\n</div>\n',c.extra_value_controls='<label class="im-value-options">\n    <%- messages.getText(\'conbuilder.ExtraLabel\') %>\n    <input type="text" class="im-extra-value form-control"\n            placeholder="<%- state.extraPlaceholder %>"\n            value="<%- con.extraValue %>">\n</label>\n\n',c.column_name_popover='<% _.each(parts, function (part) { %>\n  <span class="im-name-part"><%- part %></span>\n<% }); %>\n',c.list_dialogue_expander="<button class=\"btn btn-default im-expand-dialogue <%= minimised ? 'active' : void 0 %>\">\n  <%- Messages.getText('lists.picker.Collapse') %>\n</button>\n",c.attribute_value_select='<select class="form-control im-con-value-attr">\n    <% _.each(items, function (item) { %>\n    <option <%= (item.item === value) ? \'selected\' : void 0 %> value="<%- item.item %>">\n            <%- item.item %>\n        </option>\n    <% }); %>\n</select>\n',c.export_dialogue='<div class="row">\n    <nav class="col-sm-3 menu">\n    </nav>\n    <div class="col-sm-9 main">\n    </div>\n</div>\n',c.null_value='<span class="im-null-value">&nbsp;</span>\n',c.table_subtables_header="<a title=\"<%- Messages.getText('subtables.RemoveColumn') %>\">\n  <%= Icons.icon('Remove') %>\n</a>\n<% if (displayName && columnName) { %>\n  <%- displayName.replace(columnName, '').replace(/^ > /, '') %>\n<% } %>\n",c.summary_items_controls='<button class="btn btn-default pull-right im-download">\n  <%= Icons.icon(\'Download\') %>\n  <%- Messages.getText(\'summary.DownloadData\') %>\n</button>\n\n<div class="btn-group im-filter-group">\n  <button type="submit"\n        class="btn btn-primary im-filter-in"\n        <%= (anyItemSelected) ? void 0 : \'disabled\' %>>\n    <%- Messages.getText(\'Filter\') %>\n  </button>\n  <button class="btn btn-primary dropdown-toggle" \n          title="<%- Messages.getText(\'summary.SelectFilter\') %>"\n          <%= (anyItemSelected) ? void 0 : \'disabled\' %>>\n    <span class="caret"></span>\n  </button>\n  <ul class="dropdown-menu">\n    <li>\n      <a href="#" class="im-filter-in">\n        <%- Messages.getText(\'summary.Include\') %>\n      </a>\n    </li>\n    <li>\n      <a href="#" class="im-filter-out">\n        <%- Messages.getText(\'summary.Exclude\') %>\n      </a>\n    </li>\n  </ul>\n</div>\n\n<div class="btn-group">\n  <button class="btn btn-default btn-cancel"\n          <%= (anyItemSelected) ? void 0 : \'disabled\' %>\n          title="<%- Messages.getText(\'summary.Reset\') %>">\n    <%= Icons.icon(\'Undo\') %>\n  </button>\n  <% if (!(/boolean/i).test(type)) { %>\n    <button class="btn btn-default btn-toggle-selection"\n            title="<%- Messages.getText(\'summary.Toggle\') %>">\n        <%= Icons.icon(\'Toggle\') %>\n    </button>\n  <% } %>\n</div>\n\n',c.list_dialogue_button='<button class="btn btn-default dropdown-toggle" data-toggle="dropdown">\n  <%= Icons.icon(\'Lists\') %>\n  <span class="hidden-xxs">\n    <%- Messages.getText(\'lists.SaveAsList\') %>\n  </span>\n  <span class="caret"></span>\n</button>\n\n<ul class="dropdown-menu dropdown-menu-right" role="menu">\n    <li class="divider"></li>\n    <li>\n        <a class="im-pick-items" href="#">\n            <%- Messages.getText(\'lists.StartPicking\') %>\n        </a>\n    </li>\n    <li class="divider"></li>\n    <li>\n        <div class="btn-group btn-group-justified" role="group">\n            <a role="button" class="<%- createBtnClasses %>">\n                <%- Messages.getText(\'lists.Create\') %>\n            </a>\n            <a role="button" class="<%- appendBtnClasses %>">\n                <%- Messages.getText(\'lists.Append\') %>\n            </a>\n        </div>\n    </li>\n</ul>\n',c.list_tag="<%- id %>\n<span class=\"im-remove\" title=\"<%- Messages.getText('lists.RemoveTag') %>\">\n    <%= Icons.icon('Remove') %>\n</span>\n",c.export_dialogue_footer='<% if (linkToFile) { %>\n    <div class="pull-left alert alert-info">\n        <%- Messages.getText(\'export.cloud.FileLocation\', {cloud: dest}) %>\n        <a href="<%= linkToFile %>" target="_blank"><%- linkToFile %></a>\n    </div>\n<% } %>\n\n<button type="button" class="btn btn-cancel">\n    <%- dismissAction %>\n</button>\n\n<% if (dest === \'download\') { %>\n    <a class="btn btn-primary"\n        href="<%- exportURI %>">\n        <%= Icons.icon(primaryIcon) %>\n        <%- primaryAction %>\n    </a>\n<% } else { %>\n    <button type="button"\n            <%= (error || doneness != null) ? \'disabled\' : void 0 %>\n            class="btn btn-primary">\n        <%= Icons.icon(primaryIcon) %>\n        <%- primaryAction %>\n    </button>\n<% } %>\n\n',c.summary_selected_count="<% if (state.selectedCount) { %>\n    <div class=\"alert alert-info im-selected-count\">\n        <strong>\n            <%- Messages.getText('summary.SelectedCount', state) %>\n        </strong>\n    </div>\n<% } %>\n",c.column_manager_position_controls="<div class=\"im-position-controls\">\n    <% if (index > 0) { %>\n        <%= Icons.iconWithProps('ASC', {\n            className: 'im-move-up',\n            title: Messages.getText('columns.MoveUp')\n        }) %>\n    <% } %>\n    <% if (!isLast) { %>\n        <%= Icons.iconWithProps('DESC', {\n            className: 'im-move-down',\n            title: Messages.getText('columns.MoveDown')\n        }) %>\n    <% } %>\n</div>\n\n",c.column_manager_sort_order_editor='<% /* requires: collection, available */ %>\n<h4>\n  <%- Messages.getText(\'columns.CurrentSortOrder\', {\n    oes: collection\n  }) %>\n</h4>\n\n<span class="help-block">\n  <%- Messages.getText(\'columns.CurrentSortOrderHelp\') %>\n</span>\n\n<div class="well im-current-sort-order">\n\n  <div class="row">\n    <div class="col-md-6">\n        <% if (collection.length) { %>\n          <ul class="list-group im-active-oes im-connected-list"></ul>\n        <% } else { %>\n          <div class="im-empty-collection">\n            <%- Messages.getText(\'columns.NoSortOrder\') %>\n          </div>\n        <% } %>\n    </div>\n\n    <div class="col-md-6">\n        <% if (available) { %>\n          <div class="im-rubbish-bin">\n            <ul class="list-group im-removed im-available-oes im-connected-list">\n            </ul>\n          </div>\n        <% } %>\n    </div>\n  </div>\n</div>\n',c.summary_stats='<table class="table">\n    <thead>\n        <tr>\n            <th><%- Messages.getText(\'summary.Max\') %></th>\n            <th><%- Messages.getText(\'summary.Min\') %></th>\n            <th><%- Messages.getText(\'summary.Average\') %></th>\n            <th><%- Messages.getText(\'summary.StdDev\') %></th>\n        </tr>\n        <tr>\n            <td><%- Messages.getText(\'Number\', {n: max}) %></td>\n            <td><%- Messages.getText(\'Number\', {n: min}) %></td>\n            <td><%- Messages.getText(\'Number\', {n: average}) %></td>\n            <td><%- Messages.getText(\'Number\', {n: stdev}) %></td>\n        </tr>\n    </thead>\n</table>\n\n<div class="row im-range-controls">\n    <div class="col-sm-4 im-range-from">\n        <input type="text"\n               class="form-control im-range-min input im-range-val"\n               value="<%- min %>">\n    </div>\n    <div class="col-sm-1 im-ellipsis">\n        <span>...</span>\n    </div>\n    <div class="col-sm-4 im-range-to">\n        <input type="text"\n               class="form-control im-range-max input im-range-val"\n               value="<%- max %>">\n    </div>\n    <div class="col-sm-3 im-range-buttons">\n        <div class="btn-group pull-right">\n            <button class="btn btn-primary disabled">Apply</button>\n            <button class="btn btn-cancel disabled">Reset</button>\n        </div>\n    </div>\n</div>\n\n<div class="slider"></div>\n\n',c.table_error="<div class=\"alert alert-error alert-warning\">\n\n  <h2><%= Icons.icon('Bug') %><%- Messages.getText('error.Oops') %></h2>\n\n  <p>\n    <i><%- Messages.getText(error.key || 'error.' + domain + '.Heading') %></i>\n  </p>\n\n  <p><%- Messages.getText('error.' + domain + '.Body') %></p>\n\n  <a class=\"btn btn-primary pull-right\" href=\"mailto:<%= mailto %>\">\n    <%= Icons.icon('Mail') %>\n    <%- Messages.getText('error.EmailHelp') %>\n  </a>\n\n  <button class=\"btn btn-default im-show-query\">\n    <%= Icons.icon('xml') %>\n    <%- Messages.getText('error.ShowQuery') %>\n  </button>\n  <% if (error.message) { %>\n    <button class=\"btn btn-default im-show-error\">\n      <%= Icons.icon('Bug') %>\n      <%- Messages.getText('error.ShowError') %>\n    </button>\n  <% } %>\n\n  <pre class=\"query-xml well im-latent\"><%- indent(query) %></pre>\n\n  <% if (error.message) { %>\n    <pre class=\"error-message well im-latent\"><%- error.message %></pre>\n  <% } %>\n\n</div>\n",c.export_add_column_control='<div class="row">\n    <div class="col-sm-1 im-help"\n         title="<%- Messages.getText(\'export.help.AdditionalCols\') %>">\n        <%= Icons.icon(\'Help\', \'lg\') %>\n    </div>\n    <div class="col-sm-11 form-group">\n        <input type="text" class="form-control">\n    </div>\n</div>\n',c.undo_history_step_section="<div class=\"im-section-summary\">\n  <% if (collection.length) { %>\n    <%= Icons.icon(state.open ? 'ExpandedSection' : 'CollapsedSection') %>\n  <% } %>\n  <%- Messages.getText(summaryLabel, {n: count}) %>\n</div>\n<% if (collection.length) { %>\n  <div class=\"<%- collectionClasses %>\">\n    <% _.each(collection, function (e) { %>\n      <span class=\"label label-<%= e.added ? 'success' : (e.removed ? 'danger' : 'default') %>\">\n        <%- labelContent(e) %>\n      </span>\n    <% }); %>\n  </div>\n<% } %>\n",c.page_sizer='<% /* Expects size, sizes */ %>\n<% if (sizes.length) { %>\n    <label>\n        <span class="hidden-tablet">Rows per page:</span>\n    </label>\n    <select class="form-control" title="Rows per page">\n        <% sizes.forEach(function (s) { %>\n            <option value="<%= s[0] %>" <%= (s[0] === size) && \'selected\' %>>\n            <%= s[1] || s[0] %>\n            </option>\n        <% }); %>\n    </select>\n<% } %>\n',c.loop_value_controls="<% if (candidateLoops.length) { %>\n    <%= select(candidateLoops, isSelected, 'form-control im-value-options im-con-value') %>\n<% } else { %>\n    <%- messages.getText('conbuilder.NoSuitableLoops') %>\n<% } %>\n",c.select='<select class="<%- data.classes %>">\n  <% _.each(data.options, function (opt) { %>\n    <option value="<%- data.key(opt) %>"\n      <%- data.selectedTest(opt) ? \'selected\' : void 0 %> >\n      <% if (data.contentHandler) { %>\n        <%- data.contentHandler(opt) %>\n      <% } else { %>\n        <%- opt.text %>\n      <% } %>\n    </option>\n  <% }); %>\n</select>\n',c.list_value_controls="<% if (suitableLists.length) { %>\n    <%= select(suitableLists, isSelected, 'span7 im-value-options im-con-value im-con-value-list form-control', formatList, getOptionValue) %>\n<% } else { %>\n    <%- messages.getText('conbuilder.NoSuitableLists') %>\n<% } %>\n",c.export_destination_galaxy_options='<div class="form-group">\n    <label><%- Messages.getText(\'GalaxyURILabel\') %></label>\n    <input type="url"\n           class="form-control im-galaxy-uri-param"\n           value="<%- Galaxy.Current || Galaxy.Main %>">\n</div>\n<div class="checkbox im-save-galaxy">\n    <label>\n        <input type="checkbox" <%= (Galaxy.Save) ? \'checked\' : void 0 %>>\n        <%- Messages.getText(\'SaveGalaxyURL\') %></label>\n    </label>\n</div>\n',c.formatted_sorting="<a> <% /* requires Icons, direction and name */ %>\n    <%= Icons.icon(direction || 'unsorted') %>\n    <span class=\"im-sort-path\"><%- name %></span>\n</a>\n",c.cell_preview_items='<colgroup>\n  <col class="im-item-field"/>\n  <col class="im-item-value"/>\n</colgroup>\n<tbody></tbody>\n',c.modal_base='<div class="modal-dialog <%- modalSize %>">\n    <div class="modal-content">\n        <div class="modal-header">\n            <button type="button" class="close">\n                <span aria-hidden="true">&times;</span>\n                <span class="sr-only">Close</span>\n            </button>\n            <h4 class="modal-title"><%- title %></h4>\n        </div>\n        <div class="modal-body">\n            <%= body %>\n        </div>\n    </div>\n</div>\n',c.summary_heading='<% /* requires:\n    *  numeric, available, got, uniqueValues\n    *  state.typeName, state.endName\n    *  filtered \n    */ %>\n<h3>\n  <% if (numeric) { %>\n    <%- Messages.getText(\'summary.NumericDistribution\', {n: available}) %>\n    <span class="im-type-name"><%- state.typeName %></span>\n    <span class="im-attr-name"><%- pluralise(state.endName, got) %></span>\n  <% } else { %> \n    <span class="im-item-got">\n      <%- Messages.getText(\'summary.Got\', {available: available, got: got}) %>\n    </span>\n    <span class="im-item-available">\n      <%- Messages.getText(\'Number\', {n: available}) %>\n    </span>\n    <span class="im-type-name"><%- state.typeName %></span>\n    <span class="im-attr-name"><%- pluralise(state.endName, got) %></span>\n    <span class="im-item-total">\n      <%- Messages.getText(\'summary.Total\', {\n            filtered: filtered,\n            total: uniqueValues\n          }) %>\n    </span>\n  <% } %> \n</h3>\n',c.export_format_controls='<h4 class="im-title"></h4>\n\n<% _.each(formats, function (formatDef) { %>\n    <div class="radio">\n        <label>\n            <input type="radio"\n                   name="format"\n                   value="<%= formatDef.id %>"\n                   <%= (formatDef.id === format) ? \'checked\' : void 0 %>>\n            <%= Icons.icon(formatDef.icon) %>\n            <%= Messages.getText(formatDef.desc) %>\n        </label>\n    </div>\n<% }); %>\n',c.constraint_summary="<% if (code) { %>\n  <li><span class=\"text-muted\"><strong><%- code %>:</strong></span></li>\n<% } %>\n<% _.each(labels, function (label) { %>\n  <li>        \n    <span class=\"label label-<%- label.type %>\">\n      <% if (_.include(['error', 'warning'], label.type)) { %>\n        <%= Icons.icon('Error') %>\n        <%- Messages.getText('consummary.' + label.content) %>\n      <% } else if (label.type === 'path') { %>\n        <% _.each(label.content.split(' > '), function (part) { %>\n          <span title=\"<%- label.content %>\" class=\"im-name-part\"><%- part %></span>\n        <% }); %>\n      <% } else { %>\n        <% if (label.icon) { %><%= Icons.icon(label.icon) %><% } %>\n        <%- label.content %>\n      <% } %>\n    </span>\n  </li>\n<% }); %>\n",c.column_manager_tabs='<ul class="nav nav-tabs">\n    <li role="presentation" class="<%- classes.view %>">\n      <a href="#">\n        <%- Messages.getText(\'columns.ViewTabTitle\') %>\n      </a>\n    </li>\n    <li role="presentation" class="<%- classes.sortorder %>">\n      <a href="#">\n        <%- Messages.getText(\'columns.SortOrderTabTitle\') %>\n      </a>\n    </li>\n</ul>\n',c.reset_button="<button type=\"button\"\n        <%= (isAll) ? 'disabled' : void 0 %>\n        class=\"btn btn-default btn-reset\">\n    <%- Messages.getText('Reset') %>\n</button>\n",c.constraint_adder='<div class="im-constraint-adder-options"></div>\n<div class="im-path-finder"><div>\n<div class="im-new-constraint"></div>\n',c.constraint_adder_options='<% if (showTree) { %>\n    <div class="col-sm-5">\n        <div class="input-group">\n            <span class="input-group-addon">find</span>\n            <input type="text"\n                value="<%- filter %>"\n                class="im-tree-filter form-control" placeholder="path">\n            <span class="input-group-btn">\n                <button class="btn btn-default im-clear-filter" type="button">\n                    <%- Messages.getText(\'Clear\') %>\n                </button>\n            </span>\n        </div>\n    </div>\n<% } %>\n<div class="col-sm-7">\n    <div class="btn-group">\n        <% if (!showTree) { %>\n            <button type="button" class="btn btn-default btn-chooser im-choose">\n                <%= Icons.icon(\'Tree\') %>\n                <span><%- Messages.getText(\'constraints.BrowseForColumn\') %></span>\n            </button>\n        <% } else { %>\n            <button <%= anyNodeChosen ? void 0 : \'disabled\' %>\n                    class="btn btn-primary im-approve"\n                    type="button" >\n                <%- Messages.getText(\'constraints.Choose\') %>\n                <% _.each(chosen, function (path, i) { %>\n                    <%- path %>\n                    <% if (i + 2 === chosen.length) { %>\n                        <%- Messages.get(\'and\') %>\n                    <% } else if (i + 2 < chosen.length) { %>\n                        <%- Messages.get(\'comma\') %>\n                    <% } %>\n                <% }); %>\n            </button>\n        <% } %>\n    </div>\n    <div class="form-group">\n        <label class="im-tree-option">\n            <%- Messages.getText(\'columns.AllowRevRef\') %>\n            <input type="checkbox"\n                    class="im-allow-rev-ref"\n                    <%= allowRevRefs ? \'checked\' : void 0 %> >\n        </label>\n    </div>\n</div>\n',c.constraints_heading="<% /* requires constraints.length */ %>\n<h3>\n  <%- Messages.getText('constraints.Heading', {n: constraints.length}) %>\n</h3>\n",c.row_surrogate="<%= Icons.icon(above ? 'ASC' : 'DESC') %>\n<%- item %>: <%- count %>\n",c.export_preview='<div class="form-group im-export-formats">\n  <label><%- Messages.getText(\'export.param.Format\') %></label>\n  <select class="form-control">\n    <% _.each(formats, function (fmt) { %>\n      <option value="<%- fmt.id %>"\n              <%= (fmt.id === format.id) ? \'selected\' : void 0 %>>\n        <%- Messages.getText(fmt.name) %>\n      </option>\n    <% }); %>\n  </select>\n</div>\n\n<pre class="im-export-preview">\n<%- state.preview %>\n</pre>\n\n<div class="alert alert-info">\n    <strong class="nb">nb</strong>\n    <%- Messages.getText(\'export.preview.Limit\') %>\n</div>\n',c.input_with_label='<label><%- Messages.getText(label) %></label>\n<input class="form-control"\n       placeholder="<%- Messages.getText(placeholder) %>"\n       value="<%- value %>">\n<% if (helpMessage) { %>\n  <span style="display:<%= hasProblem ? \'block\' : \'none\' %>"\n        class="help-block">\n        <%- Messages.getText(helpMessage) %>\n  </span>\n<% } %>\n',c.column_manager_select_list='<div class="im-removal-and-rearrangement">\n  <button class="pull-right btn btn-success im-add-view-path">\n      <%= Icons.icon(\'Add\') %>\n      <%- Messages.getText(\'columns.FindColumnToAdd\') %>\n  </button>\n\n  <h4>\n    <%- Messages.getText(\'columns.ColumnsSelected\', {columns: collection, removed: hasRubbish}) %>\n  </h4>\n\n  <span class="help-block"><%- Messages.getText(\'columns.CurrentViewHelp\') %></span>\n\n  <div class="well im-current-view">\n\n    <div class="row">\n\n      <div class="col-md-6">\n        <ul class="list-group im-active-view im-connected-list">\n        </ul>\n      </div>\n\n      <div class="col-md-6">\n        <div class="im-rubbish-bin">\n            <%= Icons.icon((hasRubbish ? \'RubbishFull\' : \'Rubbish\'), \'lg\') %>\n            <% if (hasRubbish) { %>\n                <ul class="list-group im-removed im-removed-view im-connected-list">\n                </ul>\n            <% } %>\n        </div>\n      </div>\n\n    </div>\n  </div>\n</div>\n\n<div class="im-addition">\n</div>\n\n',c.table_subtable='<span class="im-subtable-summary">\n</span>\n<div class="im-table-wrapper">\n</div>\n',c.export_tab_menu='<% _.each(data.tabs, function (tabDef) { %>\n  <li role="presentation" class="im-tab-<%= tabDef.ident %> <%= data.tab === tabDef.ident ? \'active\' : void 0 %>">\n    <a><%- data.Messages.getText(tabDef.key, data) %></a>\n  </li>\n<% }); %>\n',c.column_manager_path_chooser="<div class=\"btn-group pull-right\">\n</div>\n<h4>\n  <%- Messages.getText('columns.ChooseAPathFrom', {root: state.rootName}) %>\n</h4>\n\n",c.cell_preview_reference_relation='<% _.each(collection, function (relation) { %>\n  <li class="im-relation">\n    <span class="im-name"><%- _.last(relation.parts) %></span>\n    <span class="im-count"><%- numToString(relation.count) %></span>\n  </li>\n<% }); %>\n',c.facet_frequency='<% /* requires: error, initialized */ %>\n<% if (error) { %>\n    <% /* Oh noes - something went wrong. */ %>\n    <div class="alert alert-warning">\n        <%= Icons.icon(\'Error\') %>\n        <strong><%- Messages.getText(\'Error\') %></strong>\n        <% if (error.key) { %>\n            <%- Messages.getText(error.key) %>\n        <% } else { %>\n            <%- error.message || error %>\n        <% } %>\n    </div>\n<% } else if (initialized) { %>\n    <% /* Huzzah - there is data, which will be added here as child views */ %>\n<% } else { %>\n    <% /* Boo - no data. Show an indeterminate progress bar while we wait. */ %>\n    <div class="progress">\n      <div class="progress-bar progress-bar-info progress-bar-striped active"\n           role="progressbar"\n           style="width:100%">\n        <span class="sr-only"><%- Messages.getText(\'Loading\') %>.</span>\n      </div>\n    </div>\n<% } %>\n',c.constraint_editor='<fieldset class="im-constraint-options form-group row">\n  <label class="col-sm-3 path-label"><%- data.con.displayName %></label>\n  <% if (data.con.op) { %>\n    <div class="im-operator col-sm-3">\n        <select class="form-control im-ops">\n        <option selected><%- data.con.op %></option>\n        <% data.otherOperators.forEach(function (op) { %>\n            <option><%- op %></option>\n        <% }); %>\n        </select>\n    </div>\n  <% } %>\n  <div class="col-sm-6 im-value-options im-value-section">\n  </div>\n</fieldset>\n\n<div class="btn-group im-con-buttons">\n  <% data.buttons.forEach(function (b, i) { %>\n  <button class="btn btn-<%= (i === 0) ? \'primary\' : \'default\' %> <%- b.classes %>">\n    <%- data.messages.getText(b.key) %>\n  </button>\n  <% }); %>\n</div>\n',c.summary_items='<% if (!(/boolean/i).test(type)) { %>\n    <div class="input-group im-filter-group">\n    <span class="input-group-btn">\n        <button class="btn btn-default im-clear-value-filter">\n        <%= Icons.icon(\'Refresh\') %>\n        </button>\n    </span>\n    <input type="search" class="form-control im-filter-values"\n        value="<%- filterTerm %>"\n        placeholder="<%- Messages.getText(\'summary.FilterValuesPlaceholder\') %>">\n    </div>\n<% } %>\n\n<div class="im-item-table">\n  <table class="table table-condensed table-striped">\n    <colgroup>\n      <% _.each(colClasses, function (cls) { %>\n        <col class="<%- cls %>">\n      <% }); %>\n    </colgroup>\n    <thead>\n      <tr>\n        <% _.each(colHeaders, function (hdr) { %>\n          <th><%- hdr %></th>\n        <% }); %>\n      </tr>\n    </thead>\n    <tbody class="scrollable">\n    </tbody>\n  </table>\n\n  <% if (hasMore) { %>\n    <div class="im-load-more">\n      <%- Messages.getText(\'summary.MoreItems\') %>\n    </div>\n  <% } %>\n</div>\n\n<div class="im-summary-controls">\n</div>\n',c.code_gen_button='<% /* requires lang :: string, options.Langs :: [string] */ %>\n<div class="btn-group language-selector">\n    <button type="button"\n            class="btn btn-default im-show-code-gen-dialogue">\n    </button>\n    <button type="button"\n            data-toggle="dropdown"\n            aria-expanded="false"\n            class="btn btn-default dropdown-toggle">\n        <span class="caret"></span>\n    </button>\n    <ul class="dropdown-menu im-code-gen-langs" role="menu">\n        <% _.each(options.Langs, function (l) { %>\n            <li data-lang="<%- l %>" class="<%= (l === lang) ? \'active\' : void 0 %>">\n                <a href="#"><%- Messages.getText(\'codegen.Lang\', {lang: l}) %></a>\n            </li>\n        <% }); %>\n    </ul>\n</div>\n',c.join_style='<% /* requires innerJoinBtn, outerJoinBtn */ %>\n<div class="btn-group pull-right">\n  <button class="<%- innerJoinBtn %>">\n    <%- Messages.getText(\'joins.Inner\') %>\n  </button>\n  <button class="<%- outerJoinBtn %>">\n    <%- Messages.getText(\'joins.Outer\') %>\n  </button>\n</div>\n',c.export_flat_file_options="<h4><%- Messages.getText('export.category.ColumnHeaders', state) %></h4>\n\n<div class=\"checkbox im-headers\">\n    <label>\n        <input type=\"checkbox\" <%= headers ? 'checked' : void 0 %>>\n        <%- Messages.getText('export.AddHeaders') %>\n    </label>\n</div>\n\n<fieldset <%= headers ? void 0 : 'disabled' %>>\n    <div class=\"radio\">\n        <label>\n            <input type=\"radio\"\n                name=\"hdrs-friendly\"\n                <%= (headerType === 'friendly') ? 'checked' : void 0 %>>\n            <%- Messages.getText('export.ff.FriendlyHeaders') %>\n        </label>\n    </div>\n\n    <div class=\"radio\">\n        <label>\n            <input type=\"radio\"\n                name=\"hdrs-path\"\n                <%= (headerType === 'path') ? 'checked' : void 0 %>>\n            <%- Messages.getText('export.ff.PathHeaders') %>\n        </label>\n    </div>\n</fieldset>\n\n",
c.column_header='<% /* requires the properties of HeaderModel +\n    *  penult, last, headerClasses, colTitleClasses, penultClasses\n    *  and the usual Icons, Messages\n    */ %>\n<div class="<%- headerClasses %>">\n\n<div class="im-th-buttons">\n    \n    <% if (outerJoined && isReference) { %>\n      <a href="#" \n          class="im-subtable-expander im-th-button"\n          title="<%- Messages.getText(\'table.header.ToggleTables\') %>">\n        <%= Icons.icon(\'Table\') %>\n      </a>\n    <% } %>\n\n    <% if (sortable) { %>\n        <span class="im-th-dropdown im-col-sort dropdown">\n            <a class="im-th-button im-col-sort-indicator"\n                title="<%- Messages.getText(\'table.header.SortColumn\', {dir: sortDirection}) %>">\n                <%= Icons.icon(sortDirection || \'unsorted\') %>\n            </a>\n            <div class="dropdown-menu">\n                <div><%- Messages.getText(\'table.header.FailedToInitSortMenu\') %></div>\n            </div>\n        </span>\n    <% } %>\n\n    <a class="im-th-button im-col-remover"\n        title="<%- Messages.getText(\'table.header.RemoveColumn\') %>">\n        <%= Icons.icon(\'headerIconRemove\') %>\n    </a>\n\n    <a class="im-th-button im-col-minumaximiser"\n        title="<%- Messages.getText(\'table.header.ToggleColumn\') %>">\n        <%= Icons.icon(minimised ? \'headerIconReveal\' : \'headerIconHide\') %>\n    </a>\n\n    <span class="dropdown im-filter-summary im-th-dropdown">\n        <a class="im-th-button im-col-filters dropdown-toggle"\n            title="<%- Messages.getText(\'table.header.FilterTitle\', {count: numOfCons}) %>"\n            data-toggle="dropdown" >\n            <%= Icons.icon(\'Filter\') %>\n        </a>\n        <div class="dropdown-menu">\n            <div><%- Messages.getText(\'table.header.FailedToInitFilter\') %></div>\n        </div>\n    </span>\n\n    <span class="dropdown im-summary im-th-dropdown">\n        <a class="im-th-button summary-img dropdown-toggle"\n            title="<%- Messages.getText(\'table.header.ViewSummary\') %>"\n            data-toggle="dropdown" >\n            <%= Icons.icon(\'Summary\') %>\n        </a>\n        <div class="dropdown-menu">\n            <div><%- Messages.getText(\'table.header.FailedToInitSummary\') %></div>\n        </div>\n    </span>\n\n    <% if (isComposed) { %>\n        <a class="im-th-button im-col-composed"\n            title="<%- Messages.getText(\'table.header.Composed\', {replaces: replaces}) %>">\n            <%= Icons.icon(\'Composed\') %>\n        </a>\n    <% } %>\n</div>\n\n<div class="<%- colTitleClasses %>">\n  <div class="<%- penultClasses %>">\n      <%- penult %>\n  </div>\n  <% if (last) { %>\n    <div class="im-title-part im-last">\n        <%- last %>\n    </div>\n  <% } %>\n</div>\n\n</div>\n\n',c.table_building="<h2><%- Messages.getText('table.Building') %></h2>\n<%= IndeterminateProgressBar %>\n",c.export_column_controls='<h4><%- Messages.getText(\'export.heading.Columns\') %></h4>\n\n<ul class="list-group">\n</ul>\n\n<div class="row controls"></div>\n',c.cell_preview_attribute='<tr>\n  <td class="im-field-name"><%- _.last(parts) %></td>\n  <td class="im-field-value <%- field.toLowerCase() %> <%- type %>">\n    <% if (isNumeric) { %>\n      <%- numToString(+value) %>\n    <% } else { %>\n      <%- value %>\n    <% } %>\n    <% if (tooLong) { %>\n      <span class="im-overspill"><%- valueOverspill %></span>\n      <a class="im-too-long">\n        <span class="im-ellipsis">...</span>\n        <%= Icons.icon(\'More\') %>\n      </a>\n    <% } %>\n  </td>\n</tr>\n',c.pagination='<ul class="pagination">\n    <li class="hidden-xs <%= gotoStart || \'im-goto-start\' %>" title="Go to start">\n        <a class="im-pagination-button">&#x21e4;</a>\n    </li>\n    <li class="hidden-xs hidden-sm <%= goFiveBack || \'im-go-back-5\' %>"\n        title="Go back five pages"\n        class="visible-desktop">\n        <a class="im-pagination-button">&#x219e;</a>\n    </li>\n    <li class="<%= goOneBack || \'im-go-back-1\' %>"\n        title="Go to previous page">\n        <a class="im-pagination-button">&larr;</a>\n    </li>\n    <li class="im-current-page">\n        <% if (useSelect) { %>\n          <form class="im-page-form form form-inline">\n            <select class="form-control">\n              <% for (i = 0; i < max; i++) { %>\n                <option\n                  <%= selected(i) ? \'selected\' : void 0 %>\n                  value="<%= i * size %>">\n                  page <%= i + 1 %>\n                </option>\n              <% } %>\n            </select>\n          </form>\n        <% } else { %>\n          <a href="#">&hellip;</a>\n          <form class="im-page-form form form-inline"\n                style="display:none;">\n            <div class="control-group">\n                <input type="number"\n                       value="<%= currentPage %>"\n                       max="<%= max %>"\n                       min="<%= min %>"\n                       class="form-control im-page-number">\n            </div>\n          </form>\n        <% } %>\n    </li>\n    <li class="<%= goOneForward || \'im-go-fwd-1\' %>"\n        title="Go to next page">\n        <a class="im-pagination-button">&rarr;</a>\n    </li>\n    <li class="hidden-xs hidden-sm <%= goFiveForward || \'im-go-fwd-5\' %>"\n        title="Go forward five pages"\n        class="visible-desktop">\n        <a class="im-pagination-button">&#x21a0;</a>\n    </li>\n    <li class="hidden-xs <%= gotoEnd || \'im-goto-end\' %>"\n        title="Go to last page">\n        <a class="im-pagination-button">&#x21e5;</a>\n    </li>\n</ul>\n',c.column_manager_restore_path='<% /* requires: restoreTitle */ %>\n<span class="pull-right im-restore-view"\n    title="<%- Messages.getText(restoreTitle) %>">\n    <%= Icons.icon(\'Add\') %>\n</span>\n\n'},{underscore:262}],68:[function(a,b,c){(function(){var b,d,e,f,g;g=a("underscore"),b=a("../options"),d=a("pluralize"),e='<select class="<%- data.classes %>">\n  <% _.each(data.options, function (opt) { %>\n    <option value="<%- data.key(opt) %>"\n      <%- data.selectedTest(opt) ? \'selected\' : void 0 %> >\n      <% if (data.contentHandler) { %>\n        <%- data.contentHandler(opt) %>\n      <% } else { %>\n        <%- opt.text %>\n      <% } %>\n    </option>\n  <% }); %>\n</select>\n',f=g.template(e,{variable:"data"}),c.select=function(a,b,c,d,e){return null==b&&(b=function(){return!1}),null==c&&(c=""),null==d&&(d=null),null==e&&(e=function(a){return null!=a?a.value:void 0}),f({options:a,selectedTest:b,classes:c,contentHandler:d,key:e})},c.pluralise=function(a,b){return null!=a?d(a,b):a},c.numToString=function(a){var c,d,e,f,h,i,j,k,l,m;if(!(null!=a?a.toFixed:void 0))return a;if(k=b.get("NUM_SEPARATOR"),d=b.get("NUM_CHUNK_SIZE"),j=[],h=0,-1<a&&a<1)return String(a);for(m=a.toFixed(3).split("."),l=m[0],e=m[1],c=l.split(""),i=c.length,f=g(c).groupBy(function(a,b){return Math.floor((i-(b+1))/d).toFixed()});f[h];)j.unshift(f[h].join("")),h++;return j.join(k)+("000"===e?"":"."+e)},c.errorAlert=function(a){switch(a.level){case"Error":return"alert-danger";case"Warning":return"alert-warning";case"Info":return"alert-info";case"OK":return"alert-success";default:return"alert-danger"}},c.errorIcon=function(a){var b;return b=a.level,null!=b?b:"Error"}}).call(this)},{"../options":63,pluralize:258,underscore:262}],69:[function(a,b,c){(function(){b.exports={interpolate:/\{\{\{ (.+?) \}\}\}/g,escape:/\{\{ (.+?) \}\}/g,evaluate:/\{\{# (.+?) \}\}/g}}).call(this)},{}],70:[function(a,b,c){(function(){var c,d,e,f,g;d=a("../options"),e=a("es6-promise").Promise,g={},f=function(a){var b;return null!=g[b=a.root]?g[b]:g[b]=new c(a)},b.exports=function(a){return f(a).getBranding()},c=function(){function a(a){this.key=a.root.replace(/\./g,"_"),this.promise=a.get("branding").then(function(a){return function(b){return d.set(["brand",a.key],b.properties)}}(this))}return a.prototype.getBranding=function(){return new e(function(a){return function(b){return a.promise.then(function(){return b(d.get(["brand",a.key]))},function(){return b(null)})}}(this))},a}()}).call(this)},{"../options":63,"es6-promise":238}],71:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};d=a("./create-columns"),g=a("./is-key-field"),e=a("./get-replaced-test"),c=a("../formatting"),h=function(a){return function(b){return!a.findWhere({formatter:b})}},i=function(a,b){return function(c){var d;return d=a(c),b(d)?d:null}},f=function(a){var b,c,d,e,f;for(f=[],b=d=0,e=a.length;d<e;b=++d)c=a[b],f.push(c.index=b);return f},b.exports=function(a,b){return a.service.fetchClassKeys().then(function(k){var l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H;for(r=g(k),v={},n={},p=i(c.getFormatter,h(b)),m=d(a),x=0,B=m.length;x<B;x++)if(l=m[x],l.path.isAttribute()&&(o=p(l.path)))for(l.isFormatted=!0,l.formatter=o,t=l.path.getParent(),G=null!=(F=o.replaces)?F:[],y=0,C=G.length;y<C;y++)u=G[y],w=t+"."+u,null==v[w]&&(v[w]=l),j.call(a.views,w)>=0&&l.replaces.push(a.makePath(w));for(z=0,D=m.length;z<D;z++)for(l=m[z],H=l.replaces,A=0,E=H.length;A<E;A++)u=H[A],n[u]=l;return q=e(v,n),s=function(){var a,b,c,d;for(d=[],b=0,a=m.length;b<a;b++)l=m[b],q(l)||(l.isFormatted&&(c=l.path,j.call(l.replaces,c)<0&&l.replaces.push(l.path),(r(l.path)||l.replaces.length>1)&&(l.path=l.path.getParent())),d.push(l));return d}(),f(s),s})}}).call(this)},{"../formatting":13,"./create-columns":78,"./get-replaced-test":85,"./is-key-field":89}],72:[function(a,b,c){(function(){b.exports=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;for(k={},l=0,n=a.length;l<n;l++)if(d=a[l],null!=(null!=(p=d.formatter)?p.replaces:void 0)&&(g=d.model.get("node").toString(),e=d.model.get("column"),h=e.toString(),null!=b&&e.isAttribute()&&d.formatter.replaces.length>1&&(f=b.indexOf(b.get(h)),b.remove(h),i=e.getParent(),c=b.add(i,{at:f}),c.set({replaces:d.formatter.replaces.map(function(a){return i.append(a)})})),!k[h]))for(q=d.formatter.replaces.map(function(a){return g+"."+a}),m=0,o=q.length;m<o;m++)(j=q[m])!==h&&(k[j]=!0,null!=b&&b.remove(j));return k}}).call(this)},{}],73:[function(a,b,c){(function(){var a,c,d=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};a=function(a,b,c){var d,e,f;if(!(e=a.getOuterJoin(b))||e===c)return null;for(f=a.makePath(e),d=f.isCollection()?e:null,f=f.getParent();f&&!f.isRoot();)!function(b){var e;null!=b&&(e=a.makePath(b)),(null!=e?e.isCollection():void 0)&&b!==c&&(d=b),f=null!=e?e.getParent():void 0}(a.getOuterJoin(f));return d},c=function(b,c){return a(b,c,null)},b.exports=function(b){var e,f,g,h,i,j,k,l,m,n,o,p,q;for(k=[],h={},q=b.views,m=0,o=q.length;m<o;m++)if(l=q[m],!h[l])if(j=c(b,l)){for(e=b.views.filter(function(a){return j===c(b,a)}),g={column:j,view:[]},n=0,p=e.length;n<p;n++)f=e[n],i=a(b,f,j),h[f]=g,i?d.call(g.view,i)>=0||g.view.push(i):g.view.push(f);k.push(h[j]=g)}else k.push(h[l]={column:l});return k}}).call(this)},{}],74:[function(a,b,c){(function(){c.bool=function(a){return!!a}}).call(this)},{}],75:[function(a,b,c){(function(){var c,d,e,f,g,h;h=a("underscore"),g=a("../models/object-store"),e=a("../models/nested-table"),c=a("../models/cell"),f=a("../models/null-object"),d=a("../models/fast-path-object"),b.exports=function(){function a(a,b){this.itemModels=new g(a.root,b)}return a.prototype.getCreator=function(a){var b;if(!a)throw new Error("No query");return b=function(c){return function(d){var e;return e=a.makePath(d.column),h.has(d,"rows")?c._make_sub_table_model(d,e,b):c._make_simple_cell_model(d,e)}}(this)},a.prototype._make_sub_table_model=function(a,b,c){var d;return new e(h.extend({},a,{node:b,column:b,rows:function(){var b,e,f,g;for(f=a.rows,g=[],b=0,e=f.length;b<e;b++)d=f[b],g.push(d.map(function(a){return c(a)}));return g}()}))},a.prototype._make_simple_cell_model=function(a,b){var e,g,h;return h=b.getParent(),g=b.end.name,e=null!=a.id?this.itemModels.get(a,g):null==a.class?new f(h.getType().name,g):new d(a,g),new c({entity:e,node:h,column:b,field:g,value:a.value})},a.prototype.destroy=function(){var a;return null!=(a=this.itemModels)&&a.destroy(),delete this.itemModels,this},a}()}).call(this)},{"../models/cell":37,"../models/fast-path-object":43,"../models/nested-table":48,"../models/null-object":49,"../models/object-store":51,underscore:262}],76:[function(a,b,c){(function(){var b;b=a("underscore"),c.createChild=function(a,c,d){var e,f,g;return null==d&&(d={}),e=(null!=(g=c.prototype.parameters)?g:[]).concat(c.prototype.optionalParameters),f=b.extend(b.pick(a,e),d),new c(f)}}).call(this)},{underscore:262}],77:[function(a,b,c){(function(){var a,b;a={},b=function(a){return a.service.root+":"+a.service.token+":"+a.toXML()},c.count=function(c){var d;return null!=a[d=b(c)]?a[d]:a[d]=c.count()},c.clearCache=function(){return a={}}}).call(this)},{}],78:[function(a,b,c){(function(){var c,d;c=a("./longest-common-prefix"),d=a("./calculate-row-template"),b.exports=function(a){return d(a).map(function(b){var d,e,f,g,h;return null!=b.view?(d=c(b.view),e=a.makePath(d),g=function(){var c,d,e,f;for(e=b.view,f=[],c=0,d=e.length;c<d;c++)h=e[c],f.push(a.makePath(h));return f}(),f=function(){var b,c,e,f;for(e=a.views,f=[],b=0,c=e.length;b<c;b++)h=e[b],0===h.indexOf(d)&&f.push(a.makePath(h));return f}()):(e=a.makePath(b.column),g=null,f=[]),{path:e,subview:g,replaces:f}})}}).call(this)},{"./calculate-row-template":73,"./longest-common-prefix":91}],79:[function(a,b,c){(function(){var c;c=a("underscore"),b.exports=function(){function a(a){this.definitions=a}return a.prototype.activeClasses=function(){var a,b;b=[];for(a in this.definitions)c.result(this.definitions,a)&&b.push(a);return b},a.prototype.toString=function(){return this.activeClasses().join(" ")},a}()}).call(this)},{underscore:262}],80:[function(a,b,c){(function(){var c,d,e;c=a("./fetch-missing-data"),d=a("./has-fields"),e=function(a,b){return b.then(function(b){return a.set(b)})},b.exports=function(a,b){var f,g;return g=c(a,b),f=d(b),function(a,b){return f(a)||e(a,g(b,a.get("id"))),a.toJSON()}}}).call(this)},{"./fetch-missing-data":82,"./has-fields":87}],81:[function(a,b,c){(function(){var b,d;d=a("underscore"),b=a("backbone"),c.ignore=function(a){return null!=a&&a.preventDefault(),null!=a&&a.stopPropagation(),!1},c.Bus=function(){function a(){}return d.extend(a.prototype,b.Events),a.prototype.destroy=function(){return this.stopListening(),this.off()},a}()}).call(this)},{backbone:235,underscore:262}],82:[function(a,b,c){(function(){var c,d,e,f;f=a("underscore"),c=function(a){return function(b){return b?f.object(f.zip(a,b)):{}}},d=function(a){var b;return f.flatten(function(){var c,d,f;for(f=[],c=0,d=a.length;c<d;c++)b=a[c],~b.indexOf(".")&&f.push(e(b));return f}())},e=function(a){var b,c,d,e,f;for(c=a.split("."),f=[],b=d=1,e=c.length;1<=e?d<e:d>e;b=1<=e?++d:--d)f.push(c.slice(0,b).join("."));return f},b.exports=function(a,b,e){return null==e&&(e={}),function(g,h){var i;return i=g.root+"#"+h,null!=e[i]?e[i]:e[i]=function(){return g.rows({select:b,from:a,where:{id:h},joins:d(b)}).then(f.compose(c(b),f.head))}()}}}).call(this)},{underscore:262}],83:[function(a,b,c){(function(){var a,c=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};b.exports=a=function(b,d){var e,f,g,h,i,j;return j=function(){var a;a=[];for(g in b)null!=(f=b[g])&&c.call(d,g)<0&&a.push(f);return a}(),e=function(){var a,b,c;for(c=[],a=0,b=j.length;a<b;a++)i=j[a],null==i.objectId&&c.push(i);return c}(),h=function(){var a,b,c;for(c=[],a=0,b=j.length;a<b;a++)i=j[a],null!=i.objectId&&c.push(i);return c}(),h.reduce(function(b,c){return b.concat(a(c,d))},e)}}).call(this)},{}],84:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};j=a("underscore"),d=a("es6-promise").Promise,h=j.compose(j.uniq,j.flatten),e=function(a){var b;return null!=(null!=(b=a.getType().fields)?b.organism:void 0)},g=function(a){return"Organism"===a.getEndClass().name||e(a)},f=function(a){var b;return"Organism"===a.getEndClass().name&&("name"===(b=a.end.name)||"shortName"===b)},i=function(a){return null!=a&&/\*/.test(a)},c=["=","==","ONE OF"],b.exports=function(a){return new d(function(b,d){var l,m,n,o,p,q,r,s,t;return n=j.compose(b,h),r=function(){return b([])},m=function(){var b,d,e,g,h;for(e=a.constraints,h=[],b=0,d=e.length;b<d;b++)l=e[b],g=l.op,k.call(c,g)>=0&&!i(l.value)&&f(a.makePath(l.path))&&h.push(l.value||l.values);return h}(),s=function(){var b,c,d,f;for(d=a.constraints,f=[],b=0,c=d.length;b<c;b++)l=d[b],"LOOKUP"===l.op&&null!=l.extraValue&&e(a.makePath(l.path))&&f.push(l.extraValue);return f}(),o=j.union(m,s),o.length?n(o):(q=function(){var b,c,d,e;for(d=a.getViewNodes(),e=[],b=0,c=d.length;b<c;b++)p=d[b],g(p)&&(t="Organism"===p.getType().name?p:p.append("organism"),e.push(t.append("shortName")));return e}(),q.length?a.clone().select(j.uniq(q,String)).orderBy([]).rows().then(n,r):r())})}}).call(this)},{"es6-promise":238,underscore:262}],85:[function(a,b,c){(function(){var c,d;d=a("../formatting").shouldFormat,c=function(a){return a.isAttribute()&&"id"===a.end.name},b.exports=function(a,b){return function(e){var f,g;if(null==e)throw new Error("no column");return f=e.path,!!(d(f)||f in b)&&(g=a[f],c(f)&&null==g&&(g=a[f.getParent()]),g&&null!=g.formatter&&e!==g)}}}).call(this)},{"../formatting":13}],86:[function(a,b,c){(function(){var c;c=a("es6-promise").Promise,b.exports=function(a){return new c(function(b,c){var d,e,f,g,h;return g=a.getViewNodes(),e=a.model,b((d=e.findCommonType(function(){var a,b,c;for(c=[],a=0,b=g.length;a<b;a++)f=g[a],c.push(f.getType());return c}()))?e.getPathInfo(d).getDisplayName():null!=(h=e.name)?h:"")})}}).call(this)},{"es6-promise":238}],87:[function(a,b,c){(function(){b.exports=function(a){return null==a&&(a=[]),function(b){return a.every(function(a){return b.has(a)})}}}).call(this)},{}],88:[function(a,b,c){(function(){b.exports=function(a){var b,c,d,e,f,g,h,i,j;for(h=a.split(/></),c=1,b=[],i=0,j=h.length;i<j;i++)g=h[i],/>$/.test(g)||(g+=">"),/^</.test(g)||(g="<"+g),d=/^<\/\w+\s*>/.test(g),e=/\/>$/.test(g)||!d&&/<\/\w+>$/.test(g),f=!(e||d),d&&c--,b.push(new Array(c).join("  ")+g),f&&c++;return b.join("\n")}}).call(this)},{}],89:[function(a,b,c){(function(){var a=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};b.exports=function(b){return function(c){var d,e,f,g,h;return!!c.isAttribute()&&(f=c.getParent().getType().name,d=c.end.name,e=null!=(g=null!=b?b[f]:void 0)?g:[],h=f+"."+d,a.call(e,h)>=0)}}}).call(this)},{}],90:[function(a,b,c){(function(c){(function(){var d,e,f;d=a("jquery"),f=a("es6-promise").Promise,e=a("../options"),b.exports=function(a,b){return c[b]?f.resolve(c[b]):f.resolve(d.ajax({url:e.get(a),cache:!0,dataType:"script"})).then(function(){return c[b]})}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../options":63,"es6-promise":238,jquery:256}],91:[function(a,b,c){(function(){var c,d,e=[].slice;d=a("underscore"),c=function(a){return function(b){return d.all(a,function(a){return 0===a.indexOf(b)})}},b.exports=function(a){var b,d,f,g,h,i,j,k,l;if(b=a[0],i=2<=a.length?e.call(a,1):[],null==b)throw new Error("Empty list");if(!i.length)return b;for(g=b.split(/\./),j=c(i),h=g[0],k=0,l=g.length;k<l;k++)f=g[k],j(d=h+"."+f)&&(h=d);return h}}).call(this)},{underscore:262}],92:[function(a,b,c){(function(){c.href=function(a,b,c){var d,e;return d=[["subject",b],["body",c]],e=d.map(function(a){var b,c;return b=a[0],c=a[1],b+"="+encodeURIComponent(c)}).join("&"),a+"?"+e}}).call(this)},{}],93:[function(a,b,c){(function(){b.exports=function(a){return a.map(function(a){return"change:"+a}).join(" ")}}).call(this)},{}],94:[function(a,b,c){(function(){b.exports=function(a,b,c){var d,e,f,g,h;e=document.createElement("form"),e.method="POST",e.style.display="none",e.action=a,e.target=b+(new Date).getTime();for(g in c)f=document.createElement("input"),f.type="hidden",f.name=g,f.value=c[g],e.appendChild(f);d=document.querySelector("body"),d.appendChild(e),h=window.open("somenonexistantpathtonowhere",b),e.submit(),d.removeChild(e),h.close()}}).call(this)},{}],95:[function(a,b,c){(function(){var c,d;d=a("underscore"),c=function(a){var b;return d.object(function(){var c,d,e;for(e=[],c=0,d=a.length;c<d;c++)b=a[c],e.push(b.split("=").map(decodeURIComponent));return e}())},b.exports=function(a){var b,d,e,f,g;return g=a.split("?"),b=g[0],f=g[1],d=f.split("&"),e=c(d),{URL:b,params:e}}}).call(this)},{underscore:262}],96:[function(a,b,c){(function(){var c,d;d=a("underscore"),c=function(a,b){return a.toLowerCase().indexOf(b)>=0},b.exports=function(a){return function(b,e){var f,g,h,i,j;return g=null!=(i=null!=b&&null!=(j=b.toLowerCase())?j.split(" "):void 0)?i:[],f=function(a){var b,e,f;return f=a.path,b=a.item,e=a.name,d.all(g,function(a){return null==f&&(f=b),c(f.toString(),a)||c(e,a)})},e(null!=a.each?a.map(function(a){return a.toJSON()}).filter(f):function(){var b,c,d;for(d=[],b=0,c=a.length;b<c;b++)h=a[b],f(h)&&d.push(h);return d}())}}}).call(this)},{underscore:262}],97:[function(a,b,c){(function(){var c,d,e,f;f=a("underscore"),d=a("es6-promise").Promise,c={},e=function(a){return function(b){var c,d,e,g,h,i,j;for(h=f.zip(a,b),j=[],e=0,g=h.length;e<g;e++)i=h[e],d=i[0],c=i[1],j.push({path:d,name:c});return j}},b.exports=function(a,b){var f,g,h,i;return(f=a.service.root+":"+a.root+":"+b)in c?c[f]:(i=function(){var c,d,e,f;for(e=a.getPossiblePaths(b),f=[],c=0,d=e.length;c<d;c++)h=e[c],f.push(a.makePath(h));return f}(),i=i.filter(function(a){var b;return!("id"===(null!=(b=a.end)?b.name:void 0))}),g=function(){var a,b,c;for(c=[],a=0,b=i.length;a<b;a++)h=i[a],c.push(h.getDisplayName());return c}(),null!=c[f]?c[f]:c[f]=d.all(g).then(e(i)))}}).call(this)},{"es6-promise":238,underscore:262}],98:[function(a,b,c){(function(){var a;a=function(){function a(a){this.wrapped=a,this.root=this.wrapped.root,this._foundById={},this._counts={}}return a.prototype.fetchModel=function(){return this.wrapped.fetchModel()},a.prototype.findById=function(a,b,c){var d,e;return null!=(d=this._foundById)[e=a+":"+b+":"+c]?d[e]:d[e]=this.wrapped.findById(a,b,c)},a.prototype.count=function(a){var b,c;return null!=(b=this._counts)[c=JSON.stringify(a)]?b[c]:b[c]=this.wrapped.count(a)},a.prototype.destroy=function(){return this._foundById={},this._counts={},delete this.wrapped},a}(),b.exports=function(){function b(b,c){this.Preview=c,this.service=new a(b)}return b.prototype.get=function(a){var b,c,d,e;return b=this.Preview,d=this.service,e=a.get("classes"),c=a.get("id"),new b({service:d,model:{types:e,id:c}})},b.prototype.destroy=function(){return this.service.destroy(),delete this.service},b}()}).call(this)},{}],99:[function(a,b,c){(function(){c.fromPairs=function(a){var b;return function(){var c,d,e;for(e=[],c=0,d=a.length;c<d;c++)b=a[c],e.push(b.map(encodeURIComponent).join("="));return e}().join("&")}}).call(this)},{}],100:[function(a,b,c){(function(){var c,d,e,f;a("jquery"),d=a("es6-promise").Promise,c=a("../options"),f=a("./load-resource"),e=function(){return f("Destination.Dropbox.Library","Dropbox")},b.exports=function(a,b,f){return e().then(function(e){return new d(function(d,g){return e.appKey=c.get("auth.dropbox"),e.save({files:[{url:a,filename:b}],success:d,progress:f,cancel:g,error:g})})})}}).call(this)},{"../options":63,"./load-resource":90,"es6-promise":238,jquery:256}],101:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l,m;m=a("underscore"),e=a("es6-promise").Promise,d=a("../options"),c=a("../messages"),g=a("./get-organisms"),f=a("./branding"),i=a("./get-result-class"),j=a("./open-window-with-post"),k=a("./parse-url"),b.exports=l=function(a,b,c){var k,l,n,o,p,q;return k=d.get("Destination.Galaxy"),p=null!=(q=k.Current)?q:k.Main,/tool_runner$/.test(p)||(p+="/tool_runner"),l=f(this.query.service),o=i(this.query),n=g(this.query),e.all([o,n,l]).then(h(a,this.query,this.model.format.ext)).then(m.partial(j,p,"Upload"))},h=function(a,b,e){return function(f){var g,h,i,j,l,n,o,p,q,r,s,t,u,v;return j=f[0],s=f[1],h=f[2],v=k(a),g=v.URL,t=v.params,p=function(){var a,c,d,e;for(d=b.constraints,e=[],a=0,c=d.length;a<c;a++)i=d[a],"IN"===i.op&&e.push(i.value);return e}(),n="tsv"===e?"tabular":e,l=window.location.toString().replace(/\?.*$/,""),u=d.get("Destination.Galaxy.Tool"),q=c.getText("export.galaxy.name",{cls:j,orgs:s,branding:h}),o=c.getText("export.galaxy.info",{query:b,lists:p,orgs:s,currentLocation:l}),null!=s&&(r=s.join(", ")),m.extend(t,{tool_id:u,URL:g,name:q,info:o,data_type:n,organism:r,URL_method:"post"})}},l.after=function(){var a;return a=d.get("Destination.Galaxy"),a.Current&&a.Save?this.query.service.whoami().then(function(b){if(b.preferences["galaxy-url"]!==a.Current)return b.setPreference("galaxy-url",a.Current)}):e.resolve(null)}}).call(this)},{"../messages":16,"../options":63,"./branding":70,"./get-organisms":84,"./get-result-class":86,"./open-window-with-post":94,"./parse-url":95,"es6-promise":238,underscore:262}],102:[function(a,b,c){(function(){var c,d,e,f,g;a("underscore"),d=a("es6-promise").Promise,c=a("../options"),e=a("./query-string").fromPairs,f=function(a,b){var d,f,g;return d=c.get("Destination.GenomeSpace"),f=[["uploadUrl",a],["fileName",b]],g=e(f),d.Upload+"?"+g},g=function(a,b){return new d(function(c,d){var e;return e=window.open(f(a,b)),e.setCallbackOnGSUploadComplete=function(a){return c(a)},e.setCallbackOnGSUploadError=function(a){return console.log("GSERR",arguments),d(new Error("Could not save to "+a))},e.addEventListener("unload",function(){return d(new Error("Upload cancelled"))}),e.focus()})},b.exports=g}).call(this)},{"../options":63,"./query-string":99,"es6-promise":238,underscore:262}],103:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;c=a("jquery"),w=a("underscore"),p=a("es6-promise").Promise,o=a("../options"),u=a("./load-resource"),x=null,l="Destination.Drive.Library",d="-------314159265358979323846",f="\r\n--"+d+"\r\n",e="\r\n--"+d+"--",t="v2",s="https://www.googleapis.com/auth/drive.file",i="No configuration available for Google Drive",m="Content-Type: application/json\r\n\r\n",j="Content-Type: text/tab-separated-values\r\n\r\n",q='multipart/mixed; boundary="'+d+'"',h="/upload/drive/v2/files",g="POST",r={path:h,method:g,params:{uploadType:"multipart"},headers:{"Content-Type":q}},v=function(){return null!=x?x:x=u(l,"gapi").then(function(a){return new k(a)})},b.exports=function(a,b,c){return v().then(function(d){return c(1),d.upload(a,b)})},n=function(){function a(a){this.title=a}return a.prototype.mimetype="text/plain",a.prototype.toString=function(){return JSON.stringify({title:this.title,mimetype:this.mimetype})},a}(),k=function(){function a(a){if(this.gapi=a,!this.gapi)throw new Error("No api");if(!o.get("auth.drive"))throw new Error(i);console.log(this.gapi)}return a.prototype.authorize=function(){return new p(function(a){return function(b,c){var d,e,f,g,h,i;f=a.gapi,i=null,h={client_id:o.get("auth.drive"),scope:s,immediate:!1},g=function(){return f.auth.authorize(h,function(a){return null==a?c(new Error("Not authorized")):a.error?c(new Error(a.error)):b()})},d=function(){return clearTimeout(i),c(new Error("timed out"))},e=function(){var a;return clearTimeout(i),(null!=(a=f.auth)?a.authorize:void 0)?g():i=setTimeout(e,50)},e(),setTimeout(d,5e3)}}(this))},a.prototype.loadClient=function(){return new p(function(a){return function(b,c){return a.gapi.client.load("drive",t,b)}}(this))},a.prototype.makeRequestBody=function(a,b){return f+m+String(a)+f+j+b+e},a.prototype.makeRequest=function(a){return this.gapi.client.request(w.extend({body:a},r))},a.prototype.upload=function(a,b){return this.authorize().then(function(a){return function(){return a.loadClient()}}(this)).then(function(){return p.resolve(c.get(a))}).then(function(a){return function(c){return a.makeRequestBody(new n(b),c)}}(this)).then(function(a){return function(b){return a.makeRequest(b)}}(this)).then(function(a){return a.result.alternateLink})},a}()}).call(this)},{"../options":63,"./load-resource":90,"es6-promise":238,jquery:256,underscore:262}],104:[function(a,b,c){(function(){var c,d,e,f,g,h=[].slice;g=a("underscore"),d=g.compose,e=g.escape,f=a("./ensure-required-data"),c=function(a){return function(){var b;return arguments[0],b=2<=arguments.length?h.call(arguments,1):[],a.apply(null,b)}},b.exports=function(a,b,g,h){return{classes:h,target:a,replaces:b,call:c(d(e,g,f(a,b)))}}}).call(this)},{"./ensure-required-data":80,underscore:262}],105:[function(a,b,c){(function(){var a;a={ASC:"DESC",DESC:"ASC",NONE:"ASC"},b.exports=function(b,c){var d,e,f;return d=null!=(f=b.getSortDirection(c))?f:"NONE",e=a[d],b.orderBy([{path:c,direction:e}])}}).call(this)},{}],106:[function(a,b,c){(function(){b.exports=function(a){if(null!=a)return a=a.replace(/\n\s*\n/g,"\n\n"),a.replace(/(^\s*|\s*$)/g,"")}}).call(this)},{}],107:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j=function(a,b){return function(){return a.apply(b,arguments)}};i=a("underscore"),e=a("../options"),d=a("../messages"),c=a("../icons"),g=a("../templates/mustache-settings"),f="<span class=\"alert alert-info\">\n  {{{ icons.icon('Info') }}}\n  {{ messages.getText('conbuilder.TooManySuggestions') }}\n  There are {{ extra }} values we could not include.\n</span>\n",h=i.template(f,g),b.exports=function(){function a(a,b){var f;this.suggestions=a,this.total=b,this.suggest=j(this.suggest,this),f=e.get("MaxSuggestions"),this.total>f&&(this.tooMany=h({icons:c,messages:d,extra:b-f}))}return a.prototype.tooMany="<span></span>",a.prototype.suggest=function(a,b){var c,d,e,f,g;return null==a||""===a?b(function(){var a,b,c,d;for(c=this.suggestions.slice(0,10),d=[],a=0,b=c.length;a<b;a++)e=c[a],d.push(e);return d}.call(this)):(d=null!=(f=null!=a&&null!=(g=a.toLowerCase())?g.split(" "):void 0)?f:[],c=function(a){var b;return b=a.item,null==b&&(b=""),i.all(d,function(a){return b.toLowerCase().indexOf(a)>=0})},b(function(){var a,b,d,f;for(d=this.suggestions,f=[],a=0,b=d.length;a<b;a++)e=d[a],c(e)&&f.push(e);return f}.call(this)))},a}()}).call(this)},{"../icons":14,"../messages":16,"../options":63,"../templates/mustache-settings":69,underscore:262}],108:[function(a,b,c){(function(){var b,d,e,f,g,h,i=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};g=a("es6-promise").Promise,e=a("../options"),f=a("../models/page"),d={},b=g.resolve(!0),c.getCache=function(a){var b,c,e;return c=a.toXML(),b=a.service.root,null!=d[e=b+":"+c]?d[e]:d[e]=new h(a)},c.onListChange=function(a){var b,c;for(c in d)b=d[c],i.call(listNamesFor(b.query),a)>=0&&b.dropRows();return!1},h=function(){function a(a){this.query=a.clone()}return a.prototype.offset=0,a.prototype.rows=null,a.prototype.toString=function(){var a;return(null!=(a=this.rows)?a.length:void 0)?"ResultCache("+this.offset+" .. "+(this.offset+this.rows.length)+")":"ResultCache(EMPTY)"},a.prototype.fetchRows=function(a,b){var c,d;return null==a&&(a=0),null==b&&(b=null),c=new f(a,b),d=this.updateCache(c),d.then(function(a){return function(){return a.getRows(c)}}(this))},a.prototype.updateCache=function(a){var c;return this.contains(a)?b:(c=this.getRequestPage(a),this.query.tableRows({start:c.start,size:c.size}).then(this.addRowsToCache(c)))},a.prototype.contains=function(a){var b,c;return b=this.rows,!(null==b||!b.length)&&(c=this.offset+b.length,!a.all()&&a.start>=this.offset&&a.end()<=c)},a.prototype.dropRows=function(){return this.rows=null,this.offset=0},a.prototype.getRequestPage=function(a){var b,c,d,g,h,i,j,k;return b=this.rows,c=e.get("TableResults.CacheFactor"),g=e.get("TableResults.RequestLimit"),i=a.all()?a.size:a.size*c,null==b?new f(a.start,i):(k=this.offset+b.length,j=a.all()||a.start>=this.offset?a.start:Math.max(0,a.start-i),h=new f(j,i),
h.isBefore(this.offset)?(d=h.rightGap(this.offset),d+h.size>g?this.dropRows():h.size+=d):h.isAfter(k)&&(d=h.leftGap(k),d+h.size>g?this.dropRows():(h.size+=d,h.start=k)),h)},a.prototype.addRowsToCache=function(a){return function(b){return function(c){var d,e,f;if(d=b.rows,e=b.offset,null!=d){if(f=b.offset+d.length,a.start<e){if(a.end()<e)throw new Error("Cannot add "+a+" to "+b+" - non contiguous");d=a.all()||a.end()>f?c.slice():c.concat(d.slice(a.end()-e))}else{if(a.start>f)throw new Error("Cannot add "+a+" to "+b+" - non contiguous");a.all()||f<a.end()?d=d.slice(0,a.start-e).concat(c):console.error("Useless cache add - we already had these rows: "+a)}e=Math.min(e,a.start)}else d=c.slice(),e=a.start;return b.offset=e,b.rows=d,!0}}(this)},a.prototype.getRows=function(a){var b,c,d;if(d=a.start,c=a.size,null==this.rows)throw new Error("Cache has not been updated");return b=this.rows.slice(),b.splice(0,d-this.offset),null!=c&&c>0&&b.splice(c,b.length),b},a}(),c.ResultCache=h}).call(this)},{"../models/page":54,"../options":63,"es6-promise":238}],109:[function(a,b,c){(function(){b.exports=function(a){return a.getDisplayName().then(function(b){return{path:a.toString(),name:b}})}}).call(this)},{}],110:[function(a,b,c){(function(c){(function(){var d,e,f,g,h=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};f=a("es6-promise").Promise,d=a("../cdn"),e={},g=function(a,b){return h.call(c,b)>=0?f.resolve(c[b]):d.load(a).then(function(){return c[b]},console.error.bind(console))},b.exports=function(a,b,c){return(null!=e[a]?e[a]:e[a]=g(a,b)).then(c)}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../cdn":1,"es6-promise":238}],111:[function(a,b,c){b.exports=""},{}],112:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},r={}.hasOwnProperty,s=function(a,b){function c(){this.constructor=a}for(var d in b)r.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};o=a("underscore"),a("jquery"),a("es6-promise").Promise,p=a("imjs"),j=p.Query,i=p.Model,f=a("../core-model"),h=a("../messages"),k=a("../templates"),g=a("../icons"),a("../options"),l=a("../core-view"),e=a("./constraint-summary"),c=a("./constraint-editor"),h.setWithPrefix("conbuilder",{Add:"Add constraint",Update:"Update",Cancel:"Cancel",Remove:"Remove",EditCon:"Edit filter",NotEditable:"This constraint is not editable",ValuePlaceholder:"David*",ExtraPlaceholder:"Wernham-Hogg",ExtraLabel:"in",IsA:"is a",NoValue:"No value selected. Please enter a value.",NoOperator:"No operator selected. Please choose an operator.",BadLoop:"The selected path is not in the query.",NaN:"The value provided is not a number.",Duplicate:"This constraint is already on the query",TooManySuggestions:"We cannot show you all the possible values",NoSuitableLists:"No lists of this type are available",NoSuitableLoops:"No suitable loop paths were found"}),m=function(a,b){var c,d,e;return!a&&!b||!(!a||!b)&&(e=o.sortBy([a,b],function(a){return a.length}),d=e[0],c=e[1],o.all(c,function(a){return q.call(d,a)>=0}))},n=function(a,b){var c,d,e,f,g,h,i,j,k;if(!a||!b)return a===b;for(d=o.union.apply(o,[a,b].map(o.keys)),e=!0,i=0,j=d.length;i<j;i++)c=d[i],k=function(){var d,e,f,g;for(f=[a,b],g=[],d=0,e=f.length;d<e;d++)h=f[d],g.push(h[c]);return g}(),f=k[0],g=k[1],e&&(e=o.isArray(f)?m(f,g):f===g);return e},d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return s(b,a),b.prototype.defaults=function(){return{code:null}},b.prototype.isTypeConstraint=function(){return null==this.get("op")},b}(f),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}var f;return s(b,a),b.prototype.Model=d,b.prototype.tagName="div",b.prototype.className="im-constraint row-fluid",b.prototype.parameters=["query","constraint"],b.prototype.optionalParameters=["buttonDelegate"],b.prototype.initialize=function(){var a;b.__super__.initialize.apply(this,arguments),this.model.set(this.constraint),this.state.set({editing:!1}),this.listenTo(this.state,"change:editing",this.toggleEditor),this.listenTo(this.model,"change:type",this.setTypeName),this.listenTo(this.model,"change:path",this.setDisplayName),this.listenTo(h,"change",this.reRender),this.listenTo(this.model,"cancel",this.cancelEditing),this.listenTo(this.model,"apply",this.applyChanges);try{this.model.set({path:this.query.makePath(this.constraint.path)})}catch(b){a=b,this.model.set({error:a}),this.state.set({editing:!0})}return this.setTypeName()},b.prototype.setDisplayName=function(){return this.model.get("path").getDisplayName(function(a){return function(b,c){if(a.model.set({error:b,displayName:c}),null!=b)return a.listenToOnce(a.query,"change:constraints",function(){return a.model.set({path:a.query.getPathInfo(a.constraint.path)}),a.setDisplayName()})}}(this))},b.prototype.cancelEditing=function(){return this.state.set({editing:!1}),this.model.set(o.omit(this.constraint,"path")),this.model.set({error:null})},b.prototype.toggleEditing=function(){return this.state.get("editing")?this.cancelEditing():this.state.set({editing:!0})},b.prototype.setTypeName=function(){var a,b;if(null==(b=this.model.get("type")))return this.model.unset("typeName");try{return this.query.model.makePath(b).getDisplayName(function(a){return function(b,c){return a.model.set({error:b,typeName:c})}}(this))}catch(c){return a=c,this.model.set({error:a,typeName:b})}},b.prototype.events=function(){return{"click .im-edit":"toggleEditing","click .im-remove-constraint":"removeConstraint"}},f=/^\s*$/,b.prototype.getLoopProblem=function(a){var b;return function(){try{return this.query.getPathInfo(a.value),null}catch(a){return b=a,"BadLoop"}}.call(this)},b.prototype.getValueProblem=function(a){var b,c,d;return b=a.path,a.op,c=a.value,null==c||f.test(c)?"NoValue":(d=b.getType(),q.call(i.NUMERIC_TYPES,d)>=0&&o.isNaN(1*c)?"NaN":null)},b.prototype.getProblem=function(a){var b,c;return null!=a.type?null:!a.op||f.test(a.op)?"NoOperator":!a.path.isReference()||"="!==(b=a.op)&&"!="!==b?(c=a.op,q.call(j.ATTRIBUTE_VALUE_OPS.concat(j.REFERENCE_OPS),c)>=0?this.getValueProblem(a):this.isDuplicate(a)?"Duplicate":null):this.getLoopProblem(a)},b.prototype.isDuplicate=function(a){return o.any(this.query.constraints,o.partial(n,a))},b.prototype.setError=function(a){var b;return b=h.get("conbuilder."+a),this.model.set({error:b})},b.prototype.applyChanges=function(a){var b;return null!=(b=this.getProblem(a))?this.setError(b):(this.state.set({editing:!1}),this.removeConstraint(null,!0),null==a.values||a.values.length?(a.path=a.path.toString(),this.query.addConstraint(a),this.constraint=a,this.model.unset("new")):this.query.trigger("change:constraints"))},b.prototype.removeConstraint=function(a,b){if(null==b&&(b=!1),null!=a&&a.preventDefault(),null!=a&&a.stopPropagation(),this.model.get("new")||this.query.removeConstraint(this.constraint,b),null!=a)return this.remove()},b.prototype.getData=function(){var a,b,c;return c=h,b=g,a=this.model.toJSON(),{icons:b,messages:c,con:a}},b.prototype.template=k.template("active-constraint",{variable:"data"}),b.prototype.toggleEditor=function(){var a;return this.state.get("editing")&&this.rendered?(a={model:this.model,query:this.query,buttonDelegate:this.buttonDelegate},this.renderChild("editor",new c(a),this.$(".im-constraint-editor"))):this.removeChild("editor")},b.prototype.renderSummary=function(){var a;return a={model:this.model},this.renderChild("summary",new e(a),this.$(".im-con-overview"))},b.prototype.postRender=function(){return this.renderSummary(),this.toggleEditor(),this.$("[title]").tooltip()},b}(l)}).call(this)},{"../core-model":2,"../core-view":3,"../icons":14,"../messages":16,"../options":63,"../templates":67,"./constraint-editor":129,"./constraint-summary":130,"es6-promise":238,imjs:247,jquery:256,underscore:262}],113:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x={}.hasOwnProperty,y=function(a,b){function c(){this.constructor=a}for(var d in b)x.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},z=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};c=a("jquery"),u=a("underscore"),l=a("es6-promise").Promise,h=a("../messages"),o=a("../templates"),d=a("../core-view"),k=a("../options"),j=a("../core/nested-model"),p=a("../utils/branding"),g=a("../patterns").IS_BLANK,e=a("../mixins/has-typeaheads"),n=a("../utils/suggestion-source"),v=a("imjs"),w=v.Model,f=w.INTEGRAL_TYPES,i=w.NUMERIC_TYPES,m=v.Query,s=o.template("attribute_value_select"),t=function(a){return String(a).replace(/^\s+/,"").replace(/\s+$/,"")},r=function(a){return 1*t(a)},q=a("../templates/helpers").numToString,h.set({"constraintvalue.NoValues":"There are no possible values. This query returns no results","constraintvalue.OneValue":"There is only one possible value: <%- value %>. You might want to remove this constraint"}),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return y(b,a),b.include(e),b.prototype.className="im-attribute-value-controls",b.prototype.template=o.template("attribute_value_controls"),b.prototype.getData=function(){return u.extend(this.getBaseData(),{messages:h,con:this.model.toJSON()})},b.prototype.initialize=function(a){var c;if(this.query=a.query,b.__super__.initialize.apply(this,arguments),this.sliders=[],this.branding=new j,this.cast=(c=this.model.get("path").getType(),z.call(i,c)>=0?r:t),this.listenTo(h,"change",this.reRender),this.state.set({valuePlaceholder:h.getText("conbuilder.ValuePlaceholder")}),this.listenTo(this.branding,"change:defaults.value",function(){return this.state.set({valuePlaceholder:this.branding.get("defaults.value")})}),null!=this.query)return this.listenTo(this.query,"change:constraints",this.clearCachedData),this.listenTo(this.query,"change:constraints",this.reRender),p(this.query.service).then(function(a){return function(b){return a.branding.set(b)}}(this))},b.prototype.modelEvents=function(){return{destroy:function(){return this.stopListening()},"change:value":this.onChangeValue,"change:op":this.onChangeOp}},b.prototype.stateEvents=function(){return{"change:valuePlaceholder":this.reRender}},b.prototype.onChangeOp=function(){var a;return a=this.model.get("op"),null!=this.model.get("value")&&z.call(m.MULTIVALUE_OPS,a)>=0&&this.model.set({value:null,values:[this.model.get("value")]}),this.reRender()},b.prototype.onChangeValue=function(){return this.reRender()},b.prototype.removeAllChildren=function(){return this.removeTypeAheads(),this.removeSliders(),b.__super__.removeAllChildren.apply(this,arguments)},b.prototype.removeSliders=function(){var a,b;for(b=[];a=this.sliders.pop();)try{a.slider("destroy"),b.push(a.remove())}catch(a){}return b},b.prototype.events=function(){return{"change .im-con-value-attr":"setAttributeValue"}},b.prototype.updateInput=function(){var a,b;return a=null!=(b=this.lastTypeahead())?b:this.$(".im-con-value-attr"),a.val(this.model.get("value"))},b.prototype.readAttrValue=function(){var a,b;a=(null!=(b=this.lastTypeahead())?b:this.$(".im-con-value-attr")).val();try{return null==a||g.test(a)?null:this.cast(a)}catch(b){return b,this.model.set({error:new Error(a+" might not be a legal value for "+this.path)}),a}},b.prototype.setAttributeValue=function(){return this.model.set({value:this.readAttrValue()})},b.prototype.postRender=function(){return this.provideSuggestions().then(null,function(a){return function(b){return a.model.set({error:b})}}(this)),this.$(".im-con-value-attr").focus()},b.prototype.provideSuggestions=function(){return this.getSuggestions().then(function(a){return function(b){var c,d,e;return e=b.stats,d=b.results,0===e.uniqueValues?(c=h.getText("constraintvalue.NoValues"),a.model.set({error:{message:c,level:"warning"}})):1===e.uniqueValues?(c=h.getText("constraintvalue.OneValue",{value:d[0].item}),a.model.set({error:{message:c,level:"warning"}})):null!=e.max?a.handleNumericSummary(e):null!=d[0].item?a.handleSummary(d,e.uniqueValues):void 0}}(this))},b.prototype.clearCachedData=function(){return delete this.__suggestions,this.model.unset("error")},b.prototype.getSuggestions=function(){return null!=this.__suggestions?this.__suggestions:this.__suggestions=function(a){return function(){var b,c,d,e,f;return a.model.get("path")?(c=a.query.clone(),f=a.model.get("value"),e=String(a.model.get("path")),d=k.get("MaxSuggestions"),c.constraints=function(){var a,d,g,h;for(g=c.constraints,h=[],a=0,d=g.length;a<d;a++)b=g[a],b.path===e&&b.value===f||h.push(b);return h}(),c.summarise(e,d)):l.reject(new Error("no path"))}}(this)()},b.prototype.replaceInputWithSelect=function(a){var b;return this.model.has("value")?null==(b=this.model.get("value"))||u.any(a,function(a){return a.item===b})||a.push({item:b}):this.model.set({value:a[0].item}),this.$el.html(s({Messages:h,items:a,value:b}))},b.prototype.handleSummary=function(a,b){var c,d,e,f,g,h;return("="===(h=this.model.get("op"))||"!="===h)&&a.length<k.get("DropdownMax")?this.replaceInputWithSelect(a):(e=this.$(".im-con-value-attr"),g=new n(a,b),f={minLength:0,highlight:!0},c={name:"summary_suggestions",source:g.suggest,displayKey:"item",templates:{footer:g.tooMany}},this.removeTypeAheads(),d=function(a){return function(b,c){return a.model.set({value:c.item})}}(this),this.activateTypeahead(e,f,c,a[0].item,d,function(a){return function(){return a.setAttributeValue()}}(this)))},b.prototype.clearer='<div class="" style="clear:both;">',b.prototype.getMarkers=function(a,b,c){var d,e,f,g,h,i,j,k;for(g=b-a,f=function(b){var d;return d=b*g+a,c?Math.round(d):d},e=function(a){return Math.round(100*a)},j=[0,.5,1],k=[],h=0,i=j.length;h<i;h++)d=j[h],k.push({percent:e(d),value:q(f(d))});return k},b.prototype.makeSlider=o.template("slider",{variable:"markers"}),b.prototype.handleNumericSummary=function(a){var b,d,e,g,h,i,j,k,l,m,n,o;return l=a.min,k=a.max,d=a.average,m=this.model.get("path"),o=m.getType(),i=z.call(f,o)>=0,n=i?1:k-l/100,e=i?function(a){return parseInt(a,10)}:parseFloat,g=this.$el,h=this.$("input"),g.append(this.clearer),j=this.getMarkers(l,k,i),this.removeSliders(),h.off("change.slider"),b=c(this.makeSlider(j)),b.appendTo(g).slider({min:l,max:k,value:this.model.has("value")?this.model.get("value"):e(d),step:n,slide:function(a,b){return h.val(b.value).change()}}),h.attr({placeholder:e(d)}),g.append(this.clearer),h.on("change.slider",function(a){return b.slider("value",e(h.val()))}),this.sliders.push(b)},b.prototype.remove=function(){return b.__super__.remove.apply(this,arguments),this.removeTypeAheads()},b}(d)}).call(this)},{"../core-view":3,"../core/nested-model":8,"../messages":16,"../mixins/has-typeaheads":32,"../options":63,"../patterns":64,"../templates":67,"../templates/helpers":68,"../utils/branding":70,"../utils/suggestion-source":107,"es6-promise":238,imjs:247,jquery:256,underscore:262}],114:[function(a,b,c){(function(){var c,d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};f=a("underscore"),a("../messages"),c=a("../core-view"),a("../options"),e=a("../templates/mustache-settings"),d="<button class=\"btn btn-default im-true {{ (value === true) ? ' active' : void 0 }}\">\n  True\n</button>\n<button class=\"btn btn-default im-false {{ (value === false) ? ' active' : void 0 }}\">\n  False\n</button>\n",b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.className="im-value-options btn-group",b.prototype.modelEvents=function(){return{change:this.reRender}},b.prototype.getData=function(){return f.extend({value:null},b.__super__.getData.apply(this,arguments))},b.prototype.template=f.template(d,e),b.prototype.events=function(){return{"click .im-true":"setValueTrue","click .im-false":"setValueFalse"}},b.prototype.setValueTrue=function(){return this.model.set({value:!0})},b.prototype.setValueFalse=function(){return this.model.set({value:!1})},b}(c)}).call(this)},{"../core-view":3,"../messages":16,"../options":63,"../templates/mustache-settings":69,underscore:262}],115:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};i=a("underscore"),d=a("../core-view"),a("../messages"),g=a("../options"),h=a("../templates"),c=a("../models/code-gen"),e=a("./code-gen-dialogue"),a("../messages/code-gen"),f=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return k(b,a),b.prototype.modelEvents=function(){return{"change:lang":this.reRender}},b.prototype.template=h.template("code-gen-button-main"),b}(d),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return k(b,a),b.prototype.parameters=["query","tableState"],b.prototype.Model=c,b.prototype.template=h.template("code-gen-button"),b.prototype.getData=function(){return i.extend(b.__super__.getData.apply(this,arguments),{options:g.get("CodeGen")})},b.prototype.renderChildren=function(){return this.renderChildAt(".im-show-code-gen-dialogue",new f({model:this.model}))},b.prototype.events=function(){return{"click .dropdown-menu.im-code-gen-langs li":"chooseLang","click .im-show-code-gen-dialogue":"showDialogue"}},b.prototype.chooseLang=function(a){var b;return b=this.$(a.target).closest("li").data("lang"),this.model.set({lang:b}),this.showDialogue()},b.prototype.showDialogue=function(){var a,b;return b=this.tableState.pick("start","size"),a=new e({query:this.query,model:this.model,page:b}),this.renderChild("dialogue",a),a.show()},b}(d)}).call(this)},{"../core-view":3,"../messages":16,"../messages/code-gen":18,"../models/code-gen":38,"../options":63,"../templates":67,"./code-gen-dialogue":116,underscore:262}],116:[function(a,b,c){(function(c){(function(){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},B={}.hasOwnProperty,C=function(a,b){function c(){this.constructor=a}for(var d in b)B.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};z=a("underscore"),o=a("es6-promise").Promise,l=a("./modal"),k=a("../messages"),n=a("../options"),p=a("../templates"),g=a("../models/code-gen"),f=a("../core/checkbox"),a("../messages/code-gen"),t=a("../utils/indent-xml"),v=a("../utils/strip-extra-whitespace"),y=a("../utils/with-cdn-resource"),m=/\s*#.*$/gm,e=/\/\*(\*(?!\/)|[^*])*\*\//gm,q="application/xml;charset=utf8",i="text/javascript;charset=utf8",h="text/html;charset=utf8",d={level:"Info",key:"codegen.CannotExportXML"},j={js:i,xml:q,html:h},x=z.partial(y,"prettify","prettyPrintOne"),w=z.partial(y,"filesaver","saveAs"),r=o.reject("Requirements not met"),u=function(a){var b,c;return z.object(function(){var d;d=[];for(b in a)(c=a[b])&&0!==c.length&&d.push([b,c]);return d}())},s=function(){var a;return a=!1,A.call(c,a)>=0?r:w(z.identity)},b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return C(b,a),b.prototype.Model=g,b.prototype.parameters=["query"],b.prototype.optionalParameters=["page"],b.prototype.page={start:0,size:n.get("DefaultPageSize")},b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.generateCode(),this.setExportLink()},b.prototype.modalSize=function(){return"lg"},b.prototype.title=function(){return k.getText("codegen.DialogueTitle",{query:this.query,lang:this.model.get("lang")})},b.prototype.primaryIcon=function(){return"Download"},b.prototype.primaryAction=function(){return k.getText("codegen.PrimaryAction")},b.prototype.body=p.template("code_gen_body"),b.prototype.invariants=function(){return{hasQuery:"No query"}},b.prototype.hasQuery=function(){return null!=this.query},b.prototype.modelEvents=function(){return{change:this.onChangeLang,"change:showBoilerPlate":this.reRenderBody,"change:highlightSyntax":this.reRenderBody}},b.prototype.stateEvents=function(){return{"change:generatedCode":this.reRenderBody}},b.prototype.events=function(){return z.extend(b.__super__.events.apply(this,arguments),{"click .dropdown-menu.im-code-gen-langs li":"chooseLang"})},b.prototype.getBoilerPlateRegex=function(){if(!this.model.get("showBoilerPlate"))switch(this.model.get("lang")){case"pl":case"py":case"rb":return m;case"java":case"js":return e;default:return null}},b.prototype.act=function(){var a,b,c,d;return c=this.model.get("lang"),"js"===c&&this.model.get("extrajs")&&(c="html"),a=new Blob([this.state.get("generatedCode")],{type:j[c]}),b=(null!=(d=this.query.name)?d:"name")+"."+c,w(function(c){return function(c){return c(a,b)}}())},b.prototype.onChangeLang=function(){var a;return a=this.model.get("lang"),this.$(".im-current-lang").text(k.getText("codegen.Lang",{lang:a})),this.$(".modal-title").text(this.title()),"js"===a||"xml"===a?s().then(function(a){return function(){return a.state.unset("error")}}(this)).then(null,function(a){return function(){return a.state.set({error:d})}}(this)):this.state.unset("error"),this.generateCode(),this.setExportLink()},b.prototype.generateCode=function(){var a;switch(a=this.model.get("lang")){case"xml":return this.state.set({generatedCode:this.generateXML()});case"js":return this.state.set({generatedCode:this.generateJS()});default:return this.getCodeFromCache(a)}},b.prototype.getCodeFromCache=function(a){var b,c;return null==this.cache&&(this.cache={}),null!=(null!=(c=this.cache)?c[a]:void 0)?this.state.set({generatedCode:this.cache[a]}):(b={query:this.query.toXML(),lang:a,date:Date.now()},this.query.service.post("query/code?cachebuster="+Date.now(),b).then(function(b){return function(c){return b.cache[a]=c.code,b.state.set({generatedCode:c.code})}}(this)))},b.prototype.generateXML=function(){return t(this.query.toXML())},b.prototype.generateJS=function(){var a,b,c,d;return d=p.template("code-gen-js"),c=u(this.query.toJSON()),a=n.get("CDN.server")+n.get(["CDN","imtables"]),b={service:this.query.service,query:c,page:this.page,asHTML:this.model.get("extrajs"),imtablesJS:a+"imtables.js",imtablesCSS:a+"main.sandboxed.css"},d(b)},b.prototype.setExportLink=function(){var a;switch(a=this.model.get("lang")){case"xml":case"js":return this.state.set({exportLink:null});default:return this.state.set({exportLink:this.query.getCodeURI(a)})}},b.prototype.reRenderBody=function(){if(this.rendered)return this.$(".modal-body").html(this.body(this.getData())),this.trigger("rendered",this.rendered)},b.prototype.postRender=function(){return b.__super__.postRender.apply(this,arguments),this.addCheckboxes(),this.highlightCode(),this.setMaxHeight()},b.prototype.setMaxHeight=function(){var a;return a=Math.max(250,this.$el.closest(".modal").height()-200),this.$(".im-generated-code").css({"max-height":a})},b.prototype.addCheckboxes=function(){var a;if(this.renderChildAt(".im-show-boilerplate",new f({model:this.model,attr:"showBoilerPlate",label:"codegen.ShowBoilerPlate"})),this.renderChildAt(".im-highlight-syntax",new f({model:this.model,attr:"highlightSyntax",label:"codegen.HighlightSyntax"})),a=n.get(["CodeGen","Extra",this.model.get("lang")]))return this.renderChildAt(".im-extra-options",new f({model:this.model,attr:"extra"+this.model.get("lang"),label:a}))},b.prototype.highlightCode=function(){var a,b;if(this.model.get("highlightSyntax")){if(this.model.get("lang"),b=this.$(".im-generated-code"),null==(a=this.getCode()))return;return x(function(c){return b.html(c(z.escape(a)))})}},b.prototype.getData=function(){return z.extend(b.__super__.getData.apply(this,arguments),{options:n.get("CodeGen"),generatedCode:this.getCode()})},b.prototype.getCode=function(){var a,b;return a=this.state.get("generatedCode"),b=this.getBoilerPlateRegex(),b?v(null!=a?a.replace(b,""):void 0):a},b.prototype.toggleShowBoilerPlate=function(){return this.model.toggle("showBoilerPlate")},b.prototype.toggleHighlightSyntax=function(){return this.model.toggle("highlightSyntax")},b.prototype.chooseLang=function(a){var b;return a.stopPropagation(),b=this.$(a.target).closest("li").data("lang"),this.model.set({lang:b})},b}(l)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../core/checkbox":4,"../messages":16,"../messages/code-gen":18,"../models/code-gen":38,"../options":63,"../templates":67,"../utils/indent-xml":88,"../utils/strip-extra-whitespace":106,"../utils/with-cdn-resource":110,"./modal":197,"es6-promise":238,underscore:262}],117:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l,m,n,o,p=function(a,b){return function(){return a.apply(b,arguments)}},q={}.hasOwnProperty,r=function(a,b){function c(){this.constructor=a}for(var d in b)q.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};o=a("underscore"),h=a("./modal"),a("../templates"),g=a("../messages"),d=a("../core/collection"),k=a("../models/path"),e=a("./column-manager/tabs"),m=a("./column-manager/select-list"),n=a("./column-manager/sort-order"),c=a("../models/available-columns"),j=a("../models/order-element"),a("../messages/columns"),f=function(a){function b(){this.model=p(this.model,this),b.__super__.constructor.apply(this,arguments),this.listenTo(this,"change:index",function(){return o.defer(function(a){return function(){return a.sort()}}(this))})}return r(b,a),b.prototype.comparator="index",b.prototype.add=function(){return b.__super__.add.apply(this,arguments)},b.prototype.modelFactory=d.prototype.model,b.prototype.model=function(a){var b,c;return b=this.size(),c=new this.modelFactory(a),c.collection=this,c.set({index:b}),c},b}(d),l=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return r(b,a),b.prototype.modelFactory=k,b}(f),i=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return r(b,a),b.prototype.modelFactory=j,b}(f),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return r(b,a),b.prototype.parameters=["query"],b.prototype.modalSize=function(){return"lg"},b.prototype.className=function(){return b.__super__.className.apply(this,arguments)+" im-column-manager"},b.prototype.title=function(){return g.getText("columns.DialogueTitle")},b.prototype.primaryAction=function(){return g.getText("columns.ApplyChanges")},b.prototype.dismissAction=function(){return g.getText("Cancel")},b.prototype.act=function(){var a,b,c,d;if(!this.state.get("disabled"))return d=this.state.pick("viewChanged","orderChanged"),c=d.viewChanged,b=d.orderChanged,c&&!b?this.query.select(this.getCurrentView()):b&&!c?this.query.orderBy(this.getCurrentSortOrder()):(a={silent:!0,events:[]},this.query.select(this.getCurrentView(),a),this.query.orderBy(this.getCurrentSortOrder(),a),this.query.trigger(a.events.join(" "))),this.resolve("changed")},b.prototype.stateEvents=function(){return{"change:currentTab":this.renderTabContent,"change:adding":this.setDisabled}},b.prototype.initialize=function(){var a,d,e,f,g,h,j,k,m,n,o,p,q;for(b.__super__.initialize.apply(this,arguments),this.selectList=new l,this.rubbishBin=new l,this.sortOrder=new i,this.availableColumns=new c,n=this.query.views,f=0,j=n.length;f<j;f++)e=n[f],this.selectList.add(this.query.makePath(e));for(o=this.query.sortOrder,g=0,k=o.length;g<k;g++)p=o[g],d=p.path,a=p.direction,this.sortOrder.add({direction:a,path:this.query.makePath(d)});for(q=this.getRelevantPaths(),h=0,m=q.length;h<m;h++)d=q[h],this.sortOrder.get(d.toString())||this.availableColumns.add(d,{sort:!1});return this.availableColumns.sort(),this.listenTo(this.selectList,"sort add remove",this.setDisabled),this.listenTo(this.sortOrder,"sort add remove",this.setDisabled)},b.prototype.getRelevantPaths=function(){return o.chain(this.query.getQueryNodes()).filter(function(a){return function(b){return!a.query.isOuterJoined(b)}}(this)).map(function(a){var b,c,d,e,f;for(e=a.getChildNodes(),f=[],c=0,d=e.length;c<d;c++)b=e[c],b.isAttribute()&&"id"!==b.end.name&&f.push(b);return f}).flatten().value()},b.prototype.getCurrentView=function(){return this.selectList.pluck("path")},b.prototype.getCurrentSortOrder=function(){return this.sortOrder.map(function(a){return a.asOrderElement()})},b.prototype.setDisabled=function(){var a,b,c,d,e,f;return this.state.get("adding")?this.state.set({disabled:!0}):(b=this.getCurrentView().join(" "),d=this.query.views.join(" "),a=this.sortOrder.map(function(a){return a.toOrderString()}).join(" "),c=this.query.getSorting(),f=b===d,e=a===c,this.state.set({viewChanged:!f,orderChanged:!e,disabled:f&&e}))},b.prototype.initState=function(){return this.state.set({disabledReason:"columns.NoChangesToApply",disabled:!0,currentTab:e.TABS[0]})},b.prototype.renderTabs=function(){return this.renderChild("tabs",new e({state:this.state}),this.$(".modal-body"))},b.prototype.renderTabContent=function(){var a;if(this.rendered)return a=function(){switch(this.state.get("currentTab")){case"view":return new m({state:this.state,query:this.query,rubbishBin:this.rubbishBin,collection:this.selectList});case"sortorder":return new n({query:this.query,availableColumns:this.availableColumns,collection:this.sortOrder});default:throw new Error("Cannot render "+this.state.get("currentTab"))}}.call(this),this.renderChild("main",a,this.$(".modal-body"))},b.prototype.postRender=function(){return b.__super__.postRender.apply(this,arguments),this.renderTabs(),this.renderTabContent()},b.prototype.remove=function(){return this.selectList.close(),this.rubbishBin.close(),this.sortOrder.close(),this.availableColumns.close(),b.__super__.remove.apply(this,arguments)},b}(h)}).call(this)},{"../core/collection":5,"../messages":16,"../messages/columns":19,"../models/available-columns":36,"../models/order-element":53,"../models/path":56,"../templates":67,"./column-manager/select-list":122,"./column-manager/sort-order":124,"./column-manager/tabs":125,"./modal":197,underscore:262}],118:[function(a,b,c){(function(){var c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=a("underscore"),d=a("./unselected-column"),c=900,b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.parameters=["findActives"],b.prototype.restoreTitle="columns.AddColumnToSortOrder",b.prototype.events=function(){return e.extend(b.__super__.events.apply(this,arguments),{mousedown:"onMouseDown",dragstart:"onDragStart",dragstop:"onDragStop"})},b.prototype.onMouseDown=function(){return this.fixAppendTo()},b.prototype.fixAppendTo=function(){var a,b;return this.$el.draggable("option","appendTo",this.$el.closest(".well")),a=this.$el.closest(".modal").width(),b=a>=c,this.$el.draggable("option","axis",b?null:"y")},b.prototype.onDragStart=function(){return this.state.set({dragged:this.model.get("path")}),this.$el.addClass("ui-dragging")},b.prototype.onDragStop=function(){return this.state.unset("dragged"),this.$el.removeClass("ui-dragging")},b.prototype.postRender=function(){var a,b,d;return b=this.$el.closest(".modal").width(),d=b>=c,a=this.model.collection.indexOf(this.model),this.$el.draggable({axis:d?null:"y",connectToSortable:this.findActives(),helper:"clone",revert:"invalid",opacity:.8,cancel:"i,a,button",zIndex:1e3}),this.$("[title]").tooltip({placement:0===a?"bottom":"top"})},b}(d)}).call(this)},{"./unselected-column":126,underscore:262}],119:[function(a,b,c){(function(){var c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,
a.__super__=b.prototype,a};d=a("../query-dialogue-button"),c=a("../column-manager"),a("../../messages/columns"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.className="im-column-manager-button",b.prototype.longLabel="columns.ManageColumns",b.prototype.shortLabel="columns.ManageColumnsShort",b.prototype.icon="Columns",b.prototype.Dialogue=c,b}(d)}).call(this)},{"../../messages/columns":19,"../column-manager":117,"../query-dialogue-button":206}],120:[function(a,b,c){(function(){var c,d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};g=a("underscore"),c=a("./selected-column"),e=a("../../templates"),d=["column-manager-position-controls","column-manager-order-direction","column-manager-path-name","column-manager-path-remover"],f=function(a){return"ASC"===a?"DESC":"ASC"},b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.removeTitle="columns.RemoveOrderElement",b.prototype.template=e.templateFromParts(d),b.prototype.modelEvents=function(){return g.extend(b.__super__.modelEvents.apply(this,arguments),{"change:direction":this.reRender})},b.prototype.events=function(){return g.extend(b.__super__.events.apply(this,arguments),{"click .im-change-direction":"changeDirection"})},b.prototype.changeDirection=function(){return this.model.swap("direction",f)},b}(c)}).call(this)},{"../../templates":67,"./selected-column":123,underscore:262}],121:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=a("../../core-view"),i=a("../../templates"),f=a("../../options"),h=a("../../models/path-set"),e=a("../../models/open-nodes"),g=a("../path-chooser"),c=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return k(b,a),b.prototype.parameters=["collection","selectList"],b.prototype.template=i.template("column-manager-path-chooser-buttons"),b.prototype.collectionEvents=function(){return{"add remove reset":"reRender"}},b.prototype.events=function(){return{"click .im-add-column":"addColumn","click .im-rearrange-columns":"cancel"}},b.prototype.cancel=function(){return this.trigger("done")},b.prototype.addColumn=function(){var a,b;return b=this.selectList,a=this.collection.paths(),this.cancel(),b.add(a)},b}(d),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return k(b,a),b.prototype.parameters=["query","collection"],b.prototype.template=i.template("column-manager-path-chooser"),b.prototype.initialize=function(){var a;return b.__super__.initialize.apply(this,arguments),this.chosenPaths=new h,this.view=new h(function(){var b,c,d,e;for(d=this.collection.pluck("path"),e=[],b=0,c=d.length;b<c;b++)a=d[b],e.push(this.query.makePath(a));return e}.call(this)),this.openNodes=new e(this.query.getViewNodes())},b.prototype.initState=function(){return this.query.makePath(this.query.root).getDisplayName().then(function(a){return function(b){return a.state.set({rootName:b})}}(this))},b.prototype.stateEvents=function(){return{"change:rootName":"reRender"}},b.prototype.postRender=function(){return this.renderButtons(),this.openPathChooser()},b.prototype.renderButtons=function(){var a;return a=new c({state:this.state,collection:this.chosenPaths,selectList:this.collection}),this.listenTo(a,"done",function(a){return function(){return a.trigger("done")}}(this)),this.renderChildAt(".btn-group",a)},b.prototype.openPathChooser=function(){var a,b;return a={dontSelectView:!0,multiSelect:f.get("ColumnManager.SelectColumn.Multi")},b=new g({model:a,query:this.query,chosenPaths:this.chosenPaths,openNodes:this.openNodes,view:this.view,trail:[]}),this.renderChild("pathChooser",b),this.setPathChooserHeight()},b.prototype.setPathChooserHeight=function(){return this.$(".im-path-chooser").css({"max-height":this.$el.closest(".modal").height()-350})},b.prototype.remove=function(){return this.chosenPaths.close(),this.view.close(),this.openNodes.close(),b.__super__.remove.apply(this,arguments)},b}(d)}).call(this)},{"../../core-view":3,"../../models/open-nodes":52,"../../models/path-set":55,"../../options":63,"../../templates":67,"../path-chooser":201}],122:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l,m={}.hasOwnProperty,n=function(a,b){function c(){this.constructor=a}for(var d in b)m.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};l=a("underscore"),d=a("../../core-view"),g=a("../../templates"),a("../../core/collection"),e=a("../../mixins/handles-dom-resort"),f=a("./selected-column"),h=a("./unselected-column"),c=a("./path-chooser"),j=function(a){return"path_"+a.get("id")},i=function(a){return"expath_"+a.get("id")},k=function(a){return a+1},b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return n(b,a),b.include(e),b.prototype.parameters=["query","collection","rubbishBin"],b.prototype.className="im-select-list-editor",b.prototype.template=g.template("column-manager-select-list"),b.prototype.getData=function(){return l.extend(b.__super__.getData.apply(this,arguments),{hasRubbish:this.rubbishBin.size()})},b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.listenTo(this.rubbishBin,"remove",this.restoreView)},b.prototype.initState=function(){return this.state.set({adding:!1})},b.prototype.collectionEvents=function(){return{remove:"moveToBin","add remove":"reRender"}},b.prototype.events=function(){return{"drop .im-rubbish-bin":"onDragToBin","sortupdate .im-active-view":"onOrderChanged","click .im-add-view-path":"setAddingTrue"}},b.prototype.stateEvents=function(){return{"change:adding":"onChangeMode"}},b.prototype.setAddingTrue=function(){return this.state.set({adding:!0})},b.prototype.onDragToBin=function(a,b){return b.draggable.trigger("binned")},b.prototype.moveToBin=function(a){return this.rubbishBin.add(this.query.makePath(a.get("path"))),this.reIndexFrom(a.get("index"))},b.prototype.reIndexFrom=function(a){var b,c,d,e,f;for(f=[],b=c=a,d=this.collection.size();a<=d?c<=d:c>=d;b=a<=d?++c:--c)f.push(null!=(e=this.collection.at(b))?e.set({index:b}):void 0);return f},b.prototype.restoreView=function(a){return this.collection.add(this.query.makePath(a.get("path")))},b.prototype.onChangeMode=function(){if(this.rendered)return this.state.get("adding")?(this.$(".im-removal-and-rearrangement").hide(),this.$(".im-addition").show(),this.renderPathChooser()):(this.$(".im-removal-and-rearrangement").show(),this.$(".im-addition").hide(),this.removeChild("columnChooser"))},b.prototype.renderPathChooser=function(){var a;return a=new c({query:this.query,collection:this.collection}),this.listenTo(a,"done",function(a){return function(){return a.state.set({adding:!1})}}(this)),this.renderChild("columnChooser",a,this.$(".im-addition"))},b.prototype.onOrderChanged=function(a,b){return null!=b.sender?this.restoreFromBin(b.item):this.onDOMResort()},b.prototype.getInsertPoint=function(a){var b,c,d;return b=a.prev(),c=this.children,d=this.collection.find(function(a){var d;return d=c[j(a)],d.el===b[0]}),null==d?0:d.get("index")+1},b.prototype.getRestoredModel=function(a){return this.rubbishBin.find(function(b){return function(c){var d;return d=b.children[i(c)],(null!=d?d.el:void 0)===a[0]}}(this))},b.prototype.restoreFromBin=function(a){var b,c,d,e,f,g,h,i,l,m;if(e=this.children,g=this.collection.size(),c=this.getInsertPoint(a),null==(i=this.getRestoredModel(a)))return void console.error("could not find model for:",a);if(i.destroy(),c!==g){for(h=function(){var a,b;for(b=[],d=a=c;c<=g?a<g:a>g;d=c<=g?++a:--a)b.push(this.collection.at(d));return b}.call(this),b=this.collection.last(),l=0,m=h.length;l<m;l++)f=h[l],f.swap("index",k);return b.set({index:c}),e[j(b)].$el.insertBefore(e[j(h[0])].el)}},b.prototype.onDOMResort=function(){return this.setChildIndices(j)},b.prototype.postRender=function(){var a,b,c,d,e;return b=this.$(".im-active-view"),a=this.$(".im-removed-view"),c=900,d=this.$el.closest(".modal").width(),e=d>=c,this.collection.each(function(a){return function(b){return b.collection=a.collection}}(this)),this.rubbishBin.each(function(a){return function(b){return b.collection=a.rubbishBin}}(this)),this.collection.each(function(a){return function(c){return a.renderChild(j(c),new f({model:c}),b)}}(this)),this.rubbishBin.each(function(b){return function(c){return b.renderChild(i(c),new h({model:c}),a)}}(this)),b.sortable({placeholder:"im-view-list-placeholder",opacity:.6,cancel:"i,a,button",axis:e?null:"y",appendTo:this.el}),this.$(".im-removed-view").sortable({placeholder:"im-view-list-placeholder",connectWith:b,opacity:.6,cancel:"i,a,button",axis:e?null:"y",appendTo:this.el}),this.$(".im-rubbish-bin").droppable({accept:".im-selected-column",activeClass:"im-can-remove-column",hoverClass:"im-will-remove-column"}),this.onChangeMode()},b.prototype.removeAllChildren=function(){return this.rendered&&(this.$(".im-active-view").sortable("destroy"),this.$(".im-removed-view").sortable("destroy"),this.$(".im-rubbish-bin").droppable("destroy")),b.__super__.removeAllChildren.apply(this,arguments)},b}(d)}).call(this)},{"../../core-view":3,"../../core/collection":5,"../../mixins/handles-dom-resort":31,"../../templates":67,"./path-chooser":121,"./selected-column":123,"./unselected-column":126,underscore:262}],123:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l={}.hasOwnProperty,m=function(a,b){function c(){this.constructor=a}for(var d in b)l.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};k=a("underscore"),d=a("../../core-view"),c=a("../../core/collection"),g=a("../../templates"),e=a("../../models/path"),i=a("../../utils/events").ignore,h=function(a){return a-1},j=function(a){return a+1},f=["column-manager-path-remover","column-manager-position-controls","column-manager-path-name"],b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return m(b,a),b.prototype.Model=e,b.prototype.tagName="li",b.prototype.className="list-group-item im-selected-column",b.prototype.template=g.templateFromParts(f),b.prototype.removeTitle="columns.RemoveColumn",b.prototype.getData=function(){var a;return a=this.model===this.model.collection.last(),k.extend(b.__super__.getData.apply(this,arguments),{removeTitle:this.removeTitle,isLast:a,parts:this.parts.pluck("part")})},b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.parts=new c,this.listenTo(this.parts,"add remove reset",this.reRender),this.resetParts(),this.listenTo(this.model.collection,"sort",this.onCollectionSorted)},b.prototype.modelEvents=function(){return{destroy:this.stopListeningTo,"change:parts":this.resetParts}},b.prototype.stateEvents=function(){return{"change:fullPath":this.setFullPathClass}},b.prototype.onCollectionSorted=function(){return this.reRender()},b.prototype.resetParts=function(){var a,b;return this.parts.reset(function(){var c,d,e,f;for(e=this.model.get("parts"),f=[],a=c=0,d=e.length;c<d;a=++c)b=e[a],f.push({part:b,id:a});return f}.call(this))},b.prototype.postRender=function(){return this.$("[title]").tooltip({container:this.$el})},b.prototype.events=function(){return{"click .im-remove-view":"removeView","click .im-move-up":"moveUp","click .im-move-down":"moveDown",click:"toggleFullPath",binned:"removeView"}},b.prototype.toggleFullPath=function(){return this.state.toggle("fullPath")},b.prototype.moveDown=function(a){var b;return i(a),b=this.model.collection.at(j(this.model.get("index"))),b.swap("index",h),this.model.swap("index",j),this.$el.insertAfter(this.$el.next())},b.prototype.moveUp=function(a){var b;return i(a),b=this.model.collection.at(h(this.model.get("index"))),b.swap("index",j),this.model.swap("index",h),this.$el.insertBefore(this.$el.prev())},b.prototype.setFullPathClass=function(){return this.$el.toggleClass("im-full-path",this.state.get("fullPath"))},b.prototype.removeView=function(a){return i(a),this.model.collection.remove(this.model),this.model.destroy()},b}(d)}).call(this)},{"../../core-view":3,"../../core/collection":5,"../../models/path":56,"../../templates":67,"../../utils/events":81,underscore:262}],124:[function(a,b,c){(function(c){(function(){var d,e,f,g,h,i,j,k,l,m={}.hasOwnProperty,n=function(a,b){function c(){this.constructor=a}for(var d in b)m.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};l=a("underscore"),f=a("../../core-view"),e=a("../../core-model"),i=a("../../templates"),g=a("../../mixins/handles-dom-resort"),d=a("./available-path"),h=a("./order-element"),j=function(a){return"active_"+a.get("id")},k=function(a){return"inactive_"+a.get("id")},b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return n(b,a),b.include(g),b.prototype.parameters=["collection","query","availableColumns"],b.prototype.className="im-sort-order-editor",b.prototype.template=i.template("column-manager-sort-order-editor"),b.prototype.getData=function(){return l.extend(b.__super__.getData.apply(this,arguments),{available:this.availableColumns.size()})},b.prototype.collectionEvents=function(){return{"add remove":this.reRender,sort:this.resortSortOrder,remove:this.makeAvailable}},b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.dragState=new e,this.listenTo(this.availableColumns,"sort add remove",this.resortAvailable),this.listenTo(this.availableColumns,"remove",this.addToSortOrder)},b.prototype.currentSortOrder=function(){return this.collection.map(function(a){return a.get("path")+" "+a.get("direction")}).join(" ")},b.prototype.postRender=function(){return this.resortSortOrder(),this.activateSortables(),this.resortAvailable(),this.setAvailableHeight()},b.prototype.activateSortables=function(){var a,b,c,d;return a=this.$(".im-active-oes"),b=900,c=this.$el.closest(".modal").width(),d=c>=b,this.collection.size()?this.$actives=a.sortable({placeholder:"im-view-list-placeholder",opacity:.6,cancel:"i,a,button",axis:d?null:"y",appendTo:this.el}):this.$droppable=this.$(".im-empty-collection").droppable({accept:".im-selected-column",activeClass:"im-can-add-column",hoverClass:"im-will-add-column"})},b.prototype.removeAllChildren=function(){var a,c;return null!=(a=this.$actives)&&a.sortable("destroy"),null!=(c=this.$droppable)&&c.droppable("destroy"),this.$droppable=null,this.$actives=null,b.__super__.removeAllChildren.apply(this,arguments)},b.prototype.events=function(){return{"drop .im-empty-collection":"addSortElement","sortupdate .im-active-oes":"onDOMResort"}},b.prototype.onDOMResort=function(a,b){var c,d,e;return(e=this.dragState.get("dragged"))?(d=this.availableColumns.findWhere({path:e}),c=b.item.prevAll().length,this.addToSortOrder(d,c),this.dragState.unset("dragged")):this.setChildIndices(j)},b.prototype.makeAvailable=function(a){return this.availableColumns.add(this.query.makePath(a.get("path")))},b.prototype.findAvailable=function(a){return this.availableColumns.find(function(b){return function(c){var d;return(null!=(d=b.children[k(c)])?d.el:void 0)===a}}(this))},b.prototype.addSortElement=function(a,b){var c,d;return c=b.draggable,d=this.findAvailable(c[0]),this.addToSortOrder(d)},b.prototype.addToSortOrder=function(a,b){var c,d,e,f,g,h,i,j;if(f=this.query.makePath(a.get("path")),e={id:String(f),path:f},g=this.collection.size(),a.destroy(),this.collection.add(e),null!=b&&b<g){for(h=this.collection.filter(function(a){return a.get("index")>=b}),c=this.collection.last(),i=0,j=h.length;i<j;i++)d=h[i],d.swap("index",function(a){return a+1});return c.set({index:b})}},b.prototype.resortAvailable=function(){var a;if(this.rendered)return a=c.document.createDocumentFragment(),this.availableColumns.each(function(b){return function(c){return b._renderAvailable(c,a)}}(this)),this.$(".im-available-oes").html(a)},b.prototype._renderAvailable=function(a,b){var c,e,f;return e=k(a),c=function(a){return function(){return a.$actives}}(this),f=new d({model:a,findActives:c,state:this.dragState}),this.renderChild(e,f,b)},b.prototype.resortSortOrder=function(){var a;if(this.rendered)return a=c.document.createDocumentFragment(),this.collection.each(function(b){return function(c){return b.renderChild(j(c),new h({model:c}),a)}}(this)),this.$(".im-active-oes").html(a)},b.prototype.setAvailableHeight=function(){return this.$(".im-rubbish-bin").css({"max-height":Math.max(200,this.$el.closest(".modal").height()-450)})},b.prototype.remove=function(){return this.dragState.destroy(),b.__super__.remove.apply(this,arguments)},b}(f)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../core-model":2,"../../core-view":3,"../../mixins/handles-dom-resort":31,"../../templates":67,"./available-path":118,"./order-element":120,underscore:262}],125:[function(a,b,c){(function(){var c,d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};g=a("underscore"),d=a("../../core-view"),e=a("../../templates"),c=a("../../utils/css-class-set"),f=function(a,b){var d;return d={active:function(){return b.get("currentTab")===a}},d["im-"+a+"-tab"]=!0,new c(d)},b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return i(b,a),b.TABS=["view","sortorder"],b.prototype.template=e.template("column-manager-tabs"),b.prototype.className="im-column-manager-tabs",b.prototype.getData=function(){return g.extend(b.__super__.getData.apply(this,arguments),{classes:this.classSets})},b.prototype.initState=function(){return this.state.set({currentTab:b.TABS[0]})},b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.initClassSets()},b.prototype.stateEvents=function(){return{"change:currentTab":this.reRender}},b.prototype.events=function(){return{"click .im-view-tab":"selectViewTab","click .im-sortorder-tab":"selectSortOrderTab"}},b.prototype.selectViewTab=function(){return this.state.set({currentTab:"view"})},b.prototype.selectSortOrderTab=function(){return this.state.set({currentTab:"sortorder"})},b.prototype.initClassSets=function(){var a,b,c,d,e;for(this.classSets={},d=["view","sortorder"],e=[],b=0,c=d.length;b<c;b++)a=d[b],e.push(function(a){return function(b){return a.classSets[b]=f(b,a.state)}}(this)(a));return e},b}(d)}).call(this)},{"../../core-view":3,"../../templates":67,"../../utils/css-class-set":79,underscore:262}],126:[function(a,b,c){(function(){var c,d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};f=a("underscore"),c=a("./selected-column"),e=a("../../templates"),d=["column-manager-path-name","column-manager-restore-path"],b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.template=e.templateFromParts(d),b.prototype.events=function(){return{"click .im-restore-view":"removeView",click:"toggleFullPath"}},b.prototype.restoreTitle="columns.RestoreColumn",b.prototype.getData=function(){return f.extend(b.__super__.getData.apply(this,arguments),{restoreTitle:this.restoreTitle})},b}(c)}).call(this)},{"../../templates":67,"./selected-column":123,underscore:262}],127:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l,m=[].slice,n={}.hasOwnProperty,o=function(a,b){function c(){this.constructor=a}for(var d in b)n.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};l=a("underscore"),f=a("es6-promise").Promise,h=a("../core-view"),e=a("../options"),g=a("../templates"),c=a("../mixins/has-typeaheads"),d=a("../patterns").IS_BLANK,j=a("../utils/path-suggester"),i=a("../utils/path-suggestions"),k=function(a){var b,c,d,e,f;return b=a.split(" > "),b.length>3?(4<=b.length?m.call(b,0,f=b.length-3):(f=0,[]),c=b[f++],d=b[f++],e=b[f++],"..."+c+" > "+d+" > "+e):a},b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return o(b,a),b.include(c),b.prototype.className="row",b.prototype.initialize=function(a){return this.query=a.query,this.openNodes=a.openNodes,this.chosenPaths=a.chosenPaths,b.__super__.initialize.apply(this,arguments),this.state.set({chosen:[]}),this.listenTo(this.openNodes,"add remove reset",this.reRender),this.listenTo(this.chosenPaths,"add remove reset",this.reRender),this.listenTo(this.chosenPaths,"add remove reset",this.setChosen),this.setChosen(),this.generatePathSuggestions()},b.prototype.modelEvents=function(){return{destroy:this.stopListeningTo,"change:showTree change:allowRevRefs":this.reRender}},b.prototype.stateEvents=function(){return{"change:chosen change:suggestions":this.reRender}},b.prototype.pathAcceptable=function(a){var b;return"id"!==(null!=(b=a.end)?b.name:void 0)&&(!!this.model.get("canSelectReferences")||a.isAttribute())},b.prototype.generatePathSuggestions=function(){var a;return a=e.get("SuggestionDepth"),i(this.query,a).then(function(a){return function(b){return a.state.set({suggestions:b.filter(function(b){return a.pathAcceptable(b.path)})})}}(this))},b.prototype.getData=function(){var a,c;return c=this.openNodes.size(),a=this.chosenPaths.size(),l.extend({anyNodesOpen:c,anyNodeChosen:a},this.state.toJSON(),b.__super__.getData.apply(this,arguments))},b.prototype.template=g.template("constraint_adder_options"),b.prototype.render=function(){return b.__super__.render.apply(this,arguments),this.state.has("suggestions")&&this.installTypeahead(),this},b.prototype.installTypeahead=function(){var a,b,c,d,e;return this.removeTypeAheads(),b=this.$(".im-tree-filter"),e=this.state.get("suggestions"),d=j(e),c={minLength:3,highlight:!0},a={name:"path_suggestions",source:d,displayKey:"name"},this.activateTypeahead(b,c,a,e[0].name,function(a){return function(b,c){var d;return d=c.path,a.openNodes.add(d),a.model.get("multiSelect")?a.chosenPaths.add(d):a.chosenPaths.reset([d])}}(this))},b.prototype.events=function(){return{"click .im-collapser":"collapseBranches","change .im-allow-rev-ref":"toggleReverseRefs","change .im-tree-filter":"setFilter","click .im-choose":"toggleShowTree","click .im-approve":"triggerApproval","click .im-clear-filter":"clearFilter"}},b.prototype.triggerApproval=function(){return this.model.trigger("approved")},b.prototype.remove=function(){return this.removeTypeAheads(),b.__super__.remove.apply(this,arguments)},b.prototype.clearFilter=function(){return this.model.set({filter:null}),this.reRender()},b.prototype.setFilter=function(a){var b;return b=a.target.value,this.model.set({filter:d.test(b)?null:b})},b.prototype.collapseBranches=function(){return this.openNodes.reset()},b.prototype.toggleShowTree=function(){return this.model.toggle("showTree")},b.prototype.toggleReverseRefs=function(){return this.model.toggle("allowRevRefs")},b.prototype.setConstraint=function(){return this.model.trigger("approved")},b.prototype.setChosen=function(){var a,b,c;return c=this.chosenPaths.toJSON(),a=f.all(function(){var a,d,e;for(e=[],a=0,d=c.length;a<d;a++)b=c[a],e.push(b.getDisplayName());return e}()),a.then(function(a){var b,c,d,e;for(e=[],c=0,d=a.length;c<d;c++)b=a[c],e.push(k(b));return e}).then(function(a){return function(b){return a.state.set({chosen:b})}}(this),function(a){return console.error(a)})},b}(h)}).call(this)},{"../core-view":3,"../mixins/has-typeaheads":32,"../options":63,"../patterns":64,"../templates":67,"../utils/path-suggester":96,"../utils/path-suggestions":97,"es6-promise":238,underscore:262}],128:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l,m,n={}.hasOwnProperty,o=function(a,b){function c(){this.constructor=a}for(var d in b)n.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},p=function(a,b){return function(){return a.apply(b,arguments)}};a("underscore"),f=a("../messages"),l=a("../templates"),m=a("../core-view"),e=a("../core-model"),k=a("../models/path-set"),i=a("../models/open-nodes"),d=a("./constraint-adder-options"),g=a("./new-constraint"),j=a("./path-chooser"),f.set({"constraints.BrowseForColumn":"Browse for Column","constraints.AddANewFilter":"Add a new filter","constraints.Choose":"Choose","constraints.Filter":"Filter","columns.CollapseAll":"Collapse columns","columns.AllowRevRef":"Allow reverse references"}),c=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return o(b,a),b.prototype.defaults=function(){return{filter:null,showTree:!0,allowRevRefs:!1,canSelectReferences:!0,multiSelect:!1}},b}(e),h=".im-constraint-adder-options",b.exports=function(a){function b(){return this.showTree=p(this.showTree,this),b.__super__.constructor.apply(this,arguments)}return o(b,a),b.prototype.tagName="div",b.prototype.className="im-constraint-adder row-fluid",b.prototype.Model=c,b.prototype.initialize=function(a){var c;return this.query=a.query,this.buttonDelegate=a.buttonDelegate,b.__super__.initialize.apply(this,arguments),this.model.set({root:this.query.getPathInfo(this.query.root)}),this.chosenPaths=new k,this.view=new k(function(){var a,b,d,e;for(d=this.query.views,e=[],a=0,b=d.length;a<b;a++)c=d[a],e.push(this.query.makePath(c));return e}.call(this)),this.openNodes=new i(this.query.getViewNodes()),this.listenTo(this.query,"change:constraints",this.remove)},b.prototype.modelEvents=function(){return{approved:this.handleApproval,"change:showTree":this.toggleTree,"change:constraint":this.onChangeConstraint}},b.prototype.getTreeRoot=function(){return this.model.get("root")},b.prototype.handleApproval=function(){var a,b,c,d;return a=this.chosenPaths.toJSON()[0],null!=a?(c=this.model.get("constraint"),d=a.toString(),(null!=c?c.path:void 0)!==d?(b={path:d},this.model.set({constraint:b}),this.query.trigger("editing-constraint",b)):this.onChangeConstraint()):(console.debug("nothing chosen"),this.model.unset("constraint"))},b.prototype.renderConstraintEditor=function(){var a,b;return a=this.model.get("constraint"),b=new g({buttonDelegate:this.buttonDelegate,query:this.query,constraint:a}),this.renderChild("con",b,this.$(".im-new-constraint")),this.listenTo(b,"remove",function(){return this.model.set({showTree:!0})})},b.prototype.onChangeConstraint=function(){if(this.rendered)return this.model.get("constraint")?(this.model.set({showTree:!1}),this.renderConstraintEditor()):this.removeChild("con")},b.prototype.toggleTree=function(){return this.model.get("showTree")?this.showTree():this.hideTree()},b.prototype.hideTree=function(){return this.trigger("resetting:tree"),this.$(".im-path-finder").removeClass("open"),this.removeChild("tree")},b.prototype.showTree=function(a){var b;return this.trigger("showing:tree"),this.removeChild("con"),b=new j({model:this.model,query:this.query,chosenPaths:this.chosenPaths,openNodes:this.openNodes,view:this.view,trail:[]}),this.$(".im-path-finder").addClass("open"),this.renderChild("tree",b,this.$(".im-path-finder"))},b.prototype.template=l.template("constraint_adder"),b.prototype.renderOptions=function(){var a;return a={model:this.model,openNodes:this.openNodes,chosenPaths:this.chosenPaths,query:this.query},this.renderChild("opts",new d(a),this.$(h))},b.prototype.postRender=function(){return this.renderOptions(),this.toggleTree()},b}(m)}).call(this)},{"../core-model":2,"../core-view":3,"../messages":16,"../models/open-nodes":52,"../models/path-set":55,"../templates":67,"./constraint-adder-options":127,"./new-constraint":199,"./path-chooser":201,underscore:262}],129:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},C={}.hasOwnProperty,D=function(a,b){function c(){this.constructor=a}for(var d in b)C.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};z=a("underscore"),p=a("../messages"),j=a("../icons"),h=a("../core-view"),w=a("./type-value-controls"),e=a("./attribute-value-controls"),r=a("./multi-value-controls"),g=a("./boolean-value-controls"),m=a("./lookup-value-controls"),n=a("./loop-value-controls"),l=a("./list-value-controls"),i=a("./error-message"),A=a("imjs"),t=A.Query,q=A.Model,u=t.REFERENCE_OPS,k=t.LIST_OPS,o=t.MULTIVALUE_OPS,s=t.NULL_OPS,c=t.ATTRIBUTE_OPS,d=t.ATTRIBUTE_VALUE_OPS,q.NUMERIC_TYPES,f=q.BOOLEAN_TYPES,d.concat(s),x='<fieldset class="im-constraint-options form-group row">\n  <label class="col-sm-3 path-label"><%- data.con.displayName %></label>\n  <% if (data.con.op) { %>\n    <div class="im-operator col-sm-3">\n        <select class="form-control im-ops">\n        <option selected><%- data.con.op %></option>\n        <% data.otherOperators.forEach(function (op) { %>\n            <option><%- op %></option>\n        <% }); %>\n        </select>\n    </div>\n  <% } %>\n  <div class="col-sm-6 im-value-options im-value-section">\n  </div>\n</fieldset>\n\n<div class="btn-group im-con-buttons">\n  <% data.buttons.forEach(function (b, i) { %>\n  <button class="btn btn-<%= (i === 0) ? \'primary\' : \'default\' %> <%- b.classes %>">\n    <%- data.messages.getText(b.key) %>\n  </button>\n  <% }); %>\n</div>\n',v=z.template(x,{variable:"data"}),y=function(a){var b,d;if(b=a.path,!(null!=b?b.isReference:void 0))throw new Error("No path or wrong type");return b.isRoot()&&u.concat(t.RANGE_OPS),b.isReference()?u.concat(t.RANGE_OPS).concat(a.new?["ISA"]:[]):(d=b.getType(),B.call(f,d)>=0?["=","!="].concat(s):c)},b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return D(b,a),b.prototype.tagName="div",b.prototype.className="form",b.prototype.parameters=["query","model"],b.prototype.optionalParameters=["buttonDelegate"],b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.path=this.model.get("path")},b.prototype.invariants=function(){return{modelHasPath:"No path found on model"}},b.prototype.modelHasPath=function(){return this.model.get("path")},b.prototype.getType=function(){return this.model.get("path").getType()},b.prototype.modelEvents=function(){return{"change:op change:displayName":this.reRender,destroy:this.stopListening}},b.prototype.events=function(){return{submit:function(a){return a.preventDefault(),a.stopPropagation()},"click .btn-cancel":"cancelEditing","click .btn-primary":"applyChanges","change .im-ops":"setOperator"}},b.prototype.delegateButtonEvents=function(){return this.buttonDelegate.off("click.constraint-editor"),this.buttonDelegate.on("click.constraint-editor",".btn-cancel",function(a){return function(){return a.cancelEditing()}}(this)),this.buttonDelegate.on("click.constraint-editor",".btn-primary",function(a){return function(){return a.applyChanges()}}(this))},b.prototype.setOperator=function(){return this.model.set({op:this.$(".im-ops").val()})},b.prototype.cancelEditing=function(){return this.model.trigger("cancel")},b.prototype.applyChanges=function(a){return null!=a&&a.preventDefault(),null!=a&&a.stopPropagation(),this.model.trigger("apply",this.getConstraint())},b.prototype.getConstraint=function(){var a,b,c;return a=this.model.pick(["path","op","value","values","code","type"]),b=a.op,B.call(o.concat(s),b)>=0&&delete a.value,c=a.op,B.call(d.concat(s),c)>=0&&delete a.values,"ISA"===a.op&&delete a.op,a},b.prototype.getValueControls=function(){return null==this.path?null:this.isNullConstraint()?null:this.isTypeConstraint()?new w({model:this.model,query:this.query}):this.isMultiValueConstraint()?new r({model:this.model,query:this.query}):this.isListConstraint()?new l({model:this.model,query:this.query
}):this.isBooleanConstraint()?new g({model:this.model,query:this.query}):this.isLoopConstraint()?new n({model:this.model,query:this.query}):this.isLookupConstraint()?new m({model:this.model,query:this.query}):this.isRangeConstraint()?new r({model:this.model,query:this.query}):this.path.isAttribute()?new e({model:this.model,query:this.query}):(this.model.set({error:new Error("cannot handle this constaint type")}),null)},b.prototype.isNullConstraint=function(){var a;return a=this.model.get("op"),B.call(s,a)>=0},b.prototype.isLoopConstraint=function(){var a;return this.path.isClass()&&("="===(a=this.model.get("op"))||"!="===a)},b.prototype.isTypeConstraint=function(){return this.path.isReference()&&(!this.model.get("op")||"ISA"===this.model.get("op"))},b.prototype.isBooleanConstraint=function(){var a,b;return a=this.path.getType(),B.call(f,a)>=0&&(b=this.model.get("op"),!(B.call(s,b)>=0))},b.prototype.isMultiValueConstraint=function(){var a;return this.path.isAttribute()&&(a=this.model.get("op"),B.call(o,a)>=0)},b.prototype.isListConstraint=function(){var a;return this.path.isClass()&&(a=this.model.get("op"),B.call(k,a)>=0)},b.prototype.isLookupConstraint=function(){var a;return this.path.isClass()&&(a=this.model.get("op"),B.call(t.TERNARY_OPS,a)>=0)},b.prototype.isRangeConstraint=function(){var a;return this.path.isReference()&&(a=this.model.get("op"),B.call(t.RANGE_OPS,a)>=0)},b.prototype.getOtherOperators=function(){return z.without(y(this.model.pick("new","path")),this.model.get("op"))},b.prototype.buttons=function(){var a;return null!=this.buttonDelegate?[]:(a=[{key:"conbuilder.Update",classes:"im-update"},{key:"conbuilder.Cancel",classes:"btn-cancel"}],this.model.get("new")?(a[0].key="conbuilder.Add",a[1].classes="im-remove-constraint"):a.push({key:"conbuilder.Remove",classes:"btn btn-default im-remove-constraint"}),a)},b.prototype.getData=function(){var a,b,c,d,e;return a=this.buttons(),d=p,c=j,e=this.getOtherOperators(),b=this.model.toJSON(),{buttons:a,icons:c,messages:d,icons:c,otherOperators:e,con:b}},b.prototype.template=v,b.prototype.render=function(){return b.__super__.render.apply(this,arguments),this.renderChild("valuecontrols",this.getValueControls(),this.$(".im-value-options")),this.renderChild("error",new i({model:this.model})),null!=this.buttonDelegate&&this.delegateButtonEvents(),this},b.prototype.remove=function(){var a;return null!=(a=this.buttonDelegate)&&a.off("click.constraint-editor"),this.$el.slideUp({always:function(a){return function(){return b.__super__.remove.call(a)}}(this)})},b}(h)}).call(this)},{"../core-view":3,"../icons":14,"../messages":16,"./attribute-value-controls":113,"./boolean-value-controls":114,"./error-message":137,"./list-value-controls":193,"./lookup-value-controls":194,"./loop-value-controls":195,"./multi-value-controls":198,"./type-value-controls":228,imjs:247,underscore:262}],130:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},l=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},m=[].slice;h=a("underscore"),e=a("../messages"),g=a("../templates"),c=a("../core-view"),d=a("../patterns").IS_BLANK,i=a("imjs"),f=i.Query,i.Model,e.set({"consummary.IsA":"is a","consummary.NoValue":"no value"}),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return k(b,a),b.prototype.tagName="ol",b.prototype.className="constraint-summary breadcrumb",b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.listenTo(e,"change",this.reRender)},b.prototype.getData=function(){return h.extend(b.__super__.getData.apply(this,arguments),{labels:this.getSummary()})},b.prototype.template=g.template("constraint-summary"),b.prototype.getTitleOp=function(){return this.model.get("op")||e.getText("consummary.IsA")},b.prototype.modelEvents=function(){return{change:this.reRender}},b.prototype.events=function(){return{"click .label-path":function(){return this.state.toggle("showFullPath")}}},b.prototype.stateEvents=function(){return{"change:showFullPath":this.toggleFullPath}},b.prototype.toggleFullPath=function(){return this.$(".label-path").toggleClass("im-show-full-path",!!this.state.get("showFullPath"))},b.prototype.postRender=function(){return this.toggleFullPath()},b.prototype.getTitleVal=function(){var a,b,c,d,e,g;return this.model.has("values")&&(e=this.model.get("op"),l.call(f.MULTIVALUE_OPS.concat(f.RANGE_OPS),e)>=0)?(c=this.model.get("values"))?1===c.length?c[0]:0===c.length?"[ ]":c.length>5?c.length+" values":(a=2<=c.length?m.call(c,0,d=c.length-1):(d=0,[]),b=c[d++],a.join(", ")+" and "+b):void 0:this.model.has("value")?this.model.get("value"):null!=(g=this.model.get("typeName"))?g:this.model.get("type")},b.prototype.isLookup=function(){return"LOOKUP"===this.model.get("op")},b.prototype.getPathLabel=function(){var a,b,c,d,e;return d=this.model.toJSON(),c=d.title,a=d.displayName,b=d.path,{content:String(null!=(e=null!=c?c:a)?e:b),type:"path"}},b.prototype.getSummary=function(){var a,b,c,e,g;return a=[],a.push(this.getPathLabel()),(c=this.getTitleOp())&&a.push({content:c,type:"op"}),g=this.model.get("op"),l.call(f.NULL_OPS,g)<0&&(e=this.getTitleVal(),null==e||d.test(e)?(b=this.model.get("new")?"warning":"error",a.push({content:"NoValue",type:b})):a.push({content:e,type:"value"}),this.isLookup()&&this.model.has("extraValue")&&a.push({content:this.model.get("extraValue"),type:"extra",icon:"ExtraValue"})),a},b}(c)}).call(this)},{"../core-view":3,"../messages":16,"../patterns":64,"../templates":67,imjs:247,underscore:262}],131:[function(a,b,c){(function(){var c,d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};g=a("underscore"),e=a("../core-view"),f=a("../templates"),d=a("./constraint-adder"),c=a("./active-constraint"),a("../messages/constraints"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.className="im-constraints",b.prototype.initialize=function(a){return this.query=a.query,b.__super__.initialize.apply(this,arguments),this.listenTo(this.query,"change:constraints",this.reRender)},b.prototype.getData=function(){return g.extend(b.__super__.getData.apply(this,arguments),{constraints:this.getConstraints()})},b.prototype.events=function(){return{click:function(a){return null!=a?a.stopPropagation():void 0}}},b.prototype.template=f.templateFromParts(["constraints-heading","active-constraints"]),b.prototype.postRender=function(){var a,b,d,e,f,g;for(b=this.$(".im-active-constraints"),g=this.getConstraints(),d=e=0,f=g.length;e<f;d=++e)a=g[d],this.renderChild("con_"+d,new c({query:this.query,constraint:a}),b);return this.renderChild("conAdder",this.getConAdder())},b.prototype.getConstraints=function(){return this.query.constraints.slice()},b.prototype.getConAdder=function(){return new d({query:this.query})},b}(e)}).call(this)},{"../core-view":3,"../messages/constraints":21,"../templates":67,"./active-constraint":112,"./constraint-adder":128,underscore:262}],132:[function(a,b,c){(function(){var c,d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};f=a("underscore"),c=a("../../core-view"),d=a("../../messages"),e=a("../../models/path"),a("../../messages/constraints"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.Model=e,b.prototype.tagName="button",b.prototype.className="btn btn-primary im-add-constraint",b.prototype.optionalParameters=["hideType"],b.prototype.hideType=!1,b.prototype.template=function(a){return f.escape(d.getText("constraints.AddConFor",a))},b.prototype.getData=function(){return f.extend(b.__super__.getData.apply(this,arguments),{hideType:this.hideType})},b.prototype.modelEvents=function(){return{change:this.reRender}},b.prototype.events=function(){return{click:function(){return this.trigger("chosen",this.model.get("path"))}}},b}(c)}).call(this)},{"../../core-view":3,"../../messages":16,"../../messages/constraints":21,"../../models/path":56,underscore:262}],133:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l={}.hasOwnProperty,m=function(a,b){function c(){this.constructor=a}for(var d in b)l.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},n=[].slice;k=a("underscore"),e=a("../../core-view"),i=a("../../models/path"),a("../../templates"),a("../../messages"),d=a("../constraint-adder"),c=a("./column-adder-button"),a("../../messages/constraints"),g=".im-constraint-adder-options",f=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return m(b,a),b.prototype.className="btn-group",b.prototype.parameters=["main","options"],b.prototype.initState=function(){return this.state.set({open:!1})},b.prototype.stateEvents=function(){return{"change:open":this.toggleOpen}},b.prototype.toggleOpen=function(){return this.$el.toggleClass("open",this.state.get("open"))},b.prototype.ICONS="NONE",b.prototype.postRender=function(){var a,b,c,d,e,f;for(this.toggleOpen(),this.renderChild("main",this.main),this.renderChild("toggle",new j({state:this.state})),c=document.createElement("ul"),c.className="dropdown-menu",f=this.options,a=d=0,e=f.length;d<e;a=++d)b=f[a],this.renderChild(a,b,c);return this.$el.append(c)},b}(e),j=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return m(b,a),b.prototype.tagName="button",b.prototype.className="btn btn-primary dropdown-toggle",b.prototype.ICONS="NONE",b.prototype.template=k.template('<span class="caret"></span>\n<span class="sr-only"><%- Messages.getText(\'constraints.OtherPaths\') %></span>'),b.prototype.events=function(){return{click:function(){return this.state.toggle("open")}}},b}(e),h=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return m(b,a),b.prototype.tagName="li",b.prototype.className="",b.prototype.template=function(){return"<a>"+b.__super__.template.apply(this,arguments)+"</a>"},b}(c),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return m(b,a),b.prototype.parameters=["query","paths"],b.prototype.onChosen=function(a){return this.model.set({constraint:{path:a}})},b.prototype.renderOptions=function(){},b.prototype.showTree=function(){var a,b,d,e,j,k,l,m,o,p,q;for(p=this.paths,j=p[0],l=2<=p.length?n.call(p,1):[],d=new c({hideType:!0,model:new i(j)}),e=function(){var a,b,c;for(c=[],a=0,b=l.length;a<b;a++)k=l[a],c.push(new h({hideType:!0,model:new i(k)}));return c}(),b=new f({main:d,options:e}),q=[d].concat(n.call(e)),m=0,o=q.length;m<o;m++)a=q[m],this.listenTo(a,"chosen",this.onChosen);return this.renderChild("tree",b,this.$(g))},b}(d)}).call(this)},{"../../core-view":3,"../../messages":16,"../../messages/constraints":21,"../../models/path":56,"../../templates":67,"../constraint-adder":128,"./column-adder-button":132,underscore:262}],134:[function(a,b,c){(function(){var c,d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};a("underscore"),a("../../core-view"),f=a("../../models/path"),a("../../templates"),a("../../messages"),d=a("../constraint-adder"),c=a("./column-adder-button"),a("../../messages/constraints"),e=".im-constraint-adder-options",b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.parameters=["query","path"],b.prototype.initialize=function(){var a;return b.__super__.initialize.apply(this,arguments),a={path:this.path},this.model.set({constraint:a})},b.prototype.events=function(){return{"click .im-add-constraint":this.act}},b.prototype.act=function(){return this.hideTree(),this.renderConstraintEditor()},b.prototype.renderOptions=function(){},b.prototype.showTree=function(){var a;return a=new f(this.query.makePath(this.path)),new c({model:a}),this.renderChild("tree",new c({model:a}),this.$(e))},b}(d)}).call(this)},{"../../core-view":3,"../../messages":16,"../../messages/constraints":21,"../../models/path":56,"../../templates":67,"../constraint-adder":128,"./column-adder-button":132,underscore:262}],135:[function(a,b,c){(function(){var c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=a("../constraints"),e=a("./single-column-adder"),c=a("./composed-column-adder"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.getConAdder=function(){var a,b,d,f,g;if(this.shouldShowAdder())return g=this.model.attributes,f=g.replaces,a=g.isComposed,b=g.outerJoined,d=this.model.pathInfo(),a&&f.length>1?new c({query:this.query,paths:f}):b?new c({query:this.query,paths:[d].concat(f)}):new e({query:this.query,path:d})},b.prototype.shouldShowAdder=function(){var a,b,c,d;return d=this.model.attributes,b=d.numeric,a=d.isComposed,c=d.outerJoined,b||a||c||!this.getConstraints().length},b.prototype.getConstraints=function(){var a,b,c,d,e,f;for(b=this.model.get("path"),e=this.query.constraints,f=[],c=0,d=e.length;c<d;c++)a=e[c],a.path.match(b)&&f.push(a);return f},b}(d)}).call(this)},{"../constraints":131,"./composed-column-adder":133,"./single-column-adder":134}],136:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l,m,n,o={}.hasOwnProperty,p=function(a,b){function c(){this.constructor=a}for(var d in b)o.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};n=a("underscore"),f=a("../core-view"),h=a("../models/history"),l=a("../models/table"),j=a("../models/selected-objects"),c=a("../utils/events").Bus,e=a("../utils/children"),m=a("../core/type-assertions"),k=a("./table"),i=a("./query-tools"),g="Bad arguments to Dashboard - {query :: imjs.Query} is required",d="consumerContainer provided as selector - but no matching element was found",b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return p(b,a),b.prototype.tagName="div",b.prototype.className="imtables-dashboard container-fluid",b.prototype.Model=l,b.prototype.optionalParameters=["consumerContainer","consumerBtnClass"],b.prototype.initialize=function(a){var e;if(e=a.query,!m.Query.test(e)&&null==e)throw new Error(g);if(b.__super__.initialize.apply(this,arguments),this.history=new h,this.bus=new c,this.history.setInitialState(e),this.selectedObjects=new j(e.service),null!=this.consumerContainer&&n.isString(this.consumerContainer)&&(this.consumerContainer=document.querySelector(this.consumerContainer),!this.consumerContainer))return console.log(d)},b.prototype.renderChildren=function(){return this.renderQueryTools(),this.renderTable()},b.prototype.renderTable=function(){var a;return a=e.createChild(this,k),this.renderChild("table",a)},b.prototype.renderQueryTools=function(){var a;return a=e.createChild(this,i,{tableState:this.model}),this.renderChild("tools",a)},b.prototype.remove=function(){return this.bus.destroy(),this.history.close(),b.__super__.remove.apply(this,arguments)},b}(f)}).call(this)},{"../core-view":3,"../core/type-assertions":10,"../models/history":45,"../models/selected-objects":58,"../models/table":61,"../utils/children":76,"../utils/events":81,"./query-tools":208,"./table":209,underscore:262}],137:[function(a,b,c){(function(){var c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};a("underscore"),a("fs"),c=a("../core-view"),d=a("../icons"),e=a("../templates"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.className="im-error-message",b.prototype.modelEvents=function(){return{"change:error":this.reRender}},b.prototype.getData=function(){return{icons:d,error:this.model.get("error")}},b.prototype.logError=function(){var a;if(a=this.model.get("error"))return console.error(a,a.stack)},b.prototype.template=e.template("error-message"),b}(c)}).call(this)},{"../core-view":3,"../icons":14,"../templates":67,fs:263,underscore:262}],138:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D={}.hasOwnProperty,E=function(a,b){function c(){this.constructor=a}for(var d in b)D.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},F=function(a,b){return function(){return a.apply(b,arguments)}};C=a("underscore"),a("jquery"),q=a("../core-model"),p=a("./modal"),a("./constraint-adder"),o=a("../messages"),v=a("../templates"),r=a("../options"),k=a("../models/export-formats"),u=a("../mixins/runs-query"),n=a("./export-dialogue/tab-menu"),j=a("./export-dialogue/format-controls"),t=a("./export-dialogue/row-controls"),c=a("./export-dialogue/column-controls"),d=a("./export-dialogue/compression-controls"),i=a("./export-dialogue/flat-file-options"),m=a("./export-dialogue/json-options"),h=a("./export-dialogue/fasta-options"),e=a("./export-dialogue/destination-options"),s=a("./export-dialogue/preview"),a("../utils/open-window-with-post"),y=a("../utils/send-to-dropbox"),B=a("../utils/send-to-google-drive"),z=a("../utils/send-to-galaxy"),A=a("../utils/send-to-genomespace"),l={doneness:null,tab:"dest",dest:"download",linkToFile:null},g=["progress_bar","modal_error","export_dialogue_footer"],w=function(){function a(a){this.key="export.error."+a,this.message=o.get(this.key)}return a.prototype.cannotDismiss=!0,a}(),f=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return E(b,a),b.prototype.defaults=function(){return{filename:"results",format:k.getFormat("tab"),tablePage:null,start:0,columns:[],size:null,max:null,compress:!1,compression:"gzip",headers:!1,jsonFormat:"rows",fastaExtension:null,headerType:"friendly"}},b}(q),x=function(a){return function(b){return b.isa(a)}},b.exports=function(a){function b(){return this.onUploadError=F(this.onUploadError,this),this.onUploadProgress=F(this.onUploadProgress,this),this.onUploadComplete=F(this.onUploadComplete,this),b.__super__.constructor.apply(this,arguments)}return E(b,a),b.include(u),b.prototype.Model=f,b.prototype.className=function(){return"im-export-dialogue "+b.__super__.className.apply(this,arguments)},b.prototype.parameters=["query"],b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.model.has("format")&&!this.model.get("format").ext&&this.model.set({format:k.getFormat(this.model.get("format"))}),this.state.set(l),this.listenTo(this.state,"change:tab",this.renderMain),this.listenTo(this.model,"change",this.updateState),this.listenTo(this.model,"change:columns",this.setMax),this.listenTo(this.model,"change:format",this.onChangeFormat),this.categoriseQuery(),this.model.set({columns:this.query.views}),null!=this.query.name&&this.model.set({filename:this.query.name.replace(/\s+/g,"_")}),this.updateState(),this.setMax(),this.readUserPreferences()},b.prototype.onChangeFormat=function(){return C.defer(function(a){return function(){var b,c,d,e,f,g,h,i,j,k,l,m,n;if(d=a.model.get("format"),b=a.model.get("columns"),null!=(m=d.needs)?m.length:void 0){for(h=b.slice(),f=[],n=a.query.views,k=0,l=n.length;k<l;k++)j=n[k],i=a.query.makePath(j).getParent(),C.any(d.needs,function(a){return i.isa(a)})&&f.push(i.append("id").toString());return g=C.uniq(f),a.model.set({nodecolumns:g}),e=d.maxColumns,c=e?C.first(g,e):g.slice(),a.model.set({columns:c}),a.model.once("change:format",function(){return a.model.set({columns:h}),a.model.unset("nodecolumns")})}}}(this))},b.prototype.readUserPreferences=function(){return this.query.service.whoami().then(function(a){return function(a){var b;if(a.hasPreferences)return(b=a.preferences["galaxy-url"])?r.set("Destination.Galaxy.Current",b):void 0}}())},b.prototype.setMax=function(){return this.getEstimatedSize().then(function(a){return function(b){return a.model.set({max:b})}}(this))},b.prototype.categoriseQuery=function(){var a,b,c,d;c=this.query.getViewNodes(),a={},d=this.query.model.classes;for(b in d)d[b],a[b]=C.any(c,x(b));return this.model.set({has:a})},b.prototype.title=function(){return o.getText("ExportTitle",{name:this.query.name})},b.prototype.modalSize="lg",b.prototype.primaryAction=function(){return o.getText(this.state.get("dest"))},b.prototype.primaryIcon=function(){return this.state.get("dest")},b.prototype.body=v.template("export_dialogue"),b.prototype.footer=v.templateFromParts(g),b.prototype.updateState=function(){var a,b,c,d,e,f,g,h,i;return i=this.model.toJSON(),c=i.compress,d=i.compression,h=i.start,i.size,g=i.max,f=i.format,b=i.columns,a=C.isEqual(b,this.query.views)?o.get("All"):b.length,this.getRowCount(),e=0===b.length?new w("NoColumnsSelected"):h>=g?new w("OffsetOutOfBounds"):null,this.state.set(this.model.pick("headers","headerType","jsonFormat","fastaExtension")),this.state.set({error:e,format:f,max:g,exportURI:this.getExportURI(),rowCount:this.getRowCount(),compression:c?d:null,columns:a})},b.prototype.getRowCount=function(){var a,b,c,d;return d=this.model.pick("start","size","max"),c=d.start,b=d.size,a=d.max,null==c&&(c=0),a-=null!=c?c:0,b=null!=b&&b>0?b:a,Math.min(a,b)},b.prototype.getMain=function(){switch(this.state.get("tab")){case"format":return j;case"columns":return c;case"compression":return d;case"column-headers":return i;case"opts-json":return m;case"opts-fasta":return h;case"dest":return e;case"rows":return t;case"preview":return s;default:return j}},b.prototype.onUploadComplete=function(a){return this.state.set({doneness:null,linkToFile:a})},b.prototype.onUploadProgress=function(a){return this.state.set({doneness:a})},b.prototype.onUploadError=function(a){return this.state.set({doneness:null,error:a}),console.error(a)},b.prototype.act=function(){var a,b,c,d,e,f,g,h,i,j;if(this.onUploadProgress(0),b=this.getExporter(),e=this.model,i=this.state,h=this.query,a={model:e.toJSON(),state:i.toJSON(),query:h.clone()},j=this.getExportURI(),d=this.getFileName(),f=this.onUploadProgress,c=b.call(a,j,d,f),c.then(this.onUploadComplete,this.onUploadError),null!=b.after)return g=b.after.bind(a),c.then(g,g).then(null,function(a){return function(b){return a.state.set({error:b})}}(this))},b.prototype.getExporter=function(){switch(this.state.get("dest")){case"download":return function(){return Promise.resolve(null)};case"Dropbox":return y;case"Drive":return B;case"Galaxy":return z;case"GenomeSpace":return A;default:throw new Error("Cannot export to "+this.state.get("dest"))}},b.prototype.events=function(){var a;return a=b.__super__.events.apply(this,arguments),a.keyup="handleKeyup",a},b.prototype.handleKeyup=function(a){var b,c;if(!this.$(a.target).is("input"))switch(a.which){case 40:return null!=(b=this.children.menu)?b.next():void 0;case 38:return null!=(c=this.children.menu)?c.prev():void 0}},b.prototype.renderMain=function(){var a;return a=this.getMain(),this.renderChild("main",new a({model:this.model,query:this.query,state:this.state}),this.$("div.main"))},b.prototype.postRender=function(){return this.renderChild("menu",new n({model:this.state}),this.$("nav.menu")),this.renderMain(),this.$el.focus(),b.__super__.postRender.apply(this,arguments)},b}(p)}).call(this)},{"../core-model":2,"../messages":16,"../mixins/runs-query":33,"../models/export-formats":42,"../options":63,"../templates":67,"../utils/open-window-with-post":94,"../utils/send-to-dropbox":100,"../utils/send-to-galaxy":101,"../utils/send-to-genomespace":102,"../utils/send-to-google-drive":103,"./constraint-adder":128,"./export-dialogue/column-controls":140,"./export-dialogue/compression-controls":141,"./export-dialogue/destination-options":142,"./export-dialogue/fasta-options":143,"./export-dialogue/flat-file-options":144,"./export-dialogue/format-controls":145,"./export-dialogue/json-options":146,"./export-dialogue/preview":148,"./export-dialogue/row-controls":149,"./export-dialogue/tab-menu":150,"./modal":197,jquery:256,underscore:262}],139:[function(a,b,c){(function(){var c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};a("underscore"),e=a("../query-dialogue-button"),d=a("../export-dialogue"),c=a("../../utils/count-executor"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.className="im-export-dialogue-button",b.prototype.longLabel="export.ExportQuery",b.prototype.shortLabel="export.Export",b.prototype.icon="Download",b.prototype.optionalParameters=["tableState"],b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),c.count(this.query).then(function(a){return function(b){return a.state.set({disabled:0===b})}}(this)).then(null,function(a){return function(b){return a.state.set({disabled:!0,error:b})}}(this))},b.prototype.initState=function(){return this.state.set({name:this.query.name})},b.prototype.dialogueOptions=function(){var a,b;return a=null!=(b=this.tableState)?b.pick("start","size"):void 0,{query:this.query,model:{tablePage:a}}},b.prototype.Dialogue=d,b}(e)}).call(this)},{"../../utils/count-executor":77,"../export-dialogue":138,"../query-dialogue-button":206,underscore:262}],140:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l,m,n={}.hasOwnProperty,o=function(a,b){function c(){this.constructor=a}for(var d in b)n.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},p=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};m=a("underscore"),k=a("../../core-view"),h=a("../../models/path-set"),f=a("../label-view"),g=a("../../messages"),j=a("../../templates"),e=a("../../mixins/has-typeaheads"),l=a("../../utils/path-suggester"),function(a){function b(){return b.__super__.constructor.apply(this,arguments)}o(b,a),b.prototype.template=m.partial(g.getText,"export.category.Columns")}(f),c=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return o(b,a),b.include(e),b.prototype.initialize=function(a){return this.columns=a.columns,this.query=a.query,b.__super__.initialize.apply(this,arguments),this.initSuggestions()},b.prototype.addSuggestion=function(a){var b;if(!this.columns.contains(a))return this.suggestions.add(a),b=this.suggestions.get(a),a.getDisplayName(function(a,c){return b.set({error:a,name:c})})},b.prototype.initSuggestions=function(){var a,b,c,d,e,f;for(this.suggestions=new h,c=this.query.getQueryNodes(),f=[],d=0,e=c.length;d<e;d++)b=c[d],f.push(function(){var c,d,e,f;for(e=b.getChildNodes(),f=[],c=0,d=e.length;c<d;c++)a=e[c],a.isAttribute()&&(this.columns.contains(a)?f.push(void 0):f.push(this.addSuggestion(a)));return f}.call(this));return f},b.prototype.postRender=function(){var a,b,c;return b=this.$("input"),c={minLength:1,highlight:!0},a={name:"view_suggestions",source:l(this.suggestions),displayKey:"name"},this.activateTypeahead(b,c,a,"Additional paths",function(a){return function(b,c){var d;return d=c.item,a.columns.add(d,{active:!0})}}(this)),this.$(".im-help").tooltip()},b.prototype.className="col-sm-8",b.prototype.template=j.template("export_add_column_control"),b}(k),i=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return o(b,a),b.prototype.className="col-sm-4",b.prototype.RERENDER_EVENT="change:isAll",b.prototype.initialize=function(a){return this.query=a.query,this.columns=a.columns,b.__super__.initialize.apply(this,arguments),this.setIsAll(),this.listenTo(this.columns,"change:active",this.setIsAll)},b.prototype.setIsAll=function(){var a,b,c;return c=this.query.views,b=function(){var b,c,d,e;for(d=this.columns.where({active:!0}),e=[],b=0,c=d.length;b<c;b++)a=d[b],e.push(a.get("item").toString());return e}.call(this),this.model.set({isAll:m.isEqual(c,b)})},b.prototype.template=j.template("reset_button"),b.prototype.events=function(){return{"click button":"reset"}},b.prototype.reset=function(){var a;return a=this.query.views,this.columns.each(function(b){var c;return c=b.get("item").toString(),b.set({active:m.any(a,function(a){return a===c})})})},b}(k),d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return o(b,a),b.prototype.RERENDER_EVENT="change",b.prototype.initialize=function(){var a,c;if(b.__super__.initialize.apply(this,arguments),this.model.has("active")||this.model.set({active:!0}),!this.model.has("name"))return this.model.set({name:null}),a=this.model.get("item"),"id"===(null!=(c=this.model.get("item").end)?c.name:void 0)&&(a=a.getParent()),a.getDisplayName(function(a){return function(b,c){return a.model.set({error:b,name:c})}}(this))},b.prototype.className="list-group-item",b.prototype.events=function(){return{"click .im-active-state":function(a){return function(){return a.model.toggle("active")}}(this)}},b.prototype.tagName="li",b.prototype.template=j.template("export_column_control"),b}(k),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return o(b,a),b.prototype.className="container-fluid",b.prototype.initialize=function(a){var c,d,e,f,g,i,j,k,l,n,o,p,q,r,s;if(this.query=a.query,b.__super__.initialize.apply(this,arguments),this.columns=new h,e=this.model.get("format"),c=this.model.get("columns"),!(null!=(r=e.needs)?r.length:void 0))for(s=this.query.views,k=0,o=s.length;k<o;k++)j=s[k],i=this.query.makePath(j),this.columns.add(i,{active:m.any(c,function(a){return a===j})});for(l=0,p=c.length;l<p;l++)d=c[l],this.columns.add(this.query.makePath(d),{active:!0});if(g=this.model.get("nodecolumns"))for(n=0,q=g.length;n<q;n++)f=g[n],this.columns.add(this.query.makePath(f),{active:!1});return this.listenTo(this.columns,"add remove reset change:active",this.setColumns),this.listenTo(this.columns,"add remove reset",this.reRender)},b.prototype.setColumns=function(a){var b,c,d,e,f;return c=function(){var a,c,d,e;for(d=this.columns.where({active:!0}),e=[],a=0,c=d.length;a<c;a++)b=d[a],e.push(b.get("item").toString());return e}.call(this),(d=this.model.get("format").maxColumns)&&null!=a&&c.length>d&&(e=a.get("item").toString(),f=function(){var a,d,f;for(f=[],a=0,d=c.length;a<d;a++)(b=c[a])!==e&&f.push(b);return f}(),c=[e].concat(m.first(f,d-1)),m.defer(function(a){return function(){var d,e,f,g,h;for(f=a.columns.where({active:!0}),h=[],d=0,e=f.length;d<e;d++)b=f[d],h.push(b.set({active:(g=b.get("item").toString(),p.call(c,g)>=0)}));return h}}(this))),this.model.set({columns:c})},b.prototype.tagName="form",b.prototype.template=j.template("export_column_controls"),b.prototype.postRender=function(){var a,b;return b=this.$("ul"),a=this.$(".controls"),this.columns.each(function(a){return function(c,e){return a.renderChild(e,new d({model:c}),b)}}(this)),this.renderChild("reset",new i({query:this.query,columns:this.columns}),a),this.renderChild("add",new c({query:this.query,columns:this.columns}),a)},b}(k)}).call(this)},{"../../core-view":3,"../../messages":16,"../../mixins/has-typeaheads":32,"../../models/path-set":55,"../../templates":67,"../../utils/path-suggester":96,"../label-view":179,underscore:262}],141:[function(a,b,c){(function(){var c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};a("underscore"),c=a("./main"),d=a("../../templates"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),
b.prototype.RERENDER_EVENT="change",b.prototype.tagName="form",b.prototype.template=d.template("export_compression_controls"),b.prototype.setCompression=function(a){return function(b){return function(){return b.model.set({compression:a})}}(this)},b.prototype.events=function(){return{"click .im-compress":function(a){return function(){return a.model.toggle("compress")}}(this),"click input[name=gzip]":this.setCompression("gzip"),"click input[name=zip]":this.setCompression("zip")}},b}(c)}).call(this)},{"../../templates":67,"./main":147,underscore:262}],142:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};i=a("underscore"),c=a("../../core-view"),h=a("../../templates"),f=a("../../options"),e=a("../../models/export-formats"),d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return k(b,a),b.prototype.RERENDER_EVENT="change:dest",b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.listenTo(f,"change:Destination.Galaxy.*",this.reRender)},b.prototype.getData=function(){return i.extend(b.__super__.getData.apply(this,arguments),{Galaxy:f.get("Destination.Galaxy")})},b.prototype.getTemplate=function(){switch(this.model.get("dest")){case"Galaxy":return this.galaxyTemplate;default:return function(){return""}}},b.prototype.galaxyTemplate=h.template("export_destination_galaxy_options"),b.prototype.template=function(a){return this.getTemplate()(a)},b.prototype.events=function(){return{"change .im-galaxy-uri-param":"setGalaxyUri","change .im-save-galaxy input":"toggleSaveGalaxy"}},b.prototype.setGalaxyUri=function(a){var b;return b=a.target,f.set("Destination.Galaxy.Current",b.value)},b.prototype.toggleSaveGalaxy=function(){var a,b;return b="Destination.Galaxy.Save",a=f.get(b),f.set(b,!a)},b}(c),g=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return k(b,a),b.prototype.RERENDER_EVENT="change:dest",b.prototype.destinations=function(){var a,b,c,d,e;for(d=f.get("Destinations"),e=[],b=0,c=d.length;b<c;b++)a=d[b],f.get(["Destination",a,"Enabled"])&&e.push(a);return e},b.prototype.getData=function(){return i.extend({destinations:this.destinations()},b.__super__.getData.apply(this,arguments))},b.prototype.template=h.template("export_destination_radios"),b.prototype.setDest=function(a){return function(b){return function(){return b.model.set({dest:a})}}(this)},b.prototype.events=function(){var a;return i.object(function(){var b,c,d,e;for(d=this.destinations(),e=[],b=0,c=d.length;b<c;b++)a=d[b],e.push(["click .im-dest-"+a,this.setDest(a)]);return e}.call(this))},b}(c),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return k(b,a),b.prototype.RERENDER_EVENT="change:format",b.prototype.getData=function(){var a,c;return c=this.model.get("has"),a=e.getFormats(c),i.extend({formats:a},b.__super__.getData.apply(this,arguments))},b.prototype.template=h.template("export_destination_options"),b.prototype.postRender=function(){return this.renderChildAt(".im-param-dest",new g({model:this.state})),this.renderChildAt(".im-dest-opts",new d({model:this.state}))},b.prototype.events=function(){var a,b,c,d,f,g;for(a={".change .im-param-name input":"setName"},c=this.model.get("has"),g=e.getFormats(c),d=0,f=g.length;d<f;d++)b=g[d],a["click .im-fmt-"+b.id]=this.setFormat.bind(this,b);return a},b.prototype.setName=function(a){return this.model.set({filename:a.target.value})},b.prototype.setFormat=function(a){return this.model.set({format:a})},b}(c)}).call(this)},{"../../core-view":3,"../../models/export-formats":42,"../../options":63,"../../templates":67,underscore:262}],143:[function(a,b,c){(function(){var c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};a("underscore"),d=a("../../core-view"),a("../label-view"),a("../../messages"),c=a("../../templates"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.RERENDER_EVENT="change",b.prototype.tagName="form",b.prototype.template=c.template("export_fasta_options"),b.prototype.setFastaExtension=function(a){return this.model.set({fastaExtension:a})},b.prototype.events=function(){return{"change .im-fasta-ext":function(a){return function(b){return a.setFastaExtension(b.target.value)}}(this)}},b}(d)}).call(this)},{"../../core-view":3,"../../messages":16,"../../templates":67,"../label-view":179,underscore:262}],144:[function(a,b,c){(function(){var c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};a("underscore"),d=a("../../core-view"),c=a("../../templates"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.RERENDER_EVENT="change",b.prototype.tagName="form",b.prototype.template=c.template("export_flat_file_options"),b.prototype.setHeaderType=function(a){return function(b){return function(){return b.model.set({headerType:a})}}(this)},b.prototype.events=function(){return{"click .im-headers":function(a){return function(){return a.model.toggle("headers")}}(this),"click input[name=hdrs-friendly]":this.setHeaderType("friendly"),"click input[name=hdrs-path]":this.setHeaderType("path")}},b}(d)}).call(this)},{"../../core-view":3,"../../templates":67,underscore:262}],145:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};i=a("underscore"),h=a("../../core-view"),f=a("../../messages"),g=a("../../templates"),e=a("../label-view"),c=a("../../models/export-formats"),d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return k(b,a),b.prototype.template=i.partial(f.getText,"export.category.Format"),b}(e),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return k(b,a),b.prototype.tagName="form",b.prototype.template=g.template("export_format_controls"),b.prototype.getData=function(){var a,d;return d=this.model.get("has"),a=c.getFormats(d),i.extend({formats:a},b.__super__.getData.apply(this,arguments))},b.prototype.events=function(){return{"change input:radio":"onChangeFormat"}},b.prototype.onChangeFormat=function(){return this.model.set({format:this.$("input:radio:checked").val()})},b.prototype.postRender=function(){return this.renderChild("heading",new d({model:this.model}),this.$(".im-title"))},b}(h)}).call(this)},{"../../core-view":3,"../../messages":16,"../../models/export-formats":42,"../../templates":67,"../label-view":179,underscore:262}],146:[function(a,b,c){(function(){var c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};a("underscore"),d=a("../../core-view"),a("../label-view"),a("../../messages"),c=a("../../templates"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.RERENDER_EVENT="change",b.prototype.tagName="form",b.prototype.template=c.template("export_json_options"),b.prototype.setJSONFormat=function(a){return function(b){return function(){return b.model.set({jsonFormat:a})}}(this)},b.prototype.events=function(){return{"click input[name=rows]":this.setJSONFormat("rows"),"click input[name=objects]":this.setJSONFormat("objects")}},b}(d)}).call(this)},{"../../core-view":3,"../../messages":16,"../../templates":67,"../label-view":179,underscore:262}],147:[function(a,b,c){(function(){var c,d={}.hasOwnProperty,e=function(a,b){function c(){this.constructor=a}for(var e in b)d.call(b,e)&&(a[e]=b[e]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("../../core-view"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return e(b,a),b.prototype.initialize=function(a){return this.query=a.query,b.__super__.initialize.apply(this,arguments)},b}(c)}).call(this)},{"../../core-view":3}],148:[function(a,b,c){(function(){var c,d,e,f,g,h,i={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};h=a("underscore"),c=a("../../core-view"),a("../../messages"),g=a("../../templates"),d=a("../../models/export-formats"),f=a("../../mixins/runs-query"),e={compress:null,size:3},b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return j(b,a),b.include(f),b.prototype.initialize=function(a){return this.query=a.query,b.__super__.initialize.apply(this,arguments),this.state.set({preview:""}),this.setPreview(),this.listenTo(this.state,"change:preview",this.reRender),this.listenTo(this.model,"change:format",this.setPreview)},b.prototype.setPreview=function(){var a;return a=this.model.get("format"),"bio"===a.group?this.state.set({preview:"Previews are not supported for bio-informatics formats"}):this.runQuery(e).then(function(a){return function(b){return h.isString(b)?a.state.set({preview:b}):a.state.set({preview:JSON.stringify(b,null,2)})}}(this))},b.prototype.template=g.template("export_preview"),b.prototype.getData=function(){var a,c;return c=this.model.get("has"),a=d.getFormats(c),h.extend({formats:a},b.__super__.getData.apply(this,arguments))},b.prototype.events=function(){return{"change .im-export-formats select":"setFormat"}},b.prototype.setFormat=function(a){return this.model.set({format:d.getFormat(a.target.value)})},b}(c)}).call(this)},{"../../core-view":3,"../../messages":16,"../../mixins/runs-query":33,"../../models/export-formats":42,"../../templates":67,underscore:262}],149:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l={}.hasOwnProperty,m=function(a,b){function c(){this.constructor=a}for(var d in b)l.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};k=a("underscore"),j=a("../../core-view"),d=a("../label-view"),e=a("../../messages"),i=a("../../templates"),h=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return m(b,a),b.prototype.getData=function(){return{size:this.model.get("size")||e.getText("rows.All")}},b.prototype.template=k.partial(e.getText,"export.param.Size"),b}(d),f=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return m(b,a),b.prototype.template=k.partial(e.getText,"export.param.Start"),b}(d),c=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return m(b,a),b.prototype.template=k.partial(e.getText,"export.category.Rows"),b}(d),g=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return m(b,a),b.prototype.RERENDER_EVENT="change",b.prototype.getData=function(){return k.extend(b.__super__.getData.apply(this,arguments),{isAll:!(this.model.get("start")||this.model.get("size"))})},b.prototype.template=i.template("export_rows_reset_button"),b.prototype.events=function(){return{"click .btn-reset":"reset","click .im-set-table-page":"setTablePage"}},b.prototype.reset=function(){return this.model.set({start:0,size:null})},b.prototype.setTablePage=function(){return this.model.set(this.model.get("tablePage"))},b}(j),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return m(b,a),b.prototype.RERENDER_EVENT="change:max",b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.model.has("max")||this.model.set({max:null}),this.listenTo(this.model,"change:size",this.updateLabels),this.listenTo(this.model,"change:size change:start",this.updateInputs)},b.prototype.tagName="form",b.prototype.template=i.template("export_row_controls"),b.prototype.events=function(){return{"input input[name=size]":"onChangeSize","input input[name=start]":"onChangeStart"}},b.prototype.updateInputs=function(){var a,b,c,d;return d=this.model.toJSON(),c=d.start,b=d.size,a=d.max,this.$("input[name=size]").val(b||a),this.$("input[name=start]").val(c)},b.prototype.onChangeSize=function(){var a;return a=parseInt(this.$("input[name=size]").val(),10),a&&a!==this.model.get("max")?this.model.set({size:a}):this.model.set({size:null})},b.prototype.onChangeStart=function(){return this.model.set({start:parseInt(this.$("input[name=start]").val(),10)})},b.prototype.postRender=function(){return this.renderChild("heading",new c({model:this.state}),this.$(".im-title")),this.renderChild("size",new h({model:this.model}),this.$(".size-label")),this.renderChild("start",new f({model:this.model}),this.$(".start-label")),this.renderChild("reset",new g({model:this.model}),this.$(".im-reset"))},b}(j)}).call(this)},{"../../core-view":3,"../../messages":16,"../../templates":67,"../label-view":179,underscore:262}],150:[function(a,b,c){(function(){var c,d,e,f,g,h,i=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};h=a("underscore"),g=a("../../core-view"),c=a("../../options"),f=a("../../templates"),e=function(){function a(a,b,c,d){this.ident=a,this.formats=null!=c?c:[],this.groups=null!=d?d:null,this.key="export.category."+b}return a.prototype.isFor=function(a){var b;return this.formats.length?(b=a.ext,i.call(this.formats,b)>=0):null==this.groups||this.groups[a.group]},a}(),d=[new e("dest","Destination"),new e("opts-json","JsonFormat",["json"]),new e("opts-fasta","FastaFormat",["fasta"]),new e("columns","Columns"),new e("rows","Rows",[],{flat:!0,machine:!0}),new e("compression","Compression"),new e("column-headers","ColumnHeaders",["tsv","csv"]),new e("preview","Preview")],b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return k(b,a),b.prototype.tagName="ul",b.prototype.RERENDER_EVENT="change",b.prototype.className="nav nav-pills nav-stacked im-export-tab-menu",b.prototype.template=f.template("export_tab_menu",{variable:"data"}),b.prototype.getTabs=function(){var a,b,c,e;for(e=[],b=0,c=d.length;b<c;b++)a=d[b],a.isFor(this.model.get("format"))&&e.push(a);return e},b.prototype.getData=function(){var a;return a=this.getTabs(),h.extend({tabs:a},b.__super__.getData.apply(this,arguments))},b.prototype.setTab=function(a){return function(b){return function(){if(!b.state.get("pinned"))return b.model.set({tab:a})}}(this)},b.prototype.setPinned=function(a){return function(b){return function(){return b.state.get("pinned")===a?b.state.set({pinned:!1}):b.state.set({pinned:a}),b.model.set({tab:a})}}(this)},b.prototype.next=function(){var a,b,c,d;return d=function(){var a,b,d,e;for(d=this.getTabs(),e=[],a=0,b=d.length;a<b;a++)c=d[a],e.push(c.ident);return e}.call(this),a=h.indexOf(d,this.model.get("tab")),b=a+1,b===d.length&&(b=0),this.model.set({tab:d[b]})},b.prototype.prev=function(){var a,b,c,d;return d=function(){var a,b,d,e;for(d=this.getTabs(),e=[],a=0,b=d.length;a<b;a++)c=d[a],e.push(c.ident);return e}.call(this),a=h.indexOf(d,this.model.get("tab")),b=0===a?d.length-1:a-1,this.model.set({tab:d[b]})},b.prototype.events=function(){var a,b,e;return b=c.get("Events.ActivateTab"),a=h.object(function(){var a,c,f;for(f=[],a=0,c=d.length;a<c;a++)e=d[a].ident,f.push([b+" .im-tab-"+e,this.setTab(e)]);return f}.call(this)),"mouseenter"===b&&h.extend(a,h.object(function(){var a,b,c;for(c=[],a=0,b=d.length;a<b;a++)e=d[a].ident,c.push(["click .im-tab-"+e,this.setPinned(e)]);return c}.call(this))),a},b}(g)}).call(this)},{"../../core-view":3,"../../options":63,"../../templates":67,underscore:262}],151:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l=function(a,b){return function(){return a.apply(b,arguments)}},m={}.hasOwnProperty,n=function(a,b){function c(){this.constructor=a}for(var d in b)m.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};a("../../event"),c=a("../../core-view"),g=a("../../options"),i=a("../../mixins/sets-path-names"),k=a("../../models/summary-items"),f=a("../../models/numeric-range"),j=a("./summary-heading"),d=a("./items"),h=a("./selected-count"),e=a("./visualisation"),b.exports=function(a){function b(){return this.Model=l(this.Model,this),b.__super__.constructor.apply(this,arguments)}return n(b,a),b.include(i),b.prototype.className=function(){return"im-facet-view"},b.prototype.modelEvents=function(){return{"change:min change:max":this.setLimits}},b.prototype.stateEvents=function(){return{"change:open":this.honourOpenness}},b.prototype.parameters=["query","view"],b.prototype.optionalParameters=["noTitle"],b.prototype.Model=function(){return new k({query:this.query,view:this.view})},b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.range=new f,this.setPathNames(),this.setLimits()},b.prototype.initState=function(){if(!this.state.has("open"))return this.state.set({open:g.get("Facets.Initally.Open")})},b.prototype.setLimits=function(){if(this.model.get("numeric"))return this.range.setLimits(this.model.pick("min","max"))},b.prototype.invariants=function(){return{hasQuery:"No query",hasAttrView:"The view is not an attribute: "+this.view,modelIsSummaryItemsModel:"The model is not a summary items model: "+this.model}},b.prototype.modelIsSummaryItemsModel=function(){return this.model instanceof k},b.prototype.hasQuery=function(){return null!=this.query},b.prototype.hasAttrView=function(){var a;return null!=(a=this.view)&&"function"==typeof a.isAttribute?a.isAttribute():void 0},b.prototype.postRender=function(){return this.renderTitle(),this.renderVisualisation(),this.renderSelectedCount(),this.renderItems(),this.honourOpenness()},b.prototype.renderTitle=function(){if(!this.noTitle)return this.renderChild("title",new j({model:this.model,state:this.state}))},b.prototype.renderVisualisation=function(){return this.renderChild("viz",new e({model:this.model,state:this.state,range:this.range}))},b.prototype.renderSelectedCount=function(){return this.renderChild("count",new h({model:this.model,range:this.range}))},b.prototype.renderItems=function(){return this.renderChild("facet",new d({model:this.model,state:this.state,range:this.range}))},b.prototype.honourOpenness=function(){var a,b,c;if(b=this.state.get("open"),c=this.state.previous("open"),a=this.$("dd.im-facet"),b?(a.slideDown(),this.trigger("opened",this)):(a.slideUp(),this.trigger("closed",this)),null!=c&&b!==c)return this.trigger("toggled",this)},b.prototype.events=function(){return{"click .im-summary-heading":"toggle"}},b.prototype.toggle=function(){return this.state.toggle("open")},b.prototype.close=function(){return this.state.set({open:!1})},b.prototype.open=function(){return this.state.set({open:!0})},b}(c)}).call(this)},{"../../core-view":3,"../../event":11,"../../mixins/sets-path-names":34,"../../models/numeric-range":50,"../../models/summary-items":60,"../../options":63,"./items":153,"./selected-count":160,"./summary-heading":161,"./visualisation":166}],152:[function(a,b,c){(function(){var c,d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=a("d3-browserify"),a("underscore"),c=a("../../options"),a("../../messages"),d=a("./visualisation-base"),a("../../messages/summary"),a("../../utils/casts").bool,f=function(a,b){return e.scale.linear().domain(a).range(b)},b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.className="im-summary-histogram",b.prototype.chartHeight=50,b.prototype.leftMargin=25,b.prototype.rightMargin=25,b.prototype.bottomMargin=.5,b.prototype.stepWidth=0,b.prototype.allCountsAreOne=function(){return 1===this.model.get("maxCount")},b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.listenTo(this.model.items,"add remove change:selected",function(a){return function(){return a.updateChart()}}(this))},b.prototype.invariants=function(){return{hasItems:"No items, or not the right thing: "+this.model.items}},b.prototype.hasItems=function(){var a,b;return null!=(null!=(a=this.model)&&null!=(b=a.items)?b.models:void 0)},b.prototype.initChart=function(){return b.__super__.initChart.apply(this,arguments),this.stepWidth=(this.chartWidth-(this.leftMargin+this.rightMargin+1))/this.model.items.size()},b.prototype.shouldNotDrawChart=function(){return this.allCountsAreOne()},b.prototype.getScales=function(){var a,b,c,d,e,g;return b=[0,this.model.items.size()],a=[0,this.model.get("maxCount")],g=[0,this.chartHeight-this.bottomMargin],d=[this.leftMargin,this.chartWidth-this.rightMargin],c=f(b,d),e=f(a,g),{x:c,y:e}},b.prototype.selectNodes=function(a){return a.selectAll("rect")},b.prototype.getChartData=function(a){return this.model.items.models.slice()},b.prototype.enter=function(a,b){return a.append("rect").classed("im-item-bar",!0).classed("squashed",this.stepWidth<4).attr("width",this.stepWidth).attr("y",this.chartHeight).attr("height",0).attr("x",function(a,c){return b.x(c)}).on("click",function(a){return a.toggle("selected")}).on("mouseover",function(a){return a.mousein()}).on("mouseout",function(a){return a.mouseout()})},b.prototype.update=function(a,b){var d,e,f,g,h;return h=c.get("D3.Transition"),d=h.Duration,e=h.Easing,f=this.chartHeight-this.bottomMargin,g=function(a){return b.y(a.get("count"))},a.classed("selected",function(a){return a.get("selected")}),a.transition().duration(d).ease(e).attr("height",g).attr("y",function(a){return f-g(a)})},b.prototype.drawAxes=function(a,b){var c;return c=this.chartHeight-this.bottomMargin,a.append("line").classed("x-axis",!0).attr("x1",0).attr("x2",this.chartWidth).attr("y1",c).attr("y2",c)},b}(d)}).call(this)},{"../../messages":16,"../../messages/summary":27,"../../options":63,"../../utils/casts":74,"./visualisation-base":165,"d3-browserify":237,underscore:262}],153:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k={}.hasOwnProperty,l=function(a,b){function c(){this.constructor=a}for(var d in b)k.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};j=a("underscore"),c=a("../../core-view"),i=a("../../templates"),h=a("./summary-stats"),g=a("./summary-items"),e=a("./only-one-item"),d=a("./no-results"),f=["error","initialized"],b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return l(b,a),b.prototype.className="im-facet-items",b.prototype.initialize=function(a){return this.range=a.range,b.__super__.initialize.apply(this,arguments)},b.prototype.invariants=function(){return{modelHasRequiredAttrs:"Model only has the following attributes: "+j.keys(this.model.attributes)}},b.prototype.modelHasRequiredAttrs=function(){return 2===j.intersection(f,j.keys(this.model.attributes)).length},b.prototype.modelEvents=function(){return{destroy:this.stopListening}},b.prototype.template=i.template("facet_frequency"),b.prototype.RERENDER_EVENT="change:error change:numeric change:uniqueValues change:initialized",b.prototype.postRender=function(){if(this.model.get("initialized"))return this.renderChild("items",this.getItems())},b.prototype.getItems=function(){switch(!1){case!this.model.get("numeric"):return new h({model:this.model,range:this.range});case!(this.model.get("uniqueValues")>1):return new g({model:this.model});case 1!==this.model.get("uniqueValues"):return new e({model:this.model,state:this.state});default:return new d({model:this.state})}},b}(c)}).call(this)},{"../../core-view":3,"../../templates":67,"./no-results":154,"./only-one-item":156,"./summary-items":163,"./summary-stats":164,underscore:262}],154:[function(a,b,c){(function(){var c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("../../core-view"),d=a("../../templates"),a("../../messages/summary"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.className="im-no-results",b.prototype.stateEvents=function(){return{"change:pathName":this.reRender}},b.prototype.renderRequires=["pathName"],b.prototype.template=d.template("summary_no_results"),b}(c)}).call(this)},{"../../core-view":3,"../../messages/summary":27,"../../templates":67}],155:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l={}.hasOwnProperty,m=function(a,b){function c(){this.constructor=a}for(var d in b)l.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};h=a("d3-browserify"),c=a("jquery"),k=a("underscore"),e=a("../../options"),d=a("../../messages"),a("../../messages/summary"),f=a("./visualisation-base"),j=function(a,b){return h.scale.linear().domain(a).range(b)},g=function(a,b){var c,d,e,f;return f=function(){var d,e,f,g;for(f=[0,1],g=[],d=0,e=f.length;d<e;d++)c=f[d],g.push(a(b+c));return g}(),e=f[0],d=f[1],{min:e,max:d}},i=function(a,b){return function(c){return c<a?a:c>b?b:c}},b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return m(b,a),b.prototype.className="im-numeric-distribution",b.prototype.leftMargin=25,b.prototype.bottomMargin=18,b.prototype.rightMargin=14,b.prototype.chartHeight=70,b.prototype.__selecting_paths=!1,b.prototype.selection=null,b.prototype.initialize=function(a){return this.range=a.range,b.__super__.initialize.apply(this,arguments),this.listenTo(this.range,"change reset",this.onChangeRange)},b.prototype.invariants=function(){return{hasRange:"No range",hasHistogramModel:"Wrong model: "+this.model}},b.prototype.hasRange=function(){return null!=this.range},b.prototype.hasHistogramModel=function(){var a;return null!=(null!=(a=this.model)?a.getHistogram:void 0)},b.prototype.selectNodes=function(a){return a.selectAll("rect")},b.prototype.getChartData=function(a){var b,c,d,e,f,h;for(null==a&&(a=this.getScales()),f=this.model.getHistogram(),h=[],c=d=0,e=f.length;d<e;c=++d)b=f[c],h.push({count:b,bucket:c+1,range:g(a.bucketToVal,c+1)});return h},b.prototype.initChart=function(){return b.__super__.initChart.apply(this,arguments),this.bucketWidth=(this.model.get("max")-this.model.get("min"))/this.model.get("buckets"),this.stepWidth=(this.chartWidth-(this.leftMargin+1))/this.model.get("buckets")},b.prototype.getScales=function(){var a,b,c,d,e,f,g,l,m,n,o,p;return p=this.model.pick("min","max"),e=p.min,d=p.max,g=this.model.get("buckets"),c=this.model.getHistogram(),f=h.max(c),b=[0,f],m=[e,d],a=[1,g+1],n=[this.leftMargin,this.chartWidth-this.rightMargin],o=[0,this.chartHeight-this.bottomMargin],l=function(a){return k.compose(i(e,d),j(a,m))},{x:j(a,n),y:j(b,o),valToX:j(m,n),xToVal:l(n),bucketToVal:l(a)}},b.prototype.isIntish=function(){var a;return"int"===(a=this.model.get("type"))||"Integer"===a||"long"===a||"Long"===a||"short"===a||"Short"===a},b.prototype.getRounder=function(){return this.isIntish()?Math.round:k.identity},b.prototype.enter=function(a,b){var e,f,g,h,i;return null==b&&(b=this.getScales()),f=this.el,i=this.getRounder(),h=this.chartHeight,e=function(a){return function(b,c){return b.count>0?a.range.set(b.range):a.range.nullify()}}(this),g=function(a){var b,c,e,f;return f=a.range,e=f.min,c=f.max,b=a.count,d.getText("summary.Bucket",{count:b,range:{min:i(e),max:i(c)}})},a.append("rect").attr("x",function(a,c){return b.x(a.bucket)}).attr("width",function(a){return Math.max(0,b.x(a.bucket+1)-b.x(a.bucket))}).attr("y",h-this.bottomMargin).attr("height",0).classed("im-bucket",!0).classed("im-null-bucket",function(a){return null===a.bucket}).on("click",e).each(function(a){return c(this).tooltip({container:f,title:g(a)})})},b.prototype.update=function(a,b){var c,d,f,g,h,i;return null==b&&(b=this.getScales()),g=this.chartHeight,f=this.bottomMargin,i=e.get("D3.Transition"),c=i.Duration,d=i.Easing,h=function(a){return b.y(a.count)},a.transition().duration(c).ease(d).attr("height",h).attr("y",function(a){return g-f-h(a)-.5})},b.prototype.drawAxes=function(a,b){var f,g,h,i;return null==a&&(a=this.getCanvas()),null==b&&(b=this.getScales()),g=this.chartHeight-this.bottomMargin-.5,h=this.el,e.get("Facets.DrawAverageLine")&&a.append("line").classed("average",!0).attr("x1",b.valToX(this.model.get("average"))).attr("x2",b.valToX(this.model.get("average"))).attr("y1",0).attr("y2",g).each(function(){return c(this).tooltip({container:h,title:d.getText("summary.Average")})}),a.append("line").classed("axis",!0).attr("x1",0).attr("x2",this.chartWidth).attr("y1",g).attr("y2",g),f=a.append("svg:g"),i=b.x.ticks(this.model.get("buckets")),f.selectAll("line").data(i).enter().append("svg:line").classed("tick-line",!0).attr("x1",b.x).attr("x2",b.x).attr("y1",this.chartHeight-.75*this.bottomMargin).attr("y2",this.chartHeight-this.bottomMargin)},b.prototype.events=function(){return{mouseout:function(a){return function(){return a.__selecting_paths=!1}}(this)}},b.prototype.drawSelection=function(a,b){return null==a||a<=0||b>=this.chartWidth?this.removeSelection():(null==this.selection&&(this.selection=this.getCanvas().append("svg:rect").attr("y",0).attr("height",.9*this.chartHeight).classed("rubberband-selection",!0)),this.selection.attr("x",a).attr("width",b))},b.prototype.onChangeRange=function(){var a,b,c,d,e,f;return this.shouldDrawBox()?(c=this.getScales(),f=this.range.toJSON(),b=f.min,a=f.max,d=c.valToX(b),e=c.valToX(a)-d,this.drawSelection(d,e)):this.removeSelection()},b.prototype.removeSelection=function(){var a;return null!=(a=this.selection)&&a.remove(),this.selection=null},b.prototype.shouldDrawBox=function(){return this.range.isNotAll()},b.prototype.remove=function(){var a;return this.removeSelection(),null!=(a=this.paper)&&a.remove(),b.__super__.remove.apply(this,arguments)},b}(f)}).call(this)},{"../../messages":16,"../../messages/summary":27,"../../options":63,"./visualisation-base":165,"d3-browserify":237,jquery:256,underscore:262}],156:[function(a,b,c){(function(){var c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("../../core-view"),d=a("../../templates"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.className="im-only-one",b.prototype.modelEvents=function(){return{change:this.reRender}},b.prototype.stateEvents=function(){return{change:this.reRender}},b.prototype.template=d.template("only_one_item"),b}(c)}).call(this)},{"../../core-view":3,"../../templates":67}],157:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r={}.hasOwnProperty,s=function(a,b){function c(){this.constructor=a}for(var d in b)r.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};q=a("underscore"),c=a("jquery"),i=a("d3-browserify"),f=a("../../options"),h=a("./visualisation-base"),e=function(a){return a.data.get("id")},d=i.layout.pie().value(function(a){return a.get("count")}),g={startAngle:0,endAngle:0},l=function(){var a,b;return a=f.get("PieColors"),b=q.isFunction(a)?a:i.scale[a](),function(a){return b(a.data.get("id"))}},n=function(a){var b;return null!=(b=a.get("currentPieCoords"))?b:g},p=function(a){return a.data.get("visible")?1:.25},m=function(a,b,c){return{startAngle:a,endAngle:b,selected:c.get("selected")?1:0}},k=function(a){return function(b){var c,d,e,f,g,h,j;return j=b.startAngle,e=b.endAngle,c=b.data,g=c,h=n(g),d=m(j,e,g),f=i.interpolateObject(h,d),
g.set({currentPieCoords:f(1)}),function(b){return a(f(b))}}},o=function(a){return(a.endAngle+a.startAngle)/2>Math.PI},j=function(a,b,c){return i.svg.arc().startAngle(function(a){return a.startAngle}).endAngle(function(a){return a.endAngle}).innerRadius(function(a){return b+a.selected*c}).outerRadius(function(b){return a+b.selected*c})},b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return s(b,a),b.prototype.chartWidth=120,b.prototype.chartHeight=120,b.prototype.className="im-pie-chart",b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.listenTo(this.model.items,"change:selected change:visible",this.update),this.listenTo(f,"change:PieColors",this.onChangePalette),this.onChangePalette()},b.prototype.onChangePalette=function(){return this.colour=l(),this.update()},b.prototype._drawD3Chart=function(){var a,b,c,d,e,f,g;return c=this.chartHeight,g=this.$el.closest(":visible").width(),e=.4*c,d=.1*c,f=.08*c,b=i.select(this.el).append("svg").attr("class","chart").attr("height",c).attr("width",g),this.arc=j(e,d,f),this.arc_group=b.append("svg:g").attr("class","arc").attr("transform","translate("+g/2+","+c/2+")"),a=b.append("svg:g").attr("class","center_group").attr("transform","translate("+g/2+","+c/2+")"),b.append("svg:g").attr("class","label_group").attr("transform","translate("+g/2+","+c/2+")"),a.append("svg:circle").attr("fill","white").attr("r",d),this.update()},b.prototype.enter=function(a){var b,d,e,f;return d=this.el,f=this.model.items.reduce(function(a,b){return a+b.get("count")},0),e=function(a){return(a.data.get("count")/f*100).toFixed(1)},b=function(a){var b,f,g;return b=c(this),g=a.data.get("item")+": "+e(a)+"%",f=o(a)?"left":"right",b.tooltip({title:g,placement:f,container:d})},a.append("svg:path").attr("class","donut-arc").on("click",function(a){return a.data.toggle("selected")}).on("mouseover",function(a){return a.data.mousein()}).on("mouseout",function(a){return a.data.mouseout()}).each(b)},b.prototype.exit=function(a){return a.remove()},b.prototype.getChartData=function(){return this.model.items.models.slice()},b.prototype.update=function(){var a,b,c,g;if(null!=this.arc_group)return c=this.arc_group.selectAll("path").data(d(this.getChartData()),e),this.exit(c.exit()),this.enter(c.enter()),g=f.get("D3.Transition"),a=g.DurationShort,b=g.Easing,c.attr("fill",this.colour),c.transition().duration(a).ease(b).style("opacity",p).attrTween("d",k(this.arc))},b}(h)}).call(this)},{"../../options":63,"./visualisation-base":165,"d3-browserify":237,jquery:256,underscore:262}],158:[function(a,b,c){(function(){var c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=a("underscore"),c=a("../../core-view"),d=a("../../templates"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.className="im-facet-surrogate",b.prototype.initialize=function(a){return this.above=a.above,b.__super__.initialize.apply(this,arguments)},b.prototype.template=d.template("row_surrogate"),b.prototype.getData=function(){return e.extend(b.__super__.getData.apply(this,arguments),{above:this.above})},b.prototype.postRender=function(){return this.$el.addClass(this.above?"above":"below")},b.prototype.remove=function(){return this.$el.fadeOut("fast",function(a){return function(){return b.__super__.remove.call(a)}}(this))},b}(c)}).call(this)},{"../../core-view":3,"../../templates":67,underscore:262}],159:[function(a,b,c){(function(){var c,d,e,f,g,h,i={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};h=a("underscore"),d=a("../../core-view"),f=a("../../templates"),c=a("../../core/checkbox"),e=a("./row-surrogate"),a("../../messages/summary"),g=function(a){return!!a},b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return j(b,a),b.prototype.RERENDER_EVENT="change:count change:item change:symbol change:share",b.prototype.tagName="tr",b.prototype.className="im-facet-row",b.prototype.modelEvents=function(){return{"change:visible":this.onChangeVisibility,"change:hover":this.onChangeHover,"change:selected":this.onChangeSelected}},b.prototype.invariants=function(){return{modelHasCollection:"No collection on model"}},b.prototype.modelHasCollection=function(){var a;return null!=(null!=(a=this.model)?a.collection:void 0)},b.prototype.template=f.template("facet_row"),b.prototype.getData=function(){var a,c,d,e;return a=this.model.collection.getMaxCount(),e=this.model.get("count")/a,c=(e/2+.5).toFixed(),d=(100*e).toFixed(),h.extend(b.__super__.getData.apply(this,arguments),{percent:d,opacity:c,max:a})},b.prototype.onRenderError=function(a){return console.error(a)},b.prototype.postRender=function(){return this.addCheckbox(),this.onChangeVisibility(),this.onChangeHover(),this.onChangeSelected()},b.prototype.addCheckbox=function(){return this.renderChildAt(".checkbox",new c({model:this.model,attr:"selected"}))},b.prototype.onChangeVisibility=function(){return this.$el.toggleClass("im-hidden",!this.model.get("visible"))},b.prototype.onChangeHover=function(){var a;return a=g(this.model.get("hover")),this.$el.toggleClass("hover",a),a?this.showSurrogateUnlessVisible():this.removeSurrogate()},b.prototype.onChangeSelected=function(){return this.$el.toggleClass("im-selected",this.model.get("selected"))},b.prototype.removeSurrogate=function(){return this.removeChild("surrogate")},b.prototype.showSurrogateUnlessVisible=function(){var a,b,c,d;if(this.removeSurrogate(),!this.isVisible())return b=this.isAbove(),c=new e({model:this.model,above:b}),a=c.$el,d=this.getTable(),this.renderChild("surrogate",c,d),b?a.css({top:d.scrollTop()}):a.css({bottom:0-d.scrollTop()})},b.prototype.getTable=function(){return this.$el.closest(".im-item-table")},b.prototype.events=function(){return{click:"handleClick"}},b.prototype.handleClick=function(a){return a.stopPropagation(),this.model.toggle("selected")},b.prototype.isBelow=function(){var a;return a=this.getTable(),this.$el.offset().top+this.$el.outerHeight()>a.offset().top+a.outerHeight()},b.prototype.isAbove=function(){var a;return a=this.getTable(),this.$el.offset().top<a.offset().top},b.prototype.isVisible=function(){return!(this.isAbove()||this.isBelow())},b}(d)}).call(this)},{"../../core-view":3,"../../core/checkbox":4,"../../messages/summary":27,"../../templates":67,"./row-surrogate":158,underscore:262}],160:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l,m={}.hasOwnProperty,n=function(a,b){function c(){this.constructor=a}for(var d in b)m.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};l=a("underscore"),c=a("../../core-view"),d=a("../../templates"),a("../../messages/summary"),i=function(a,b){return null==a&&(a=l.identity),l.reduce(b,function(b,c){return b+a(c)},0)},j=l.partial(i,function(a){return a.count}),k=function(a,b,c){return i(l.partial(g,a,b),c)},e=function(a,b,c){var d;return a?(d=a.max-a.min,(a.min<b?Math.min(a.max,c)-b:c-Math.max(a.min,b))/d):0},f=function(a,b){return function(c){return c.min>=a&&c.max<=b}},h=function(a,b){return function(c){return c.min<a&&c.max>a||c.max>b&&c.min<b}},g=function(a,b,c){return c.count*e(c,a,b)},b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return n(b,a),b.prototype.className="im-summary-selected-count",b.prototype.template=d.template("summary-selected-count"),b.prototype.stateEvents=function(){return{"change:selectedCount change:isApprox":this.reRender}},b.prototype.initialize=function(a){return this.range=a.range,b.__super__.initialize.apply(this,arguments),this.listenTo(this.model.items,"change:selected",this.estimateSelectionSize),this.listenTo(this.range,"change",this.estimateSelectionSize)},b.prototype.estimateSelectionSize=function(){if(this.model.get("initialized"))return this.model.get("numeric")?this.estimateSelectedInRange():this.sumSelectedItems()},b.prototype.preRender=function(){return this.rendered?this.state.get("selectedCount")?void 0:this.$el.slideUp():this.$el.hide()},b.prototype.postRender=function(){if(this.state.get("selectedCount"))return this.$el.slideDown()},b.prototype.sumSelectedItems=function(){var a,b;return b=this.model.items.where({selected:!0}),a=i(function(a){return a.get("count")},b),this.state.set({isApprox:!1,selectedCount:a})},b.prototype.estimateSelectedInRange=function(){var a,b,c,d,e,g,i;return this.range.isAll()?this.state.unset("selectedCount"):(i=this.range.toJSON(),e=i.min,d=i.max,c=this.getHistogram(),b=c.filter(f(e,d)),g=c.filter(h(e,d)),a=Math.round(j(b)+k(e,d,g)),this.state.set({isApprox:!0,selectedCount:a}))},b.prototype.getHistogram=function(){var a,b,c,d,e,f,g,h,i;for(a=this.model.getHistogram(),d=this.model.get("max"),e=this.model.get("min"),f=(d-e)/a.length,i=[],c=g=0,h=a.length;g<h;c=++g)b=a[c],i.push({count:b,min:e+c*f,max:e+f+c*f});return i},b}(c)}).call(this)},{"../../core-view":3,"../../messages/summary":27,"../../templates":67,underscore:262}],161:[function(a,b,c){(function(){var c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=a("underscore"),c=a("../../core-view"),d=a("../../templates"),a("../../messages/summary"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.className="im-summary-heading",b.prototype.modelEvents=function(){return{change:this.reRender,destroy:this.stopListening}},b.prototype.stateEvents=function(){return{change:this.reRender}},b.prototype.renderRequires=["numeric","available","got","uniqueValues"],b.prototype.template=d.template("summary_heading"),b.prototype.getData=function(){return e.extend(b.__super__.getData.apply(this,arguments),{filtered:null!=this.model.get("filteredCount")})},b}(c)}).call(this)},{"../../core-view":3,"../../messages/summary":27,"../../templates":67,underscore:262}],162:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l,m={}.hasOwnProperty,n=function(a,b){function c(){this.constructor=a}for(var d in b)m.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};l=a("underscore"),d=a("../../core-view"),i=a("../../templates"),g=a("../../messages"),a("../../messages/summary"),j=function(a){return!!a},k=function(a){var b;return b={},b.multi="ONE OF"===a.multi?"NONE OF":"ONE OF",b.single="=="===a.single?"!=":"==",b.absent="IS NULL"===a.absent?"IS NOT NULL":"IS NULL",b},e=function(a){if(null!=a)return a.preventDefault(),a.stopPropagation()},c={single:"==",multi:"ONE OF",absent:"IS NULL"},h={tab:"tsv",csv:"csv",xml:"xml",json:"json"},f=10,b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return n(b,a),b.prototype.RERENDER_EVT="change",b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.listenTo(this.model.items,"change:selected",this.reRender)},b.prototype.invariants=function(){return{viewIsAttribute:"No view, or view not Attribute: "+this.view,hasCollection:"No collection"}},b.prototype.viewIsAttribute=function(){var a,b;return null!=(a=this.model)&&null!=(b=a.view)&&"function"==typeof b.isAttribute?b.isAttribute():void 0},b.prototype.hasCollection=function(){var a;return null!=(null!=(a=this.model)?a.items:void 0)},b.prototype.template=i.template("summary_items_controls"),b.prototype.getData=function(){var a;return a=j(this.model.items.findWhere({selected:!0})),l.extend(b.__super__.getData.apply(this,arguments),{anyItemSelected:a})},b.prototype.postRender=function(){return this.activateTooltips(),this.activatePopovers()},b.prototype.activateTooltips=function(){return this.$btns=this.$(".btn[title]").tooltip({placement:"top",container:this.el})},b.prototype.activatePopovers=function(){return this.$(".im-download").popover({placement:"top",html:!0,container:this.el,title:g.getText("summary.DownloadFormat"),content:this.getDownloadPopover(),trigger:"manual"})},b.prototype.downloadPopoverTemplate=i.template("download_popover"),b.prototype.getDownloadPopover=function(){return this.downloadPopoverTemplate(l.extend(this.getBaseData(),{query:this.model.query,path:this.model.view.toString(),formats:h}))},b.prototype.events=function(){return{"click .im-export-summary":"exportSummary",click:"hideTooltips","click .btn-cancel":"unsetSelection","click .btn-toggle-selection":"toggleSelection","click .im-filter-group .dropdown-toggle":"toggleDropdown","click .im-download":"toggleDownloadPopover","click .im-filter-in":l.bind(this.addConstraint,this,c),"click .im-filter-out":l.bind(this.addConstraint,this,k(c))}},b.prototype.exportSummary=function(a){return a.stopImmediatePropagation(),!0},b.prototype.hideTooltips=function(){var a;return null!=(a=this.$btns)?a.tooltip("hide"):void 0},b.prototype.unsetSelection=function(a){return this.changeSelection(function(a){return a.set({selected:!1})})},b.prototype.toggleSelection=function(a){return this.changeSelection(function(a){if(a.get("visible"))return a.toggle("selected")})},b.prototype.toggleDropdown=function(){return this.$(".im-filter-group").toggleClass("open")},b.prototype.toggleDownloadPopover=function(){return this.$(".im-download").popover("toggle")},b.prototype.addConstraint=function(a,b){var c,d,g,h,i;return e(b),h=function(){var a,b,c,e;for(c=this.model.items.where({selected:!0}),e=[],a=0,b=c.length;a<b;a++)d=c[a],e.push(d.get("item"));return e}.call(this),g=this.model.items.where({selected:!1}),0===g.length?this.model.set({error:new Error("All items are selected")}):(c=l.any(h,function(a){return null==a}),!c&&this.model.hasAll()&&f>(i=h.length)&&i>g.length?this.constrainTo(k(a),function(){var a,b,c;for(c=[],a=0,b=g.length;a<b;a++)d=g[a],c.push(d.get("item"));return c}()):this.constrainTo(a,h))},b.prototype.constrainTo=function(a,b){var c,d,e,f,g;return(null!=b?b.length:void 0)?(f=this.model.query,e=this.model.view.toString(),g=b[0],d=function(){switch(!1){case!(b.length>1):return{op:a.multi,values:b};case null==g:return{op:a.single,value:String(g)};default:return{op:a.absent}}}(),!/or/.test(f.constraintLogic)&&"ONE OF"===d.op&&(c=l.findWhere(f.constraints,{path:e,op:"ONE OF"}))?(c.values=d.values,f.trigger("change:constraints",f.constraints)):f.addConstraint(l.extend(d,{path:e}))):this.model.set({error:new Error("No values are selected")})},b.prototype.changeSelection=function(a){return this.model.items.each(function(b){return l.defer(a,b)})},b}(d)}).call(this)},{"../../core-view":3,"../../messages":16,"../../messages/summary":27,"../../templates":67,underscore:262}],163:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l,m=function(a,b){return function(){return a.apply(b,arguments)}},n={}.hasOwnProperty,o=function(a,b){function c(){this.constructor=a}for(var d in b)n.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};l=a("underscore"),c=a("backbone"),d=a("../../core-view"),j=a("../../templates"),g=a("../../messages"),h=a("../../mixins/sets-path-names"),i=a("./summary-items-controls"),e=a("./row"),a("../../messages/summary"),f=function(a){if(null!=a)return a.preventDefault(),a.stopPropagation()},k=function(a){return"row_"+a.get("id")},b.exports=function(a){function b(){return this.filterItems=m(this.filterItems,this),b.__super__.constructor.apply(this,arguments)}return o(b,a),b.include(h),b.prototype.tagName="div",b.prototype.className="im-summary-items",b.prototype.stateEvents=function(){return{"change:error":this.setErrOnModel}},b.prototype.setErrOnModel=function(){return this.model.set(this.state.pick("error"))},b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.listenTo(this.model.items,"add",this.addItem),this.listenTo(this.model.items,"remove",this.removeItem),this.listenTo(this.state,"change:typeName change:endName",this.reRender),this.setPathNames()},b.prototype.invariants=function(){return{modelHasItems:"expected a SummaryItems model, got: "+this.model,modelCanHasMore:"expected the correct model methods, got: "+this.model}},b.prototype.modelHasItems=function(){var a;return(null!=(a=this.model)?a.items:void 0)instanceof c.Collection},b.prototype.modelCanHasMore=function(){var a;return l.isFunction(null!=(a=this.model)?a.hasMore:void 0)},b.prototype.template=j.template("summary_items"),b.prototype.getData=function(){return l.extend(b.__super__.getData.apply(this,arguments),{hasMore:this.model.hasMore(),colClasses:l.result(this,"colClasses"),colHeaders:l.result(this,"colHeaders")})},b.prototype.colClasses=["im-item-selector","im-item-value","im-item-count"],b.prototype.colHeaders=function(){var a;return a=this.state.has("typeName")?this.state.get("typeName")+" "+this.state.get("endName"):g.getText("summary.Item"),[" ",a,g.getText("summary.Count")]},b.prototype.postRender=function(){if(this.tbody=this.$(".im-item-table tbody"),!this.tbody.length)throw new Error("Could not find table");return this.addControls(),this.addItems()},b.prototype.addControls=function(){return this.renderChildAt(".im-summary-controls",new i({model:this.model}))},b.prototype.addItems=function(a){var b;if(null==a&&(a=0),this.rendered&&a<this.model.items.length)return b=a+100,l.defer(function(c){return function(){var d;return d=document.createDocumentFragment(),c.model.items.slice(a,b).forEach(function(a){return c.addItem(a,d)}),c.tbody.append(d),c.addItems(b)}}(this))},b.prototype.addItem=function(a,b){if(this.rendered)return this.renderChild(k(a),new e({model:a}),null!=b?b:this.tbody)},b.prototype.removeItem=function(a){return this.removeChild(k(a))},b.prototype.events=function(){return{"click .im-load-more":"loadMoreItems","click .im-clear-value-filter":"clearValueFilter","keyup .im-filter-values":l.throttle(this.filterItems,250,{leading:!1}),submit:f,click:f}},b.prototype.loadMoreItems=function(){if(!this.model.get("loading"))return this.model.increaseLimit(2)},b.prototype.clearValueFilter=function(){var a;return a=this.$(".im-filter-values"),a.val(null),this.model.setFilterTerm(null)},b.prototype.filterItems=function(a){var b;return b=this.$(".im-filter-values"),b.val(),this.model.setFilterTerm(b.val())},b}(d)}).call(this)},{"../../core-view":3,"../../messages":16,"../../messages/summary":27,"../../mixins/sets-path-names":34,"../../templates":67,"./row":159,"./summary-items-controls":162,backbone:235,underscore:262}],164:[function(a,b,c){(function(){var c,d,e,f,g,h,i={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};h=a("underscore"),c=a("../../core-view"),f=a("../../templates"),d=40,g=38,e={min:0,max:0,average:0,stdev:0},b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return j(b,a),b.prototype.RERENDER_EVENT="change",b.prototype.className="im-summary-stats",b.prototype.template=f.template("summary_stats"),b.prototype.getData=function(){return h.extend({},e,b.__super__.getData.apply(this,arguments))},b.prototype.initialize=function(a){return this.range=a.range,b.__super__.initialize.apply(this,arguments),this.listenTo(this.range,"change",this.setSliderValues),this.listenTo(this.range,"change",this.setButtonDisabledness),this.listenTo(this.range,"change:min",this.onChangeMin),this.listenTo(this.range,"change:max",this.onChangeMax),this.listenForChange(this.model,this.initType,"integral","min","max"),this.initType()},b.prototype.invariants=function(){return{hasRange:"No range"}},b.prototype.hasRange=function(){return null!=this.range},b.prototype.setSliderValues=function(){var a,b,c,d;return c=this.range.toJSON(),b=c.min,a=c.max,null!=(d=this.$slider)?d.slider("option","values",[b,a]):void 0},b.prototype.onChangeMin=function(){var a;if(a=this.range.get("min"),this.$("input.im-range-min").val(a),null!=this.$slider&&this.$slider.slider("values",0)!==a)return this.$slider.slider("values",0,a)},b.prototype.onChangeMax=function(){var a;if(a=this.range.get("max"),this.$("input.im-range-max").val(a),null!=this.$slider&&this.$slider.slider("values",1)!==a)return this.$slider.slider("values",1,a)},b.prototype.setButtonDisabledness=function(){var a;return a=this.range.isNotAll(),this.$(".btn").toggleClass("disabled",!a)},b.prototype.events=function(){return{click:function(a){return a.stopPropagation()},"keyup input.im-range-min":"maybeIncrementMin","keyup input.im-range-max":"maybeIncrementMax","change input.im-range-min":"setRangeMin","change input.im-range-max":"setRangeMax","click .btn-primary":"changeConstraints","click .btn-cancel":"clearRange"}},b.prototype.clearRange=function(){return this.range.set(this.model.pick("min","max"))},b.prototype.maybeIncrementMin=function(a){return this.maybeIncrement("min",a)},b.prototype.maybeIncrementMax=function(a){return this.maybeIncrement("max",a)},b.prototype.maybeIncrement=function(a,b){var c;switch(c=this.range.get(a),b.keyCode){case d:c-=this.step;break;case g:c+=this.step}return this.range.set(a,c)},b.prototype.setRangeMin=function(){return this.range.set({min:this.parse(this.$(".im-range-min").val())})},b.prototype.setRangeMax=function(){return this.range.set({max:this.parse(this.$(".im-range-max").val())})},b.prototype.changeConstraints=function(a){var b,c,d,e,f,g,i;for(a.preventDefault(),a.stopPropagation(),e=this.model.view.toString(),f=this.model.query,c=h.where(f.constraints,{path:e}),d=this.range.nulled?[{path:e,op:"IS NULL"}]:[{path:e,op:">=",value:this.range.get("min")},{path:e,op:"<=",value:this.range.get("max")}],g=0,i=c.length;g<i;g++)b=c[g],f.removeConstraint(b,{silent:!0});return f.addConstraints(d)},b.prototype.postRender=function(){return this.drawSlider()},b.prototype.parse=function(a){try{return 1===this.step?parseInt(a,10):parseFloat(a)}catch(b){return b,this.model.set({error:new Error("Could not parse '"+a+"' as a number")}),null}},b.prototype.initType=function(){var a,b,c,d;return d=this.model.toJSON(),a=d.integral,c=d.min,b=d.max,this.step=a?1:Math.abs((b-c)/100),this.round=a?Math.round:h.identity},b.prototype.drawSlider=function(){var a,b,c;return c=this.model.pick("min","max"),a=c.max,b=c.min,this.activateSlider({range:!0,min:b,max:a,values:[b,a],step:this.step,slide:function(a){return function(b,c){var d;return null!=(d=a.range)?d.set({min:c.values[0],max:c.values[1]}):void 0}}(this)})},b.prototype.reRender=function(){return this.destroySlider(),b.__super__.reRender.apply(this,arguments)},b.prototype.activateSlider=function(a){return this.destroySlider(),this.$slider=this.$(".slider"),this.$slider.slider(a)},b.prototype.destroySlider=function(){if(null!=this.$slider)return this.$slider.slider("destroy"),this.$slider=null},b.prototype.remove=function(){return this.destroySlider(),b.__super__.remove.apply(this,arguments)},b}(c)}).call(this)},{"../../core-view":3,"../../templates":67,underscore:262}],165:[function(a,b,c){(function(){var c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=a("d3-browserify"),e=a("underscore"),c=a("../../core-view"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.chartHeight=0,b.prototype.chartWidth=0,b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.listenTo(this.model,"change:loading",this.reRender)},b.prototype.postRender=function(){if(!this.model.get("loading"))return this.addChart()},b.prototype.addChart=function(){return e.defer(function(a){return function(){var b;try{return a._drawD3Chart()}catch(c){return b=c,a.model.set({error:b})}}}(this))},b.prototype.getScales=function(){throw new Error("Not implemented")},b.prototype.selectNodes=function(a){throw new Error("not implemented")},b.prototype.getChartData=function(a){throw new Error("not implemented")},b.prototype.exit=function(a){return a.remove()},b.prototype.enter=function(a,b){throw new Error("not implemented")},b.prototype.update=function(a,b){throw new Error("not implemented")},b.prototype.drawAxes=function(a,b){},b.prototype.shouldNotDrawChart=function(){return!1},b.prototype._drawD3Chart=function(){var a,b;if(!this.shouldNotDrawChart())return this.initChart(),b=this.getScales(),a=this.getCanvas(),this.updateChart(a,b),this.drawAxes(a,b)},b.prototype.updateChart=function(a,b){var c;if(!this.shouldNotDrawChart())return null==a&&(a=this.getCanvas()),null==b&&(b=this.getScales()),c=this.selectNodes(a).data(this.getChartData(b)),this.exit(c.exit()),this.enter(c.enter(),b),this.update(c,b)},b.prototype.initChart=function(){return this.chartWidth=this.$el.closest(":visible").width()},b.prototype.getCanvas=function(){return null!=this.paper?this.paper:this.paper=d.select(this.el).append("svg").attr("class","im-summary-chart").attr("width",this.chartWidth).attr("height",this.chartHeight)},b}(c)}).call(this)},{"../../core-view":3,"d3-browserify":237,underscore:262}],166:[function(a,b,c){(function(){var c,d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};f=a("../../options"),c=a("../../core-view"),e=a("./numeric"),g=a("./pie"),d=a("./histogram"),a("./summary-items"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.className="im-facet-vis",b.prototype.initialize=function(a){return this.range=a.range,b.__super__.initialize.apply(this,arguments)},b.prototype.RERENDER_EVENT="change:loading change:numeric change:canHaveMultipleValues",b.prototype.postRender=function(){if(this.model.get("initialized"))return this.renderChild("vis",this.getVisualization())},b.prototype.getVisualization=function(a){var b,c,h,i,j;switch(j=this.model.toJSON(),i=j.uniqueValues,h=j.numeric,b=j.canHaveMultipleValues,j.type,c=j.got,!1){case!h:return new e({model:this.model,range:this.range});case 1!==i:return null;case!b:return new d({model:this.model});case!(0<i&&i<=f.get("MAX_PIE_SLICES")):return new g({model:this.model});case!c:return new d({model:this.model});default:return null}},b}(c)}).call(this)},{"../../core-view":3,"../../options":63,"./histogram":152,"./numeric":155,"./pie":157,"./summary-items":163}],167:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k={}.hasOwnProperty,l=function(a,b){function c(){this.constructor=a}for(var d in b)k.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};j=a("underscore"),e=a("../core-view"),h=a("./modal"),g=a("../messages"),i=a("../templates"),d=a("./constraints"),a("../messages/constraints"),a("../messages/logic"),f=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return l(b,a),b.prototype.className="form im-evenly-spaced im-constraint-logic",b.prototype.tagName="form",b.prototype.template=i.template("logic-manager-body"),b.prototype.parameters=["query"],b.prototype.initialize=function(){var a,c;return b.__super__.initialize.apply(this,arguments),c=function(){var b,c,d,e;for(d=this.query.constraints,e=[],b=0,c=d.length;b<c;b++)a=d[b],a.code&&e.push(a.code);return e}.call(this),this.model.set({logic:this.query.constraintLogic}),this.state.set({disabled:!0,defaultLogic:c.join(" and ")})},b.prototype.events=function(){return{"change .im-logic":this.setLogic,submit:this.applyChanges}},b.prototype.modelEvents=function(){return{"change:logic":this.setDisabled}},b.prototype.stateEvents=function(){return{"change:disabled":this.reRender}},b.prototype.setDisabled=function(){var a,b;return b=this.model.get("logic"),a=this.query.constraintLogic,this.state.set({disabled:b===a})},b.prototype.setLogic=function(a){return this.model.set({logic:a.target.value})},b.prototype.applyChanges=function(a){var b;if(null!=a&&a.preventDefault(),null!=a&&a.stopPropagation(),!this.state.get("disabled"))return b=this.model.get("logic"),this.query.constraintLogic=b,this.query.trigger("change:logic",b)},b}(e),c=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}var c;return l(b,a),b.prototype.template=i.template("active-constraints"),b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.assignCodes()},b.prototype.stateEvents=function(){return{"change:adding":this.reRender}},c="ABCDEFGHIJKLMNOPQRSTUVWXYZ",b.prototype.assignCodes=function(){var a,b,d,e,f,g,h;if(e=function(){var b,c,d,e;for(d=this.query.constraints,e=[],b=0,c=d.length;b<c;b++)a=d[b],null!=a.op&&e.push(a);return e}.call(this),!(e.length<2)){for(d=c.split(""),h=[],f=0,g=e.length;f<g;f++)a=e[f],null==a.code&&h.push(function(){var c;for(c=[];null==a.code&&(b=d.shift());)j.any(e,function(a){return a.code===b})?c.push(void 0):c.push(a.code=b);return c}());return h}},b.prototype.postRender=function(){var a,c;return b.__super__.postRender.apply(this,arguments),a=this.getConstraints(),a.length>1&&this.renderChild("logic",new f({query:this.query})),c=this.state.get("adding")?"slideUp":"slideDown",this.$(".im-current-constraints")[c](400)},b.prototype.getConAdder=function(){if(this.state.get("adding"))return b.__super__.getConAdder.apply(this,arguments)},b}(d),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return l(b,a),b.prototype.parameters=["query"],b.prototype.modalSize=function(){return"lg"},b.prototype.className=function(){return b.__super__.className.apply(this,arguments)+" im-filter-manager"},b.prototype.title=function(){return g.getText("constraints.Heading",{n:this.query.constraints.length})},b.prototype.initState=function(){return this.state.set({adding:!1,disabled:!1})},b.prototype.act=function(){return this.state.set({adding:!0,disabled:!0})},b.prototype.dismissAction=function(){return g.getText("Cancel")},b.prototype.primaryAction=function(){return g.getText("constraints.DefineNew")},b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.listenTo(this,"shown",this.renderBodyContent),this.listenTo(this.query,"change:constraints",this.onChangeConstraints)},b.prototype.onChangeConstraints=function(){return this.initState(),this.renderTitle()},b.prototype.renderBodyContent=function(){var a;if(this.shown)return a=this.$(".modal-body"),j.defer(function(b){return function(){return b.renderChild("cons",new c({state:b.state,query:b.query}),a)}}(this))},b}(h)}).call(this)},{"../core-view":3,"../messages":16,"../messages/constraints":21,"../messages/logic":25,"../templates":67,"./constraints":131,"./modal":197,underscore:262}],168:[function(a,b,c){(function(){var c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=a("../query-dialogue-button"),c=a("../filter-dialogue"),a("../../messages/constraints"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.className="im-filter-dialogue-button",b.prototype.longLabel="constraints.ManageFilters",b.prototype.shortLabel="constraints.ManageFiltersShort",b.prototype.icon="Filter",b.prototype.Dialogue=c,b}(d)}).call(this)},{"../../messages/constraints":21,"../filter-dialogue":167,"../query-dialogue-button":206}],169:[function(a,b,c){(function(){var c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("../core-view"),a("../templates"),d=a("./formatted/sorting-path"),e=a("../utils/sort-query-by-path"),
b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.className="im-col-sort-menu no-margins",b.prototype.tagName="ul",b.prototype.initialize=function(a){return this.query=a.query,b.__super__.initialize.apply(this,arguments),this.setPathNames()},b.prototype.modelEvents=function(){return{"change:displayName":this.initState,"change:replaces":this.setPathNames}},b.prototype.initState=function(){return this.state.set({group:this.model.get("displayName")})},b.prototype.setPathNames=function(){var a,b,c,d,e;for(d=this.getPaths(),e=[],b=0,c=d.length;b<c;b++)a=d[b],e.push(function(a){return function(b){var c;return c=b.toString(),a.state.has(c)||a.state.set(c,""),b.getDisplayName().then(function(b){return a.state.set(c,b)})}}(this)(a));return e},b.prototype.getPaths=function(){var a;return a=this.model.get("replaces"),a.length?a.slice():[this.query.makePath(this.model.get("path"))]},b.prototype.preRender=function(a){var b,c;if(b=(c=this.getPaths())[0],1===c.length)return a.cancel(),e(this.query,b)},b.prototype.postRender=function(){var a,b,c,e,f,g;for(f=this.getPaths(),g=[],a=c=0,e=f.length;c<e;a=++c)b=f[a],g.push(this.renderChild(a,new d({model:this.model,state:this.state,query:this.query,path:b})));return g},b}(c)}).call(this)},{"../core-view":3,"../templates":67,"../utils/sort-query-by-path":105,"./formatted/sorting-path":170}],170:[function(a,b,c){(function(){var c,d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("../../core-view"),f=a("../../templates"),e=a("../../icons"),g=a("../../utils/sort-query-by-path"),d=/^\s*>\s*/,b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.tagName="li",b.prototype.className="im-formatted-path im-subpath",b.prototype.parameters=["query","path"],b.prototype.stateEvents=function(){return{change:this.reRender}},b.prototype.getData=function(){var a,b,c,f;return c=this.state.toJSON(),b=null!=(f=c[this.path])?f.replace(c.group,"").replace(d,""):void 0,a=this.query.getSortDirection(this.path),{Icons:e,name:b,direction:a}},b.prototype.template=f.template("formatted_sorting"),b.prototype.events=function(){return{click:"sortByPath"}},b.prototype.sortByPath=function(){return g(this.query,this.path)},b}(c)}).call(this)},{"../../core-view":3,"../../icons":14,"../../templates":67,"../../utils/sort-query-by-path":105}],171:[function(a,b,c){(function(){c.openDialogue=function(a){return this.renderChild("__dialogue__",a),a.show()},c.getDialogue=function(){var a;return null!=(a=this.children)?a.__dialogue__:void 0}}).call(this)},{}],172:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B={}.hasOwnProperty,C=function(a,b){function c(){this.constructor=a}for(var d in b)B.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},D=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},E=function(a,b){return function(){return a.apply(b,arguments)}};A=a("underscore"),o=a("es6-promise").Promise,t=a("../templates"),f=a("../core-view"),e=a("../core-model"),l=a("../options"),d=a("../core/collection"),m=a("../models/path"),z=a("../core/type-assertions"),y=a("../utils/get-leaves"),k=a("./item-preview/details"),q=a("./item-preview/reference-counts"),g=a("./item-preview/counts-title"),w=function(a,b){return"Could not determine origin of "+a+" from ["+b.join(", ")+"]"},h=function(a){function b(a){b.__super__.constructor.call(this,a.path),this.set(A.omit(a,"path"))}return C(b,a),b}(m),c=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return C(b,a),b.prototype.defaults=function(){return A.extend(b.__super__.defaults.apply(this,arguments),{fieldType:"ATTR",valueOverspill:null,tooLong:!1,value:null})},b}(h),p=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return C(b,a),b.prototype.defaults=function(){return A.extend(b.__super__.defaults.apply(this,arguments),{fieldType:"REF",values:[]})},b}(h),s=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return C(b,a),b.prototype.comparator="displayName",b.prototype.initialize=function(){return this.listenTo(this,"change:displayName",this.sort)},b}(d),n=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return C(b,a),b.prototype.defaults=function(){return{types:[],id:null,error:null,phase:"FETCHING"}},b}(e),i=t.template("cell-preview-error"),j=["class","objectId"],x=function(a,b){return a.concat(b)},u=function(){return function(a,b){return null!=b&&!b.objectId&&D.call(j,a)<0}},v=function(){return function(a,b){return null!=b?b.objectId:void 0}},r=new z.Structure("ServiceType",{root:z.String,count:z.Function,findById:z.Function,fetchModel:z.Function}),b.exports=function(a){function b(){return this.handleItem=E(this.handleItem,this),b.__super__.constructor.apply(this,arguments)}return C(b,a),b.prototype.Model=n,b.prototype.className="im-cell-preview-inner",b.prototype.parameters=["service"],b.prototype.parameterTypes={service:r},b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.fieldDetails=new s,this.referenceFields=new s},b.prototype.modelEvents=function(){return{"change:phase":this.reRender,"change:error":this.reRender}},b.prototype.remove=function(){return this.removeAllChildren(),this.fieldDetails.close(),this.referenceFields.close(),delete this.fieldDetails,delete this.referenceFields,b.__super__.remove.apply(this,arguments)},b.prototype.fetching=null,b.prototype.template=function(a){var b,c;switch(c=a.phase,b=a.error,c){case"FETCHING":return this.helpers().IndeterminateProgressBar;case"ERROR":return i(b);default:return null}},b.prototype.preRender=function(){var a;return a=this.model,null==this.fetching&&(this.fetching=this.fetchData()),this.fetching.then(function(){return a.set({phase:"SUCCESS"})},function(b){return console.error(b),a.set({phase:"ERROR",error:b})})},b.prototype.postRender=function(){var a,b,c,d,e;if("SUCCESS"===this.model.get("phase")){for(d=this.model.get("types"),e=[],b=0,c=d.length;b<c;b++)a=d[b],e.push(this.$el.addClass(a));return e}},b.prototype.renderChildren=function(){var a,b,c;return b=new k({collection:this.fieldDetails}),this.renderChild("details",b),a=new g({collection:this.referenceFields}),this.renderChild("counttitle",a),c=new q({collection:this.referenceFields}),this.renderChild("counts",c),this.$el.append(t.clear)},b.prototype.fetchData=function(){return this.service.fetchModel().then(function(a){return function(b){var c,d;return a.schema=b,d=a.getAllDetails(),l.get("ItemDetails.ShowReferenceCounts")?(c=a.getRelationCounts(),o.all(d.concat(c))):o.all(d)}}(this))},b.prototype.getAllDetails=function(){var a,b,c,d,e;for(d=this.model.get("types"),e=[],b=0,c=d.length;b<c;b++)a=d[b],e.push(this.getDetails(a));return e},b.prototype.getDetails=function(a){var b,c;return c=this.model.get("id"),b=l.get(["ItemDetails","Fields",this.schema.name,a]),this.service.findById(a,c,b).then(this.handleItem)},b.prototype.handleItem=function(a){var b,c,d,e,f,g,h;c=this.fieldDetails,f=u(c),g=v(c),b=function(){var a,b,c,d;for(c=this.model.get("types"),d=[],a=0,b=c.length;a<b;a++)e=c[a],d.push(this.schema.classes[e]);return d}.call(this);for(d in a)h=a[d],f(d,h)&&this.handleAttribute(a,b,d,h);for(d in a)h=a[d],g(d,h)&&this.handleSubObj(a,b,d,h);return null},b.prototype.getPathForField=function(a,b){var c;if(null==(c=A.find(a,function(a){return null!=a.fields[b]})))throw new Error(w(b,A.pick(a,"name")));return this.schema.makePath(c.name+"."+b)},b.prototype.handleSubObj=function(a,b,c,d){var e,f,g;return f=this.getPathForField(b,c),g=y(d,j),e={path:f,field:c,values:g},this.fieldDetails.add(new p(e))},b.prototype.handleAttribute=function(a,b,d,e){var f,g,h,i,j;return h=this.getPathForField(b,d),g={path:h,field:d,value:e},(null!=e&&"String"===h.getType()||/Clob/.test(h.getType()))&&(f=l.get("CellCutoff"),j=String(e),e.length>f&&(i=j.indexOf(" ",.9*f),-1===i&&(i=f),g.tooLong=!0,g.valueOverspill=j.substring(i),g.value=j.substring(0,i))),this.fieldDetails.add(new c(g))},b.prototype.getRelationCounts=function(){var a,b,c,d,e,f,g,h;return z=this.model.get("types"),e=this.service.root,d=null!=(h=l.get(["ItemDetails","Count",e]))?h:{},c=function(){var c,e,h;for(h=[],c=0,e=z.length;c<e;c++)g=z[c],b=this.schema.classes[g],h.push(function(){var c,e,h,i,j;for(i=null!=(h=d[g])?h:function(){var c;c=[];for(a in b.collections)c.push(a);return c}(),j=[],c=0,e=i.length;c<e;c++)f=i[c],j.push(this.getRelationCount(f,g));return j}.call(this));return h}.call(this),c.reduce(x,[])},b.prototype.getRelationCount=function(a,b){var c,d,f,g,i,j,k;if(f=this.model.get("id"),A.isObject(a))j=a.query,g=a.label,c=j(f),d=function(a){return new e({parts:[g],id:g,displayName:g,count:a})};else{if(i=this.schema.makePath(b+"."+a),!(null!=(k=i.getType())?k.attributes.id:void 0))return o.resolve(!0);c={select:[a+".id"],from:b,where:{id:f}},d=function(a){return new h({path:i,count:a})}}return this.service.count(c).then(d).then(function(a){return function(b){if(b.get("count"))return a.referenceFields.add(b)}}(this))},b}(f)}).call(this)},{"../core-model":2,"../core-view":3,"../core/collection":5,"../core/type-assertions":10,"../models/path":56,"../options":63,"../templates":67,"../utils/get-leaves":83,"./item-preview/counts-title":173,"./item-preview/details":174,"./item-preview/reference-counts":175,"es6-promise":238,underscore:262}],173:[function(a,b,c){(function(){var c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=a("underscore"),c=a("../../core-view"),d=a("../../messages"),d.setWithPrefix("preview",{RelatedItemsHeading:"Related Items"}),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.tagName="h4",b.prototype.collectionEvents=function(){return{"add remove reset":this.setVisibility}},b.prototype.setVisibility=function(){return this.$el.toggleClass("im-hidden",this.collection.isEmpty())},b.prototype.template=function(){return e.escape(d.getText("preview.RelatedItemsHeading"))},b.prototype.postRender=function(){return this.setVisibility()},b}(c)}).call(this)},{"../../core-view":3,"../../messages":16,underscore:262}],174:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};i=a("underscore"),g=a("../../templates"),d=a("../../core-view"),h=a("../../utils/events").ignore,e=g.template("cell-preview-items"),f=g.template("cell-preview-reference"),c=g.template("cell-preview-attribute"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return k(b,a),b.prototype.tagName="table",b.prototype.className="im-item-details table table-condensed table-bordered",b.prototype.template=e,b.prototype.collectionEvents=function(){return{sort:this.reRender,add:this.addDetail}},b.prototype.events=function(){return{"click .im-too-long":this.revealLongField}},b.prototype.postRender=function(){return this.collection.each(function(a){return function(b){return a.addDetail(b)}}(this))},b.prototype.addDetail=function(a){return this.$el.append(this["render"+a.get("fieldType")](a.toJSON()))},b.prototype.renderATTR=function(a){return c(i.extend(this.getBaseData(),a))},b.prototype.renderREF=f,b.prototype.revealLongField=function(a){var b,c;return h(a),c=this.$(".im-too-long"),b=this.$(".im-overspill"),c.remove(),b.slideDown(250)},b}(d)}).call(this)},{"../../core-view":3,"../../templates":67,"../../utils/events":81,underscore:262}],175:[function(a,b,c){(function(){var c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=a("../../templates"),c=a("../../core-view"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.className="im-related-counts",b.prototype.tagName="ul",b.prototype.collectionEvents=function(){return{"add change sort":this.reRender}},b.prototype.template=d.template("cell-preview-reference-relation"),b}(c)}).call(this)},{"../../core-view":3,"../../templates":67}],176:[function(a,b,c){(function(){var c,d,e,f,g,h,i={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};h=a("underscore"),a("../core-view"),e=a("../messages"),f=a("./modal"),c=a("./join-manager/body"),d=a("../models/joins"),a("../messages/joins"),g=function(a,b){return a.length===b.length&&h.all(a,function(a,c){return a===b[c]})},b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return j(b,a),b.prototype.parameters=["query"],b.prototype.className=function(){return b.__super__.className.apply(this,arguments)+" im-join-manager"},b.prototype.title=function(){return e.getText("joins.Heading")},b.prototype.dismissAction=function(){return e.getText("Cancel")},b.prototype.primaryAction=function(){return e.getText("modal.ApplyChanges")},b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.joins=d.fromQuery(this.query),this.listenTo(this.joins,"change:style",this.setDisabled)},b.prototype.initState=function(){return this.state.set({disabled:!0})},b.prototype.act=function(){var a;if(!this.state.get("disabled"))return a=this.joins.getJoins(),this.query.joins=a,this.query.trigger("change:joins",a),this.resolve(a)},b.prototype.setDisabled=function(){var a,b,c,d;return a=h.keys(this.joins.getJoins()),b=function(){var a,b;a=this.query.joins,b=[];for(c in a)"OUTER"===(d=a[c])&&b.push(c);return b}.call(this),a.sort(),b.sort(),this.state.set({disabled:g(a,b)})},b.prototype.postRender=function(){var a;return b.__super__.postRender.apply(this,arguments),a=this.$(".modal-body"),this.renderChild("cons",new c({collection:this.joins}),a)},b}(f)}).call(this)},{"../core-view":3,"../messages":16,"../messages/joins":23,"../models/joins":47,"./join-manager/body":177,"./modal":197,underscore:262}],177:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k={}.hasOwnProperty,l=function(a,b){function c(){this.constructor=a}for(var d in b)k.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};j=a("underscore"),e=a("../../core-view"),h=a("../../templates"),d=a("../../utils/css-class-set"),a("../../messages/joins"),g=["join-style","column-manager-path-name","clear"],c=function(a){function b(a,c){b.__super__.constructor.call(this,{"btn btn-default":!0,active:function(){return c===a.get("style")}})}return l(b,a),b}(d),i=function(a){switch(a){case"INNER":return"OUTER";case"OUTER":default:return"INNER"}},f=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return l(b,a),b.prototype.tagName="li",b.prototype.className="list-group-item",b.prototype.template=h.templateFromParts(g),b.prototype.modelEvents=function(){return{"change:style change:parts":this.reRender}},b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.classSets={innerJoinBtn:new c(this.model,"INNER"),outerJoinBtn:new c(this.model,"OUTER")}},b.prototype.getData=function(){return j.extend(b.__super__.getData.apply(this,arguments),this.classSets)},b.prototype.events=function(){return{"click button":this.onButtonClick}},b.prototype.onButtonClick=function(a){if(!/active/.test(a.target.className))return this.model.swap("style",i)},b}(e),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return l(b,a),b.prototype.template=h.template("join-manager-body"),b.prototype.initState=function(){return this.state.set({explaining:!1})},b.prototype.postRender=function(){return this.$group=this.$(".list-group"),this.collection.each(function(a){return function(b){return a.addJoin(b)}}(this))},b.prototype.addJoin=function(a){if(this.rendered)return this.renderChild(a.id,new f({model:a}),this.$group)},b.prototype.removeJoin=function(a){return this.removeChild(a.id)},b.prototype.events=function(){return{"click .alert-info strong":function(){return this.state.toggle("explaining")}}},b.prototype.stateEvents=function(){return{"change:explaining":this.onChangeExplaining}},b.prototype.collectionEvents=function(){return{add:this.addJoin,remove:this.removeJoin,sort:this.reRender}},b.prototype.onChangeExplaining=function(){var a,b;if(this.rendered)return b=this.$(".alert-info p"),a=this.state.get("explaining")?"slideDown":"slideUp",b[a]()},b}(e)}).call(this)},{"../../core-view":3,"../../messages/joins":23,"../../templates":67,"../../utils/css-class-set":79,underscore:262}],178:[function(a,b,c){(function(){var c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=a("../query-dialogue-button"),c=a("../join-manager"),a("../../messages/joins"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.className="im-join-manager-button",b.prototype.longLabel="joins.Manage",b.prototype.shortLabel="joins.ManageShort",b.prototype.icon="Joins",b.prototype.Dialogue=c,b}(d)}).call(this)},{"../../messages/joins":23,"../join-manager":176,"../query-dialogue-button":206}],179:[function(a,b,c){(function(){var c,d={}.hasOwnProperty,e=function(a,b){function c(){this.constructor=a}for(var e in b)d.call(b,e)&&(a[e]=b[e]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("../core-view"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return e(b,a),b.prototype.RERENDER_EVENT="change",b.prototype.tagName="span",b}(c)}).call(this)},{"../core-view":3}],180:[function(a,b,c){(function(){var c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};a("es6-promise").Promise,c=a("./base-append-dialogue"),d=a("./from-path-mixin"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.include(d(c)),b}(c)}).call(this)},{"./base-append-dialogue":183,"./from-path-mixin":189,"es6-promise":238}],181:[function(a,b,c){(function(){var c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};a("es6-promise").Promise,c=a("./base-append-dialogue"),d=a("../../mixins/floating-dialogue"),e=a("./from-selection-mixin"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.include(d),b.include(e(c)),b}(c)}).call(this)},{"../../mixins/floating-dialogue":30,"./base-append-dialogue":183,"./from-selection-mixin":190,"es6-promise":238}],182:[function(a,b,c){(function(){var c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};a("underscore"),c=a("../../core-view"),a("../../templates"),a("../../messages"),d=a("../../core/select-with-label"),a("../../messages/lists"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.parameters=["model","collection"],b.prototype.postRender=function(){return this.renderListSelector()},b.prototype.renderListSelector=function(){var a;return a=new d({model:this.model,collection:this.collection,attr:"target",label:"lists.params.Target",optionLabel:"lists.PossibleAppendTarget",helpMessage:"lists.params.help.Target",noOptionsMessage:"lists.append.NoSuitableLists",getProblem:function(a){return!(null!=a?a.length:void 0)}}),this.listenTo(a.state,"change:error",console.error.bind(console)),this.renderChild("list-selector",a)},b}(c)}).call(this)},{"../../core-view":3,"../../core/select-with-label":9,"../../messages":16,"../../messages/lists":24,"../../templates":67,underscore:262}],183:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t={}.hasOwnProperty,u=function(a,b){function c(){this.constructor=a}for(var d in b)t.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};s=a("underscore"),n=a("es6-promise").Promise,f=a("../../core/collection"),g=a("../../core-model"),i=a("../../messages"),e=a("./base-dialogue"),c=a("./append-to-list-body"),d=a("../../models/append-to-list"),j={key:"lists.NoSuitableLists",level:"Warning",cannotDismiss:!0},h={key:"lists.TargetNotCorrectType",level:"Error",cannotDismiss:!0},o={key:"lists.TargetDoesNotExist",level:"Error",cannotDismiss:!0},k={key:"lists.NoTargetSelected",level:"Info",cannotDismiss:!0},q=function(a){return function(b){if(!a.isa(b.type))return n.reject(h)}},p=function(a){return s.where(a,{status:"CURRENT"})},r=function(a){var b,c,d,e,f,g,h;for(h=[],e=0,f=a.length;e<f;e++)g=a[e],b=g.name,d=g.type,c=g.size,h.push({name:b,type:d,size:c,id:b});return h},l=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return u(b,a),b.prototype.defaults=function(){return{typeName:null,name:null,size:0}},b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.fetchTypeName()},b.prototype.fetchTypeName=function(){var a,b;return a=this.collection.service,b=this.get("type"),a.fetchModel().then(function(a){return a.makePath(b)}).then(function(a){return a.getDisplayName()}).then(function(a){return function(b){return a.set({typeName:b})}}(this))},b}(g),m=function(a){function b(a){this.service=a.service,b.__super__.constructor.call(this)}return u(b,a),b.prototype.model=l,b}(f),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return u(b,a),b.prototype.Body=c,b.prototype.Model=d,b.prototype.title=function(){return i.getText("lists.AppendToListTitle",this.getData())},b.prototype.primaryAction=function(){return i.getText("lists.Append")},b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.listenTo(this.getPossibleLists(),"remove reset",this.verifyState),this.listenTo(this.getPossibleLists(),"add reset",this.setTargetIfOnlyOne)},b.prototype.getPossibleLists=function(){return null!=this.possibleLists?this.possibleLists:this.possibleLists=new m({service:this.getService()})},b.prototype.processQuery=function(a){return a.appendToList(this.model.get("target"))},b.prototype.modelEvents=function(){return s.extend(b.__super__.modelEvents.apply(this,arguments),{"change:target":"onChangeTarget"})},b.prototype.initState=function(){return b.__super__.initState.apply(this,arguments),this.fetchSuitableLists(),this.verifyState()},b.prototype.checkThereAreLists=function(){if(!this.getPossibleLists().size())return this.state.set({error:j})},b.prototype.onChangeTarget=function(){return this.setTitle(),this.verifyState()},b.prototype.verifyState=function(){return this.state.unset("error"),this.checkThereAreLists(),this.verifyTarget(),this.verifyTargetExistsAndIsSuitable()},b.prototype.setTargetIfOnlyOne=function(){var a;if(a=this.getPossibleLists(),1===a.length)return this.model.set({target:a.at(0).get("name")})},b.prototype.verifyTarget=function(){if(!this.model.get("target"))return this.state.set({error:k})},b.prototype.onChangeType=function(){return b.__super__.onChangeType.apply(this,arguments),this.fetchSuitableLists()},b.prototype.getBodyOptions=function(){return s.extend(b.__super__.getBodyOptions.apply(this,arguments),{collection:this.getPossibleLists()})},b.prototype.verifyTargetExistsAndIsSuitable=function(){var a,b,c;if(null!=(c=this.getType())&&null!=(b=this.model.get("target")))return a=c.model.makePath(c.name),this.getService().fetchList(b).then(q(a),function(){return o}).then(null,function(a){return function(b){return a.state.set({error:b})}}(this))},b.prototype.fetchSuitableLists=function(){var a,b;return null==(b=this.getType())?this.getPossibleLists().reset():(a=b.model.makePath(b.name),this.getService().fetchLists().then(function(b){return s.filter(b,function(b){return a.isa(b.type)})}).then(p).then(r).then(function(a){return function(b){return a.getPossibleLists().reset(b)}}(this)).then(null,function(a){return function(b){return a.state.set({error:b})}}(this)))},b}(e)}).call(this)},{"../../core-model":2,"../../core/collection":5,"../../messages":16,"../../models/append-to-list":35,"./append-to-list-body":182,"./base-dialogue":184,"es6-promise":238,underscore:262}],184:[function(a,b,c){(function(){var c,d,e,f,g,h,i={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};h=a("underscore"),g=a("../modal"),f=a("../../messages"),d=a("../../models/create-list"),e=a("./body"),a("../../messages/lists"),c=function(){throw new Error("not implemented")},b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return j(b,a),b.prototype.getQuery=c,b.prototype.fetchCount=c,b.prototype.getType=c,b.prototype.getService=function(){return c},b.prototype.Model=d,b.prototype.Body=e,b.prototype.className=function(){return b.__super__.className.apply(this,arguments)+" im-list-dialogue im-create-list"},b.prototype.title=function(){return f.getText("lists.CreateListTitle",this.getData())},b.prototype.primaryAction=function(){return f.getText("lists.Create")},b.prototype.act=function(){return this.getQuery().then(function(a){return function(b){return a.processQuery(b)}}(this)).then(this.resolve,function(a){return function(b){return a.state.set({error:b})}}(this))},b.prototype.verifyState=function(){return this.state.set({error:null})},b.prototype.processQuery=function(a){return a.saveAsList(this.model.toJSON())},b.prototype.modelEvents=function(){return{"change:type":"onChangeType"}},b.prototype.onChangeType=function(){return this.setTypeName()},b.prototype.stateEvents=function(){return{"change:typeName change:count":"setTitle","change:typeName":"setListName","change:error":function(){return console.log(this.state.get("error"))}}},b.prototype.setTitle=function(){return this.$(".modal-title").text(this.title())},b.prototype.setListName=function(){return this.model.set({name:f.getText("lists.DefaultName",this.state.toJSON())})},b.prototype.initState=function(){return this.state.set({existingLists:{},minimised:h.result(this,"initiallyMinimised")}),this.setTypeName(),this.setCount(),this.checkAuth(),this.getService().fetchLists().then(function(a){return h.where(a,{authorized:!0})}).then(function(a){return h.groupBy(a,"name")}).then(function(a){return function(b){return a.state.set({existingLists:b})}}(this))},b.prototype.setCount=function(){return this.fetchCount().then(function(a){return function(b){return a.state.set({count:b})}}(this)).then(null,function(a){return function(b){return a.state.set({error:b})}}(this))},b.prototype.setTypeName=function(){var a;return null!=(a=this.getType())?a.getDisplayName().then(function(a){return function(b){return a.state.set({typeName:b})}}(this)).then(null,function(a){return function(b){return a.state.set({error:b})}}(this)):void 0},b.prototype.checkAuth=function(){return this.getService().whoami().then(null,function(a){return function(){return a.state.set({error:{level:"Error",key:"lists.error.MustBeLoggedIn"}})}}(this))},b.prototype.getBodyOptions=function(){return{model:this.model,state:this.state}},b.prototype.postRender=function(){return b.__super__.postRender.apply(this,arguments),this.renderChild("body",new this.Body(this.getBodyOptions()),this.$(".modal-body"))},b}(g)}).call(this)},{"../../messages":16,"../../messages/lists":24,"../../models/create-list":41,"../modal":197,"./body":185,underscore:262}],185:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l={}.hasOwnProperty,m=function(a,b){function c(){this.constructor=a}for(var d in b)l.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};k=a("underscore"),c=a("../../core-view"),j=a("../../templates"),h=a("../../messages"),d=a("../../models/create-list"),f=a("../../core/input-with-label"),e=a("../../core/input-with-button"),g=a("./tag"),i=a("./tags-apology"),a("../../messages/lists"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return m(b,a),b.prototype.Model=d,b.prototype.template=j.template("list-dialogue-body"),b.prototype.getData=function(){return k.extend(b.__super__.getData.apply(this,arguments))},b.prototype.modelEvents=function(){return{"add:tag":"addTag"}},b.prototype.stateEvents=function(){return{"change:minimised":"toggleOptionalAttributes"}},b.prototype.events=function(){return{"click .im-more-options":function(a){return function(){return a.state.toggle("minimised")}}(this)}},b.prototype.$tags=null,b.prototype.postRender=function(){return this.renderListNameInput(),this.renderListDescInput(),this.renderTags()},b.prototype.renderTags=function(){return this.$tags=this.$(".im-active-tags"),this.addTags(),this.renderApology(),this.renderTagAdder()},b.prototype.renderTagAdder=function(){var a;return a=new e({model:this.model,placeholder:"lists.AddTag",button:"lists.AddTagBtn",sets:"nextTag"}),this.listenTo(a,"act",this.addNextTag),this.renderChildAt(".im-next-tag",a)},b.prototype.addTags=function(){return this.model.tags.each(function(a){return function(b){return a.addTag(b)}}(this))},b.prototype.addTag=function(a){if(this.rendered)return this.renderChild("tag-"+a.get("id"),new g({model:a}),this.$tags)},b.prototype.toggleOptionalAttributes=function(){var a,b,c;return c=this.state.toJSON(),a=this.$(".im-optional-attributes"),c.minimised?a.slideUp():a.slideDown(),b=h.getText("lists.ShowExtraOptions",c),this.$(".im-more-options .msg").text(b)},b.prototype.renderApology=function(){return this.renderChildAt(".im-apology",new i({collection:this.model.tags}))},b.prototype.renderListNameInput=function(){var a;return a=new f({model:this.model,attr:"name",label:"lists.params.Name",helpMessage:"lists.params.help.Name",placeholder:"lists.params.NamePlaceholder",getProblem:function(a){return function(b){return a.validateName(b)}}(this)}),this.listenTo(a.state,"change:problem",function(){var b;return b=a.state.get("problem"),this.state.set({disabled:!!b})}),this.renderChildAt(".im-list-name",a)},b.prototype.validateName=function(a){var b;return!(b=null!=a?a.replace(/(^\s+|\s+$)/g,""):void 0)||this.state.get("existingLists")[b]},b.prototype.renderListDescInput=function(){return this.renderChildAt(".im-list-desc",new f({model:this.model,attr:"description",label:"lists.params.Desc",placeholder:"lists.params.DescPlaceholder"}))},b.prototype.addNextTag=function(){return this.model.addTag()},b}(c)}).call(this)},{"../../core-view":3,"../../core/input-with-button":6,"../../core/input-with-label":7,"../../messages":16,"../../messages/lists":24,"../../models/create-list":41,"../../templates":67,"./tag":191,"./tags-apology":192,underscore:262}],186:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q={}.hasOwnProperty,r=function(a,b){function c(){this.constructor=a}for(var d in b)q.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};p=a("underscore"),h=a("../../core-view"),g=a("../../core-model"),f=a("../../core/collection"),o=a("../../templates"),e=a("../../utils/css-class-set"),i=a("../../utils/count-executor"),
l=a("../../models/path"),d=a("./append-from-selection"),k=a("./create-from-selection"),c=a("./append-from-path"),j=a("./create-from-path"),a("../../messages/lists"),m=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return r(b,a),b.prototype.model=l,b}(f),n=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return r(b,a),b.prototype.parameters=["query","model","showDialogue","highLight"],b.prototype.tagName="li",b.prototype.modelEvents=function(){return{"change:displayName change:typeName":this.reRender}},b.prototype.stateEvents=function(){return{"change:count":this.reRender}},b.prototype.Model=l,b.prototype.template=o.template("list-dialogue-button-node"),b.prototype.events=function(){return{click:this.openDialogue,"mouseenter a":function(){return p.defer(function(a){return function(){return a.highLight(a.model.get("path"))}}(this))},"mouseout a":function(){return this.highLight(null)}}},b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.query.summarise(this.model.get("id")).then(function(a){return function(b){var c;return c=b.stats,a.state.set({count:c.uniqueValues})}}(this))},b.prototype.openDialogue=function(){var a;return a={query:this.query,path:this.model.get("id")},this.showDialogue(a)},b}(h),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return r(b,a),b.prototype.tagName="div",b.prototype.className="btn-group list-dialogue-button",b.prototype.template=o.template("list-dialogue-button"),b.prototype.parameters=["query","selected"],b.prototype.optionalParameters=["tableState"],b.prototype.tableState=new g,b.prototype.initState=function(){return this.state.set({action:"create",authenticated:!1,disabled:!1})},b.prototype.stateEvents=function(){return{"change:action":this.setActionButtonState,"change:authenticated":this.setVisible,"change:disabled":this.onChangeDisabled}},b.prototype.events=function(){return{"click .im-create-action":this.setActionIsCreate,"click .im-append-action":this.setActionIsAppend,"click .im-pick-items":this.startPicking}},b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.initBtnClasses(),this.paths=new m,this.query.getQueryNodes().reverse().forEach(function(a){return function(b){return a.paths.add(new l(b))}}(this)),this.query.service.whoami().then(function(a){return function(b){return a.state.set({authenticated:!!b})}}(this)),i.count(this.query).then(function(a){return function(b){return a.state.set({disabled:0===b})}}(this)).then(null,function(a){return function(b){return a.state.set({disabled:!0,error:b})}}(this))},b.prototype.getData=function(){return p.extend(b.__super__.getData.apply(this,arguments),this.classSets,{paths:this.paths.toJSON()})},b.prototype.postRender=function(){var a,b,c;return this.setVisible(),this.onChangeDisabled(),b=this.$(".dropdown-menu"),a=function(a){return function(b){return a.tableState.set({highlitNode:b})}}(this),c=function(a){return function(b){return a.showPathDialogue(b)}}(this),this.paths.each(function(d){return function(e,f){var g;return g=new n({query:d.query,model:e,showDialogue:c,highLight:a}),d.renderChild("path-"+f,g,b,"prepend")}}(this))},b.prototype.onChangeDisabled=function(){return this.$(".btn").toggleClass("disabled",this.state.get("disabled"))},b.prototype.setVisible=function(){return this.$el.toggleClass("im-hidden",!this.state.get("authenticated"))},b.prototype.setActionIsCreate=function(a){return a.stopPropagation(),a.preventDefault(),this.state.set({action:"create"})},b.prototype.setActionIsAppend=function(a){return a.stopPropagation(),a.preventDefault(),this.state.set({action:"append"})},b.prototype.showDialogue=function(a,b){var c,d,e;return d=new a(b),this.renderChild("dialogue",d),c=this.state.get("action"),e=function(a){return function(b){return function(d){return a.trigger(b+":"+c,d),a.trigger(b,c,d)}}}(this),d.show().then(e("success"),e("failure"))},b.prototype.showPathDialogue=function(a){var b,d;return d=this.state.get("action"),b=function(){switch(d){case"append":return c;case"create":return j;default:throw new Error("Unknown action: "+d)}}(),this.showDialogue(b,a)},b.prototype.startPicking=function(){var a,b,c,e;return b=this.state.get("action"),c={collection:this.selected,service:this.query.service},a=function(){switch(b){case"append":return d;case"create":return k;default:throw new Error("Unknown action: "+b)}}(),this.tableState.set({selecting:!0}),e=function(a){return function(){return a.tableState.set({selecting:!1}),a.selected.reset()}}(this),this.showDialogue(a,c).then(e,e)},b.prototype.setActionButtonState=function(){var a;return a=this.state.get("action"),this.$(".im-create-action").toggleClass("active","create"===a),this.$(".im-append-action").toggleClass("active","append"===a)},b.prototype.initBtnClasses=function(){return this.classSets={},this.classSets.createBtnClasses=new e({"im-create-action":!0,"btn btn-default":!0,active:function(a){return function(){return"create"===a.state.get("action")}}(this)}),this.classSets.appendBtnClasses=new e({"im-append-action":!0,"btn btn-default":!0,active:function(a){return function(){return"append"===a.state.get("action")}}(this)})},b}(h)}).call(this)},{"../../core-model":2,"../../core-view":3,"../../core/collection":5,"../../messages/lists":24,"../../models/path":56,"../../templates":67,"../../utils/count-executor":77,"../../utils/css-class-set":79,"./append-from-path":180,"./append-from-selection":181,"./create-from-path":187,"./create-from-selection":188,underscore:262}],187:[function(a,b,c){(function(){var c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};a("es6-promise").Promise,c=a("./base-dialogue"),d=a("./from-path-mixin"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.include(d(c)),b}(c)}).call(this)},{"./base-dialogue":184,"./from-path-mixin":189,"es6-promise":238}],188:[function(a,b,c){(function(){var c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};a("underscore"),a("es6-promise").Promise,c=a("./base-dialogue"),d=a("../../mixins/floating-dialogue"),e=a("./from-selection-mixin"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.include(d),b.include(e(c)),b}(c)}).call(this)},{"../../mixins/floating-dialogue":30,"./base-dialogue":184,"./from-selection-mixin":190,"es6-promise":238,underscore:262}],189:[function(a,b,c){(function(){var c;c=a("es6-promise").Promise,b.exports=function(a){return{parameters:["query","path"],className:function(){return a.prototype.className.call(this)+" im-from-path"},getQuery:function(){return c.resolve(this.query.selectPreservingImpliedConstraints([this.path]))},fetchCount:function(){return this.query.summarise(this.path).then(function(a){return a.stats.uniqueValues})},getType:function(){return this.query.makePath(this.path).getParent().getType()},getService:function(){return this.query.service}}}}).call(this)},{"es6-promise":238}],190:[function(a,b,c){(function(){var c,d,e,f;e=a("../../models/selected-objects"),f=a("../../core/type-assertions"),c={level:"Error",key:"lists.NoCommonType",cannotDismiss:!0},d={level:"Info",key:"lists.NoObjectsSelected",cannotDismiss:!0},b.exports=function(a){return{parameters:["service","collection"],parameterTypes:{collection:f.InstanceOf(e,"SelectedObjects")},className:function(){return a.prototype.className.call(this)+" im-list-picker"},getQuery:function(){return this.service.query({from:this.model.get("type"),select:["id"],where:[{path:this.model.get("type"),op:"IN",ids:this.getIds()}]})},fetchCount:function(){return Promise.resolve(this.collection.size())},getType:function(){var a;if(this.model.get("type"))return null!=(a=this.schema)?a.makePath(this.model.get("type")).getType():void 0},getService:function(){return this.service},collectionEvents:function(){return{"change:commonType change:typeName":this.setType,"add remove":this.setCount}},initiallyMinimised:!0,getIds:function(){return this.collection.map(function(a){return a.get("id")})},onChangeType:function(){return a.prototype.onChangeType.call(this),this.verifyState()},verifyState:function(){var b;return null!=(b=a.prototype.verifyState)&&b.call(this),this.collection.size()?this.model.get("type")?void 0:this.state.set({error:c}):this.state.set({error:d})},setType:function(){return this.model.set({type:this.collection.state.get("commonType")}),this.state.set({typeName:this.collection.state.get("typeName")})}}}}).call(this)},{"../../core/type-assertions":10,"../../models/selected-objects":58}],191:[function(a,b,c){(function(){var c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("../../core-view"),d=a("../../templates"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.className="im-list-tag label label-primary",b.prototype.template=d.template("list-tag"),b.prototype.events=function(){return{"click .im-remove":"removeAndDestroy"}},b.prototype.postRender=function(){return this.activateTooltip()},b.prototype.activateTooltip=function(){return this.$("[title]").tooltip()},b.prototype.removeAndDestroy=function(){return this.model.collection.remove(this.model),this.model.destroy(),this.$el.fadeOut(400,function(a){return function(){return a.remove()}}(this))},b}(c)}).call(this)},{"../../core-view":3,"../../templates":67}],192:[function(a,b,c){(function(){var c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=a("underscore"),c=a("../../core-view"),d=a("../../templates"),a("../../messages/lists"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.collectionEvents=function(){return{"add remove reset":this.reRender}},b.prototype.template=d.template("list-tags-apology"),b.prototype.getData=function(){return e.extend(b.__super__.getData.apply(this,arguments),{hasTags:this.collection.size()})},b}(c)}).call(this)},{"../../core-view":3,"../../messages/lists":24,"../../templates":67,underscore:262}],193:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l,m={}.hasOwnProperty,n=function(a,b){function c(){this.constructor=a}for(var d in b)m.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};l=a("underscore"),d=a("es6-promise").Promise,c=a("../messages"),e=a("../core-view"),c.set({"convalue.BadType":"<%- name %> is of the wrong type (<%- type %>).","convalue.EmptyList":"<%- name %> is empty. This query will always return 0 results","convalue.BadList":'You do not have access to list called "<%- name %>". Choose one from the list.'}),h=a("../templates/helpers"),a("../templates/mustache-settings"),i="<% if (suitableLists.length) { %>\n    <%= select(suitableLists, isSelected, 'span7 im-value-options im-con-value im-con-value-list form-control', formatList, getOptionValue) %>\n<% } else { %>\n    <%- messages.getText('conbuilder.NoSuitableLists') %>\n<% } %>\n",j=l.template(i),g=function(a){return a.name},f=function(a){return a.size?a.name+" ("+a.size+" "+a.typeName+"s)":a.name},k=function(a){return function(b){var c;return c=a.makePath(b.type),c.getDisplayName().then(function(a){return l.extend(b,{typeName:a})})}},b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return n(b,a),b.prototype.className="im-list-value-controls",b.prototype.initialize=function(a){return this.query=a.query,b.__super__.initialize.apply(this,arguments),this.initialValue=this.model.get("value"),this.path=this.model.get("path"),this.setSuitableLists(),this.listenTo(this.model,"change",this.reRender),this.listenTo(this.model,"change:value",this.checkCurrentValue),this.checkCurrentValue()},b.prototype.checkCurrentValue=function(){var a,b,d;return d=this.model.get("value"),a=function(a){return function(b){return a.model.set({error:new Error(c.getText("convalue.BadList",{name:d}))}),a.listenToOnce(a.model,"change:value",function(){return a.model.unset("error")})}}(this),b=function(a){var b;if(null!=(b=a.size?this.path.isa(a.type)?void 0:"convalue.BadType":"convalue.EmptyList"))return this.model.set({error:new Error(c.getText(b,a))}),this.listenToOnce(this.model,"change:value",function(a){return function(){return a.model.unset("error")}}(this))},this.query.service.fetchList(d).then(b,a)},b.prototype.events=function(){return{"change select":"setList"}},b.prototype.setList=function(){return this.model.set({value:this.$("select").val()})},b.prototype.setSuitableLists=function(){var a,b;if(!this.model.has("suitableLists"))return b=function(a){return function(b){return a.model.set({suitableLists:b})}}(this),a=function(a){return function(b){return a.model.set({error:b})}}(this),this.fetchSuitableLists().then(b,a)},b.prototype.fetchSuitableLists=function(){return null!=this.__suitable_lists?this.__suitable_lists:this.__suitable_lists=this.query.service.fetchLists().then(function(a){return function(b){var c,e;return e=function(){var a,d,e;for(e=[],a=0,d=b.length;a<d;a++)c=b[a],c.size&&this.path.isa(c.type)&&e.push(c);return e}.call(a),d.all(e.map(k(a.query.model)))}}(this))},b.prototype.getSuitableLists=function(){var a,b,c;return a={name:this.initialValue},c=this.model.get("suitableLists")||[],b=l.findWhere(c,a),null==b&&(b=a),l.uniq([b].concat(c),!1,"name")},b.prototype.template=function(a){return a=l.extend({formatList:f,getOptionValue:g,messages:c},h,a),j(a)},b.prototype.getData=function(){var a,b,c;return a=this.model.get("value"),c=this.getSuitableLists(),b=function(b){return b.name===a},{suitableLists:c,isSelected:b}},b}(e)}).call(this)},{"../core-view":3,"../messages":16,"../templates/helpers":68,"../templates/mustache-settings":69,"es6-promise":238,underscore:262}],194:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};i=a("underscore"),e=a("es6-promise").Promise,f=a("../utils/suggestion-source"),d=a("../messages"),c=a("./attribute-value-controls"),g='<label class="im-value-options">\n    <%- messages.getText(\'conbuilder.ExtraLabel\') %>\n    <input type="text" class="im-extra-value form-control"\n            placeholder="<%- state.extraPlaceholder %>"\n            value="<%- con.extraValue %>">\n</label>\n\n',h=i.template(g),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return k(b,a),b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.state.set({extraPlaceholder:d.get("conbuilder.ExtraPlaceholder")}),this.listenTo(this.branding,"change:defaults.extraValue.path",this.reRender),this.listenTo(this.branding,"change:defaults.extraValue.value",function(){return this.state.set({extraPlaceholder:this.branding.get("defaults.extraValue.value")})}),this.listenTo(this.model,"change",this.reRender)},b.prototype.stateEvents=function(){return i.extend(b.__super__.stateEvents.apply(this,arguments),{"change:extraPlaceholder":this.reRender})},b.prototype.template=function(a){return b.__super__.template.apply(this,arguments)+h(a)},b.prototype.events=function(){return{"change .im-con-value-attr":"setValue","change .im-extra-value":"setExtraValue"}},b.prototype.setExtraValue=function(){var a,b;return a=this.$("input.im-extra-value.tt-input"),a.length||(a=this.$("input.im-extra-value")),b=a.val(),b?this.model.set({extraValue:b}):this.model.unset("extraValue")},b.prototype.setValue=function(){var a,b;return a=this.$("input.im-con-value.tt-input"),a.length||(a=this.$("input.im-con-value")),b=a.val(),b?this.model.set({value:b}):this.model.unset("value")},b.prototype.setBoth=function(){return this.setValue(),this.setExtraValue()},b.prototype.suggestExtra=function(){var a,b,c,d,f;return b=this.branding.get("defaults.extraValue.path"),f=this.branding.get("defaults.extraValue.extraFor"),null!=b&&this.model.get("path").isa(f)?(d=this.model.get("path")+"."+b,c=null!=this.__extra_suggestions?this.__extra_suggestions:this.__extra_suggestions=this.query.summarise(d),a=this.handleSuggestionSet.bind(this,this.$("input.im-extra-value"),"extraValue"),c.then(function(a){return a.results}).then(a)):e.resolve(!0)},b.prototype.suggestValue=function(){var a,b,c,d,f;return d=this.model.get("path"),f=this.query.service,a=d.getEndClass().name,b=f.fetchClassKeys().then(function(b){return b[a]}),null==this.__value_suggestions&&(this.__value_suggestions=b.then(function(a){return function(b){var c,f;return(null!=b?b.length:void 0)?(f=function(){var a,e,f;for(f=[],a=0,e=b.length;a<e;a++)c=b[a],f.push(this.query.summarise(d+c.replace(/^[^\.]+/,"")));return f}.call(a),e.all(f).then(function(a){return a.reduce(function(a,b){return a.concat(b.results)},[])})):[]}}(this))),c=this.handleSuggestionSet.bind(this,this.$("input.im-con-value-attr"),"value"),this.__value_suggestions.then(c)},b.prototype.handleSuggestionSet=function(a,b,c){var d,e,g,h,i,j;if(0!==(j=c.length))return i=new f(c,j),h={minLength:0,highlight:!0},d={name:b+"_suggestions",source:i.suggest,displayKey:"item",templates:{footer:i.tooMany}},e=function(a){return function(c){return function(c,d){return a.model.set(b,d.item)}}}(this),g=c[0].item,this.activateTypeahead(a,h,d,g,e(a),function(a){return function(){return a.setBoth()}}(this))},b.prototype.provideSuggestions=function(){var a,b;return this.removeTypeAheads(),b=this.suggestValue(),a=this.suggestExtra(),e.all([a,b])},b.prototype.remove=function(){return b.__super__.remove.apply(this,arguments),this.branding.destroy()},b}(c)}).call(this)},{"../messages":16,"../utils/suggestion-source":107,"./attribute-value-controls":113,"es6-promise":238,underscore:262}],195:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l={}.hasOwnProperty,m=function(a,b){function c(){this.constructor=a}for(var d in b)l.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};k=a("underscore"),d=a("es6-promise").Promise,c=a("../messages"),e=a("../core-view"),f=a("../templates/helpers"),a("../templates/mustache-settings"),i=a("../utils/to-named-path"),g="<% if (candidateLoops.length) { %>\n    <%= select(candidateLoops, isSelected, 'form-control im-value-options im-con-value') %>\n<% } else { %>\n    <%- messages.getText('conbuilder.NoSuitableLoops') %>\n<% } %>\n",h=k.template(g),j=function(a){var b,c;return c=a.path,b=a.name,{value:c.toString(),text:b}},b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return m(b,a),b.prototype.initialize=function(a){return this.query=a.query,b.__super__.initialize.apply(this,arguments),this.path=this.model.get("path"),this.type=this.path.getType(),this.setCandidateLoops(),this.listenTo(this.model,"change",this.reRender)},b.prototype.events=function(){return{"change select":"setLoop"}},b.prototype.setLoop=function(){return this.model.set({value:this.$("select").val()})},b.prototype.setCandidateLoops=function(){if(!this.model.has("candidateLoops"))return this.getCandidateLoops().then(function(a){return function(b){return a.model.set({candidateLoops:b})}}(this))},b.prototype.isSuitable=function(a){return(a.isa(this.type)||this.path.isa(a.getType()))&&this.path.toString()!==a.toString()},b.prototype.getCandidateLoops=function(){return null!=this.__candidate_loops?this.__candidate_loops:this.__candidate_loops=function(a){return function(){var b,c;return b=function(){var a,b,d,e;for(d=this.query.getQueryNodes(),e=[],a=0,b=d.length;a<b;a++)c=d[a],this.isSuitable(c)&&e.push(c);return e}.call(a),d.all(b.map(i))}}(this)()},b.prototype.template=function(a){return h(k.extend({messages:c},f,a))},b.prototype.getData=function(){var a,b,c,d;return c=this.model.get("value"),b=function(){var b,c,d,e;for(d=this.model.get("candidateLoops")||[],e=[],b=0,c=d.length;b<c;b++)a=d[b],e.push(j(a));return e}.call(this),d=function(a){return a.value===c},{candidateLoops:b,isSelected:d}},b}(e)}).call(this)},{"../core-view":3,"../messages":16,"../templates/helpers":68,"../templates/mustache-settings":69,"../utils/to-named-path":109,"es6-promise":238,underscore:262}],196:[function(a,b,c){(function(){var c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=a("underscore"),c=a("../core-view"),a("../templates"),d=function(){return{error:null,exportLink:null,disabled:!1,disabledReason:null}},b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.tagName="div",b.prototype.className="modal-footer",b.prototype.RERENDER_EVENT="change:error change:exportLink",b.prototype.parameters=["template","actionNames","actionIcons"],b.prototype.getData=function(){return e.extend(d(),this.actionNames,this.actionIcons,b.__super__.getData.apply(this,arguments))},b.prototype.postRender=function(){return this.$("[title]").tooltip()},b}(c)}).call(this)},{"../core-view":3,"../templates":67,underscore:262}],197:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=a("es6-promise").Promise,i=a("underscore"),g=a("../core-view"),c=a("../messages"),f=a("../templates"),h=f.template("modal_base"),d=a("./modal-footer"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return k(b,a),b.prototype.className=function(){return"modal fade"},b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this._promise=new e(function(a){return function(b,c){a.resolve=b,a.reject=c}}(this)),this.listenTo(this.state,"change",this.renderFooter)},b.prototype.resolve=function(){throw new Error("resolved before initialisation")},b.prototype.reject=function(){throw new Error("rejected before initialisation")},b.prototype.dismissError=function(){return this.$(".modal-footer .alert").slideUp(250,function(a){return function(){return a.state.set({error:null})}}(this))},b.prototype.events=function(){return{"click .modal-footer .alert .dismiss":"dismissError","click .modal-footer .btn-cancel":"hide","click .modal-footer button.btn-primary":"act","hidden.bs.modal":"onHidden","click .close":"hide"}},b.prototype.promise=function(){return this._promise},b.prototype.hide=function(){return this.resolve("dismiss")},b.prototype.act=function(){throw new Error("Not implemented.")},b.prototype.primaryIcon=function(){return null},b.prototype.Footer=d,b.prototype.renderFooter=function(){var a,b,c,d;if(this.rendered)return a=i.result(this,"dismissAction"),c=i.result(this,"primaryAction"),d=i.result(this,"primaryIcon"),b={template:this.footer,model:this.state,actionNames:{dismissAction:a,primaryAction:c},actionIcons:{primaryIcon:d}},this.renderChild("footer",new this.Footer(b),this.$(".modal-content"))},b.prototype.postRender=function(){return this.renderFooter()},b.prototype.onHidden=function(a){return(null==a||a.target===this.el)&&(this.resolve("dismiss"),this.shown=!1,this.remove())},b.prototype.remove=function(){return this.reject(new Error("unresolved before removal")),this.shown?this._hideModal():b.__super__.remove.call(this)},b.prototype.title=function(){return c.getText("modal.DefaultTitle")},b.prototype.dismissAction=function(){return c.getText("modal.Dismiss")},b.prototype.primaryAction=function(){return c.getText("modal.OK")},b.prototype.modalSize=function(){},b.prototype.body=function(){},b.prototype.renderTitle=function(){if(this.rendered)return this.$(".modal-title").text(i.result(this,"title"))},b.prototype.footer=f.templateFromParts(["modal_error","modal_footer"]),b.prototype.template=function(a){var b,c,d;return d=i.result(this,"title"),b=this.body(a),c="modal-"+i.result(this,"modalSize"),h({title:d,body:b,modalSize:c})},b.prototype.shown=!1,b.prototype.show=function(){var a,b;b=this.promise(),b.then(function(a){return function(){return a.remove()}}(this),function(a){return function(){return a.remove()}}(this));try{this._showModal(),this.trigger("shown",this.shown=!0)}catch(b){a=b,this.reject(a)}return b},b.prototype._showModal=function(){return this.$el.modal().modal("show")},b.prototype._hideModal=function(){return this.$el.modal("hide")},b}(g)}).call(this)},{"../core-view":3,"../messages":16,"../templates":67,"./modal-footer":196,"es6-promise":238,underscore:262}],198:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l,n,o,p,q={}.hasOwnProperty,r=function(a,b){function c(){this.constructor=a}for(var d in b)q.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};p=a("underscore"),c=a("backbone").Collection,f=a("../messages"),h=a("../templates"),e=a("../icons"),l=a("../core-view"),g=a("../core-model"),c=a("../core/collection"),a("../options"),d=a("../patterns").IS_BLANK,n=a("../utils/events").ignore,f.setWithPrefix("multivalue",{AddValue:"Add value",AddValueShort:"+",SaveValue:"Save changes"}),o=a("../templates/mustache-settings"),j=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return r(b,a),b.prototype.defaults=function(){return{editing:!1,scratch:null,selected:!0}},b.prototype.idAttribute="value",b}(g),k=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return r(b,a),b.prototype.model=j,b}(c),i=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return r(b,a),b.prototype.Model=j,b.prototype.tagName="tr",b.prototype.initialize=function(){return this.model.set({editing:!1,scratch:this.model.get("value")}),this.listenTo(this.model,"change:editing change:value change:selected",this.reRender)},b.prototype.events=function(){return{"click .input-group":function(a){return null!=a?a.stopPropagation():void 0},"click .im-edit":"editValue","keyup input":"updateScratch","change input":"updateScratch","click .im-save":"saveValue","click .im-cancel":"cancelEditing",click:"toggleSelected"}},b.prototype.updateScratch=function(a){return n(a),this.model.set({scratch:a.target.value})},b.prototype.saveValue=function(a){return n(a),this.model.set({editing:!1,value:this.model.get("scratch")})},b.prototype.cancelEditing=function(a){return n(a),this.model.set({editing:!1,scratch:this.model.get("value")})},b.prototype.editValue=function(a){return n(a),this.model.toggle("editing")},b.prototype.toggleSelected=function(a){return n(a),this.model.toggle("selected")},b.prototype.getData=function(){return p.extend({icons:e,messages:f},this.model.toJSON())},b.prototype.template=h.template("value-control-row",o),b}(l),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return r(b,a),b.prototype.className="im-value-options im-multi-value-table",b.prototype.initialize=function(){var a,c,d,e;for(b.__super__.initialize.apply(this,arguments),this.values=new k,e=this.model.get("values")||[],c=0,d=e.length;c<d;c++)a=e[c],this.values.add({value:a});return this.listenTo(this.values,"change:selected change:value add",this.updateModel),this.listenTo(this.values,"add",this.renderValue),this.listenTo(this.values,"remove",this.removeValue)},b.prototype.stateEvents=function(){return{"change:value":this.onChangeNewValue}},b.prototype.modelEvents=function(){return{"change:op":this.onChangeOp,"change:values":this.onChangeValues}},b.prototype.onChangeValues=function(){var a,b;if(null==this.model.previous("values"))return a=this.model.get("values"),this.values.set(function(){var c,d,e,f;for(e=null!=a?a:[],f=[],c=0,d=e.length;c<d;c++)b=e[c],f.push({value:b});return f}())},b.prototype.onChangeOp=function(){var a;if(("="===(a=this.model.get("op"))||"!="===a)&&!this.model.has("value"))return this.model.set({values:null,value:this.values.first().get("value")})},b.prototype.events=function(){return{"keyup .im-new-multi-value":this.updateNewValue,"click .im-add":this.addValue}},b.prototype.onChangeNewValue=function(){return this.$(".im-new-multi-value").val(this.state.get("value"))},b.prototype.updateNewValue=function(){return this.state.set({value:this.$(".im-new-multi-value").val()})},b.prototype.addValue=function(a){var b;return n(a),b=this.state.get("value"),null==b||d.test(b)?(this.model.set({error:new Error("please enter a value")}),this.listenToOnce(this.state,"change:value",function(a){return function(){return a.model.unset("error")}}(this))):(this.values.add({value:b}),this.state.unset("value"))},b.prototype.updateModel=function(){var a;return this.model.set({values:function(){var b,c,d,e;for(d=this.values.where({selected:!0}),e=[],b=0,c=d.length;b<c;b++)a=d[b],e.push(a.get("value"));return e}.call(this)})},b.prototype.getData=function(){return{messages:f}},b.prototype.template=h.template("add-value-control"),b.prototype.postRender=function(){return this.$table=this.$("table"),this.renderRows()},b.prototype.renderRows=function(){return this.values.each(function(a){return function(b){return a.renderValue(b)}}(this))},b.prototype.removeValue=function(){return this.removeChild(m.id)},b.prototype.renderValue=function(a){return this.renderChild(a.id,new i({model:a}),this.$table)},b.prototype.remove=function(){return this.values.close(),b.__super__.remove.apply(this,arguments)},b}(l)}).call(this)},{"../core-model":2,"../core-view":3,"../core/collection":5,"../icons":14,"../messages":16,"../options":63,"../patterns":64,"../templates":67,"../templates/mustache-settings":69,"../utils/events":81,backbone:235,underscore:262}],199:[function(a,b,c){(function(){var c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=a("../messages"),c=a("./active-constraint"),d.set({"conbuilder.Apply":"Apply"}),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.model.set({new:!0,op:this.model.get("path").isAttribute()?"=":"LOOKUP"}),this.state.set({editing:!0})},b.prototype.render=function(){return b.__super__.render.apply(this,arguments),this.$el.addClass("im-new"),this},b}(c)}).call(this)},{"../messages":16,"./active-constraint":112}],200:[function(a,b,c){(function(){var c,d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};f=a("underscore"),e=a("./modal"),c=a("./constraint-adder"),a("../templates"),d=a("../messages"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.className=function(){return"im-constraint-dialogue "+b.__super__.className.apply(this,arguments)},b.prototype.modalSize="lg",b.prototype.initialize=function(a){return this.query=a.query,b.__super__.initialize.apply(this,arguments),this.listenTo(this.query,"change:constraints",this.resolve),this.listenTo(this.query,"editing-constraint",function(a){return function(){return a.$(".im-add-constraint").removeClass("disabled")}}(this))},b.prototype.events=function(){return f.extend(b.__super__.events.apply(this,arguments),{"click .im-add-constraint":"addConstraint",childremoved:function(a){return function(b,d){if(d instanceof c)return a.hide()}}(this)})},
b.prototype.title=function(){return d.getText("constraints.AddNewFilter")},b.prototype.primaryAction=function(){return d.getText("constraints.AddFilter")},b.prototype.postRender=function(){var a,d;return d=this.$(".modal-footer"),a=this.$(".modal-body"),this.renderChild("adder",new c({buttonDelegate:d,query:this.query}),a),b.__super__.postRender.apply(this,arguments)},b}(e)}).call(this)},{"../messages":16,"../templates":67,"./constraint-adder":128,"./modal":197,underscore:262}],201:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k=function(a,b){return function(){return a.apply(b,arguments)}},l={}.hasOwnProperty,m=function(a,b){function c(){this.constructor=a}for(var d in b)l.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};j=a("underscore"),e=a("../options"),d=a("../core-view"),c=a("./pathtree/attribute"),h=a("./pathtree/root"),f=a("./pathtree/reference"),g=a("./pathtree/reverse-reference"),i=function(a,b){return a.append(b)},b.exports=function(a){function b(){return this.createSubFinder=k(this.createSubFinder,this),b.__super__.constructor.apply(this,arguments)}return m(b,a),b.prototype.parameters=["model","query","chosenPaths","openNodes","view","trail"],b.prototype.tagName="ul",b.prototype.className="im-path-chooser",b.prototype.initialize=function(){var a,c,d,e,f,g,h;for(b.__super__.initialize.apply(this,arguments),this.path=j.last(this.trail)||this.model.get("root")||this.query.makePath(this.query.root),this.cd=this.path.getEndClass(),e=i.bind(null,this.path),h=["attributes","references","collections"],f=0,g=h.length;f<g;f++)c=h[f],this[c]=function(){var b,f;b=this.cd[c],f=[];for(d in b)a=b[d],f.push(e(a));return f}.call(this);return this.listenTo(this.model,"change:allowRevRefs",this.render),this.listenTo(this.openNodes,"reset",this.render)},b.prototype.getDepth=function(){return this.trail.length},b.prototype.showRoot=function(){return 0===this.getDepth()&&this.model.get("canSelectReferences")},b.prototype.events=function(){return{scroll:this.onScroll}},b.prototype.onScroll=function(){var a,b;if(!this.state.get("ignoreScroll"))return b=this.el.scrollTop,a=this.state.has("scroll")?Math.abs(this.state.get("scroll")-b):0,0!==b||a<50?this.state.set({scroll:b}):j.defer(function(a){return function(){return a.el.scrollTop=a.state.get("scroll")}}(this))},b.prototype.startIgnoringScroll=function(){return this.state.set({ignoreScroll:!0})},b.prototype.startListeningForScroll=function(){return this.state.has("scroll")&&(this.el.scrollTop=this.state.get("scroll")),this.state.set({ignoreScroll:!1})},b.prototype.preRender=function(){return this.startIgnoringScroll()},b.prototype.postRender=function(){var a,b,c,d,f,g,h,i,j,k,l;for(f=e.get("ShowId"),this.showRoot()&&(d=this.createRoot(),this.renderChild("root",d)),k=this.attributes,g=0,i=k.length;g<i;g++)b=k[g],(f||"id"!==b.end.name)&&(a=this.createAttribute(b),this.renderChild(b.toString(),a));for(l=this.references.concat(this.collections),h=0,j=l.length;h<j;h++)b=l[h],c=this.createReference(b),this.renderChild(b.toString(),c);return this.startListeningForScroll()},b.prototype.createRoot=function(){return new h({query:this.query,model:this.model,chosenPaths:this.chosenPaths,openNodes:this.openNodes,cd:this.cd})},b.prototype.createAttribute=function(a){return new c({model:this.model,chosenPaths:this.chosenPaths,view:this.view,query:this.query,trail:this.trail,path:a})},b.prototype.createReference=function(a){var b,c;return c=this.isLoop(a),b=this.model.get("allowRevRefs"),new(c&&!b?g:f)({model:this.model,chosenPaths:this.chosenPaths,query:this.query,trail:this.trail,path:a,view:this.view,openNodes:this.openNodes,createSubFinder:this.createSubFinder})},b.prototype.createSubFinder=function(a){return new b(j.extend({model:this.model,query:this.query,chosenPaths:this.chosenPaths,view:this.view,openNodes:this.openNodes},a))},b.prototype.isLoop=function(a){return!(null==a.end.reverseReference||!this.path.isReference()||!this.path.getParent().isa(a.end.referencedType)||this.path.end.name!==a.end.reverseReference)},b}(d)}).call(this)},{"../core-view":3,"../options":63,"./pathtree/attribute":202,"./pathtree/reference":203,"./pathtree/reverse-reference":204,"./pathtree/root":205,underscore:262}],202:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};i=a("underscore"),e=a("../../core-view"),d=a("../../options"),c=a("../../icons"),g=function(a){return null!=a&&/\w/.test(a)},h=function(a){return null!=a?a.replace(/^.*\s*>/,""):void 0},f=function(a){return"<strong>"+a+"</strong>"},b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return k(b,a),b.prototype.tagName="li",b.prototype.events=function(){return{"click a":"handleClick"}},b.prototype.initialize=function(a){return this.chosenPaths=a.chosenPaths,this.view=a.view,this.query=a.query,this.path=a.path,this.trail=a.trail,b.__super__.initialize.apply(this,arguments),this.depth=this.trail.length+1,this.state.set({visible:!0,highlitName:null,name:this.path.toString()}),this.listenTo(this.chosenPaths,"add remove reset",this.handleChoice),this.listenTo(this.state,"change:visible",this.onChangeVisible),this.listenTo(this.state,"change:highlitName",this.render),this.listenTo(this.state,"change:displayName",this.render),this.path.getDisplayName().then(function(a){return function(b){return a.state.set({displayName:b,name:h(b)})}}(this))},b.prototype.onChangeVisible=function(){return this.$el.toggle(this.state.get("visible"))},b.prototype.getFilterPatterns=function(){var a,b,c,d,e,f;if(a=this.model.get("filter"),g(a)){for(e=a.split(/\s+/),f=[],c=0,d=e.length;c<d;c++)(b=e[c])&&f.push(new RegExp(b,"i"));return f}return[]},b.prototype.handleClick=function(a){var b;if(a.stopPropagation(),a.preventDefault(),!(this.model.get("dontSelectView")&&(null!=(b=this.view)?b.contains(this.path):void 0)))return this.chosenPaths.contains(this.path)?this.chosenPaths.remove(this.path):this.choose()},b.prototype.choose=function(){return this.model.get("multiSelect")?this.chosenPaths.add(this.path):this.chosenPaths.reset([this.path])},b.prototype.handleChoice=function(){return this.$el.toggleClass("active",this.chosenPaths.contains(this.path))},b.prototype.setHighlitName=function(a){return this.state.has("name")?this.state.set({highlitName:this.getHighlitName(a)}):this.state.once("change:name",function(b){return function(){return b.state.set({highlitName:b.getHighlitName(a)})}}(this))},b.prototype.getHighlitName=function(a){var b,c,d,e,g,h;for(c=this.state.get("name"),null!=(h=this.path.end)?h.name:void 0,b=c,e=0,g=a.length;e<g;e++)d=a[e],b=b.replace(d,f);return/strong/.test(b)?b:f(b)},b.prototype.getDisabled=function(){return!1},b.prototype.getData=function(){var a,b,e;return e=d.get("ShowId")?this.path+" ("+this.path.getType()+")":"",b=this.state.get("highlitName")?this.state.get("highlitName"):this.state.escape("name"),a=c.icon("Attribute"),{icon:a,title:e,name:b}},b.prototype.template=i.template('<a href="#" title="<%- title %>">\n  <%= icon %>\n  <span>\n    <%= name %>\n  </span>\n</a>'),b.prototype.render=function(){return b.__super__.render.apply(this,arguments),this.$el.toggleClass("disabled",this.getDisabled()),d.get("ShowId")&&this.$("a").tooltip({placement:"bottom"}),this.handleChoice(),null!=this.view&&this.$el.toggleClass("in-view",this.view.contains(this.path)),this},b}(e)}).call(this)},{"../../core-view":3,"../../icons":14,"../../options":63,underscore:262}],203:[function(a,b,c){(function(){var c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=a("../../icons"),c=a("./attribute"),e=a("../../utils/events").ignore,b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.initialize=function(a){return this.openNodes=a.openNodes,this.createSubFinder=a.createSubFinder,b.__super__.initialize.apply(this,arguments),this.state.set({collapsed:!0}),this.listenTo(this.openNodes,"add remove",this.setCollapsed),this.listenTo(this.state,"change:collapsed",this.onChangeCollapsed),this.setCollapsed()},b.prototype.setCollapsed=function(){var a;return null!=(a=this.state)?a.set({collapsed:!this.openNodes.contains(this.path)}):void 0},b.prototype.handleClick=function(a){return e(a),this.$(a.target).is("i")||!this.model.get("canSelectReferences")?this.openNodes.togglePresence(this.path):b.__super__.handleClick.call(this,a)},b.prototype.getData=function(){var a;return a=b.__super__.getData.apply(this,arguments),a.icon=d.icon(this.state.get("collapsed")?"ClosedReference":"OpenReference"),a},b.prototype.postRender=function(){return this.onChangeCollapsed()},b.prototype.onChangeCollapsed=function(){var a,b;return this.state.get("collapsed")?this.removeChild("subfinder"):(b=this.trail.concat([this.path]),a=this.createSubFinder({trail:b}),this.renderChild("subfinder",a))},b}(c)}).call(this)},{"../../icons":14,"../../utils/events":81,"./attribute":202}],204:[function(a,b,c){(function(){var c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("../../icons"),d=a("./reference"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.className="im-reverse-reference",b.prototype.getData=function(){var a;return a=b.__super__.getData.apply(this,arguments),a.icon+=" "+c.icon("ReverseRef"),a},b.prototype.handleClick=function(a){return a.preventDefault(),a.stopPropagation(),this.$el.tooltip("hide")},b.prototype.render=function(){return b.__super__.render.apply(this,arguments),this.$el.attr({title:"Refers back to "+this.path.getParent().getParent()}).tooltip(),this},b}(d)}).call(this)},{"../../icons":14,"./reference":203}],205:[function(a,b,c){(function(){var c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=a("underscore"),d=a("../../icons"),c=a("./attribute"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.className="im-rootclass",b.prototype.initialize=function(a){var c;return c=a.cd,this.openNodes=a.openNodes,a.trail=[],a.path=a.query.getPathInfo(c.name),b.__super__.initialize.call(this,a)},b.prototype.getData=function(){return e.extend(b.__super__.getData.call(this),{icon:d.icon("RootClass")})},b.prototype.handleClick=function(a){var c,d,f,g,h;return null!=a&&a.preventDefault(),null!=a&&a.stopPropagation(),this.$(a.target).is("i")||!this.model.get("canSelectReferences")?this.openNodes.size()?this.openNodes.reset([]):(h=this.path.getType(),c=h.collections,g=h.references,d=function(){var a,b,d,h;for(d=e.values(g).concat(e.values(c)),h=[],a=0,b=d.length;a<b;a++)f=d[a],h.push(this.path.append(f.name));return h}.call(this),this.openNodes.reset(d)):b.__super__.handleClick.call(this,a)},b}(c)}).call(this)},{"../../icons":14,"./attribute":202,underscore:262}],206:[function(a,b,c){(function(){var c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=a("underscore"),c=a("../core-view"),d=a("../templates"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.Dialogue=function(){throw new Error("Not implemented")},b.prototype.longLabel=function(){throw new Error("Not implemented")},b.prototype.shortLabel=function(){throw new Error("Not implemented")},b.prototype.icon=function(){throw new Error("Not implemented")},b.prototype.template=d.template("modal-dialogue-opener"),b.prototype.labels=function(){return{ICON:e.result(this,"icon"),LONG:e.result(this,"longLabel"),SHORT:e.result(this,"shortLabel")}},b.prototype.parameters=["query"],b.prototype.initState=function(){return this.state.set({disabled:!1})},b.prototype.events=function(){return{click:this.onClick}},b.prototype.createDialogue=function(){return new this.Dialogue(this.dialogueOptions())},b.prototype.dialogueOptions=function(){return{query:this.query}},b.prototype.stateEvents=function(){return{"change:disabled":function(){return this.$(".btn.im-open-dialogue").toggleClass("disabled",this.state.get("disabled"))}}},b.prototype.onClick=function(a){var b,c;if(!this.state.get("disabled"))return b=this.createDialogue(),this.renderChild("dialogue",b),this.state.set({disabled:!0}),c=function(a){return function(){return a.removeChild("dialogue"),document.body.classList.remove("modal-open"),e.defer(function(){return a.state.set({disabled:!1})})}}(this),b.show().then(c,c)},b}(c)}).call(this)},{"../core-view":3,"../templates":67,underscore:262}],207:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l,m={}.hasOwnProperty,n=function(a,b){function c(){this.constructor=a}for(var d in b)m.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=a("../core-view"),l=j=a("../core/type-assertions"),k=l.UnionOf,h=l.Listenable,i=l.Structure,c=a("./column-manager/button"),e=a("./filter-dialogue/button"),g=a("./join-manager/button"),f=k(h,new i("History",{getCurrentQuery:j.Function})),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return n(b,a),b.prototype.className="im-query-management",b.prototype.parameters=["history"],b.prototype.parameterTypes={history:f},b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.listenTo(this.history,"changed:current",this.reRender)},b.prototype.renderChildren=function(){var a;return a=this.history.getCurrentQuery(),this.renderChild("cols",new c({query:a})),this.renderChild("cons",new e({query:a})),this.renderChild("joins",new g({query:a}))},b}(d)}).call(this)},{"../core-view":3,"../core/type-assertions":10,"./column-manager/button":119,"./filter-dialogue/button":168,"./join-manager/button":178}],208:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l,m,n={}.hasOwnProperty,o=function(a,b){function c(){this.constructor=a}for(var d in b)n.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},p=[].slice;a("underscore"),c=a("jquery"),f=a("../core-view"),a("../templates"),i=a("../options"),j=a("./query-management-tools"),l=a("./undo-history"),h=a("./list-dialogue/button"),e=a("./code-gen-button"),g=a("./export-dialogue/button"),d=a("../utils/events").Bus,k=["im-query-management","im-history","im-query-consumers"],m=function(a){return'<div class="'+a+' clearfix"></div>'},b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return o(b,a),b.prototype.className="im-query-tools",b.prototype.parameters=["tableState","history","selectedObjects"],b.prototype.optionalParameters=["bus","consumerContainer","consumerBtnClass"],b.prototype.bus=new d,b.prototype.template=function(){return k.map(m).join("")},b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.listenTo(this.history,"changed:current",this.renderQueryConsumers)},b.prototype.renderChildren=function(){return this.renderManagementTools(),this.renderUndo(),this.renderQueryConsumers()},b.prototype.renderManagementTools=function(){return this.renderChildAt(".im-query-management",new j({history:this.history}))},b.prototype.renderUndo=function(){var a;return a=this.$(".im-history"),this.renderChild("undo",new l({collection:this.history}),a)},b.prototype.getConsumerContainer=function(){var a;return null!=this.consumerContainer?(this.consumerContainer.classList.add(i.get("StylePrefix")),this.consumerContainer.classList.add("im-query-consumers"),this.$(".im-query-management").addClass("im-has-more-space"),this.$(".im-history").addClass("im-has-more-space"),this.consumerContainer):(a=this.$(".im-query-consumers").empty(),a.length?a:void 0)},b.prototype.renderQueryConsumers=function(){var a,b,c,d,f,i,j,k;if(a=this.getConsumerContainer()){if(d=this.history.getCurrentQuery(),f=this.selectedObjects,c=new h({query:d,tableState:this.tableState,selected:f}),this.listenTo(c,"all",function(a){return function(){var b,c,d,e;return c=arguments[0],b=2<=arguments.length?p.call(arguments,1):[],(d=a.bus).trigger.apply(d,["list-action:"+c].concat(p.call(b))),(e=a.bus).trigger.apply(e,["list-action",c].concat(p.call(b)))}}(this)),this.renderChild("save",new g({query:d,tableState:this.tableState}),a),this.renderChild("code",new e({query:d,tableState:this.tableState}),a),this.renderChild("lists",c,a),this.consumerContainer&&this.consumerBtnClass)for(k=["save","code","lists"],i=0,j=k.length;i<j;i++)b=k[i],this.listenTo(this.children[b],"rendered",this.setButtonStyle);return this.setButtonStyle()}},b.prototype.setButtonStyle=function(){var a,b;if((b=this.consumerContainer)&&(a=this.consumerBtnClass))return c(".btn",b).addClass(a)},b}(f)}).call(this)},{"../core-view":3,"../options":63,"../templates":67,"../utils/events":81,"./code-gen-button":115,"./export-dialogue/button":139,"./list-dialogue/button":186,"./query-management-tools":207,"./undo-history":229,jquery:256,underscore:262}],209:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w=function(a,b){return function(){return a.apply(b,arguments)}},x={}.hasOwnProperty,y=function(a,b){function c(){this.constructor=a}for(var d in b)x.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};v=a("underscore"),e=a("../core-view"),i=a("../options"),r=a("../templates"),h=a("../messages"),a("../core/collection"),a("../core-model"),s=a("../core/type-assertions"),o=a("../models/table"),d=a("../models/column-headers"),u=a("../models/uniq-items"),m=a("../models/rows"),n=a("../models/selected-objects"),g=a("../models/history"),c=a("../utils/cell-model-factory"),p=a("../utils/table-results"),l=a("./table/inner"),f=a("./table/error-notice"),k=a("./table/pagination"),j=a("./table/page-sizer"),q=a("./table/summary"),a("../messages/table"),t={message:"Unknown error",key:"error.Unknown"},b.exports=function(a){function b(){return this.canUseFormatter=w(this.canUseFormatter,this),this.unsetSelecting=w(this.unsetSelecting,this),this.setSelecting=w(this.setSelecting,this),b.__super__.constructor.apply(this,arguments)}return y(b,a),b.create=function(a){var c,d,e,f;return e=a.query,d=a.model,s.assertMatch(s.Query,e),null==d&&(d=new o),c=new g,f=new n(e.service),c.setInitialState(e),new b({history:c,model:d,selectedObjects:f})},b.prototype.Model=o,b.prototype.className="im-table-container",b.prototype.parameters=["history","selectedObjects"],b.prototype.optionalParameters=["model","columnHeaders","blacklistedFormatters"],b.prototype.parameterTypes={history:s.InstanceOf(g,"History"),selectedObjects:s.InstanceOf(n,"SelectedObjects")},b.prototype.cellModelFactory=null,b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),null==this.columnHeaders&&(this.columnHeaders=new d),null==this.blacklistedFormatters&&(this.blacklistedFormatters=new u),this.rows=new m,this.listenTo(this.history,"changed:current",this.onChangeQuery),this.listenTo(this.blacklistedFormatters,"reset add remove",this.buildColumnHeaders),this.listenTo(this.columnHeaders,"change:minimised",this.onChangeHeaderMinimised),this.onChangeQuery()},b.prototype.onChangeQuery=function(){var a,b,d;return d=this.query=this.history.getCurrentQuery(),b=d.service,a=d.model,null==this.cellModelFactory&&(this.cellModelFactory=new c(b,a)),this.buildColumnHeaders(),this.fetchVersion().then(function(a){return function(){return a.query.count(function(b,c){return a.model.set({error:b,count:c})}),a.setFreshness()}}(this))},b.prototype.fetchVersion=function(){return this.query.service.fetchVersion().then(function(a){return function(b){return a.model.set({version:b})}}(this)).then(null,function(a){return function(a){return onConnectionError(a)}}())},b.prototype.onConnectionError=function(a){var b;return b=new Error("Could not connect to server"),b.key="error.ConnectionError",this.model.set({error:b})},b.prototype.modelEvents=function(){return{"change:freshness change:start change:size":this.fillRows,"change:start change:size":this.overlayTable,"change:fill":this.removeOverlay,"change:freshness":this.resetPhase,"change:phase":this.onChangePhase,"change:error":this.onChangeError,"change:count":this.onChangeCount}},b.prototype.onChangePhase=function(){return this.removeOverlay(),this.reRender()},b.prototype.onChangeCount=function(){var a,b,c,d;if(d=this.model.pick("start","count","size"),c=d.start,b=d.size,a=d.count,c>=a)return this.model.set({start:Math.max(0,a-b)})},b.prototype.resetPhase=function(){return this.model.set({phase:"FETCHING"})},b.prototype.onChangeError=function(){if(this.model.get("error"))return this.model.set({phase:"ERROR"})},b.prototype.remove=function(){return this.cellModelFactory.destroy(),delete this.cellModelFactory,b.__super__.remove.apply(this,arguments)},b.prototype.onChangeHeaderMinimised=function(a){var b,c;return c=this.query.makePath(a.get("path")),b=this.model.get("minimisedColumns"),a.get("minimised")?b.add(c):b.remove(c)},b.prototype.setSelecting=function(){return this.model.set({selecting:!0})},b.prototype.unsetSelecting=function(){return this.model.set({selecting:!1})},b.prototype.canUseFormatter=function(a){return null!=a&&!this.blacklistedFormatters.contains(a)},b.prototype.setFreshness=function(){return this.model.set({freshness:this.query.toXML()})},b.prototype.buildColumnHeaders=function(){var a,b,c;return c={silent:!0},b=this.model.get("minimisedColumns"),a=function(a){return function(c){return b.contains(a.query.makePath(c.get("path")))}}(this),this.columnHeaders.setHeaders(this.query,this.blacklistedFormatters),this.columnHeaders.forEach(function(b){return function(b){return b.set({minimised:a(b)},c)}}())},b.prototype.fillRows=function(){var a,b,c,d,e;return e=this.model.pick("start","size"),c=e.start,b=e.size,d=function(a){return function(){return a.model.set({phase:"SUCCESS"})}}(this),a=function(a){return function(b){return null==b&&(b=t),a.model.set({phase:"ERROR",error:b})}}(this),p.getCache(this.query).fetchRows(c,b).then(function(a){return function(b){return a.fillRowsCollection(b)}}(this)).then(d,a).then(this.model.filled,this.model.filled)},b.prototype.fillRowsCollection=function(a){var b,c,d;return b=this.cellModelFactory.getCreator(this.query),d=this.model.get("start"),c=a.map(function(a){return function(c,e){var f;return{id:a.query.toXML()+"#"+(d+e),index:d+e,query:a.query.toXML(),cells:function(){var a,d,e;for(e=[],a=0,d=c.length;a<d;a++)f=c[a],e.push(b(f));return e}()}}}(this)),this.rows.set(c)},b.prototype.overlayTable=function(){var a,b,c;if(null!=(c=this.children.inner)?c.rendered:void 0)return b=this.children.inner.$el,this.$el.offset(),b.offset(),this.removeOverlay(),this.overlay=document.createElement("div"),this.overlay.className="im-table-overlay im-hidden",a=this.make("h1",{},h.getText("table.OverlayText")),a.style.top=b.height()/2+"px",this.overlay.appendChild(a),this.el.appendChild(this.overlay),v.delay(function(a){return function(){var b;return null!=(b=a.overlay)?b.classList.remove("im-hidden"):void 0}}(this),100)},b.prototype.removeOverlay=function(){return null!=this.overlay&&this.el.removeChild(this.overlay),delete this.overlay},b.prototype.template=function(){switch(this.model.get("phase")){case"FETCHING":return this.renderFetching();case"ERROR":return this.renderError();case"SUCCESS":return this.renderTable();default:throw new Error("Unknown phase: "+this.model.get("phase"))}},b.prototype.renderFetching=function(){return r.template("table-building")(this.getBaseData())},b.prototype.renderError=function(){var a;return this.removeChild("error"),this.children.error=a=new f({query:this.query,model:this.model}),a.render().el},b.prototype.renderTable=function(){var a,b;return a=document.createDocumentFragment(),this.renderWidgets(a),b=new l(v.extend(v.pick(this,l.prototype.parameters),{tableState:this.model})),this.renderChild("inner",b,a),a},b.prototype.renderWidgets=function(a){var b,c,d,e,f,g,h;if(null==a&&(a=this.el),f=v.chain(i.get("TableWidgets")).map(function(a,b){var c,d;return c=a.enabled,d=a.index,{name:b,index:d,enabled:c}}).where({enabled:!0}).sortBy("index").pluck("name").value(),f.length){for(d=document.createElement("div"),d.className="im-table-controls",b=document.createElement("div"),b.style.clear="both",g=0,h=f.length;g<h;g++)"place"+(e=f[g])in this&&(c="place"+e,this[c](d));return d.appendChild(b),a.appendChild(d)}},b.prototype.renderWidget=function(a,b,c){var d;return d=new c({model:this.model,getQuery:function(a){return function(){return a.history.getCurrentQuery()}}(this)}),this.renderChild(a,d,b)},b.prototype.placePagination=function(a){return this.renderWidget("pagination",a,k)},b.prototype.placePageSizer=function(a){return this.renderWidget("pagesizer",a,j)},b.prototype.placeTableSummary=function(a){return this.renderWidget("tablesummary",a,q)},b}(e)}).call(this)},{"../core-model":2,"../core-view":3,"../core/collection":5,"../core/type-assertions":10,"../messages":16,"../messages/table":28,"../models/column-headers":39,"../models/history":45,"../models/rows":57,"../models/selected-objects":58,"../models/table":61,"../models/uniq-items":62,"../options":63,"../templates":67,"../utils/cell-model-factory":75,"../utils/table-results":108,"./table/error-notice":214,"./table/inner":217,"./table/page-sizer":220,"./table/pagination":221,"./table/summary":227,underscore:262}],210:[function(a,b,c){(function(){var c,d,e,f,g,h,i={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};h=a("underscore"),c=a("../../core-view"),f=a("../../templates"),g=a("../../utils/build-skipset"),a("../../messages/table"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return j(b,a),b.prototype.tagName="tbody",b.prototype.parameters=["makeCell","collection","history"],b.prototype.collectionEvents=function(){return{reset:this.reRender,add:this.onRowAdded,remove:this.onRowRemoved}},b.prototype.template=function(){},b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this._skipSets={}},b.prototype.renderChildren=function(){var a;return this.collection.isEmpty()?this.handleEmptyTable():(a=document.createDocumentFragment("tbody"),this.collection.forEach(function(b){return function(c){return b.addRow(c,a)}}(this)),this.el.appendChild(a))},b.prototype.onRowAdded=function(a){return this.removeChild("apology"),this.addRow(a)},b.prototype.onRowRemoved=function(a){if(this.removeChild(a.id),this.collection.isEmpty())return this.handleEmptyTable()},b.prototype.addRow=function(a,b){var c,d;return null==b&&(b=this.el),c=this.skipped(a),d=new e({model:a,makeCell:this.makeCell,skipped:c}),this.renderChild(a.id,d,b)},b.prototype.handleEmptyTable=function(){return this.renderChild("apology",new d({history:this.history}))},b.prototype.skipped=function(a){var b,c;return null!=(b=this._skipSets)[c=a.get("query")]?b[c]:b[c]=function(b){return function(){var c,d;return d=a.get("cells").map(b.makeCell),c=g(d),d.forEach(function(a){return a.remove()}),c}}(this)()},b}(c),e=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return j(b,a),b.prototype.tagName="tr",b.prototype.parameters=["makeCell","skipped"],b.prototype.postRender=function(){var a,b,c,d,e,f;for(b=this.model.get("cells").map(this.makeCell),f=[],c=d=0,e=b.length;d<e;c=++d)a=b[c],this.skipped[a.model.get("column")]||f.push(this.renderChild(c,a));return f},b}(c),d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return j(b,a),b.prototype.tagName="tr",b.prototype.className="im-empty-apology",b.prototype.template=f.template("no-results"),b.prototype.parameters=["history"],b.prototype.events=function(){return{"click .btn-undo":function(){return this.history.popState()}}},b.prototype.getData=function(){return h.extend(b.__super__.getData.apply(this,arguments),{selectList:this.history.getCurrentQuery().views,canUndo:this.history.length>1})},b}(c)}).call(this)},{"../../core-view":3,"../../messages/table":28,"../../templates":67,"../../utils/build-skipset":72,underscore:262}],211:[function(a,b,c){(function(){var c,d,e;d=a("../../models/nested-table"),e=a("./subtable"),c=a("./cell"),b.exports=function(a,b){var f,g;return a.root.replace(/\/service\/?$/,""),g=function(a){var c;return c=b.getFormatter(a.get("node"),a.get("column")),null!=c&&b.canUseFormatter(c)?c:null},f=function(h){return h instanceof d?new e({query:b.query,model:h,cellify:f,expandedSubtables:b.expandedSubtables}):new c({model:h,service:a,popovers:b.popoverFactory,selectedObjects:b.selectedObjects,tableState:b.tableState,formatter:g(h)})}}}).call(this)},{"../../models/nested-table":48,"./cell":212,"./subtable":226}],212:[function(a,b,c){(function(c){(function(){var d,e,f,g,h,i,j,k,l,m,n,o,p,q={}.hasOwnProperty,r=function(a,b){function c(){this.constructor=a}for(var d in b)q.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},s=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};o=a("underscore"),d=a("jquery"),f=a("../../core-view"),k=a("../../templates"),i=a("../../options"),h=a("../../messages"),e=a("../../models/cell"),g=a("../../formatting"),h.setWithPrefix("table.cell",{Link:"link",NullEntity:"No <%= type %>",PreviewTitle:function(a){var b;return b=a.types,b.join(i.get("DynamicObjects.NameDelimiter"))}}),j=a("../../models/selected-objects"),n=a("../../core/type-assertions"),m=k.template("classy-popover")({classes:"item-preview"}),p=function(a,b){return null!=b&&null!=a.model.findSharedAncestor(a,b)},l=o.memoize(p,function(a,b){return a+"<"+(null!=b?b:"!")}),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return r(b,a),b.prototype.Model=e,b.prototype.tagName="td",b.prototype.className="im-result-field",b.prototype.id=function(){return o.uniqueId("im_table_cell_")},b.prototype.formatter=g.defaultFormatter,b.prototype.parameters=["model","service","selectedObjects","tableState","popovers"],b.prototype.optionalParameters=["formatter"],b.prototype.parameterTypes={model:n.InstanceOf(e,"models/cell"),selectedObjects:n.InstanceOf(j,"SelectedObjects"),formatter:n.Callable,tableState:n.Model,service:n.Service,popovers:new n.Structure("HasGet",{get:n.Function})},b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.listen()},b.prototype.initState=function(){return this.setSelected(),this.setSelectable(),this.setHighlit(),this.setMinimised()},b.prototype.getPath=function(){return this.model.get("column")},b.prototype.getTypes=function(){var a,b,c,d,e,f;if(c=this.model.get("node"),null!=(b=this.model.get("entity").get("classes"))){for(f=[],d=0,e=b.length;d<e;d++)a=b[d],f.push(c.model.makePath(a));return f}return[c]},b.prototype.listen=function(){return this.listenToEntity(),this.listenToSelectedObjects(),this.listenToOptions(),this.listenToTableState()},b.prototype.listenToOptions=function(){return this.listenTo(i,"change:TableCell.IndicateOffHostLinks",this.reRender),this.listenTo(i,"change:TableCell.ExternalLinkIcons",this.reRender),this.listenTo(i,"change:TableCell.PreviewTrigger",this.onChangeTrigger)},b.prototype.listenToTableState=function(){var a;return a=this.tableState,this.listenTo(a,"change:selecting",this.setInputDisplay),
this.listenTo(a,"change:previewOwner",this.closeOwnPreview),this.listenTo(a,"change:highlitNode",this.setHighlit),this.listenTo(a,"change:minimisedColumns",this.setMinimised)},b.prototype.listenToSelectedObjects=function(){var a;return a=this.selectedObjects,this.listenTo(a,"add remove reset",this.setSelected),this.listenTo(a,"add remove reset change:commonType change:node",this.setSelectable)},b.prototype.modelEvents=function(){return{"change:entity":this.onChangeEntity}},b.prototype.stateEvents=function(){return{"change:highlit change:selected":this.setActiveClass,"change:selectable":this.onChangeSelectable,"change:selected":this.setInputChecked,"change:showPreview":this.onChangeShowPreview,"change:minimised":this.reRender}},b.prototype.events=function(){var a,b,c;if(a={"show.bs.popover":this.onShowPreview,"hide.bs.popover":this.onHidePreview,"click a.im-cell-link":this.onClickCellLink},b=i.get("TableCell"),"hover"===(c=b.PreviewTrigger))a["mouseover .im-cell-link"]=this.showPreview,a["mouseout .im-cell-link"]=this.hidePreview,a.click=this.activateChooser;else{if("click"!==c)throw new Error("Unknown cell preview: "+c);a.click=this.clickTogglePreview}return a},b.prototype.onChangeTrigger=function(){return this.destroyPreview(),this.initPreview(),this.delegateEvents()},b.prototype.onClickCellLink=function(a){var b;return this.tableState.get("selecting")?void a.preventDefault():(b=d.Event("view.im.object"),b.object=this.model.get("entity").toJSON(),this.$el.trigger(b),b.isDefaultPrevented()?a.preventDefault():void 0)},b.prototype.closeOwnPreview=function(){var a,b;if(b=this.el.id,a=this.tableState.get("previewOwner"),b!==a)return this.hidePreview(),this._hidePreview()},b.prototype.listenToEntity=function(){return this.listenTo(this.model.get("entity"),"change",this.updateValue)},b.prototype.onShowPreview=function(){return this.tableState.set({previewOwner:this.el.id})},b.prototype.onHidePreview=function(){var a,b;if(b=this.el.id,a=this.tableState.get("previewOwner"),b===a)return this.tableState.set({previewOwner:null})},b.prototype.toggleSelection=function(){var a,b,c,d;if(a=this.model.get("entity"),c=a.get("id"),null!=a){if(b=this.selectedObjects.get(c))return this.selectedObjects.remove(b);if(null==(d=this.getMostSuitableIdentity()))throw new Error("None of our identities is a compatible");return this.selectedObjects.add(d)}},b.prototype.getMostSuitableIdentity=function(){var a,b,c,d,e,f,g;return e=this.model.get("node"),a=e.model.getSubclassesOf(e.getType()),c=this.model.get("entity").get("id"),d=function(){var a,b,d,e;for(d=this.getTypes(),e=[],a=0,b=d.length;a<b;a++)g=d[a],e.push({class:String(g),id:c});return e}.call(this),this.selectedObjects.isEmpty()?o.find(d,function(b){var c;return c=b.class,s.call(a,c)>=0}):(b=e.model.makePath(this.selectedObjects.state.get("commonType")),o.all(d,function(a){return l(b,a.class)}),f=o.sortBy(d,function(a){return e.model.getAncestorsOf(a.class).length}),o.last(f))},b.prototype.setSelected=function(){return this.state.set({selected:null!=this.selectedObjects.get(this.model.get("entity"))})},b.prototype.setSelectable=function(){var a,b,c,d;return a=this.selectedObjects.state.get("commonType"),b=this.selectedObjects.state.get("node"),d=this.selectedObjects.size(),c=(null==b||b===String(this.model.get("node")))&&(0===d||this.isCompatibleWith(a)),this.state.set({selectable:c})},b.prototype.isCompatibleWith=function(a){return this.getTypes().some(function(b){return l(b,a)})},b.prototype.setHighlit=function(){var a,b;return b=this.model.get("node"),a=this.tableState.get("highlitNode"),this.state.set({highlit:null!=a&&String(b)===String(a)})},b.prototype.setMinimised=function(){var a,b;return b=this.model.get("column"),a=this.tableState.get("minimisedColumns").contains(b),this.state.set({minimised:a})},b.prototype.onChangeEntity=function(){var a;return a=this.model.previous("entity"),delete this._has_id,null!=a&&this.stopListening(a),this.listenToEntity()},b.prototype.clickTogglePreview=function(){return this.activateChooser()||this.state.toggle("showPreview")},b.prototype.activateChooser=function(){var a,b;if(this.hasID())return b=this.tableState.get("selecting"),a=this.state.get("selectable"),a&&b?this.toggleSelection():void 0},b.prototype.hasID=function(){return null!=this._has_id?this._has_id:this._has_id=null!=this.model.get("entity").get("id")},b.prototype.showPreview=function(){return this.state.set({showPreview:!0})},b.prototype.hidePreview=function(){return this.state.set({showPreview:!1})},b.prototype._showPreview=function(){var a,b;if(this.rendered){if(this.tableState.get("selecting"))return;return a=i.get("TableCell"),b=function(a){return function(){var b;if(a.state.get("showPreview"))return null!=(b=a.children.popover)?b.render():void 0}}(this),"hover"===a.PreviewTrigger?o.delay(b,a.HoverDelay):b()}},b.prototype._hidePreview=function(){var a,b;if(null!=(a=this.children.popover)?a.rendered:void 0)return null!=(b=this.popoverTarget)?b.popover("hide"):void 0},b.prototype.onChangeShowPreview=function(){return this.state.get("showPreview")?this._showPreview():this._hidePreview()},b.prototype.onChangeSelectable=function(){return this.setDisabledCellClass(),this.setInputDisabled()},b.prototype.updateValue=function(){return o.defer(function(a){return function(){return a.$(".im-displayed-value").html(a.getFormattedValue())}}(this))},b.prototype.setActiveClass=function(){var a,b,c;return c=this.state.pick("highlit","selected"),a=c.highlit,b=c.selected,this.$el.toggleClass("active",a||b)},b.prototype.setInputChecked=function(){return this.$("input").prop({checked:this.getInputState().checked})},b.prototype.setInputDisplay=function(){return this.$("input").css({display:this.getInputState().display})},b.prototype.setDisabledCellClass=function(){return this.$el.toggleClass("im-not-selectable",!this.state.get("selectable"))},b.prototype.setInputDisabled=function(){return this.$("input").prop({disabled:this.getInputState().disabled})},b.prototype.template=k.template("table-cell"),b.prototype.getData=function(){var a,b,d,e,f,g,h;e=i.get("TableCell"),d=e.IndicateOffHostLinks?c.location.host:/.*/,a=this.model.toJSON(),a.formattedValue=this.getFormattedValue(),a.input=this.getInputState(),a.icon=null,a.url=f=a.entity["report:uri"],a.isForeign=f&&!f.match(d),a.target=a.isForeign?"_blank":"",a.NULL_VALUE=k.null_value,h=e.ExternalLinkIcons;for(b in h)g=h[b],(null!=f?f.match(b):void 0)&&null==a.icon&&(a.icon=g);return o.extend(this.getBaseData(),a)},b.prototype.getFormattedValue=function(){var a,b,c;return c=this.model.pick("entity","value"),a=c.entity,b=c.value,null!=b?this.formatter.call(null,a,this.service,b):null},b.prototype.getInputState=function(){var a,b,c,d,e,f,g;return f=this.tableState.get("selecting"),g=this.state.pick("selected","selectable"),e=g.selected,d=g.selectable,a=e,b=!d,c=f?"inline":"none",{checked:a,disabled:b,display:c}},b.prototype.canHavePreview=function(){return this.hasID()&&!this.state.get("minimised")},b.prototype.postRender=function(){return this.setAttrClass(),this.setActiveClass(),this.setMinimisedClass(),this.setDisabledCellClass(),this.setFormatterClasses(),this.initPreview()},b.prototype.setAttrClass=function(){var a,b,c,d,e;if(i.get("TableCell.AddDataClasses")){for(a=this.model.get("column").getType(),this.$el.addClass("im-type-"+a.toLowerCase()),e=this.getTypes(),c=0,d=e.length;c<d;c++)b=e[c],this.$el.addClass(String(b));return this.$el.addClass(this.model.get("column").end.name)}},b.prototype.setMinimisedClass=function(){return this.$el.toggleClass("im-minimised",this.state.get("minimised"))},b.prototype.setFormatterClasses=function(){var a,b;if(a=this.formatter.classes,null!=a&&this.$el.addClass(a),null!=(b=this.formatter.target))return this.$el.addClass(b)},b.prototype.getPreviewContainer=function(){var a,b;for(b=[],a=[".im-query-results",".im-table-container",".panel","table","body"];a.length&&0===b.length;)b=this.$el.closest(a.shift());return b},b.prototype.removeAllChildren=function(){return this.destroyPreview(),null!=this.children.popover&&(this.stopListeningTo(this.children.popover),this.children.popover.rendered&&this.$el.popover("destroy")),b.__super__.removeAllChildren.apply(this,arguments)},b.prototype.destroyPreview=function(){var a;if(null!=this.children.popover)return this.stopListeningTo(this.children.popover),this.children.popover.rendered&&null!=(a=this.popoverTarget)&&a.popover("destroy"),delete this.popoverTarget,this.removeChild("popover")},b.prototype.popoverTarget=null,b.prototype.initPreview=function(){var a,b,c;if(null==this.children.popover&&this.canHavePreview())return a=this.popovers.get(this.model.get("entity")),c=i.get("TableCell.PreviewTrigger"),this.popoverTarget="hover"===c?this.$(".im-cell-link"):this.$el,b=h.getText.bind(h,"table.cell.PreviewTitle"),this.listenToOnce(a,"rendered",function(c){return function(){var d;return d=c.getPreviewContainer(),c.popoverTarget.popover({trigger:"manual",template:m,placement:"auto left",container:d,html:!0,title:function(){return b({types:c.model.get("typeNames")})},content:a.el})}}(this)),this.listenTo(a,"rendered",function(a){return function(){return a.popoverTarget.popover("show")}}(this)),this.children.popover=a},b}(f)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../core-view":3,"../../core/type-assertions":10,"../../formatting":13,"../../messages":16,"../../models/cell":37,"../../models/selected-objects":58,"../../options":63,"../../templates":67,jquery:256,underscore:262}],213:[function(a,b,c){(function(){var c,d,e,f,g,h,i={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};h=a("underscore"),d=a("../facets/facet-view"),f=a("../../models/path"),g=a("../../utils/events").ignore,e="No query in call to new DropDownColumnSummary",c="No PathModel in call to new DropDownColumnSummary",b.exports=function(a){function b(a){var d,g;if(g=a.query,d=a.model,!g)throw new Error(e);if(!(d instanceof f))throw new Error(c);b.__super__.constructor.call(this,{query:g,view:d.pathInfo()})}return j(b,a),b.prototype.className=function(){return b.__super__.className.apply(this,arguments)+" im-dropdown-summary"},b.prototype.events=function(){return h.extend(b.__super__.events.apply(this,arguments),{click:g})},b.prototype.postRender=function(){return b.__super__.postRender.apply(this,arguments),this.$el.addClass(this.className())},b}(d)}).call(this)},{"../../models/path":56,"../../utils/events":81,"../facets/facet-view":151,underscore:262}],214:[function(a,b,c){(function(c){(function(){var d,e,f,g,h,i,j,k,l,m,n,o={}.hasOwnProperty,p=function(a,b){function c(){this.constructor=a}for(var d in b)o.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};n=a("underscore"),i=a("imjs"),a("../../options"),d=a("../../core-view"),f=a("../../templates"),e=a("../../messages"),j=a("../../utils/indent-xml"),k=a("../../utils/mailto"),m=a("../../utils/with-cdn-resource"),g=a("../../version"),a("../../messages/error"),l=n.partial(m,"prettify","prettyPrintOne"),h=function(a){return/(Type|Reference)Error/.test(String(a))?"client":"server"},b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return p(b,a),b.prototype.className="im-error-notice",b.prototype.parameters=["model","query"],b.prototype.helpers=function(){return n.extend(b.__super__.helpers.apply(this,arguments),{indent:j})},b.prototype.template=f.template("table-error"),b.prototype.getData=function(){var a,d,f,j,l,m;return f=this.model.get("error"),m=new Date,l=e.getText("error.mail.Subject"),a=this.query.service.help,d=h(f),console.error(f),j=k.href(a,l,"We encountered an error running a query from an\nembedded result table.\n\npage:       "+c.location+"\nservice:    "+this.query.service.root+"\nerror:      "+f+"\ndate-stamp: "+m+"\n\n-------------------------------\nIMJS:       "+i.VERSION+"\n-------------------------------\nIMTABLES:   "+g+"\n-------------------------------\nQUERY:      "+this.query.toXML()+"\n-------------------------------\nSTACK:      "+(null!=f?f.stack:void 0)),n.extend(b.__super__.getData.apply(this,arguments),{domain:d,mailto:j,query:this.query.toXML()})},b.prototype.postRender=function(){var a,b;return b=j(this.query.toXML()),a=this.$(".query-xml"),l(function(c){return a.html(c(n.escape(b)))})},b.prototype.events=function(){return{"click .im-show-query":function(){return this.$(".query-xml").slideToggle(),this.$(".im-show-query").toggleClass("active")},"click .im-show-error":function(){return this.$(".error-message").slideToggle(),this.$(".im-show-error").toggleClass("active")}}},b}(d)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../core-view":3,"../../messages":16,"../../messages/error":22,"../../options":63,"../../templates":67,"../../utils/indent-xml":88,"../../utils/mailto":92,"../../utils/with-cdn-resource":110,"../../version":111,imjs:247,underscore:262}],215:[function(a,b,c){(function(){var c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=a("underscore"),d=a("../../core-view"),c=a("./header"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.tagName="thead",b.prototype.parameters=["history","expandedSubtables","blacklistedFormatters","columnHeaders"],b.prototype.template=function(){},b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.listenTo(this.columnHeaders,"add reset sort",this.reRender),this.listenTo(this.columnHeaders,"remove",function(a){return this.removeChild(a.id)}),this},b.prototype.renderChildren=function(){var a,b,c,d;return a=document.createDocumentFragment(),d=document.createElement("tr"),a.appendChild(d),c=this.history.getCurrentQuery(),b={query:c,expandedSubtables:this.expandedSubtables,blacklistedFormatters:this.blacklistedFormatters},this.columnHeaders.each(this.renderHeader(d,b)),this.$el.html(a)},b.prototype.renderHeader=function(a,b){return function(d){return function(f,g){var h;return h=new c(e.extend({model:f},b)),d.renderChild(f.id,h,a)}}(this)},b}(d)}).call(this)},{"../../core-view":3,"./header":216,underscore:262}],216:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t=function(a,b){return function(){return a.apply(b,arguments)}},u={}.hasOwnProperty,v=function(a,b){function c(){this.constructor=a}for(var d in b)u.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},w=[].slice;s=a("underscore"),e=a("../../core-view"),d=a("../../core/collection"),m=a("../../templates"),a("../../messages"),j=a("../../options"),c=a("../../utils/css-class-set"),r=a("../../utils/sort-query-by-path"),q=a("../../utils/on-change"),h=a("../../models/header"),g=a("../formatted-sorting"),l=a("../constraints/single-column"),f=a("./column-summary"),k=a("./outer-join-summary"),p=a("../../utils/events").ignore,a("../../messages/table"),i=function(a,b){return function(){return a.get(b)}},n=function(){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)},o=function(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)},b.exports=function(a){function b(){return this.toggleColumnVisibility=t(this.toggleColumnVisibility,this),this.showFilterSummary=t(this.showFilterSummary,this),this.showColumnSummary=t(this.showColumnSummary,this),this.showSummary=t(this.showSummary,this),b.__super__.constructor.apply(this,arguments)}return v(b,a),b.prototype.Model=h,b.prototype.tagName="th",b.prototype.className="im-column-th",b.prototype.RERENDER_EVENT=q(["composed","expanded","minimised","numOfCons","outerJoined","parts","path","sortable","sortDirection"]),b.prototype.template=m.template("column-header"),b.prototype.namePopoverTemplate=m.template("column_name_popover"),b.prototype.parameters=["query"],b.prototype.optionalParameters=["blacklistedFormatters","expandedSubtables"],b.prototype.expandedSubtables=new d,b.prototype.blacklistedFormatters=new d,b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.listenTo(this.query,"showing:column-summary",this.removeMySummary),this.listenTo(j,"change:icons",this.reRender),this.createClassSets()},b.prototype.path=function(){return this.model.pathInfo()},b.prototype.createClassSets=function(){return this.classSets={},this.classSets.headerClasses=new c({"im-column-header":!0,"im-minimised-th":i(this.model,"minimised"),"im-is-composed":i(this.model,"composed"),"im-has-constraint":i(this.model,"numOfCons")}),this.classSets.colTitleClasses=new c({"im-col-title":!0,"im-hidden":i(this.model,"minimised")})},b.prototype.removeMySummary=function(a){if(!a.equals(this.model.pathInfo()))return this.removeChild("summary"),this.$(".dropdown.open").removeClass("open")},b.prototype.onSubtableExpanded=function(a){if(a.toString().match(this.model.getView()))return this.model.set({expanded:!0})},b.prototype.onSubtableCollapsed=function(a){if(a.toString().match(this.model.getView()))return this.model.set({expanded:!1})},b.prototype.getData=function(){var a,d,e,f,g,h,i;return i=this.model.get("parts"),a=3<=i.length?w.call(i,0,h=i.length-2):(h=0,[]),f=i[h++],e=i[h++],d=a.length,d?"non-root":"root",g=new c({"im-title-part im-parent":!0,"im-root-parent":!d,"im-non-root-parent":d,"im-last":!e}),s.extend({penultClasses:g,last:e,penult:f},this.classSets,b.__super__.getData.apply(this,arguments))},b.prototype.events=function(){return{"click .im-col-sort":"setSortOrder","click .im-col-minumaximiser":"toggleColumnVisibility","click .im-col-filters":"showFilterSummary","click .im-subtable-expander":this.toggleSubTable,"click .im-col-remover":"removeColumn","hidden.bs.dropdown":function(){return this.removeChild("summary")},"shown.bs.dropdown":"onDropdownShown","toggle .im-th-button":"summaryToggled","click .summary-img":this.showColumnSummary,"click .im-col-composed":this.addFormatterToBlacklist}},b.prototype.postRender=function(){return this.setTitlePopover(),this.announceExpandedState(),this.activateTooltips()},b.prototype.activateTooltips=function(){return this.$(".im-th-button").tooltip({placement:"top",container:this.el})},b.prototype.onDropdownShown=function(a){return s.defer(function(){var b,c;if(delete a.target.style.right,b=a.target.getBoundingClientRect(),b.left<0)return c=b.left+"px",a.target.style.right=c})},b.prototype.addFormatterToBlacklist=function(){return this.blacklistedFormatters.add({formatter:this.model.get("formatter")})},b.prototype.announceExpandedState=function(){if(this.model.get("expanded"))return this.query.trigger("expand:subtables",this.model.get("path"))},b.prototype.setTitlePopover=function(){if(j.get("TableHeader.FullPathPopoverEnabled"))return this.$(".im-col-title").popover({content:function(a){return function(){return a.namePopoverTemplate(a.getData())}}(this),container:this.el,placement:"bottom",html:!0})},b.prototype.summaryToggled=function(a,b){if(p(a),a.target===a.currentTarget)return b?void 0:this.removeChild("summary")},b.prototype.hideTooltips=function(){return this.$(".im-th-button").tooltip("hide")},b.prototype.removeColumn=function(a){var b,c;return p(a),this.hideTooltips(),c=this.model.getView(),this.query.removeFromSelect(function(){var a,d,e,f;for(e=this.query.views,f=[],a=0,d=e.length;a<d;a++)b=e[a],b.match(c)&&f.push(b);return f}.call(this))},b.prototype.checkHowFarOver=function(a){var b;if(b=this.$el.closest(".im-table-container"),a.offset().left+350>=b.offset().left+b.width())return this.$el.addClass("too-far-over")},b.prototype.showSummary=function(a,b,c){var d,e,f,g,h;if(p(c),e=this.$(a),f=this.path(),e.hasClass("open"))return this.query.trigger("hiding:column-summary",f),e.removeClass("open"),null!=(h=this.children.summary)&&h.$el.hide(),this.removeChild("summary"),!1;if(this.$(".dropdown.open").removeClass("open"),this.query.trigger("showing:column-summary",f),g=new b({query:this.query,model:this.model}),d=this.$(a+" .dropdown-menu"),!d.length)throw new Error(a+" not found");return d.empty(),this.renderChild("summary",g,d),e.addClass("open"),this.onDropdownShown({target:d[0]}),!0},b.prototype.ensureDropdownIsWithinTable=function(a,b,c){var d,e,f,g,h;if(null==c&&(c=360),e=a.getBoundingClientRect(),null!=(g=this.$el.closest("table")[0])){if(f=o(),d=this.$(b+" .dropdown-menu"),c>=f)return d.addClass("im-fullwidth-dropdown").css({width:f});if(d.css({width:null}),!(c>=o()))return h=g.getBoundingClientRect(),e.left+c>h.right?this.$(b+" .dropdown-menu").addClass("dropdown-menu-right"):void 0}},b.prototype.showColumnSummary=function(a){var b,c;if(b=this.model.get("isReference")?k:f,this.showSummary(".im-summary",b,a))return c=n(),this.$(".im-item-table").css({"max-height":Math.max(350,c/2)}),this.ensureDropdownIsWithinTable(a.target,".im-summary")},b.prototype.showFilterSummary=function(a){if(this.showSummary(".im-filter-summary",l,a))return this.ensureDropdownIsWithinTable(a.target,".im-filter-summary",500)},b.prototype.toggleColumnVisibility=function(a){return p(a),this.model.toggle("minimised")},b.prototype.setSortOrder=function(a){return p(a),this.model.get("replaces").length?this.showSummary(".im-col-sort",g,a):(r(this.query,this.model.getView()),this.$(".im-col-sort").removeClass("open"))},b.prototype.toggleSubTable=function(a){return p(a),this.expandedSubtables.toggle(this.model.pathInfo())},b}(e)}).call(this)},{"../../core-view":3,"../../core/collection":5,"../../messages":16,"../../messages/table":28,"../../models/header":44,"../../options":63,"../../templates":67,"../../utils/css-class-set":79,"../../utils/events":81,"../../utils/on-change":93,"../../utils/sort-query-by-path":105,"../constraints/single-column":135,"../formatted-sorting":169,"./column-summary":213,"./outer-join-summary":219,underscore:262}],217:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s=function(a,b){return function(){return a.apply(b,arguments)}},t={}.hasOwnProperty,u=function(a,b){function c(){this.constructor=a}for(var d in b)t.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};r=a("underscore"),e=a("../../core-view"),o=a("../../templates"),f=a("../../formatting"),h=a("../../models/path-set"),d=a("../../models/column-headers"),i=a("../../utils/popover-factory"),g=a("../../models/history"),n=a("../../models/table"),k=a("../../models/selected-objects"),j=a("../item-preview"),p=a("../../core/type-assertions"),c=a("./cell-factory"),l=a("./body"),m=a("./head"),q=function(a){return function(b,c){return a(c,b)}},b.exports=function(a){function b(){return this.canUseFormatter=s(this.canUseFormatter,this),b.__super__.constructor.apply(this,arguments)}return u(b,a),b.prototype.className="im-results-table table table-striped table-bordered",b.prototype.tagName="table",b.prototype.throbber=o.template("table-throbber"),b.prototype.parameters=["history","columnHeaders","rows","tableState","blacklistedFormatters","selectedObjects"],b.prototype.parameterTypes={history:p.InstanceOf(g,"History"),blacklistedFormatters:p.Collection,rows:p.Collection,tableState:p.InstanceOf(n,"TableModel"),columnHeaders:p.InstanceOf(d,"ColumnHeaders"),selectedObjects:p.InstanceOf(k,"SelectedObjects")},b.prototype.initialize=function(){var a;return b.__super__.initialize.apply(this,arguments),a=(this.query=this.history.getCurrentQuery()).service,this.expandedSubtables=new h,this.popoverFactory=new i(a,j),this.cellFactory=c(a,this),this.listenTo(this.blacklistedFormatters,"reset add remove",this.renderBody),this.listenTo(this.history,"changed:current",this.setQuery)},b.prototype.setQuery=function(){return this.query=this.history.getCurrentQuery()},b.prototype.getFormatter=q(f.getFormatter),b.prototype.canUseFormatter=function(a){return null!=a&&!this.blacklistedFormatters.findWhere({formatter:a})},b.prototype.renderChildren=function(){return this.renderHeaders(),this.renderBody()},b.prototype.renderHeaders=function(){return this.renderChild("head",new m(r.pick(this,m.prototype.parameters)))},b.prototype.renderBody=function(){return this.renderChild("body",new l({collection:this.rows,history:this.history,makeCell:this.cellFactory}))},b.prototype.remove=function(){return this.expandedSubtables.close(),delete this.expandedSubtables,this.popoverFactory.destroy(),delete this.popoverFactory,delete this.cellFactory,b.__super__.remove.apply(this,arguments)},b}(e)}).call(this)},{"../../core-view":3,"../../core/type-assertions":10,"../../formatting":13,"../../models/column-headers":39,"../../models/history":45,"../../models/path-set":55,"../../models/selected-objects":58,"../../models/table":61,"../../templates":67,"../../utils/popover-factory":98,"../item-preview":172,"./body":210,"./cell-factory":211,"./head":215,underscore:262}],218:[function(a,b,c){(function(){var c,d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};f=a("underscore"),d=a("../modal"),e=a("../../templates").large_table_disuader,c={ACCEPT:"accept",CONSTRAIN:"constrain",BACK:"back",FWD:"forward",EXPORT:"export",DISMISS:"dismiss"},b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.className=function(){return"im-page-size-sanity-check fade "+b.__super__.className.apply(this,arguments)},b.prototype.template=f.template(e),b.prototype.act=function(){return this.resolve("accept")},b.prototype.events=function(){return f.extend(b.__super__.events.apply(this,arguments),{"click .btn-primary":function(a){return function(){return a.resolve(c.ACCEPT)}}(this),"click .add-filter-dialogue":function(a){return function(){return a.resolve(c.CONSTRAIN)}}(this),"click .page-backwards":function(a){return function(){return a.resolve(c.BACK)}}(this),"click .page-forwards":function(a){return function(){return a.resolve(c.FWD)}}(this),"click .download-menu":function(a){return function(){return a.resolve(c.EXPORT)}}(this)})},b}(d)}).call(this)},{"../../templates":67,"../modal":197,underscore:262}],219:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k={}.hasOwnProperty,l=function(a,b){function c(){this.constructor=a}for(var d in b)k.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};j=a("underscore"),d=a("../../core-view"),i=a("../../templates"),c=a("../../core/collection"),f=a("../../models/path"),e=a("./column-summary"),h=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return l(b,a),b.prototype.model=f,b}(c),g=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return l(b,a),b.prototype.parameters=["showPathSummary"],b.prototype.className="im-subpath im-outer-joined-path",b.prototype.tagName="li",b.prototype.template=j.template('<a href="#">'+i.column_manager_path_name+"</a>"),b.prototype.modelEvents=function(){return{change:this.reRender}},b.prototype.events=function(){return{click:this.onClick}},b.prototype.onClick=function(a){return a.stopPropagation(),a.preventDefault(),this.showPathSummary(this.model)},b}(d),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return l(b,a),b.prototype.parameters=["query"],b.prototype.className="im-summary-selector",b.prototype.tagName="ul",b.prototype.initialize=function(){var a,c,d,e;for(b.__super__.initialize.apply(this,arguments),this.subColumns=new h,e=this.model.get("replaces"),c=0,d=e.length;c<d;c++)a=e[c],this.subColumns.add(this.query.makePath(a));return this.path=new f(this.query.makePath(this.model.get("path")))},b.prototype.getSubpaths=function(){return this.subColumns},b.prototype.postRender=function(){var a,b;return a=this.getSubpaths(),1===a.length?this.showPathSummary(a.first()):(b=function(a){return function(b){return a.showPathSummary(b)}}(this),this.getSubpaths().each(function(a){return function(c,d){return a.renderChild(d,new g({model:c,showPathSummary:b}))}}(this)))},b.prototype.showPathSummary=function(a){var b;return this.undelegateEvents(),this.removeAllChildren(),b=new e({query:this.query,model:a}),this.children.summ=b,b.setElement(this.el),b.render()},b}(d)}).call(this)},{"../../core-view":3,"../../core/collection":5,"../../models/path":56,"../../templates":67,"./column-summary":213,underscore:262}],220:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l={}.hasOwnProperty,m=function(a,b){function c(){this.constructor=a}for(var d in b)l.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},n=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};k=a("underscore"),i=a("./paging"),f=a("../has-dialogues"),c=a("../../core-view"),j=a("../../templates"),d=a("../../events"),h=a("../new-filter-dialogue"),e=a("../export-dialogue"),g=a("./large-table-disuader"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return m(b,a),b.include(i),b.include(f),b.prototype.tagName="form",b.prototype.className="im-page-sizer im-table-control form-inline",b.prototype.sizes=[[10],[25],[50],[100],[250]],b.prototype.parameters=["getQuery"],b.prototype.initialize=function(){var a,c;if(b.__super__.initialize.apply(this,arguments),null!=(c=this.model.get("size"))&&n.call(function(){var b,c,d,e;for(d=this.sizes,e=[],b=0,c=d.length;b<c;b++)a=d[b][0],e.push(a);return e}.call(this),c)<0)return this.sizes=[[c,c]].concat(this.sizes)},b.prototype.events=function(){return{submit:d.suppress,"change select":"changePageSize"}},b.prototype.modelEvents=function(){return{"change:size":function(a,b){return this.$("select").val(b)},"change:count":this.reRender}},b.prototype.changePageSize=function(a){var b,c,d,f,g;return c=this.$(a.target),g=parseInt(c.val(),10),d=this.model.get("size"),b=function(a){return function(){return a.model.set({size:g})}}(this),this.aboveSizeThreshold(g)?(f=this.whenAcceptable(g).then(function(a){return function(f){if("accept"===f)return b();switch(c.val(d),f){case"back":return a.goBack(1);case"forward":return a.goForward(1);case"constrain":return a.openDialogue(new h({query:a.getQuery()}));case"export":return a.openDialogue(e({query:a.getQuery()}));default:return console.debug("dismissed dialogue",f)}}}(this)),f.then(null,function(a){return console.error("Error handling dialogues",a)})):b()},b.prototype.whenAcceptable=function(a){return this.openDialogue(new g({model:{size:a}}))},b.prototype.template=j.template("page_sizer"),b.prototype.getData=function(){var a,b,c,d,e;return a=this.model.get("count"),d=this.model.get("size"),e=function(){var b,d,e,f;for(e=this.sizes,f=[],b=0,d=e.length;b<d;b++)c=e[b],(null==a||c[0]<a)&&f.push(c);return f}.call(this),e.length&&a<this.sizes[this.sizes.length-1][0]&&(b=k.find(e,function(b){return b[0]===a}),b?b[1]+=b[0]+" (All)":e.push([a,a+" (All)"])),{size:d,sizes:e}},b.prototype.pageSizeFeasibilityThreshold=250,b.prototype.aboveSizeThreshold=function(a){return!!(a&&a>=this.pageSizeFeasibilityThreshold)||!a&&this.model.get("count")>=this.pageSizeFeasibilityThreshold},b}(c)}).call(this)},{"../../core-view":3,"../../events":12,"../../templates":67,"../export-dialogue":138,"../has-dialogues":171,"../new-filter-dialogue":200,"./large-table-disuader":218,"./paging":222,underscore:262}],221:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=200,i=a("underscore"),e=a("../../core-view"),c=a("./paging"),
g='<ul class="pagination">\n    <li class="hidden-xs <%= gotoStart || \'im-goto-start\' %>" title="Go to start">\n        <a class="im-pagination-button">&#x21e4;</a>\n    </li>\n    <li class="hidden-xs hidden-sm <%= goFiveBack || \'im-go-back-5\' %>"\n        title="Go back five pages"\n        class="visible-desktop">\n        <a class="im-pagination-button">&#x219e;</a>\n    </li>\n    <li class="<%= goOneBack || \'im-go-back-1\' %>"\n        title="Go to previous page">\n        <a class="im-pagination-button">&larr;</a>\n    </li>\n    <li class="im-current-page">\n        <% if (useSelect) { %>\n          <form class="im-page-form form form-inline">\n            <select class="form-control">\n              <% for (i = 0; i < max; i++) { %>\n                <option\n                  <%= selected(i) ? \'selected\' : void 0 %>\n                  value="<%= i * size %>">\n                  page <%= i + 1 %>\n                </option>\n              <% } %>\n            </select>\n          </form>\n        <% } else { %>\n          <a href="#">&hellip;</a>\n          <form class="im-page-form form form-inline"\n                style="display:none;">\n            <div class="control-group">\n                <input type="number"\n                       value="<%= currentPage %>"\n                       max="<%= max %>"\n                       min="<%= min %>"\n                       class="form-control im-page-number">\n            </div>\n          </form>\n        <% } %>\n    </li>\n    <li class="<%= goOneForward || \'im-go-fwd-1\' %>"\n        title="Go to next page">\n        <a class="im-pagination-button">&rarr;</a>\n    </li>\n    <li class="hidden-xs hidden-sm <%= goFiveForward || \'im-go-fwd-5\' %>"\n        title="Go forward five pages"\n        class="visible-desktop">\n        <a class="im-pagination-button">&#x21a0;</a>\n    </li>\n    <li class="hidden-xs <%= gotoEnd || \'im-goto-end\' %>"\n        title="Go to last page">\n        <a class="im-pagination-button">&#x21e5;</a>\n    </li>\n</ul>\n',h=function(a){return a.replace(/\s+/g,"")},f=function(a){return"string"==typeof a?parseInt(h(a),10):a},b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return k(b,a),b.include(c),b.prototype.tagName="nav",b.prototype.className="im-table-pagination im-table-control",b.prototype.RERENDER_EVENT="change:start change:count change:size",b.prototype.template=i.template(g),b.prototype.modelEvents=function(){return{"change:count":this.setVisible}},b.prototype.getData=function(){var a,b,c,e,f;return f=this.model.toJSON(),e=f.start,c=f.size,a=f.count,b=this.getMaxPage(),{max:b,min:1,size:c,currentPage:this.getCurrentPage(),gotoStart:0===e?"disabled":void 0,goFiveBack:e<5*c?"disabled":void 0,goOneBack:e<c?"disabled":void 0,gotoEnd:e>=a-c?"disabled":void 0,goFiveForward:e>=a-6*c?"disabled":void 0,goOneForward:e>=a-c?"disabled":void 0,selected:function(a){return e===a*c},useSelect:b<=d}},b.prototype.postRender=function(){return this.$("li").tooltip({placement:"top"}),this.setVisible()},b.prototype.setVisible=function(){var a;return a=this.getMaxPage(),this.$el.toggleClass("im-hidden",a<2)},b.prototype.events=function(){return{"submit .im-page-form":"pageFormSubmit","click .im-current-page a":"clickCurrentPage","change .im-page-form select":"goToChosenPage","blur .im-page-form input":"pageFormSubmit","click .im-goto-start":function(a){return function(){return a.goTo(0)}}(this),"click .im-go-back-5":function(a){return function(){return a.goBack(5)}}(this),"click .im-go-back-1":function(a){return function(){return a.goBack(1)}}(this),"click .im-go-fwd-5":function(a){return function(){return a.goForward(5)}}(this),"click .im-go-fwd-1":function(a){return function(){return a.goForward(1)}}(this),"click .im-goto-end":function(a){return function(){return a.goTo((a.getMaxPage()-1)*a.model.get("size"))}}(this)}},b.prototype.goToChosenPage=function(a){var b;return b=f(this.$(a.target).val()),this.goTo(b)},b.prototype.clickCurrentPage=function(a){var b,c;if(b=this.model.get("size"),c=this.model.get("count"),!(b>=c))return this.$(a.target).hide(),this.$("form").show().find("input").focus()},b.prototype.pageFormSubmit=function(a){var b,c,d,e;if(null!=a&&a.stopPropagation(),null!=a&&a.preventDefault(),e=this.$(".im-page-form"),c=this.$(".im-page-form input"),c.size())return b=f(c[0].value),b>=1?(d=Math.min(this.getMaxPage(),b),this.goTo((d-1)*this.model.get("size")),this.$(".im-current-page > a").show(),e.hide()):(e.find(".control-group").addClass("error"),inp.val(null))},b}(e)}).call(this)},{"../../core-view":3,"./paging":222,underscore:262}],222:[function(a,b,c){(function(){c.getCurrentPage=function(){var a,b,c;return c=this.model.toJSON(),b=c.start,a=c.size,Math.floor(b/a)+1},c.getMaxPage=function(){var a,b,c,d;return d=this.model.toJSON(),b=d.count,c=d.size,a=b%c==0?0:1,Math.floor(b/c)+a},c.goTo=function(a){return this.model.set({start:a})},c.goToPage=function(a){return this.model.set({start:(a-1)*this.model.get("size")})},c.goBack=function(a){var b,c,d;return d=this.model.toJSON(),c=d.start,b=d.size,this.goTo(Math.max(0,c-a*b))},c.goForward=function(a){var b,c,d;return d=this.model.toJSON(),c=d.start,b=d.size,this.goTo(Math.min(this.getMaxPage()*b,c+a*b))}}).call(this)},{}],223:[function(a,b,c){(function(){var c,d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};f=a("underscore"),c=a("../../core-view"),e=a("../../templates"),a("../../messages/subtables"),d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.tagName="th",b.prototype.parameters=["columnModel","model","query"],b.prototype.template=e.template("table-subtables-header"),b.prototype.getData=function(){return f.extend(b.__super__.getData.apply(this,arguments),this.columnModel.pick("columnName"))},b.prototype.modelEvents=function(){return{"change:displayName":this.reRender}},b.prototype.events=function(){return{"click a":this.removeView}},b.prototype.removeView=function(){var a;return this.query.removeFromSelect(null!=(a=this.model.get("replaces"))?a:this.model.get("path"))},b.prototype.postRender=function(){return this.$("[title]").tooltip()},b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.listenTo(this.columnModel,"change:columnName",this.reRender)},b.prototype.remove=function(){return delete this.columnModel,b.__super__.remove.apply(this,arguments)},b}(c),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.tagName="thead",b.prototype.template=function(){return"<tr></tr>"},b.prototype.parameters=["collection","columnModel","query"],b.prototype.collectionEvents=function(){return{"add remove":this.reRender}},b.prototype.renderChildren=function(){var a;return a=this.el.querySelector("tr"),this.collection.forEach(function(b){return function(c,e){return b.renderChild(e,new d({model:c,query:b.query,columnModel:b.columnModel}),a)}}(this))},b.prototype.remove=function(){return delete this.columnModel,b.__super__.remove.apply(this,arguments)},b}(c)}).call(this)},{"../../core-view":3,"../../messages/subtables":26,"../../templates":67,underscore:262}],224:[function(a,b,c){(function(){var c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("../../core-view"),d=a("./subtable-header"),e=a("../../utils/build-skipset"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.tagName="table",b.prototype.className="im-subtable table table-condensed table-striped",b.prototype.parameters=["query","headers","model","rows","cellify"],b.prototype.render=function(){var a,b,c,d,e,f;for(this.removeAllChildren(),this.rendered&&(this.el.innerHTML=""),this.headers.length>1&&this.renderHead(),c=document.createElement("tbody"),f=this.rows,a=d=0,e=f.length;d<e;a=++d)b=f[a],this.appendRow(b,a,c);return this.el.appendChild(c),this.trigger("rendered",this.rendered=!0),this},b.prototype.renderHead=function(a){var b;return b=new d({query:this.query,collection:this.headers,columnModel:this.model}),this.renderChild("thead",b,a)},b.prototype.buildSkipped=function(a){return null!=this._skipped?this._skipped:this._skipped=e(a,this.headers)},b.prototype.appendRow=function(a,b,c){var d,e,f,g,h,i,j,k,l;for(i=document.createElement("tr"),c.appendChild(i),f=function(){var b,c,e;for(e=[],b=0,c=a.length;b<c;b++)d=a[b],e.push(this.cellify(d));return e}.call(this),h=this.buildSkipped(f),l=[],g=j=0,k=f.length;j<k;g=++j)e=f[g],h[e.model.get("column")]||l.push(this.renderChild("cell-"+b+"-"+g,e,i));return l},b}(c)}).call(this)},{"../../core-view":3,"../../utils/build-skipset":72,"./subtable-header":223}],225:[function(a,b,c){(function(){var c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("../../core-view"),d=a("../../messages"),e=a("../../templates"),a("../../messages/subtables"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.className="im-subtable-summary",b.prototype.tagName="span",b.prototype.template=e.template("table-subtable-summary"),b.prototype.parameters=["model","state"],b.prototype.modelEvents=function(){return{"change:contentName":this.reRender}},b.prototype.events=function(){return{click:this.onClick}},b.prototype.onClick=function(a){return null!=a&&a.stopPropagation(),this.$el.tooltip("hide"),this.state.toggle("open")},b.prototype.postRender=function(){return this.$el.tooltip({title:this.model.get("rows").length?d.getText("subtables.OpenHint"):void 0,placement:"auto right"})},b}(c)}).call(this)},{"../../core-view":3,"../../messages":16,"../../messages/subtables":26,"../../templates":67}],226:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l,m,n,o={}.hasOwnProperty,p=function(a,b){function c(){this.constructor=a}for(var d in b)o.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};n=a("underscore"),d=a("../../core-view"),g=a("../../options"),c=a("../../core/collection"),l=a("../../templates"),m=a("../../core/type-assertions"),f=a("../../models/nested-table"),i=a("../../models/path"),k=a("./subtable-summary"),j=a("./subtable-inner"),a("../../utils/events").ignore,h=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return p(b,a),b.prototype.model=i,b}(c),e="Subtables.Initially.expanded",b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return p(b,a),b.prototype.tagName="td",b.prototype.className="im-result-subtable",b.prototype.Model=f,b.prototype.parameters=["query","cellify","expandedSubtables"],b.prototype.parameterTypes={query:m.Query,cellify:m.Function,expandedSubtables:m.Collection},b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.headers=new h,this.listenTo(this.expandedSubtables,"add remove reset",this.onChangeExpandedSubtables),this.buildHeaders()},b.prototype.getPath=function(){return this.model.get("column")},b.prototype.initState=function(){var a;return a=g.get(e)||this.expandedSubtables.contains(this.getPath()),this.state.set({open:a})},b.prototype.stateEvents=function(){return{"change:open":this.onChangeOpen}},b.prototype.onChangeOpen=function(){var a;return a=this.el.querySelector(".im-table-wrapper"),this.state.get("open")?this.renderTable(a)?this.$(a).slideDown():void 0:this.$(a).slideUp()},b.prototype.onChangeExpandedSubtables=function(){return this.state.set({open:this.expandedSubtables.contains(this.getPath())})},b.prototype.template=l.template("table-subtable"),b.prototype.renderChildren=function(){return this.renderChildAt(".im-subtable-summary",new k({model:this.model,state:this.state})),this.onChangeOpen()},b.prototype.tableRendered=!1,b.prototype.renderTable=function(a){var b,c;return c=this.model.get("rows"),this.tableRendered||0===c.length?this.tableRendered:(b=new j(n.extend({rows:c},n.pick(this,j.prototype.parameters))),this.renderChild("inner",b,a),this.tableRendered=!0)},b.prototype.buildHeaders=function(){var a,b;if(null!=(b=this.model.get("rows")[0]))return this.headers.set(function(){var c,d,e;for(e=[],c=0,d=b.length;c<d;c++)a=b[c],e.push(new i(a.get("column")));return e}())},b}(d)}).call(this)},{"../../core-view":3,"../../core/collection":5,"../../core/type-assertions":10,"../../models/nested-table":48,"../../models/path":56,"../../options":63,"../../templates":67,"../../utils/events":81,"./subtable-inner":224,"./subtable-summary":225,underscore:262}],227:[function(a,b,c){(function(){var c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=a("underscore"),c=a("../../core-view"),d=a("../../templates"),a("../../messages/table"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.className="im-table-summary hidden-phone",b.prototype.RERENDER_EVENT="change:start change:size change:count",b.prototype.getData=function(){var a,c,d,f,g;return g=c=b.__super__.getData.apply(this,arguments),f=g.start,d=g.size,a=g.count,e.extend(c,{page:{count:a,first:f+1,last:0===d?0:Math.min(f+d,a)}})},b.prototype.template=d.template("count_summary"),b}(c)}).call(this)},{"../../core-view":3,"../../messages/table":28,"../../templates":67,underscore:262}],228:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k={}.hasOwnProperty,l=function(a,b){function c(){this.constructor=a}for(var d in b)k.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},m=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};j=a("underscore"),d=a("es6-promise").Promise,c=a("../messages"),e=a("../core-view"),c.set({"typeconstraints.BadType":"<%- type %> is not a legal value for this constraint. Choose another from the list.","typeconstraints.OneClass":"<%- name %> is the only legal value this constraint can have. You can always remove it though."}),i=a("../utils/to-named-path"),g=a("../templates/helpers"),h="<label class=\"span4\">\n    <%- messages.getText('conbuilder.IsA') %>\n</label>\n<% if (subclasses.length == 1) { %>\n  <select disabled class=\"form-control\">\n      <option><%- subclasses[0].text %></option>\n  </select>\n<% } else { %>\n  <%= select(subclasses, isSelected, 'form-control im-value-type') %>\n<% } %>\n  \n",f=function(a){var b,c;return c=a.path,b=a.name,{value:c,text:b}},b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return l(b,a),b.prototype.parameters=["query","model"],b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.model.swap("type",function(a){return function(b){return null!=b?b:a.model.get("path").getType().name}}(this)),this.listenTo(c,"change",this.reRender),this.listenTo(this.state,"change:subclasses",this.reRender),this.setSubclasses()},b.prototype.getData=function(){var a,b;return b=this.model.get("type"),{select:g.select,messages:c,subclasses:function(){var b,c,d,e,g;for(e=null!=(d=this.state.get("subclasses"))?d:[],g=[],b=0,c=e.length;b<c;b++)a=e[b],g.push(f(a));return g}.call(this),isSelected:function(a){return b===a.value}}},b.prototype.events=function(){return{"change .im-value-type":"setType"}},b.prototype.setType=function(){return this.model.set({type:this.$(".im-value-type").val()})},b.prototype.template=j.template(h),b.prototype.setSubclasses=function(){if(!this.model.has("subclasses"))return this.getPossibleTypes().then(function(a){return function(b){var d;return 1===b.length&&(d=c.getText("typeconstraints.OneClass",b[0]),a.model.set({error:{message:d,level:"warning"}})),a.state.set({subclasses:b})}}(this))},b.prototype.getPossibleTypes=function(){var a,b,e,f,g,h,j,k,l,n;return n=this.model.toJSON(),b=n.path,l=n.type,h=this.query.getSubclasses(),g=this.query.model,delete h[b],a=g.getPathInfo(b.toString(),h).getType(),j=function(){var b,c,d,e;for(d=g.getSubclassesOf(a),e=[],b=0,c=d.length;b<c;b++)(k=d[b])!==a.name&&e.push(k);return e}(),e=function(){var a,b,c;for(c=[],a=0,b=j.length;a<b;a++)k=j[a],c.push(g.makePath(k));return c}(),f=e.map(i),m.call(j,l)<0&&(this.model.set({error:new Error(c.getText("typeconstraints.BadType",this.model.toJSON()))}),f.push(d.resolve({path:l,name:this.model.get("typeName")}))),d.all(f)},b}(e)}).call(this)},{"../core-view":3,"../messages":16,"../templates/helpers":68,"../utils/to-named-path":109,"es6-promise":238,underscore:262}],229:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l,m={}.hasOwnProperty,n=function(a,b){function c(){this.constructor=a}for(var d in b)m.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};l=a("underscore"),c=a("../core-view"),i=a("../templates"),f=a("../messages"),g=a("../options"),h=a("./undo-history/step"),j=function(a){return"state-"+a.get("revision")},d=-1,a("../messages/undo"),e=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return n(b,a),b.prototype.parameters=["more"],b.prototype.tagName="li",b.prototype.className="im-step im-ellipsis",b.prototype.template=function(){return l.escape(f.getText("undo.MoreSteps",{more:this.more})+" ...")},b.prototype.attributes=function(){return{title:f.getText("undo.ShowAllStates",{n:this.more})}},b.prototype.postRender=function(){return this.$el.tooltip({placement:"right"})},b.prototype.events=function(){return{click:function(a){return a.preventDefault(),a.stopPropagation(),this.state.toggle("showAll")}}},b}(c),k=function(a,b,c){var d;return d=c[b-1],0===b||b===c.length-1||a.get("count")!==d.get("count")},b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return n(b,a),b.prototype.parameters=["collection"],b.prototype.className="btn-group im-undo-history",b.prototype.template=i.template("undo-history"),b.prototype.events=function(){return{"click .btn.im-undo":"revertToPreviousState","click .im-toggle-trivial":"toggleTrivial"}},b.prototype.initState=function(){return this.state.set({showAll:!1,hideTrivial:!1})},b.prototype.stateEvents=function(){return{"change:showAll":this.reRender,"change:hideTrivial":this.reRender}},b.prototype.collectionEvents=function(){return{remove:this.removeStep,"add remove":this.reRender,"change:count":this.reRenderIfHidingTrivial}},b.prototype.toggleTrivial=function(a){return a.preventDefault(),a.stopPropagation(),this.state.toggle("hideTrivial")},b.prototype.revertToPreviousState=function(){return this.collection.popState()},b.prototype.reRenderIfHidingTrivial=function(){if(this.state.get("hideTrivial"))return this.reRender()},b.prototype.postRender=function(){return this.$(".im-toggle-trivial").tooltip({placement:"right"}),this.$list=this.$(".im-state-list"),this.renderStates(),this.$el.toggleClass("im-has-history",this.collection.size()>1),this.$el.toggleClass("im-hidden",this.collection.size()<=1)},b.prototype.renderStates=function(){var a,b,c,e,f,h,i,j,l,m,n,o,p,q,r,s;for(n=this.state.toJSON(),i=n.showAll,c=n.hideTrivial,a=this.collection,f=c?a.filter(k):a.models.slice(),j=f.length,b=g.get("UndoHistory.ShowAllStatesCutOff"),h=i||j<=b?function(){q=[];for(var a=o=j-1;o<=0?a<=0:a>=0;o<=0?a++:a--)q.push(a);return q}.apply(this):function(){r=[];for(var a=p=j-1,c=j-(b-1);p<=c?a<=c:a>=c;p<=c?a++:a--)r.push(a);return r}.apply(this).concat([d,0]),s=[],l=0,m=h.length;l<m;l++)e=h[l],e===d?s.push(this.renderEllipsis(j-b)):s.push(this.renderState(f[e]));return s},b.prototype.renderEllipsis=function(a){return this.renderChild("...",new e({more:a,state:this.state}),this.$list)},b.prototype.renderState=function(a){return this.renderChild(j(a),new h({model:a}),this.$list)},b.prototype.removeStep=function(a){return this.removeChild(j(a))},b}(c)}).call(this)},{"../core-view":3,"../messages":16,"../messages/undo":29,"../options":63,"../templates":67,"./undo-history/step":231,underscore:262}],230:[function(a,b,c){(function(){var c,d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};f=a("underscore"),d=a("../../core-view"),e=a("../../templates"),c=a("../../utils/css-class-set"),b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.template=e.template("undo-history-step-section"),b.prototype.labelContent=function(){throw new Error("NOT IMPLEMENTED")},b.prototype.summaryLabel=function(){return thow(new Error("NOT IMPLEMENTED"))},b.prototype.initState=function(){return this.state.set({open:!1})},b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.collectionClasses=new c({"well well-sm":!0,"im-hidden":function(a){return function(){return!a.state.get("open")}}(this)})},b.prototype.getData=function(){var a,c;return c=f.result(this,"summaryLabel"),a=this.collection.where({removed:!1}).length,f.extend(b.__super__.getData.apply(this,arguments),{count:a,summaryLabel:c,labelContent:this.labelContent,collectionClasses:this.collectionClasses})},b.prototype.events=function(){return{"click .im-section-summary":"toggleOpen"}},b.prototype.stateEvents=function(){return{"change:open":this.reRender}},b.prototype.collectionEvents=function(){return{change:this.reRender}},b.prototype.toggleOpen=function(a){return a.stopPropagation(),a.preventDefault(),this.state.toggle("open")},b}(d)}).call(this)},{"../../core-view":3,"../../templates":67,"../../utils/css-class-set":79,underscore:262}],231:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w={}.hasOwnProperty,x=function(a,b){function c(){this.constructor=a}for(var d in b)w.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},y=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};v=a("underscore"),g=a("../../core-view"),c=a("../../core/collection"),p=a("../../templates"),h=a("../../messages"),k=a("../../models/path"),e=a("../../models/constraint"),j=a("../../models/order-element"),l=a("./query-property-section"),a("../../messages/undo"),a("../../messages/constraints"),u=function(a){return function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return x(b,a),b.prototype.defaults=function(){return v.extend(b.__super__.defaults.apply(this,arguments),{added:!1,removed:!1})},b}(a)},i=function(a){function b(a){var c;c=a.path,b.__super__.constructor.call(this,c)}return x(b,a),b}(k),q=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return x(b,a),b.prototype.model=u(i),b}(c),d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return x(b,a),b.prototype.model=u(e),b}(c),n=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return x(b,a),b.prototype.model=u(j),b}(c),s=function(a){return function(b){var c;return b=v.isString(b)?{path:b}:b,c={path:a.makePath(b.path)},b.type&&(c.type=a.model.makePath(b.type)),v.extend(c,v.omit(b,"path","type"))}},b.exports=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return x(b,a),b.prototype.className="im-step",b.prototype.tagName="li",b.prototype.template=p.template("undo-history-step"),b.prototype.getData=function(){return v.extend(b.__super__.getData.apply(this,arguments),{diff:this.getCountDiff()})},b.prototype.getCountDiff=function(){return this.state.has("prevCount")?this.model.get("count")-this.state.get("prevCount"):null},b.prototype.initialize=function(){var a,c,e,f;if(b.__super__.initialize.apply(this,arguments),c=this.model.get("query"),this.initPrevCount(),a=s(c),this.listenTo(this.model.collection,"add remove",this.setCurrent),this.views=new q(c.views.map(a)),this.constraints=new d(c.constraints.map(a)),this.sortOrder=new n(c.sortOrder.map(a)),e=this.model.get("title"),"Added"===(f=e.verb)||"Removed"===f||"Changed"===f)switch(e.label){case"column":return this.diffView();case"sort order element":return this.diffSortOrder();case"filter":return this.diffConstraints();case"Initial":return null;default:return console.error("Cannot diff",e.label)}},b.prototype.initPrevCount=function(){var a;if(a=this.getPrevModel())return this.state.set({prevCount:a.get("count")}),this.listenTo(a,"change:count",function(b){return function(){return b.state.set({prevCount:a.get("count")})}}(this))},b.prototype.getPrevModel=function(){var a;return a=this.model.collection.indexOf(this.model),0===a?null:this.model.collection.at(a-1)},b.prototype.diff=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p;for(h=this.getPrevModel(),d=this.model.get("query"),i=h.get("query"),n=d[a],f=j=0,l=n.length;j<l;f=++j)e=n[f],c(e,i)&&b.at(f).set({added:!0});for(g=s(i),o=i[a],p=[],f=k=0,m=o.length;k<m;f=++k)e=o[f],c(e,d)&&p.push(b.add(g(e),{at:f}).set({removed:!0}));return p},b.prototype.diffView=function(){return this.diff("views",this.views,function(a,b){var c;return c=b.views,y.call(c,a)<0})},b.prototype.diffSortOrder=function(){return this.diff("sortOrder",this.sortOrder,function(a,b){return!v.findWhere(b.sortOrder,a)})},b.prototype.diffConstraints=function(){return this.diff("constraints",this.constraints,function(a,b){return!v.findWhere(b.constraints,a)})},b.prototype.initState=function(){return this.setCurrent()},b.prototype.setCurrent=function(){var a,b,c;if(null!=(c=this.model)?c.collection:void 0)return a=this.model.collection.indexOf(this.model),b=this.model.collection.size(),this.state.set({current:a===b-1})},b.prototype.stateEvents=function(){return{change:this.reRender}},b.prototype.modelEvents=function(){return{change:this.reRender}},b.prototype.events=function(){return{"click .btn.im-state-revert":"revertToState",click:function(a){return a.preventDefault(),a.stopPropagation()}}},b.prototype.revertToState=function(){return this.model.collection.revertTo(this.model)},b.prototype.postRender=function(){var a;if(this.$details=this.$(".im-step-details"),this.$el.toggleClass("im-current-state",this.state.get("current")),this.$(".btn[title]").tooltip({placement:"right"}),this.state.get("current"))return this.renderAllSections();switch(a=this.model.get("title"),a.label){case"column":return this.renderViews();case"filter":return this.renderConstraints();case"sort order element":return this.renderSortOrder();case"Initial":return null;default:return console.error("Cannot render",a.label)}},b.prototype.renderAllSections=function(){return this.renderViews(),this.renderConstraints(),this.renderSortOrder()},b.prototype.renderViews=function(){return this.renderChild("views",new m({collection:this.views}),this.$details)},b.prototype.renderSortOrder=function(){return this.renderChild("so",new o({collection:this.sortOrder}),this.$details)},b.prototype.renderConstraints=function(){return this.renderChild("cons",new f({collection:this.constraints}),this.$details)},b}(g),m=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return x(b,a),b.prototype.summaryLabel="undo.ViewCount",b.prototype.labelContent=function(a){return a.displayName},b}(l),o=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return x(b,a),b.prototype.summaryLabel="undo.OrderElemCount",b.prototype.labelContent=function(a){return a.displayName+" "+a.direction},b}(l),t=function(a){return h.getText("constraints.NoOfValues",{n:a.values.length})},r=function(a){return h.getText("constraints.NoOfIds",{n:a.ids.length})},f=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return x(b,a),b.prototype.summaryLabel="undo.ConstraintCount",b.prototype.labelContent=function(a){var b;return b=function(){switch(a.CONSTRAINT_TYPE){case"MULTI_VALUE":return[a.displayName,a.op,a.values.length,t(a)];case"TYPE":return[a.displayName,h.getText("constraints.ISA"),a.typeName];case"IDS":return[a.displayName,a.op,r(a)];case"LOOKUP":return[a.displayName,a.op,a.value,h.getText("constraints.LookupIn"),a.extraValue];default:return[a.displayName,a.op,a.value]}}(),b.join(" ")},b}(l)}).call(this)},{"../../core-view":3,"../../core/collection":5,"../../messages":16,"../../messages/constraints":21,"../../messages/undo":29,"../../models/constraint":40,"../../models/order-element":53,"../../models/path":56,"../../templates":67,"./query-property-section":230,underscore:262}],232:[function(a,b,c){(function(d,e){function f(a,b){return"string"==typeof a?b==a:a&&"function"==typeof a.exec?a.exec(b):"boolean"==typeof a?a:"function"==typeof a&&a(b)}var g=a("jsonparse"),h=a("through");c.parse=function(a,b){var c=new g,d=h(function(a){"string"==typeof a&&(a=new e(a)),c.write(a)},function(a){a&&d.write(a),d.queue(null)});"string"==typeof a&&(a=a.split(".").map(function(a){return"*"===a||(""===a?{recurse:!0}:a)}));var i=0;return a&&a.length||(a=null),c.onValue=function(c){if(this.root||(d.root=c),a){for(var e=0,g=0;e<a.length;){var h,j=a[e];if(g++,j&&!j.recurse){if(!(h=g===this.stack.length?this:this.stack[g]))return;if(!f(j,h.key))return;e++}else{e++;var k=a[e];if(!k)return;for(;;){if(!(h=g===this.stack.length?this:this.stack[g]))return;if(f(k,h.key)){e++;break}g++}}}if(g===this.stack.length){i++;var l=this.stack.slice(1).map(function(a){return a.key}).concat([this.key]),m=this.value[this.key];null!=m&&null!=(m=b?b(m,l):m)&&d.queue(m),delete this.value[this.key]}}},c._onToken=c.onToken,c.onToken=function(b,e){c._onToken(b,e),0===this.stack.length&&d.root&&(a||d.queue(d.root),d.emit("root",d.root,i),i=0,d.root=null)},c.onError=function(a){d.emit("error",a)},d},c.stringify=function(a,b,c,d){d=d||0,!1===a?(a="",b="\n",c=""):null==a&&(a="[\n",b="\n,\n",c="\n]\n");var e,f=!0,g=!1;return e=h(function(c){g=!0;var h=JSON.stringify(c,null,d);f?(f=!1,e.queue(a+h)):e.queue(b+h)},function(b){g||e.queue(a),e.queue(c),e.queue(null)})},c.stringifyObject=function(a,b,c,d){d=d||0,!1===a?(a="",b="\n",c=""):null==a&&(a="{\n",b="\n,\n",c="\n}\n");var e=!0,f=!1;return stream=h(function(c){f=!0;var g=JSON.stringify(c[0])+":"+JSON.stringify(c[1],null,d);e?(e=!1,this.queue(a+g)):this.queue(b+g)},function(b){f||this.queue(a),this.queue(c),this.queue(null)}),stream},b.parent||"browser"===d.title||d.stdin.pipe(c.parse(d.argv[2])).pipe(c.stringify("[",",\n","]\n",2)).pipe(d.stdout)}).call(this,a("_process"),a("buffer").Buffer)},{_process:275,buffer:266,jsonparse:257,through:260}],233:[function(b,c,d){!function(){function b(){return{keys:Object.keys||function(a){if("object"!=typeof a&&"function"!=typeof a||null===a)throw new TypeError("keys() called on a non-object");var b,c=[];for(b in a)a.hasOwnProperty(b)&&(c[c.length]=b);return c},uniqueId:function(a){var b=++j+"";return a?a+b:b},has:function(a,b){return h.call(a,b)},each:function(a,b,c){if(null!=a)if(g&&a.forEach===g)a.forEach(b,c);else if(a.length===+a.length)for(var d=0,e=a.length;d<e;d++)b.call(c,a[d],d,a);else for(var f in a)this.has(a,f)&&b.call(c,a[f],f,a)},once:function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}}}}var e,f=this,g=Array.prototype.forEach,h=Object.prototype.hasOwnProperty,i=Array.prototype.slice,j=0,k=b();e={on:function(a,b,c){return m(this,"on",a,[b,c])&&b?(this._events||(this._events={}),(this._events[a]||(this._events[a]=[])).push({callback:b,context:c,ctx:c||this}),this):this},once:function(a,b,c){if(!m(this,"once",a,[b,c])||!b)return this;var d=this,e=k.once(function(){d.off(a,e),b.apply(this,arguments)});return e._callback=b,this.on(a,e,c)},off:function(a,b,c){var d,e,f,g,h,i,j,l
;if(!this._events||!m(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events={},this;for(g=a?[a]:k.keys(this._events),h=0,i=g.length;h<i;h++)if(a=g[h],f=this._events[a]){if(this._events[a]=d=[],b||c)for(j=0,l=f.length;j<l;j++)e=f[j],(b&&b!==e.callback&&b!==e.callback._callback||c&&c!==e.context)&&d.push(e);d.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=i.call(arguments,1);if(!m(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&n(c,b),d&&n(d,arguments),this},stopListening:function(a,b,c){var d=this._listeners;if(!d)return this;var e=!b&&!c;"object"==typeof b&&(c=this),a&&((d={})[a._listenerId]=a);for(var f in d)d[f].off(b,c,this),e&&delete this._listeners[f];return this}};var l=/\s+/,m=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(l.test(c)){for(var f=c.split(l),g=0,h=f.length;g<h;g++)a[b].apply(a,[f[g]].concat(d));return!1}return!0},n=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b)}},o={listenTo:"on",listenToOnce:"once"};k.each(o,function(a,b){e[b]=function(b,c,d){return(this._listeners||(this._listeners={}))[b._listenerId||(b._listenerId=k.uniqueId("l"))]=b,"object"==typeof c&&(d=this),b[a](c,d,this),this}}),e.bind=e.on,e.unbind=e.off,e.mixin=function(a){var b=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return k.each(b,function(b){a[b]=this[b]},this),a},void 0!==d?(void 0!==c&&c.exports&&(d=c.exports=e),d.BackboneEvents=e):"function"==typeof a&&"object"==typeof a.amd?a(function(){return e}):f.BackboneEvents=e}()},{}],234:[function(a,b,c){b.exports=a("./backbone-events-standalone")},{"./backbone-events-standalone":233}],235:[function(b,c,d){(function(c){!function(e){var f="object"==typeof self&&self.self===self&&self||"object"==typeof c&&c.global===c&&c;if("function"==typeof a&&a.amd)a(["underscore","jquery","exports"],function(a,b,c){f.Backbone=e(f,c,a,b)});else if(void 0!==d){var g,h=b("underscore");try{g=b("jquery")}catch(a){}e(f,d,h,g)}else f.Backbone=e(f,{},f._,f.jQuery||f.Zepto||f.ender||f.$)}(function(a,b,c,d){var e=a.Backbone,f=Array.prototype.slice;b.VERSION="1.4.0",b.$=d,b.noConflict=function(){return a.Backbone=e,this},b.emulateHTTP=!1,b.emulateJSON=!1;var g,h=b.Events={},i=/\s+/,j=function(a,b,d,e,f){var g,h=0;if(d&&"object"==typeof d){void 0!==e&&"context"in f&&void 0===f.context&&(f.context=e);for(g=c.keys(d);h<g.length;h++)b=j(a,b,g[h],d[g[h]],f)}else if(d&&i.test(d))for(g=d.split(i);h<g.length;h++)b=a(b,g[h],e,f);else b=a(b,d,e,f);return b};h.on=function(a,b,c){if(this._events=j(k,this._events||{},a,b,{context:c,ctx:this,listening:g}),g){(this._listeners||(this._listeners={}))[g.id]=g,g.interop=!1}return this},h.listenTo=function(a,b,d){if(!a)return this;var e=a._listenId||(a._listenId=c.uniqueId("l")),f=this._listeningTo||(this._listeningTo={}),h=g=f[e];h||(this._listenId||(this._listenId=c.uniqueId("l")),h=g=f[e]=new q(this,a));var i=l(a,b,d,this);if(g=void 0,i)throw i;return h.interop&&h.on(b,d),this};var k=function(a,b,c,d){if(c){var e=a[b]||(a[b]=[]),f=d.context,g=d.ctx,h=d.listening;h&&h.count++,e.push({callback:c,context:f,ctx:f||g,listening:h})}return a},l=function(a,b,c,d){try{a.on(b,c,d)}catch(a){return a}};h.off=function(a,b,c){return this._events?(this._events=j(m,this._events,a,b,{context:c,listeners:this._listeners}),this):this},h.stopListening=function(a,b,d){var e=this._listeningTo;if(!e)return this;for(var f=a?[a._listenId]:c.keys(e),g=0;g<f.length;g++){var h=e[f[g]];if(!h)break;h.obj.off(b,d,this),h.interop&&h.off(b,d)}return c.isEmpty(e)&&(this._listeningTo=void 0),this};var m=function(a,b,d,e){if(a){var f,g=e.context,h=e.listeners,i=0;if(b||g||d){for(f=b?[b]:c.keys(a);i<f.length;i++){b=f[i];var j=a[b];if(!j)break;for(var k=[],l=0;l<j.length;l++){var m=j[l];if(d&&d!==m.callback&&d!==m.callback._callback||g&&g!==m.context)k.push(m);else{var n=m.listening;n&&n.off(b,d)}}k.length?a[b]=k:delete a[b]}return a}for(f=c.keys(h);i<f.length;i++)h[f[i]].cleanup()}};h.once=function(a,b,c){var d=j(n,{},a,b,this.off.bind(this));return"string"==typeof a&&null==c&&(b=void 0),this.on(d,b,c)},h.listenToOnce=function(a,b,c){var d=j(n,{},b,c,this.stopListening.bind(this,a));return this.listenTo(a,d)};var n=function(a,b,d,e){if(d){var f=a[b]=c.once(function(){e(b,f),d.apply(this,arguments)});f._callback=d}return a};h.trigger=function(a){if(!this._events)return this;for(var b=Math.max(0,arguments.length-1),c=Array(b),d=0;d<b;d++)c[d]=arguments[d+1];return j(o,this._events,a,void 0,c),this};var o=function(a,b,c,d){if(a){var e=a[b],f=a.all;e&&f&&(f=f.slice()),e&&p(e,d),f&&p(f,[b].concat(d))}return a},p=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b);return}},q=function(a,b){this.id=a._listenId,this.listener=a,this.obj=b,this.interop=!0,this.count=0,this._events=void 0};q.prototype.on=h.on,q.prototype.off=function(a,b){var c;this.interop?(this._events=j(m,this._events,a,b,{context:void 0,listeners:void 0}),c=!this._events):(this.count--,c=0===this.count),c&&this.cleanup()},q.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},h.bind=h.on,h.unbind=h.off,c.extend(b,h);var r=b.Model=function(a,b){var d=a||{};b||(b={}),this.preinitialize.apply(this,arguments),this.cid=c.uniqueId(this.cidPrefix),this.attributes={},b.collection&&(this.collection=b.collection),b.parse&&(d=this.parse(d,b)||{});var e=c.result(this,"defaults");d=c.defaults(c.extend({},e,d),e),this.set(d,b),this.changed={},this.initialize.apply(this,arguments)};c.extend(r.prototype,h,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(a){return c.clone(this.attributes)},sync:function(){return b.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return c.escape(this.get(a))},has:function(a){return null!=this.get(a)},matches:function(a){return!!c.iteratee(a,this)(this.attributes)},set:function(a,b,d){if(null==a)return this;var e;if("object"==typeof a?(e=a,d=b):(e={})[a]=b,d||(d={}),!this._validate(e,d))return!1;var f=d.unset,g=d.silent,h=[],i=this._changing;this._changing=!0,i||(this._previousAttributes=c.clone(this.attributes),this.changed={});var j=this.attributes,k=this.changed,l=this._previousAttributes;for(var m in e)b=e[m],c.isEqual(j[m],b)||h.push(m),c.isEqual(l[m],b)?delete k[m]:k[m]=b,f?delete j[m]:j[m]=b;if(this.idAttribute in e&&(this.id=this.get(this.idAttribute)),!g){h.length&&(this._pending=d);for(var n=0;n<h.length;n++)this.trigger("change:"+h[n],this,j[h[n]],d)}if(i)return this;if(!g)for(;this._pending;)d=this._pending,this._pending=!1,this.trigger("change",this,d);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,c.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var d in this.attributes)b[d]=void 0;return this.set(b,c.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!c.isEmpty(this.changed):c.has(this.changed,a)},changedAttributes:function(a){if(!a)return!!this.hasChanged()&&c.clone(this.changed);var b,d=this._changing?this._previousAttributes:this.attributes,e={};for(var f in a){var g=a[f];c.isEqual(d[f],g)||(e[f]=g,b=!0)}return!!b&&e},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return c.clone(this._previousAttributes)},fetch:function(a){a=c.extend({parse:!0},a);var b=this,d=a.success;return a.success=function(c){var e=a.parse?b.parse(c,a):c;if(!b.set(e,a))return!1;d&&d.call(a.context,b,c,a),b.trigger("sync",b,c,a)},W(this,a),this.sync("read",this,a)},save:function(a,b,d){var e;null==a||"object"==typeof a?(e=a,d=b):(e={})[a]=b,d=c.extend({validate:!0,parse:!0},d);var f=d.wait;if(e&&!f){if(!this.set(e,d))return!1}else if(!this._validate(e,d))return!1;var g=this,h=d.success,i=this.attributes;d.success=function(a){g.attributes=i;var b=d.parse?g.parse(a,d):a;if(f&&(b=c.extend({},e,b)),b&&!g.set(b,d))return!1;h&&h.call(d.context,g,a,d),g.trigger("sync",g,a,d)},W(this,d),e&&f&&(this.attributes=c.extend({},i,e));var j=this.isNew()?"create":d.patch?"patch":"update";"patch"!==j||d.attrs||(d.attrs=e);var k=this.sync(j,this,d);return this.attributes=i,k},destroy:function(a){a=a?c.clone(a):{};var b=this,d=a.success,e=a.wait,f=function(){b.stopListening(),b.trigger("destroy",b,b.collection,a)};a.success=function(c){e&&f(),d&&d.call(a.context,b,c,a),b.isNew()||b.trigger("sync",b,c,a)};var g=!1;return this.isNew()?c.defer(a.success):(W(this,a),g=this.sync("delete",this,a)),e||f(),g},url:function(){var a=c.result(this,"urlRoot")||c.result(this.collection,"url")||V();if(this.isNew())return a;var b=this.get(this.idAttribute);return a.replace(/[^\/]$/,"$&/")+encodeURIComponent(b)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(a){return this._validate({},c.extend({},a,{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=c.extend({},this.attributes,a);var d=this.validationError=this.validate(a,b)||null;return!d||(this.trigger("invalid",this,d,c.extend(b,{validationError:d})),!1)}});var s=b.Collection=function(a,b){b||(b={}),this.preinitialize.apply(this,arguments),b.model&&(this.model=b.model),void 0!==b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,c.extend({silent:!0},b))},t={add:!0,remove:!0,merge:!0},u={add:!0,remove:!1},v=function(a,b,c){c=Math.min(Math.max(c,0),a.length);var d,e=Array(a.length-c),f=b.length;for(d=0;d<e.length;d++)e[d]=a[d+c];for(d=0;d<f;d++)a[d+c]=b[d];for(d=0;d<e.length;d++)a[d+f+c]=e[d]};c.extend(s.prototype,h,{model:r,preinitialize:function(){},initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return b.sync.apply(this,arguments)},add:function(a,b){return this.set(a,c.extend({merge:!1},b,u))},remove:function(a,b){b=c.extend({},b);var d=!c.isArray(a);a=d?[a]:a.slice();var e=this._removeModels(a,b);return!b.silent&&e.length&&(b.changes={added:[],merged:[],removed:e},this.trigger("update",this,b)),d?e[0]:e},set:function(a,b){if(null!=a){b=c.extend({},t,b),b.parse&&!this._isModel(a)&&(a=this.parse(a,b)||[]);var d=!c.isArray(a);a=d?[a]:a.slice();var e=b.at;null!=e&&(e=+e),e>this.length&&(e=this.length),e<0&&(e+=this.length+1);var f,g,h=[],i=[],j=[],k=[],l={},m=b.add,n=b.merge,o=b.remove,p=!1,q=this.comparator&&null==e&&!1!==b.sort,r=c.isString(this.comparator)?this.comparator:null;for(g=0;g<a.length;g++){f=a[g];var s=this.get(f);if(s){if(n&&f!==s){var u=this._isModel(f)?f.attributes:f;b.parse&&(u=s.parse(u,b)),s.set(u,b),j.push(s),q&&!p&&(p=s.hasChanged(r))}l[s.cid]||(l[s.cid]=!0,h.push(s)),a[g]=s}else m&&(f=a[g]=this._prepareModel(f,b))&&(i.push(f),this._addReference(f,b),l[f.cid]=!0,h.push(f))}if(o){for(g=0;g<this.length;g++)f=this.models[g],l[f.cid]||k.push(f);k.length&&this._removeModels(k,b)}var w=!1,x=!q&&m&&o;if(h.length&&x?(w=this.length!==h.length||c.some(this.models,function(a,b){return a!==h[b]}),this.models.length=0,v(this.models,h,0),this.length=this.models.length):i.length&&(q&&(p=!0),v(this.models,i,null==e?this.length:e),this.length=this.models.length),p&&this.sort({silent:!0}),!b.silent){for(g=0;g<i.length;g++)null!=e&&(b.index=e+g),f=i[g],f.trigger("add",f,this,b);(p||w)&&this.trigger("sort",this,b),(i.length||k.length||j.length)&&(b.changes={added:i,removed:k,merged:j},this.trigger("update",this,b))}return d?a[0]:a}},reset:function(a,b){b=b?c.clone(b):{};for(var d=0;d<this.models.length;d++)this._removeReference(this.models[d],b);return b.previousModels=this.models,this._reset(),a=this.add(a,c.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),a},push:function(a,b){return this.add(a,c.extend({at:this.length},b))},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a)},unshift:function(a,b){return this.add(a,c.extend({at:0},b))},shift:function(a){var b=this.at(0);return this.remove(b,a)},slice:function(){return f.apply(this.models,arguments)},get:function(a){if(null!=a)return this._byId[a]||this._byId[this.modelId(this._isModel(a)?a.attributes:a)]||a.cid&&this._byId[a.cid]},has:function(a){return null!=this.get(a)},at:function(a){return a<0&&(a+=this.length),this.models[a]},where:function(a,b){return this[b?"find":"filter"](a)},findWhere:function(a){return this.where(a,!0)},sort:function(a){var b=this.comparator;if(!b)throw new Error("Cannot sort a set without a comparator");a||(a={});var d=b.length;return c.isFunction(b)&&(b=b.bind(this)),1===d||c.isString(b)?this.models=this.sortBy(b):this.models.sort(b),a.silent||this.trigger("sort",this,a),this},pluck:function(a){return this.map(a+"")},fetch:function(a){a=c.extend({parse:!0},a);var b=a.success,d=this;return a.success=function(c){var e=a.reset?"reset":"set";d[e](c,a),b&&b.call(a.context,d,c,a),d.trigger("sync",d,c,a)},W(this,a),this.sync("read",this,a)},create:function(a,b){b=b?c.clone(b):{};var d=b.wait;if(!(a=this._prepareModel(a,b)))return!1;d||this.add(a,b);var e=this,f=b.success;return b.success=function(a,b,c){d&&e.add(a,c),f&&f.call(c.context,a,b,c)},a.save(null,b),a},parse:function(a,b){return a},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(a){return a[this.model.prototype.idAttribute||"id"]},values:function(){return new x(this,y)},keys:function(){return new x(this,z)},entries:function(){return new x(this,A)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,b){if(this._isModel(a))return a.collection||(a.collection=this),a;b=b?c.clone(b):{},b.collection=this;var d=new this.model(a,b);return d.validationError?(this.trigger("invalid",this,d.validationError,b),!1):d},_removeModels:function(a,b){for(var c=[],d=0;d<a.length;d++){var e=this.get(a[d]);if(e){var f=this.indexOf(e);this.models.splice(f,1),this.length--,delete this._byId[e.cid];var g=this.modelId(e.attributes);null!=g&&delete this._byId[g],b.silent||(b.index=f,e.trigger("remove",e,this,b)),c.push(e),this._removeReference(e,b)}}return c},_isModel:function(a){return a instanceof r},_addReference:function(a,b){this._byId[a.cid]=a;var c=this.modelId(a.attributes);null!=c&&(this._byId[c]=a),a.on("all",this._onModelEvent,this)},_removeReference:function(a,b){delete this._byId[a.cid];var c=this.modelId(a.attributes);null!=c&&delete this._byId[c],this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){if(b){if(("add"===a||"remove"===a)&&c!==this)return;if("destroy"===a&&this.remove(b,d),"change"===a){var e=this.modelId(b.previousAttributes()),f=this.modelId(b.attributes);e!==f&&(null!=e&&delete this._byId[e],null!=f&&(this._byId[f]=b))}}this.trigger.apply(this,arguments)}});var w="function"==typeof Symbol&&Symbol.iterator;w&&(s.prototype[w]=s.prototype.values);var x=function(a,b){this._collection=a,this._kind=b,this._index=0},y=1,z=2,A=3;w&&(x.prototype[w]=function(){return this}),x.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var a=this._collection.at(this._index);this._index++;var b;if(this._kind===y)b=a;else{var c=this._collection.modelId(a.attributes);b=this._kind===z?c:[c,a]}return{value:b,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var B=b.View=function(a){this.cid=c.uniqueId("view"),this.preinitialize.apply(this,arguments),c.extend(this,c.pick(a,D)),this._ensureElement(),this.initialize.apply(this,arguments)},C=/^(\S+)\s*(.*)$/,D=["model","collection","el","id","attributes","className","tagName","events"];c.extend(B.prototype,h,{tagName:"div",$:function(a){return this.$el.find(a)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(a){return this.undelegateEvents(),this._setElement(a),this.delegateEvents(),this},_setElement:function(a){this.$el=a instanceof b.$?a:b.$(a),this.el=this.$el[0]},delegateEvents:function(a){if(a||(a=c.result(this,"events")),!a)return this;this.undelegateEvents();for(var b in a){var d=a[b];if(c.isFunction(d)||(d=this[d]),d){var e=b.match(C);this.delegate(e[1],e[2],d.bind(this))}}return this},delegate:function(a,b,c){return this.$el.on(a+".delegateEvents"+this.cid,b,c),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(a,b,c){return this.$el.off(a+".delegateEvents"+this.cid,b,c),this},_createElement:function(a){return document.createElement(a)},_ensureElement:function(){if(this.el)this.setElement(c.result(this,"el"));else{var a=c.extend({},c.result(this,"attributes"));this.id&&(a.id=c.result(this,"id")),this.className&&(a.class=c.result(this,"className")),this.setElement(this._createElement(c.result(this,"tagName"))),this._setAttributes(a)}},_setAttributes:function(a){this.$el.attr(a)}});var E=function(a,b,c,d){switch(b){case 1:return function(){return a[c](this[d])};case 2:return function(b){return a[c](this[d],b)};case 3:return function(b,e){return a[c](this[d],G(b,this),e)};case 4:return function(b,e,f){return a[c](this[d],G(b,this),e,f)};default:return function(){var b=f.call(arguments);return b.unshift(this[d]),a[c].apply(a,b)}}},F=function(a,b,d,e){c.each(d,function(c,d){b[d]&&(a.prototype[d]=E(b,c,d,e))})},G=function(a,b){return c.isFunction(a)?a:c.isObject(a)&&!b._isModel(a)?H(a):c.isString(a)?function(b){return b.get(a)}:a},H=function(a){var b=c.matches(a);return function(a){return b(a.attributes)}},I={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},J={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};c.each([[s,I,"models"],[r,J,"attributes"]],function(a){var b=a[0],d=a[1],e=a[2];b.mixin=function(a){var d=c.reduce(c.functions(a),function(a,b){return a[b]=0,a},{});F(b,a,d,e)},F(b,c,d,e)}),b.sync=function(a,d,e){var f=K[a];c.defaults(e||(e={}),{emulateHTTP:b.emulateHTTP,emulateJSON:b.emulateJSON});var g={type:f,dataType:"json"};if(e.url||(g.url=c.result(d,"url")||V()),null!=e.data||!d||"create"!==a&&"update"!==a&&"patch"!==a||(g.contentType="application/json",g.data=JSON.stringify(e.attrs||d.toJSON(e))),e.emulateJSON&&(g.contentType="application/x-www-form-urlencoded",g.data=g.data?{model:g.data}:{}),e.emulateHTTP&&("PUT"===f||"DELETE"===f||"PATCH"===f)){g.type="POST",e.emulateJSON&&(g.data._method=f);var h=e.beforeSend;e.beforeSend=function(a){if(a.setRequestHeader("X-HTTP-Method-Override",f),h)return h.apply(this,arguments)}}"GET"===g.type||e.emulateJSON||(g.processData=!1);var i=e.error;e.error=function(a,b,c){e.textStatus=b,e.errorThrown=c,i&&i.call(e.context,a,b,c)};var j=e.xhr=b.ajax(c.extend(g,e));return d.trigger("request",d,j,e),j};var K={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};b.ajax=function(){return b.$.ajax.apply(b.$,arguments)};var L=b.Router=function(a){a||(a={}),this.preinitialize.apply(this,arguments),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},M=/\((.*?)\)/g,N=/(\(\?)?:\w+/g,O=/\*\w+/g,P=/[\-{}\[\]+?.,\\\^$|#\s]/g;c.extend(L.prototype,h,{preinitialize:function(){},initialize:function(){},route:function(a,d,e){c.isRegExp(a)||(a=this._routeToRegExp(a)),c.isFunction(d)&&(e=d,d=""),e||(e=this[d]);var f=this;return b.history.route(a,function(c){var g=f._extractParameters(a,c);!1!==f.execute(e,g,d)&&(f.trigger.apply(f,["route:"+d].concat(g)),f.trigger("route",d,g),b.history.trigger("route",f,d,g))}),this},execute:function(a,b,c){a&&a.apply(this,b)},navigate:function(a,c){return b.history.navigate(a,c),this},_bindRoutes:function(){if(this.routes){this.routes=c.result(this,"routes");for(var a,b=c.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){return a=a.replace(P,"\\$&").replace(M,"(?:$1)?").replace(N,function(a,b){return b?a:"([^/?]+)"}).replace(O,"([^?]*?)"),new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(a,b){var d=a.exec(b).slice(1);return c.map(d,function(a,b){return b===d.length-1?a||null:a?decodeURIComponent(a):null})}});var Q=b.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},R=/^[#\/]|\s+$/g,S=/^\/+|\/+$/g,T=/#.*$/;Q.started=!1,c.extend(Q.prototype,h,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(a){return decodeURI(a.replace(/%25/g,"%2525"))},getSearch:function(){var a=this.location.href.replace(/#.*/,"").match(/\?.+/);return a?a[0]:""},getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getPath:function(){var a=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===a.charAt(0)?a.slice(1):a},getFragment:function(a){return null==a&&(a=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),a.replace(R,"")},start:function(a){if(Q.started)throw new Error("Backbone.history has already been started");if(Q.started=!0,this.options=c.extend({root:"/"},this.options,a),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(S,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var b=this.root.slice(0,-1)||"/";return this.location.replace(b+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var d=document.body,e=d.insertBefore(this.iframe,d.firstChild).contentWindow;e.document.open(),e.document.close(),e.location.hash="#"+this.fragment}var f=window.addEventListener||function(a,b){return attachEvent("on"+a,b)};if(this._usePushState?f("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?f("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var a=window.removeEventListener||function(a,b){return detachEvent("on"+a,b)};this._usePushState?a("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&a("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),Q.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){var b=this.getFragment();if(b===this.fragment&&this.iframe&&(b=this.getHash(this.iframe.contentWindow)),b===this.fragment)return!1;this.iframe&&this.navigate(b),this.loadUrl()},loadUrl:function(a){return!!this.matchRoot()&&(a=this.fragment=this.getFragment(a),c.some(this.handlers,function(b){if(b.route.test(a))return b.callback(a),!0}))},navigate:function(a,b){if(!Q.started)return!1;b&&!0!==b||(b={trigger:!!b}),a=this.getFragment(a||"");var c=this.root;""!==a&&"?"!==a.charAt(0)||(c=c.slice(0,-1)||"/");var d=c+a;a=a.replace(T,"");var e=this.decodeFragment(a);if(this.fragment!==e){if(this.fragment=e,this._usePushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,d);else{if(!this._wantsHashChange)return this.location.assign(d);if(this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getHash(this.iframe.contentWindow)){var f=this.iframe.contentWindow;b.replace||(f.document.open(),f.document.close()),this._updateHash(f.location,a,b.replace)}}return b.trigger?this.loadUrl(a):void 0}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),b.history=new Q;var U=function(a,b){var d,e=this;return d=a&&c.has(a,"constructor")?a.constructor:function(){return e.apply(this,arguments)},c.extend(d,e,b),d.prototype=c.create(e.prototype,a),d.prototype.constructor=d,d.__super__=e.prototype,d};r.extend=s.extend=L.extend=B.extend=Q.extend=U;var V=function(){throw new Error('A "url" property or function must be specified')},W=function(a,b){var c=b.error;b.error=function(d){c&&c.call(b.context,a,d,b),a.trigger("error",a,d,b)}};return b})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{jquery:256,underscore:262}],236:[function(b,c,d){!function(e,f){"object"==typeof d&&void 0!==c?f(d,b("jquery"),b("popper.js")):"function"==typeof a&&a.amd?a(["exports","jquery","popper.js"],f):(e=e||self,f(e.bootstrap={},e.jQuery,e.Popper))}(this,function(a,b,c){"use strict";function d(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function e(a,b,c){return b&&d(a.prototype,b),c&&d(a,c),a}function f(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function g(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){f(a,b,c[b])})}return a}function h(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.__proto__=b}function i(a){return{}.toString.call(a).match(/\s([a-z]+)/i)[1].toLowerCase()}function j(){return{bindType:o,delegateType:o,handle:function(a){if(b(a.target).is(this))return a.handleObj.handler.apply(this,arguments)}}}function k(a){var c=this,d=!1;return b(this).one(r.TRANSITION_END,function(){d=!0}),setTimeout(function(){d||r.triggerTransitionEnd(c)},a),this}function l(){b.fn.emulateTransitionEnd=k,b.event.special[r.TRANSITION_END]=j()}function m(a,b){var c=a.nodeName.toLowerCase();if(-1!==b.indexOf(c))return-1===Wa.indexOf(c)||Boolean(a.nodeValue.match(Za)||a.nodeValue.match($a));for(var d=b.filter(function(a){return a instanceof RegExp}),e=0,f=d.length;e<f;e++)if(c.match(d[e]))return!0;return!1}function n(a,b,c){if(0===a.length)return a;if(c&&"function"==typeof c)return c(a);for(var d=new window.DOMParser,e=d.parseFromString(a,"text/html"),f=Object.keys(b),g=[].slice.call(e.body.querySelectorAll("*")),h=function(a,c){var d=g[a],e=d.nodeName.toLowerCase();if(-1===f.indexOf(d.nodeName.toLowerCase()))return d.parentNode.removeChild(d),"continue";var h=[].slice.call(d.attributes),i=[].concat(b["*"]||[],b[e]||[]);h.forEach(function(a){m(a,i)||d.removeAttribute(a.nodeName)})},i=0,j=g.length;i<j;i++){h(i,j)}return e.body.innerHTML}b=b&&b.hasOwnProperty("default")?b.default:b,c=c&&c.hasOwnProperty("default")?c.default:c;var o="transitionend",p=1e6,q=1e3,r={TRANSITION_END:"bsTransitionEnd",getUID:function(a){do{a+=~~(Math.random()*p)}while(document.getElementById(a));return a},getSelectorFromElement:function(a){var b=a.getAttribute("data-target");if(!b||"#"===b){var c=a.getAttribute("href");b=c&&"#"!==c?c.trim():""}try{return document.querySelector(b)?b:null}catch(a){return null}},getTransitionDurationFromElement:function(a){if(!a)return 0;var c=b(a).css("transition-duration"),d=b(a).css("transition-delay"),e=parseFloat(c),f=parseFloat(d);return e||f?(c=c.split(",")[0],d=d.split(",")[0],(parseFloat(c)+parseFloat(d))*q):0},reflow:function(a){return a.offsetHeight},triggerTransitionEnd:function(a){b(a).trigger(o)},supportsTransitionEnd:function(){return Boolean(o)},isElement:function(a){return(a[0]||a).nodeType},typeCheckConfig:function(a,b,c){for(var d in c)if(Object.prototype.hasOwnProperty.call(c,d)){var e=c[d],f=b[d],g=f&&r.isElement(f)?"element":i(f);if(!new RegExp(e).test(g))throw new Error(a.toUpperCase()+': Option "'+d+'" provided type "'+g+'" but expected type "'+e+'".')}},findShadowRoot:function(a){if(!document.documentElement.attachShadow)return null;if("function"==typeof a.getRootNode){var b=a.getRootNode();return b instanceof ShadowRoot?b:null}return a instanceof ShadowRoot?a:a.parentNode?r.findShadowRoot(a.parentNode):null}};l();var s="alert",t="4.3.1",u="bs.alert",v="."+u,w=".data-api",x=b.fn[s],y={DISMISS:'[data-dismiss="alert"]'},z={CLOSE:"close"+v,CLOSED:"closed"+v,CLICK_DATA_API:"click"+v+w},A={ALERT:"alert",FADE:"fade",SHOW:"show"},B=function(){function a(a){this._element=a}var c=a.prototype;return c.close=function(a){var b=this._element;a&&(b=this._getRootElement(a)),this._triggerCloseEvent(b).isDefaultPrevented()||this._removeElement(b)},c.dispose=function(){b.removeData(this._element,u),this._element=null},c._getRootElement=function(a){var c=r.getSelectorFromElement(a),d=!1;return c&&(d=document.querySelector(c)),d||(d=b(a).closest("."+A.ALERT)[0]),d},c._triggerCloseEvent=function(a){var c=b.Event(z.CLOSE);return b(a).trigger(c),c},c._removeElement=function(a){var c=this;if(b(a).removeClass(A.SHOW),!b(a).hasClass(A.FADE))return void this._destroyElement(a);var d=r.getTransitionDurationFromElement(a);b(a).one(r.TRANSITION_END,function(b){return c._destroyElement(a,b)}).emulateTransitionEnd(d)},c._destroyElement=function(a){b(a).detach().trigger(z.CLOSED).remove()},a._jQueryInterface=function(c){return this.each(function(){var d=b(this),e=d.data(u);e||(e=new a(this),d.data(u,e)),"close"===c&&e[c](this)})},a._handleDismiss=function(a){return function(b){b&&b.preventDefault(),a.close(this)}},e(a,null,[{key:"VERSION",get:function(){return t}}]),a}();b(document).on(z.CLICK_DATA_API,y.DISMISS,B._handleDismiss(new B)),b.fn[s]=B._jQueryInterface,b.fn[s].Constructor=B,b.fn[s].noConflict=function(){return b.fn[s]=x,B._jQueryInterface};var C="button",D="4.3.1",E="bs.button",F="."+E,G=".data-api",H=b.fn[C],I={ACTIVE:"active",BUTTON:"btn",FOCUS:"focus"},J={DATA_TOGGLE_CARROT:'[data-toggle^="button"]',DATA_TOGGLE:'[data-toggle="buttons"]',INPUT:'input:not([type="hidden"])',ACTIVE:".active",BUTTON:".btn"},K={CLICK_DATA_API:"click"+F+G,FOCUS_BLUR_DATA_API:"focus"+F+G+" blur"+F+G},L=function(){function a(a){this._element=a}var c=a.prototype;return c.toggle=function(){var a=!0,c=!0,d=b(this._element).closest(J.DATA_TOGGLE)[0];if(d){var e=this._element.querySelector(J.INPUT);if(e){
if("radio"===e.type)if(e.checked&&this._element.classList.contains(I.ACTIVE))a=!1;else{var f=d.querySelector(J.ACTIVE);f&&b(f).removeClass(I.ACTIVE)}if(a){if(e.hasAttribute("disabled")||d.hasAttribute("disabled")||e.classList.contains("disabled")||d.classList.contains("disabled"))return;e.checked=!this._element.classList.contains(I.ACTIVE),b(e).trigger("change")}e.focus(),c=!1}}c&&this._element.setAttribute("aria-pressed",!this._element.classList.contains(I.ACTIVE)),a&&b(this._element).toggleClass(I.ACTIVE)},c.dispose=function(){b.removeData(this._element,E),this._element=null},a._jQueryInterface=function(c){return this.each(function(){var d=b(this).data(E);d||(d=new a(this),b(this).data(E,d)),"toggle"===c&&d[c]()})},e(a,null,[{key:"VERSION",get:function(){return D}}]),a}();b(document).on(K.CLICK_DATA_API,J.DATA_TOGGLE_CARROT,function(a){a.preventDefault();var c=a.target;b(c).hasClass(I.BUTTON)||(c=b(c).closest(J.BUTTON)),L._jQueryInterface.call(b(c),"toggle")}).on(K.FOCUS_BLUR_DATA_API,J.DATA_TOGGLE_CARROT,function(a){var c=b(a.target).closest(J.BUTTON)[0];b(c).toggleClass(I.FOCUS,/^focus(in)?$/.test(a.type))}),b.fn[C]=L._jQueryInterface,b.fn[C].Constructor=L,b.fn[C].noConflict=function(){return b.fn[C]=H,L._jQueryInterface};var M="carousel",N="4.3.1",O="bs.carousel",P="."+O,Q=".data-api",R=b.fn[M],S=37,T=39,U=500,V=40,W={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},X={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},Y={NEXT:"next",PREV:"prev",LEFT:"left",RIGHT:"right"},Z={SLIDE:"slide"+P,SLID:"slid"+P,KEYDOWN:"keydown"+P,MOUSEENTER:"mouseenter"+P,MOUSELEAVE:"mouseleave"+P,TOUCHSTART:"touchstart"+P,TOUCHMOVE:"touchmove"+P,TOUCHEND:"touchend"+P,POINTERDOWN:"pointerdown"+P,POINTERUP:"pointerup"+P,DRAG_START:"dragstart"+P,LOAD_DATA_API:"load"+P+Q,CLICK_DATA_API:"click"+P+Q},$={CAROUSEL:"carousel",ACTIVE:"active",SLIDE:"slide",RIGHT:"carousel-item-right",LEFT:"carousel-item-left",NEXT:"carousel-item-next",PREV:"carousel-item-prev",ITEM:"carousel-item",POINTER_EVENT:"pointer-event"},_={ACTIVE:".active",ACTIVE_ITEM:".active.carousel-item",ITEM:".carousel-item",ITEM_IMG:".carousel-item img",NEXT_PREV:".carousel-item-next, .carousel-item-prev",INDICATORS:".carousel-indicators",DATA_SLIDE:"[data-slide], [data-slide-to]",DATA_RIDE:'[data-ride="carousel"]'},aa={TOUCH:"touch",PEN:"pen"},ba=function(){function a(a,b){this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(b),this._element=a,this._indicatorsElement=this._element.querySelector(_.INDICATORS),this._touchSupported="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0,this._pointerEvent=Boolean(window.PointerEvent||window.MSPointerEvent),this._addEventListeners()}var c=a.prototype;return c.next=function(){this._isSliding||this._slide(Y.NEXT)},c.nextWhenVisible=function(){!document.hidden&&b(this._element).is(":visible")&&"hidden"!==b(this._element).css("visibility")&&this.next()},c.prev=function(){this._isSliding||this._slide(Y.PREV)},c.pause=function(a){a||(this._isPaused=!0),this._element.querySelector(_.NEXT_PREV)&&(r.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},c.cycle=function(a){a||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},c.to=function(a){var c=this;this._activeElement=this._element.querySelector(_.ACTIVE_ITEM);var d=this._getItemIndex(this._activeElement);if(!(a>this._items.length-1||a<0)){if(this._isSliding)return void b(this._element).one(Z.SLID,function(){return c.to(a)});if(d===a)return this.pause(),void this.cycle();var e=a>d?Y.NEXT:Y.PREV;this._slide(e,this._items[a])}},c.dispose=function(){b(this._element).off(P),b.removeData(this._element,O),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},c._getConfig=function(a){return a=g({},W,a),r.typeCheckConfig(M,a,X),a},c._handleSwipe=function(){var a=Math.abs(this.touchDeltaX);if(!(a<=V)){var b=a/this.touchDeltaX;b>0&&this.prev(),b<0&&this.next()}},c._addEventListeners=function(){var a=this;this._config.keyboard&&b(this._element).on(Z.KEYDOWN,function(b){return a._keydown(b)}),"hover"===this._config.pause&&b(this._element).on(Z.MOUSEENTER,function(b){return a.pause(b)}).on(Z.MOUSELEAVE,function(b){return a.cycle(b)}),this._config.touch&&this._addTouchEventListeners()},c._addTouchEventListeners=function(){var a=this;if(this._touchSupported){var c=function(b){a._pointerEvent&&aa[b.originalEvent.pointerType.toUpperCase()]?a.touchStartX=b.originalEvent.clientX:a._pointerEvent||(a.touchStartX=b.originalEvent.touches[0].clientX)},d=function(b){b.originalEvent.touches&&b.originalEvent.touches.length>1?a.touchDeltaX=0:a.touchDeltaX=b.originalEvent.touches[0].clientX-a.touchStartX},e=function(b){a._pointerEvent&&aa[b.originalEvent.pointerType.toUpperCase()]&&(a.touchDeltaX=b.originalEvent.clientX-a.touchStartX),a._handleSwipe(),"hover"===a._config.pause&&(a.pause(),a.touchTimeout&&clearTimeout(a.touchTimeout),a.touchTimeout=setTimeout(function(b){return a.cycle(b)},U+a._config.interval))};b(this._element.querySelectorAll(_.ITEM_IMG)).on(Z.DRAG_START,function(a){return a.preventDefault()}),this._pointerEvent?(b(this._element).on(Z.POINTERDOWN,function(a){return c(a)}),b(this._element).on(Z.POINTERUP,function(a){return e(a)}),this._element.classList.add($.POINTER_EVENT)):(b(this._element).on(Z.TOUCHSTART,function(a){return c(a)}),b(this._element).on(Z.TOUCHMOVE,function(a){return d(a)}),b(this._element).on(Z.TOUCHEND,function(a){return e(a)}))}},c._keydown=function(a){if(!/input|textarea/i.test(a.target.tagName))switch(a.which){case S:a.preventDefault(),this.prev();break;case T:a.preventDefault(),this.next()}},c._getItemIndex=function(a){return this._items=a&&a.parentNode?[].slice.call(a.parentNode.querySelectorAll(_.ITEM)):[],this._items.indexOf(a)},c._getItemByDirection=function(a,b){var c=a===Y.NEXT,d=a===Y.PREV,e=this._getItemIndex(b),f=this._items.length-1;if((d&&0===e||c&&e===f)&&!this._config.wrap)return b;var g=a===Y.PREV?-1:1,h=(e+g)%this._items.length;return-1===h?this._items[this._items.length-1]:this._items[h]},c._triggerSlideEvent=function(a,c){var d=this._getItemIndex(a),e=this._getItemIndex(this._element.querySelector(_.ACTIVE_ITEM)),f=b.Event(Z.SLIDE,{relatedTarget:a,direction:c,from:e,to:d});return b(this._element).trigger(f),f},c._setActiveIndicatorElement=function(a){if(this._indicatorsElement){var c=[].slice.call(this._indicatorsElement.querySelectorAll(_.ACTIVE));b(c).removeClass($.ACTIVE);var d=this._indicatorsElement.children[this._getItemIndex(a)];d&&b(d).addClass($.ACTIVE)}},c._slide=function(a,c){var d,e,f,g=this,h=this._element.querySelector(_.ACTIVE_ITEM),i=this._getItemIndex(h),j=c||h&&this._getItemByDirection(a,h),k=this._getItemIndex(j),l=Boolean(this._interval);if(a===Y.NEXT?(d=$.LEFT,e=$.NEXT,f=Y.LEFT):(d=$.RIGHT,e=$.PREV,f=Y.RIGHT),j&&b(j).hasClass($.ACTIVE))return void(this._isSliding=!1);if(!this._triggerSlideEvent(j,f).isDefaultPrevented()&&h&&j){this._isSliding=!0,l&&this.pause(),this._setActiveIndicatorElement(j);var m=b.Event(Z.SLID,{relatedTarget:j,direction:f,from:i,to:k});if(b(this._element).hasClass($.SLIDE)){b(j).addClass(e),r.reflow(j),b(h).addClass(d),b(j).addClass(d);var n=parseInt(j.getAttribute("data-interval"),10);n?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=n):this._config.interval=this._config.defaultInterval||this._config.interval;var o=r.getTransitionDurationFromElement(h);b(h).one(r.TRANSITION_END,function(){b(j).removeClass(d+" "+e).addClass($.ACTIVE),b(h).removeClass($.ACTIVE+" "+e+" "+d),g._isSliding=!1,setTimeout(function(){return b(g._element).trigger(m)},0)}).emulateTransitionEnd(o)}else b(h).removeClass($.ACTIVE),b(j).addClass($.ACTIVE),this._isSliding=!1,b(this._element).trigger(m);l&&this.cycle()}},a._jQueryInterface=function(c){return this.each(function(){var d=b(this).data(O),e=g({},W,b(this).data());"object"==typeof c&&(e=g({},e,c));var f="string"==typeof c?c:e.slide;if(d||(d=new a(this,e),b(this).data(O,d)),"number"==typeof c)d.to(c);else if("string"==typeof f){if(void 0===d[f])throw new TypeError('No method named "'+f+'"');d[f]()}else e.interval&&e.ride&&(d.pause(),d.cycle())})},a._dataApiClickHandler=function(c){var d=r.getSelectorFromElement(this);if(d){var e=b(d)[0];if(e&&b(e).hasClass($.CAROUSEL)){var f=g({},b(e).data(),b(this).data()),h=this.getAttribute("data-slide-to");h&&(f.interval=!1),a._jQueryInterface.call(b(e),f),h&&b(e).data(O).to(h),c.preventDefault()}}},e(a,null,[{key:"VERSION",get:function(){return N}},{key:"Default",get:function(){return W}}]),a}();b(document).on(Z.CLICK_DATA_API,_.DATA_SLIDE,ba._dataApiClickHandler),b(window).on(Z.LOAD_DATA_API,function(){for(var a=[].slice.call(document.querySelectorAll(_.DATA_RIDE)),c=0,d=a.length;c<d;c++){var e=b(a[c]);ba._jQueryInterface.call(e,e.data())}}),b.fn[M]=ba._jQueryInterface,b.fn[M].Constructor=ba,b.fn[M].noConflict=function(){return b.fn[M]=R,ba._jQueryInterface};var ca="collapse",da="4.3.1",ea="bs.collapse",fa="."+ea,ga=".data-api",ha=b.fn[ca],ia={toggle:!0,parent:""},ja={toggle:"boolean",parent:"(string|element)"},ka={SHOW:"show"+fa,SHOWN:"shown"+fa,HIDE:"hide"+fa,HIDDEN:"hidden"+fa,CLICK_DATA_API:"click"+fa+ga},la={SHOW:"show",COLLAPSE:"collapse",COLLAPSING:"collapsing",COLLAPSED:"collapsed"},ma={WIDTH:"width",HEIGHT:"height"},na={ACTIVES:".show, .collapsing",DATA_TOGGLE:'[data-toggle="collapse"]'},oa=function(){function a(a,b){this._isTransitioning=!1,this._element=a,this._config=this._getConfig(b),this._triggerArray=[].slice.call(document.querySelectorAll('[data-toggle="collapse"][href="#'+a.id+'"],[data-toggle="collapse"][data-target="#'+a.id+'"]'));for(var c=[].slice.call(document.querySelectorAll(na.DATA_TOGGLE)),d=0,e=c.length;d<e;d++){var f=c[d],g=r.getSelectorFromElement(f),h=[].slice.call(document.querySelectorAll(g)).filter(function(b){return b===a});null!==g&&h.length>0&&(this._selector=g,this._triggerArray.push(f))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}var c=a.prototype;return c.toggle=function(){b(this._element).hasClass(la.SHOW)?this.hide():this.show()},c.show=function(){var c=this;if(!this._isTransitioning&&!b(this._element).hasClass(la.SHOW)){var d,e;if(this._parent&&(d=[].slice.call(this._parent.querySelectorAll(na.ACTIVES)).filter(function(a){return"string"==typeof c._config.parent?a.getAttribute("data-parent")===c._config.parent:a.classList.contains(la.COLLAPSE)}),0===d.length&&(d=null)),!(d&&(e=b(d).not(this._selector).data(ea))&&e._isTransitioning)){var f=b.Event(ka.SHOW);if(b(this._element).trigger(f),!f.isDefaultPrevented()){d&&(a._jQueryInterface.call(b(d).not(this._selector),"hide"),e||b(d).data(ea,null));var g=this._getDimension();b(this._element).removeClass(la.COLLAPSE).addClass(la.COLLAPSING),this._element.style[g]=0,this._triggerArray.length&&b(this._triggerArray).removeClass(la.COLLAPSED).attr("aria-expanded",!0),this.setTransitioning(!0);var h=function(){b(c._element).removeClass(la.COLLAPSING).addClass(la.COLLAPSE).addClass(la.SHOW),c._element.style[g]="",c.setTransitioning(!1),b(c._element).trigger(ka.SHOWN)},i=g[0].toUpperCase()+g.slice(1),j="scroll"+i,k=r.getTransitionDurationFromElement(this._element);b(this._element).one(r.TRANSITION_END,h).emulateTransitionEnd(k),this._element.style[g]=this._element[j]+"px"}}}},c.hide=function(){var a=this;if(!this._isTransitioning&&b(this._element).hasClass(la.SHOW)){var c=b.Event(ka.HIDE);if(b(this._element).trigger(c),!c.isDefaultPrevented()){var d=this._getDimension();this._element.style[d]=this._element.getBoundingClientRect()[d]+"px",r.reflow(this._element),b(this._element).addClass(la.COLLAPSING).removeClass(la.COLLAPSE).removeClass(la.SHOW);var e=this._triggerArray.length;if(e>0)for(var f=0;f<e;f++){var g=this._triggerArray[f],h=r.getSelectorFromElement(g);if(null!==h){var i=b([].slice.call(document.querySelectorAll(h)));i.hasClass(la.SHOW)||b(g).addClass(la.COLLAPSED).attr("aria-expanded",!1)}}this.setTransitioning(!0);var j=function(){a.setTransitioning(!1),b(a._element).removeClass(la.COLLAPSING).addClass(la.COLLAPSE).trigger(ka.HIDDEN)};this._element.style[d]="";var k=r.getTransitionDurationFromElement(this._element);b(this._element).one(r.TRANSITION_END,j).emulateTransitionEnd(k)}}},c.setTransitioning=function(a){this._isTransitioning=a},c.dispose=function(){b.removeData(this._element,ea),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},c._getConfig=function(a){return a=g({},ia,a),a.toggle=Boolean(a.toggle),r.typeCheckConfig(ca,a,ja),a},c._getDimension=function(){return b(this._element).hasClass(ma.WIDTH)?ma.WIDTH:ma.HEIGHT},c._getParent=function(){var c,d=this;r.isElement(this._config.parent)?(c=this._config.parent,void 0!==this._config.parent.jquery&&(c=this._config.parent[0])):c=document.querySelector(this._config.parent);var e='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]',f=[].slice.call(c.querySelectorAll(e));return b(f).each(function(b,c){d._addAriaAndCollapsedClass(a._getTargetFromElement(c),[c])}),c},c._addAriaAndCollapsedClass=function(a,c){var d=b(a).hasClass(la.SHOW);c.length&&b(c).toggleClass(la.COLLAPSED,!d).attr("aria-expanded",d)},a._getTargetFromElement=function(a){var b=r.getSelectorFromElement(a);return b?document.querySelector(b):null},a._jQueryInterface=function(c){return this.each(function(){var d=b(this),e=d.data(ea),f=g({},ia,d.data(),"object"==typeof c&&c?c:{});if(!e&&f.toggle&&/show|hide/.test(c)&&(f.toggle=!1),e||(e=new a(this,f),d.data(ea,e)),"string"==typeof c){if(void 0===e[c])throw new TypeError('No method named "'+c+'"');e[c]()}})},e(a,null,[{key:"VERSION",get:function(){return da}},{key:"Default",get:function(){return ia}}]),a}();b(document).on(ka.CLICK_DATA_API,na.DATA_TOGGLE,function(a){"A"===a.currentTarget.tagName&&a.preventDefault();var c=b(this),d=r.getSelectorFromElement(this),e=[].slice.call(document.querySelectorAll(d));b(e).each(function(){var a=b(this),d=a.data(ea),e=d?"toggle":c.data();oa._jQueryInterface.call(a,e)})}),b.fn[ca]=oa._jQueryInterface,b.fn[ca].Constructor=oa,b.fn[ca].noConflict=function(){return b.fn[ca]=ha,oa._jQueryInterface};var pa="dropdown",qa="4.3.1",ra="bs.dropdown",sa="."+ra,ta=".data-api",ua=b.fn[pa],va=27,wa=32,xa=9,ya=38,za=40,Aa=3,Ba=new RegExp(ya+"|"+za+"|"+va),Ca={HIDE:"hide"+sa,HIDDEN:"hidden"+sa,SHOW:"show"+sa,SHOWN:"shown"+sa,CLICK:"click"+sa,CLICK_DATA_API:"click"+sa+ta,KEYDOWN_DATA_API:"keydown"+sa+ta,KEYUP_DATA_API:"keyup"+sa+ta},Da={DISABLED:"disabled",SHOW:"show",DROPUP:"dropup",DROPRIGHT:"dropright",DROPLEFT:"dropleft",MENURIGHT:"dropdown-menu-right",MENULEFT:"dropdown-menu-left",POSITION_STATIC:"position-static"},Ea={DATA_TOGGLE:'[data-toggle="dropdown"]',FORM_CHILD:".dropdown form",MENU:".dropdown-menu",NAVBAR_NAV:".navbar-nav",VISIBLE_ITEMS:".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)"},Fa={TOP:"top-start",TOPEND:"top-end",BOTTOM:"bottom-start",BOTTOMEND:"bottom-end",RIGHT:"right-start",RIGHTEND:"right-end",LEFT:"left-start",LEFTEND:"left-end"},Ga={offset:0,flip:!0,boundary:"scrollParent",reference:"toggle",display:"dynamic"},Ha={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string"},Ia=function(){function a(a,b){this._element=a,this._popper=null,this._config=this._getConfig(b),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}var d=a.prototype;return d.toggle=function(){if(!this._element.disabled&&!b(this._element).hasClass(Da.DISABLED)){var d=a._getParentFromElement(this._element),e=b(this._menu).hasClass(Da.SHOW);if(a._clearMenus(),!e){var f={relatedTarget:this._element},g=b.Event(Ca.SHOW,f);if(b(d).trigger(g),!g.isDefaultPrevented()){if(!this._inNavbar){if(void 0===c)throw new TypeError("Bootstrap's dropdowns require Popper.js (https://popper.js.org/)");var h=this._element;"parent"===this._config.reference?h=d:r.isElement(this._config.reference)&&(h=this._config.reference,void 0!==this._config.reference.jquery&&(h=this._config.reference[0])),"scrollParent"!==this._config.boundary&&b(d).addClass(Da.POSITION_STATIC),this._popper=new c(h,this._menu,this._getPopperConfig())}"ontouchstart"in document.documentElement&&0===b(d).closest(Ea.NAVBAR_NAV).length&&b(document.body).children().on("mouseover",null,b.noop),this._element.focus(),this._element.setAttribute("aria-expanded",!0),b(this._menu).toggleClass(Da.SHOW),b(d).toggleClass(Da.SHOW).trigger(b.Event(Ca.SHOWN,f))}}}},d.show=function(){if(!(this._element.disabled||b(this._element).hasClass(Da.DISABLED)||b(this._menu).hasClass(Da.SHOW))){var c={relatedTarget:this._element},d=b.Event(Ca.SHOW,c),e=a._getParentFromElement(this._element);b(e).trigger(d),d.isDefaultPrevented()||(b(this._menu).toggleClass(Da.SHOW),b(e).toggleClass(Da.SHOW).trigger(b.Event(Ca.SHOWN,c)))}},d.hide=function(){if(!this._element.disabled&&!b(this._element).hasClass(Da.DISABLED)&&b(this._menu).hasClass(Da.SHOW)){var c={relatedTarget:this._element},d=b.Event(Ca.HIDE,c),e=a._getParentFromElement(this._element);b(e).trigger(d),d.isDefaultPrevented()||(b(this._menu).toggleClass(Da.SHOW),b(e).toggleClass(Da.SHOW).trigger(b.Event(Ca.HIDDEN,c)))}},d.dispose=function(){b.removeData(this._element,ra),b(this._element).off(sa),this._element=null,this._menu=null,null!==this._popper&&(this._popper.destroy(),this._popper=null)},d.update=function(){this._inNavbar=this._detectNavbar(),null!==this._popper&&this._popper.scheduleUpdate()},d._addEventListeners=function(){var a=this;b(this._element).on(Ca.CLICK,function(b){b.preventDefault(),b.stopPropagation(),a.toggle()})},d._getConfig=function(a){return a=g({},this.constructor.Default,b(this._element).data(),a),r.typeCheckConfig(pa,a,this.constructor.DefaultType),a},d._getMenuElement=function(){if(!this._menu){var b=a._getParentFromElement(this._element);b&&(this._menu=b.querySelector(Ea.MENU))}return this._menu},d._getPlacement=function(){var a=b(this._element.parentNode),c=Fa.BOTTOM;return a.hasClass(Da.DROPUP)?(c=Fa.TOP,b(this._menu).hasClass(Da.MENURIGHT)&&(c=Fa.TOPEND)):a.hasClass(Da.DROPRIGHT)?c=Fa.RIGHT:a.hasClass(Da.DROPLEFT)?c=Fa.LEFT:b(this._menu).hasClass(Da.MENURIGHT)&&(c=Fa.BOTTOMEND),c},d._detectNavbar=function(){return b(this._element).closest(".navbar").length>0},d._getOffset=function(){var a=this,b={};return"function"==typeof this._config.offset?b.fn=function(b){return b.offsets=g({},b.offsets,a._config.offset(b.offsets,a._element)||{}),b}:b.offset=this._config.offset,b},d._getPopperConfig=function(){var a={placement:this._getPlacement(),modifiers:{offset:this._getOffset(),flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};return"static"===this._config.display&&(a.modifiers.applyStyle={enabled:!1}),a},a._jQueryInterface=function(c){return this.each(function(){var d=b(this).data(ra),e="object"==typeof c?c:null;if(d||(d=new a(this,e),b(this).data(ra,d)),"string"==typeof c){if(void 0===d[c])throw new TypeError('No method named "'+c+'"');d[c]()}})},a._clearMenus=function(c){if(!c||c.which!==Aa&&("keyup"!==c.type||c.which===xa))for(var d=[].slice.call(document.querySelectorAll(Ea.DATA_TOGGLE)),e=0,f=d.length;e<f;e++){var g=a._getParentFromElement(d[e]),h=b(d[e]).data(ra),i={relatedTarget:d[e]};if(c&&"click"===c.type&&(i.clickEvent=c),h){var j=h._menu;if(b(g).hasClass(Da.SHOW)&&!(c&&("click"===c.type&&/input|textarea/i.test(c.target.tagName)||"keyup"===c.type&&c.which===xa)&&b.contains(g,c.target))){var k=b.Event(Ca.HIDE,i);b(g).trigger(k),k.isDefaultPrevented()||("ontouchstart"in document.documentElement&&b(document.body).children().off("mouseover",null,b.noop),d[e].setAttribute("aria-expanded","false"),b(j).removeClass(Da.SHOW),b(g).removeClass(Da.SHOW).trigger(b.Event(Ca.HIDDEN,i)))}}}},a._getParentFromElement=function(a){var b,c=r.getSelectorFromElement(a);return c&&(b=document.querySelector(c)),b||a.parentNode},a._dataApiKeydownHandler=function(c){if((/input|textarea/i.test(c.target.tagName)?!(c.which===wa||c.which!==va&&(c.which!==za&&c.which!==ya||b(c.target).closest(Ea.MENU).length)):Ba.test(c.which))&&(c.preventDefault(),c.stopPropagation(),!this.disabled&&!b(this).hasClass(Da.DISABLED))){var d=a._getParentFromElement(this),e=b(d).hasClass(Da.SHOW);if(!e||e&&(c.which===va||c.which===wa)){if(c.which===va){var f=d.querySelector(Ea.DATA_TOGGLE);b(f).trigger("focus")}return void b(this).trigger("click")}var g=[].slice.call(d.querySelectorAll(Ea.VISIBLE_ITEMS));if(0!==g.length){var h=g.indexOf(c.target);c.which===ya&&h>0&&h--,c.which===za&&h<g.length-1&&h++,h<0&&(h=0),g[h].focus()}}},e(a,null,[{key:"VERSION",get:function(){return qa}},{key:"Default",get:function(){return Ga}},{key:"DefaultType",get:function(){return Ha}}]),a}();b(document).on(Ca.KEYDOWN_DATA_API,Ea.DATA_TOGGLE,Ia._dataApiKeydownHandler).on(Ca.KEYDOWN_DATA_API,Ea.MENU,Ia._dataApiKeydownHandler).on(Ca.CLICK_DATA_API+" "+Ca.KEYUP_DATA_API,Ia._clearMenus).on(Ca.CLICK_DATA_API,Ea.DATA_TOGGLE,function(a){a.preventDefault(),a.stopPropagation(),Ia._jQueryInterface.call(b(this),"toggle")}).on(Ca.CLICK_DATA_API,Ea.FORM_CHILD,function(a){a.stopPropagation()}),b.fn[pa]=Ia._jQueryInterface,b.fn[pa].Constructor=Ia,b.fn[pa].noConflict=function(){return b.fn[pa]=ua,Ia._jQueryInterface};var Ja="modal",Ka="4.3.1",La="bs.modal",Ma="."+La,Na=".data-api",Oa=b.fn[Ja],Pa=27,Qa={backdrop:!0,keyboard:!0,focus:!0,show:!0},Ra={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},Sa={HIDE:"hide"+Ma,HIDDEN:"hidden"+Ma,SHOW:"show"+Ma,SHOWN:"shown"+Ma,FOCUSIN:"focusin"+Ma,RESIZE:"resize"+Ma,CLICK_DISMISS:"click.dismiss"+Ma,KEYDOWN_DISMISS:"keydown.dismiss"+Ma,MOUSEUP_DISMISS:"mouseup.dismiss"+Ma,MOUSEDOWN_DISMISS:"mousedown.dismiss"+Ma,CLICK_DATA_API:"click"+Ma+Na},Ta={SCROLLABLE:"modal-dialog-scrollable",SCROLLBAR_MEASURER:"modal-scrollbar-measure",BACKDROP:"modal-backdrop",OPEN:"modal-open",FADE:"fade",SHOW:"show"},Ua={DIALOG:".modal-dialog",MODAL_BODY:".modal-body",DATA_TOGGLE:'[data-toggle="modal"]',DATA_DISMISS:'[data-dismiss="modal"]',FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top"},Va=function(){function a(a,b){this._config=this._getConfig(b),this._element=a,this._dialog=a.querySelector(Ua.DIALOG),this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollbarWidth=0}var c=a.prototype;return c.toggle=function(a){return this._isShown?this.hide():this.show(a)},c.show=function(a){var c=this;if(!this._isShown&&!this._isTransitioning){b(this._element).hasClass(Ta.FADE)&&(this._isTransitioning=!0);var d=b.Event(Sa.SHOW,{relatedTarget:a});b(this._element).trigger(d),this._isShown||d.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),b(this._element).on(Sa.CLICK_DISMISS,Ua.DATA_DISMISS,function(a){return c.hide(a)}),b(this._dialog).on(Sa.MOUSEDOWN_DISMISS,function(){b(c._element).one(Sa.MOUSEUP_DISMISS,function(a){b(a.target).is(c._element)&&(c._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return c._showElement(a)}))}},c.hide=function(a){var c=this;if(a&&a.preventDefault(),this._isShown&&!this._isTransitioning){var d=b.Event(Sa.HIDE);if(b(this._element).trigger(d),this._isShown&&!d.isDefaultPrevented()){this._isShown=!1;var e=b(this._element).hasClass(Ta.FADE);if(e&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),b(document).off(Sa.FOCUSIN),b(this._element).removeClass(Ta.SHOW),b(this._element).off(Sa.CLICK_DISMISS),b(this._dialog).off(Sa.MOUSEDOWN_DISMISS),e){var f=r.getTransitionDurationFromElement(this._element);b(this._element).one(r.TRANSITION_END,function(a){return c._hideModal(a)}).emulateTransitionEnd(f)}else this._hideModal()}}},c.dispose=function(){[window,this._element,this._dialog].forEach(function(a){return b(a).off(Ma)}),b(document).off(Sa.FOCUSIN),b.removeData(this._element,La),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._isTransitioning=null,this._scrollbarWidth=null},c.handleUpdate=function(){this._adjustDialog()},c._getConfig=function(a){return a=g({},Qa,a),r.typeCheckConfig(Ja,a,Ra),a},c._showElement=function(a){var c=this,d=b(this._element).hasClass(Ta.FADE);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),b(this._dialog).hasClass(Ta.SCROLLABLE)?this._dialog.querySelector(Ua.MODAL_BODY).scrollTop=0:this._element.scrollTop=0,d&&r.reflow(this._element),b(this._element).addClass(Ta.SHOW),this._config.focus&&this._enforceFocus();var e=b.Event(Sa.SHOWN,{relatedTarget:a}),f=function(){c._config.focus&&c._element.focus(),c._isTransitioning=!1,b(c._element).trigger(e)};if(d){var g=r.getTransitionDurationFromElement(this._dialog);b(this._dialog).one(r.TRANSITION_END,f).emulateTransitionEnd(g)}else f()},c._enforceFocus=function(){var a=this;b(document).off(Sa.FOCUSIN).on(Sa.FOCUSIN,function(c){document!==c.target&&a._element!==c.target&&0===b(a._element).has(c.target).length&&a._element.focus()})},c._setEscapeEvent=function(){var a=this;this._isShown&&this._config.keyboard?b(this._element).on(Sa.KEYDOWN_DISMISS,function(b){b.which===Pa&&(b.preventDefault(),a.hide())}):this._isShown||b(this._element).off(Sa.KEYDOWN_DISMISS)},c._setResizeEvent=function(){var a=this;this._isShown?b(window).on(Sa.RESIZE,function(b){return a.handleUpdate(b)}):b(window).off(Sa.RESIZE)},c._hideModal=function(){var a=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._isTransitioning=!1,this._showBackdrop(function(){b(document.body).removeClass(Ta.OPEN),a._resetAdjustments(),a._resetScrollbar(),b(a._element).trigger(Sa.HIDDEN)})},c._removeBackdrop=function(){this._backdrop&&(b(this._backdrop).remove(),this._backdrop=null)},c._showBackdrop=function(a){var c=this,d=b(this._element).hasClass(Ta.FADE)?Ta.FADE:"";if(this._isShown&&this._config.backdrop){if(this._backdrop=document.createElement("div"),this._backdrop.className=Ta.BACKDROP,d&&this._backdrop.classList.add(d),b(this._backdrop).appendTo(document.body),b(this._element).on(Sa.CLICK_DISMISS,function(a){if(c._ignoreBackdropClick)return void(c._ignoreBackdropClick=!1);a.target===a.currentTarget&&("static"===c._config.backdrop?c._element.focus():c.hide())}),d&&r.reflow(this._backdrop),b(this._backdrop).addClass(Ta.SHOW),!a)return;if(!d)return void a();var e=r.getTransitionDurationFromElement(this._backdrop);b(this._backdrop).one(r.TRANSITION_END,a).emulateTransitionEnd(e)}else if(!this._isShown&&this._backdrop){b(this._backdrop).removeClass(Ta.SHOW);var f=function(){c._removeBackdrop(),a&&a()};if(b(this._element).hasClass(Ta.FADE)){var g=r.getTransitionDurationFromElement(this._backdrop);b(this._backdrop).one(r.TRANSITION_END,f).emulateTransitionEnd(g)}else f()}else a&&a()},c._adjustDialog=function(){var a=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&a&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!a&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},c._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},c._checkScrollbar=function(){var a=document.body.getBoundingClientRect();this._isBodyOverflowing=a.left+a.right<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},c._setScrollbar=function(){var a=this;if(this._isBodyOverflowing){var c=[].slice.call(document.querySelectorAll(Ua.FIXED_CONTENT)),d=[].slice.call(document.querySelectorAll(Ua.STICKY_CONTENT));b(c).each(function(c,d){var e=d.style.paddingRight,f=b(d).css("padding-right");b(d).data("padding-right",e).css("padding-right",parseFloat(f)+a._scrollbarWidth+"px")}),b(d).each(function(c,d){var e=d.style.marginRight,f=b(d).css("margin-right");b(d).data("margin-right",e).css("margin-right",parseFloat(f)-a._scrollbarWidth+"px")});var e=document.body.style.paddingRight,f=b(document.body).css("padding-right");b(document.body).data("padding-right",e).css("padding-right",parseFloat(f)+this._scrollbarWidth+"px")}b(document.body).addClass(Ta.OPEN)},c._resetScrollbar=function(){var a=[].slice.call(document.querySelectorAll(Ua.FIXED_CONTENT));b(a).each(function(a,c){var d=b(c).data("padding-right");b(c).removeData("padding-right"),c.style.paddingRight=d||""});var c=[].slice.call(document.querySelectorAll(""+Ua.STICKY_CONTENT));b(c).each(function(a,c){var d=b(c).data("margin-right");void 0!==d&&b(c).css("margin-right",d).removeData("margin-right")});var d=b(document.body).data("padding-right");b(document.body).removeData("padding-right"),document.body.style.paddingRight=d||""},c._getScrollbarWidth=function(){var a=document.createElement("div");a.className=Ta.SCROLLBAR_MEASURER,document.body.appendChild(a);var b=a.getBoundingClientRect().width-a.clientWidth;return document.body.removeChild(a),b},a._jQueryInterface=function(c,d){return this.each(function(){var e=b(this).data(La),f=g({},Qa,b(this).data(),"object"==typeof c&&c?c:{});if(e||(e=new a(this,f),b(this).data(La,e)),"string"==typeof c){if(void 0===e[c])throw new TypeError('No method named "'+c+'"');e[c](d)}else f.show&&e.show(d)})},e(a,null,[{key:"VERSION",get:function(){return Ka}},{key:"Default",get:function(){return Qa}}]),a}();b(document).on(Sa.CLICK_DATA_API,Ua.DATA_TOGGLE,function(a){var c,d=this,e=r.getSelectorFromElement(this);e&&(c=document.querySelector(e));var f=b(c).data(La)?"toggle":g({},b(c).data(),b(this).data());"A"!==this.tagName&&"AREA"!==this.tagName||a.preventDefault();var h=b(c).one(Sa.SHOW,function(a){a.isDefaultPrevented()||h.one(Sa.HIDDEN,function(){b(d).is(":visible")&&d.focus()})});Va._jQueryInterface.call(b(c),f,this)}),b.fn[Ja]=Va._jQueryInterface,b.fn[Ja].Constructor=Va,b.fn[Ja].noConflict=function(){return b.fn[Ja]=Oa,Va._jQueryInterface};var Wa=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],Xa=/^aria-[\w-]*$/i,Ya={"*":["class","dir","id","lang","role",Xa],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Za=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:\/?#]*(?:[\/?#]|$))/gi,$a=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i,_a="tooltip",ab="4.3.1",bb="bs.tooltip",cb="."+bb,db=b.fn[_a],eb="bs-tooltip",fb=new RegExp("(^|\\s)"+eb+"\\S+","g"),gb=["sanitize","whiteList","sanitizeFn"],hb={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string|function)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)",sanitize:"boolean",sanitizeFn:"(null|function)",whiteList:"object"},ib={AUTO:"auto",TOP:"top",RIGHT:"right",
BOTTOM:"bottom",LEFT:"left"},jb={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent",sanitize:!0,sanitizeFn:null,whiteList:Ya},kb={SHOW:"show",OUT:"out"},lb={HIDE:"hide"+cb,HIDDEN:"hidden"+cb,SHOW:"show"+cb,SHOWN:"shown"+cb,INSERTED:"inserted"+cb,CLICK:"click"+cb,FOCUSIN:"focusin"+cb,FOCUSOUT:"focusout"+cb,MOUSEENTER:"mouseenter"+cb,MOUSELEAVE:"mouseleave"+cb},mb={FADE:"fade",SHOW:"show"},nb={TOOLTIP:".tooltip",TOOLTIP_INNER:".tooltip-inner",ARROW:".arrow"},ob={HOVER:"hover",FOCUS:"focus",CLICK:"click",MANUAL:"manual"},pb=function(){function a(a,b){if(void 0===c)throw new TypeError("Bootstrap's tooltips require Popper.js (https://popper.js.org/)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=a,this.config=this._getConfig(b),this.tip=null,this._setListeners()}var d=a.prototype;return d.enable=function(){this._isEnabled=!0},d.disable=function(){this._isEnabled=!1},d.toggleEnabled=function(){this._isEnabled=!this._isEnabled},d.toggle=function(a){if(this._isEnabled)if(a){var c=this.constructor.DATA_KEY,d=b(a.currentTarget).data(c);d||(d=new this.constructor(a.currentTarget,this._getDelegateConfig()),b(a.currentTarget).data(c,d)),d._activeTrigger.click=!d._activeTrigger.click,d._isWithActiveTrigger()?d._enter(null,d):d._leave(null,d)}else{if(b(this.getTipElement()).hasClass(mb.SHOW))return void this._leave(null,this);this._enter(null,this)}},d.dispose=function(){clearTimeout(this._timeout),b.removeData(this.element,this.constructor.DATA_KEY),b(this.element).off(this.constructor.EVENT_KEY),b(this.element).closest(".modal").off("hide.bs.modal"),this.tip&&b(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,null!==this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null},d.show=function(){var a=this;if("none"===b(this.element).css("display"))throw new Error("Please use show on visible elements");var d=b.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){b(this.element).trigger(d);var e=r.findShadowRoot(this.element),f=b.contains(null!==e?e:this.element.ownerDocument.documentElement,this.element);if(d.isDefaultPrevented()||!f)return;var g=this.getTipElement(),h=r.getUID(this.constructor.NAME);g.setAttribute("id",h),this.element.setAttribute("aria-describedby",h),this.setContent(),this.config.animation&&b(g).addClass(mb.FADE);var i="function"==typeof this.config.placement?this.config.placement.call(this,g,this.element):this.config.placement,j=this._getAttachment(i);this.addAttachmentClass(j);var k=this._getContainer();b(g).data(this.constructor.DATA_KEY,this),b.contains(this.element.ownerDocument.documentElement,this.tip)||b(g).appendTo(k),b(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new c(this.element,g,{placement:j,modifiers:{offset:this._getOffset(),flip:{behavior:this.config.fallbackPlacement},arrow:{element:nb.ARROW},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function(b){b.originalPlacement!==b.placement&&a._handlePopperPlacementChange(b)},onUpdate:function(b){return a._handlePopperPlacementChange(b)}}),b(g).addClass(mb.SHOW),"ontouchstart"in document.documentElement&&b(document.body).children().on("mouseover",null,b.noop);var l=function(){a.config.animation&&a._fixTransition();var c=a._hoverState;a._hoverState=null,b(a.element).trigger(a.constructor.Event.SHOWN),c===kb.OUT&&a._leave(null,a)};if(b(this.tip).hasClass(mb.FADE)){var m=r.getTransitionDurationFromElement(this.tip);b(this.tip).one(r.TRANSITION_END,l).emulateTransitionEnd(m)}else l()}},d.hide=function(a){var c=this,d=this.getTipElement(),e=b.Event(this.constructor.Event.HIDE),f=function(){c._hoverState!==kb.SHOW&&d.parentNode&&d.parentNode.removeChild(d),c._cleanTipClass(),c.element.removeAttribute("aria-describedby"),b(c.element).trigger(c.constructor.Event.HIDDEN),null!==c._popper&&c._popper.destroy(),a&&a()};if(b(this.element).trigger(e),!e.isDefaultPrevented()){if(b(d).removeClass(mb.SHOW),"ontouchstart"in document.documentElement&&b(document.body).children().off("mouseover",null,b.noop),this._activeTrigger[ob.CLICK]=!1,this._activeTrigger[ob.FOCUS]=!1,this._activeTrigger[ob.HOVER]=!1,b(this.tip).hasClass(mb.FADE)){var g=r.getTransitionDurationFromElement(d);b(d).one(r.TRANSITION_END,f).emulateTransitionEnd(g)}else f();this._hoverState=""}},d.update=function(){null!==this._popper&&this._popper.scheduleUpdate()},d.isWithContent=function(){return Boolean(this.getTitle())},d.addAttachmentClass=function(a){b(this.getTipElement()).addClass(eb+"-"+a)},d.getTipElement=function(){return this.tip=this.tip||b(this.config.template)[0],this.tip},d.setContent=function(){var a=this.getTipElement();this.setElementContent(b(a.querySelectorAll(nb.TOOLTIP_INNER)),this.getTitle()),b(a).removeClass(mb.FADE+" "+mb.SHOW)},d.setElementContent=function(a,c){if("object"==typeof c&&(c.nodeType||c.jquery))return void(this.config.html?b(c).parent().is(a)||a.empty().append(c):a.text(b(c).text()));this.config.html?(this.config.sanitize&&(c=n(c,this.config.whiteList,this.config.sanitizeFn)),a.html(c)):a.text(c)},d.getTitle=function(){var a=this.element.getAttribute("data-original-title");return a||(a="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),a},d._getOffset=function(){var a=this,b={};return"function"==typeof this.config.offset?b.fn=function(b){return b.offsets=g({},b.offsets,a.config.offset(b.offsets,a.element)||{}),b}:b.offset=this.config.offset,b},d._getContainer=function(){return!1===this.config.container?document.body:r.isElement(this.config.container)?b(this.config.container):b(document).find(this.config.container)},d._getAttachment=function(a){return ib[a.toUpperCase()]},d._setListeners=function(){var a=this;this.config.trigger.split(" ").forEach(function(c){if("click"===c)b(a.element).on(a.constructor.Event.CLICK,a.config.selector,function(b){return a.toggle(b)});else if(c!==ob.MANUAL){var d=c===ob.HOVER?a.constructor.Event.MOUSEENTER:a.constructor.Event.FOCUSIN,e=c===ob.HOVER?a.constructor.Event.MOUSELEAVE:a.constructor.Event.FOCUSOUT;b(a.element).on(d,a.config.selector,function(b){return a._enter(b)}).on(e,a.config.selector,function(b){return a._leave(b)})}}),b(this.element).closest(".modal").on("hide.bs.modal",function(){a.element&&a.hide()}),this.config.selector?this.config=g({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},d._fixTitle=function(){var a=typeof this.element.getAttribute("data-original-title");(this.element.getAttribute("title")||"string"!==a)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},d._enter=function(a,c){var d=this.constructor.DATA_KEY;return c=c||b(a.currentTarget).data(d),c||(c=new this.constructor(a.currentTarget,this._getDelegateConfig()),b(a.currentTarget).data(d,c)),a&&(c._activeTrigger["focusin"===a.type?ob.FOCUS:ob.HOVER]=!0),b(c.getTipElement()).hasClass(mb.SHOW)||c._hoverState===kb.SHOW?void(c._hoverState=kb.SHOW):(clearTimeout(c._timeout),c._hoverState=kb.SHOW,c.config.delay&&c.config.delay.show?void(c._timeout=setTimeout(function(){c._hoverState===kb.SHOW&&c.show()},c.config.delay.show)):void c.show())},d._leave=function(a,c){var d=this.constructor.DATA_KEY;if(c=c||b(a.currentTarget).data(d),c||(c=new this.constructor(a.currentTarget,this._getDelegateConfig()),b(a.currentTarget).data(d,c)),a&&(c._activeTrigger["focusout"===a.type?ob.FOCUS:ob.HOVER]=!1),!c._isWithActiveTrigger()){if(clearTimeout(c._timeout),c._hoverState=kb.OUT,!c.config.delay||!c.config.delay.hide)return void c.hide();c._timeout=setTimeout(function(){c._hoverState===kb.OUT&&c.hide()},c.config.delay.hide)}},d._isWithActiveTrigger=function(){for(var a in this._activeTrigger)if(this._activeTrigger[a])return!0;return!1},d._getConfig=function(a){var c=b(this.element).data();return Object.keys(c).forEach(function(a){-1!==gb.indexOf(a)&&delete c[a]}),a=g({},this.constructor.Default,c,"object"==typeof a&&a?a:{}),"number"==typeof a.delay&&(a.delay={show:a.delay,hide:a.delay}),"number"==typeof a.title&&(a.title=a.title.toString()),"number"==typeof a.content&&(a.content=a.content.toString()),r.typeCheckConfig(_a,a,this.constructor.DefaultType),a.sanitize&&(a.template=n(a.template,a.whiteList,a.sanitizeFn)),a},d._getDelegateConfig=function(){var a={};if(this.config)for(var b in this.config)this.constructor.Default[b]!==this.config[b]&&(a[b]=this.config[b]);return a},d._cleanTipClass=function(){var a=b(this.getTipElement()),c=a.attr("class").match(fb);null!==c&&c.length&&a.removeClass(c.join(""))},d._handlePopperPlacementChange=function(a){var b=a.instance;this.tip=b.popper,this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(a.placement))},d._fixTransition=function(){var a=this.getTipElement(),c=this.config.animation;null===a.getAttribute("x-placement")&&(b(a).removeClass(mb.FADE),this.config.animation=!1,this.hide(),this.show(),this.config.animation=c)},a._jQueryInterface=function(c){return this.each(function(){var d=b(this).data(bb),e="object"==typeof c&&c;if((d||!/dispose|hide/.test(c))&&(d||(d=new a(this,e),b(this).data(bb,d)),"string"==typeof c)){if(void 0===d[c])throw new TypeError('No method named "'+c+'"');d[c]()}})},e(a,null,[{key:"VERSION",get:function(){return ab}},{key:"Default",get:function(){return jb}},{key:"NAME",get:function(){return _a}},{key:"DATA_KEY",get:function(){return bb}},{key:"Event",get:function(){return lb}},{key:"EVENT_KEY",get:function(){return cb}},{key:"DefaultType",get:function(){return hb}}]),a}();b.fn[_a]=pb._jQueryInterface,b.fn[_a].Constructor=pb,b.fn[_a].noConflict=function(){return b.fn[_a]=db,pb._jQueryInterface};var qb="popover",rb="4.3.1",sb="bs.popover",tb="."+sb,ub=b.fn[qb],vb="bs-popover",wb=new RegExp("(^|\\s)"+vb+"\\S+","g"),xb=g({},pb.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),yb=g({},pb.DefaultType,{content:"(string|element|function)"}),zb={FADE:"fade",SHOW:"show"},Ab={TITLE:".popover-header",CONTENT:".popover-body"},Bb={HIDE:"hide"+tb,HIDDEN:"hidden"+tb,SHOW:"show"+tb,SHOWN:"shown"+tb,INSERTED:"inserted"+tb,CLICK:"click"+tb,FOCUSIN:"focusin"+tb,FOCUSOUT:"focusout"+tb,MOUSEENTER:"mouseenter"+tb,MOUSELEAVE:"mouseleave"+tb},Cb=function(a){function c(){return a.apply(this,arguments)||this}h(c,a);var d=c.prototype;return d.isWithContent=function(){return this.getTitle()||this._getContent()},d.addAttachmentClass=function(a){b(this.getTipElement()).addClass(vb+"-"+a)},d.getTipElement=function(){return this.tip=this.tip||b(this.config.template)[0],this.tip},d.setContent=function(){var a=b(this.getTipElement());this.setElementContent(a.find(Ab.TITLE),this.getTitle());var c=this._getContent();"function"==typeof c&&(c=c.call(this.element)),this.setElementContent(a.find(Ab.CONTENT),c),a.removeClass(zb.FADE+" "+zb.SHOW)},d._getContent=function(){return this.element.getAttribute("data-content")||this.config.content},d._cleanTipClass=function(){var a=b(this.getTipElement()),c=a.attr("class").match(wb);null!==c&&c.length>0&&a.removeClass(c.join(""))},c._jQueryInterface=function(a){return this.each(function(){var d=b(this).data(sb),e="object"==typeof a?a:null;if((d||!/dispose|hide/.test(a))&&(d||(d=new c(this,e),b(this).data(sb,d)),"string"==typeof a)){if(void 0===d[a])throw new TypeError('No method named "'+a+'"');d[a]()}})},e(c,null,[{key:"VERSION",get:function(){return rb}},{key:"Default",get:function(){return xb}},{key:"NAME",get:function(){return qb}},{key:"DATA_KEY",get:function(){return sb}},{key:"Event",get:function(){return Bb}},{key:"EVENT_KEY",get:function(){return tb}},{key:"DefaultType",get:function(){return yb}}]),c}(pb);b.fn[qb]=Cb._jQueryInterface,b.fn[qb].Constructor=Cb,b.fn[qb].noConflict=function(){return b.fn[qb]=ub,Cb._jQueryInterface};var Db="scrollspy",Eb="4.3.1",Fb="bs.scrollspy",Gb="."+Fb,Hb=".data-api",Ib=b.fn[Db],Jb={offset:10,method:"auto",target:""},Kb={offset:"number",method:"string",target:"(string|element)"},Lb={ACTIVATE:"activate"+Gb,SCROLL:"scroll"+Gb,LOAD_DATA_API:"load"+Gb+Hb},Mb={DROPDOWN_ITEM:"dropdown-item",DROPDOWN_MENU:"dropdown-menu",ACTIVE:"active"},Nb={DATA_SPY:'[data-spy="scroll"]',ACTIVE:".active",NAV_LIST_GROUP:".nav, .list-group",NAV_LINKS:".nav-link",NAV_ITEMS:".nav-item",LIST_ITEMS:".list-group-item",DROPDOWN:".dropdown",DROPDOWN_ITEMS:".dropdown-item",DROPDOWN_TOGGLE:".dropdown-toggle"},Ob={OFFSET:"offset",POSITION:"position"},Pb=function(){function a(a,c){var d=this;this._element=a,this._scrollElement="BODY"===a.tagName?window:a,this._config=this._getConfig(c),this._selector=this._config.target+" "+Nb.NAV_LINKS+","+this._config.target+" "+Nb.LIST_ITEMS+","+this._config.target+" "+Nb.DROPDOWN_ITEMS,this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,b(this._scrollElement).on(Lb.SCROLL,function(a){return d._process(a)}),this.refresh(),this._process()}var c=a.prototype;return c.refresh=function(){var a=this,c=this._scrollElement===this._scrollElement.window?Ob.OFFSET:Ob.POSITION,d="auto"===this._config.method?c:this._config.method,e=d===Ob.POSITION?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),[].slice.call(document.querySelectorAll(this._selector)).map(function(a){var c,f=r.getSelectorFromElement(a);if(f&&(c=document.querySelector(f)),c){var g=c.getBoundingClientRect();if(g.width||g.height)return[b(c)[d]().top+e,f]}return null}).filter(function(a){return a}).sort(function(a,b){return a[0]-b[0]}).forEach(function(b){a._offsets.push(b[0]),a._targets.push(b[1])})},c.dispose=function(){b.removeData(this._element,Fb),b(this._scrollElement).off(Gb),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},c._getConfig=function(a){if(a=g({},Jb,"object"==typeof a&&a?a:{}),"string"!=typeof a.target){var c=b(a.target).attr("id");c||(c=r.getUID(Db),b(a.target).attr("id",c)),a.target="#"+c}return r.typeCheckConfig(Db,a,Kb),a},c._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},c._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},c._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height},c._process=function(){var a=this._getScrollTop()+this._config.offset,b=this._getScrollHeight(),c=this._config.offset+b-this._getOffsetHeight();if(this._scrollHeight!==b&&this.refresh(),a>=c){var d=this._targets[this._targets.length-1];return void(this._activeTarget!==d&&this._activate(d))}if(this._activeTarget&&a<this._offsets[0]&&this._offsets[0]>0)return this._activeTarget=null,void this._clear();for(var e=this._offsets.length,f=e;f--;){this._activeTarget!==this._targets[f]&&a>=this._offsets[f]&&(void 0===this._offsets[f+1]||a<this._offsets[f+1])&&this._activate(this._targets[f])}},c._activate=function(a){this._activeTarget=a,this._clear();var c=this._selector.split(",").map(function(b){return b+'[data-target="'+a+'"],'+b+'[href="'+a+'"]'}),d=b([].slice.call(document.querySelectorAll(c.join(","))));d.hasClass(Mb.DROPDOWN_ITEM)?(d.closest(Nb.DROPDOWN).find(Nb.DROPDOWN_TOGGLE).addClass(Mb.ACTIVE),d.addClass(Mb.ACTIVE)):(d.addClass(Mb.ACTIVE),d.parents(Nb.NAV_LIST_GROUP).prev(Nb.NAV_LINKS+", "+Nb.LIST_ITEMS).addClass(Mb.ACTIVE),d.parents(Nb.NAV_LIST_GROUP).prev(Nb.NAV_ITEMS).children(Nb.NAV_LINKS).addClass(Mb.ACTIVE)),b(this._scrollElement).trigger(Lb.ACTIVATE,{relatedTarget:a})},c._clear=function(){[].slice.call(document.querySelectorAll(this._selector)).filter(function(a){return a.classList.contains(Mb.ACTIVE)}).forEach(function(a){return a.classList.remove(Mb.ACTIVE)})},a._jQueryInterface=function(c){return this.each(function(){var d=b(this).data(Fb),e="object"==typeof c&&c;if(d||(d=new a(this,e),b(this).data(Fb,d)),"string"==typeof c){if(void 0===d[c])throw new TypeError('No method named "'+c+'"');d[c]()}})},e(a,null,[{key:"VERSION",get:function(){return Eb}},{key:"Default",get:function(){return Jb}}]),a}();b(window).on(Lb.LOAD_DATA_API,function(){for(var a=[].slice.call(document.querySelectorAll(Nb.DATA_SPY)),c=a.length,d=c;d--;){var e=b(a[d]);Pb._jQueryInterface.call(e,e.data())}}),b.fn[Db]=Pb._jQueryInterface,b.fn[Db].Constructor=Pb,b.fn[Db].noConflict=function(){return b.fn[Db]=Ib,Pb._jQueryInterface};var Qb="tab",Rb="4.3.1",Sb="bs.tab",Tb="."+Sb,Ub=".data-api",Vb=b.fn[Qb],Wb={HIDE:"hide"+Tb,HIDDEN:"hidden"+Tb,SHOW:"show"+Tb,SHOWN:"shown"+Tb,CLICK_DATA_API:"click"+Tb+Ub},Xb={DROPDOWN_MENU:"dropdown-menu",ACTIVE:"active",DISABLED:"disabled",FADE:"fade",SHOW:"show"},Yb={DROPDOWN:".dropdown",NAV_LIST_GROUP:".nav, .list-group",ACTIVE:".active",ACTIVE_UL:"> li > .active",DATA_TOGGLE:'[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',DROPDOWN_TOGGLE:".dropdown-toggle",DROPDOWN_ACTIVE_CHILD:"> .dropdown-menu .active"},Zb=function(){function a(a){this._element=a}var c=a.prototype;return c.show=function(){var a=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&b(this._element).hasClass(Xb.ACTIVE)||b(this._element).hasClass(Xb.DISABLED))){var c,d,e=b(this._element).closest(Yb.NAV_LIST_GROUP)[0],f=r.getSelectorFromElement(this._element);if(e){var g="UL"===e.nodeName||"OL"===e.nodeName?Yb.ACTIVE_UL:Yb.ACTIVE;d=b.makeArray(b(e).find(g)),d=d[d.length-1]}var h=b.Event(Wb.HIDE,{relatedTarget:this._element}),i=b.Event(Wb.SHOW,{relatedTarget:d});if(d&&b(d).trigger(h),b(this._element).trigger(i),!i.isDefaultPrevented()&&!h.isDefaultPrevented()){f&&(c=document.querySelector(f)),this._activate(this._element,e);var j=function(){var c=b.Event(Wb.HIDDEN,{relatedTarget:a._element}),e=b.Event(Wb.SHOWN,{relatedTarget:d});b(d).trigger(c),b(a._element).trigger(e)};c?this._activate(c,c.parentNode,j):j()}}},c.dispose=function(){b.removeData(this._element,Sb),this._element=null},c._activate=function(a,c,d){var e=this,f=!c||"UL"!==c.nodeName&&"OL"!==c.nodeName?b(c).children(Yb.ACTIVE):b(c).find(Yb.ACTIVE_UL),g=f[0],h=d&&g&&b(g).hasClass(Xb.FADE),i=function(){return e._transitionComplete(a,g,d)};if(g&&h){var j=r.getTransitionDurationFromElement(g);b(g).removeClass(Xb.SHOW).one(r.TRANSITION_END,i).emulateTransitionEnd(j)}else i()},c._transitionComplete=function(a,c,d){if(c){b(c).removeClass(Xb.ACTIVE);var e=b(c.parentNode).find(Yb.DROPDOWN_ACTIVE_CHILD)[0];e&&b(e).removeClass(Xb.ACTIVE),"tab"===c.getAttribute("role")&&c.setAttribute("aria-selected",!1)}if(b(a).addClass(Xb.ACTIVE),"tab"===a.getAttribute("role")&&a.setAttribute("aria-selected",!0),r.reflow(a),a.classList.contains(Xb.FADE)&&a.classList.add(Xb.SHOW),a.parentNode&&b(a.parentNode).hasClass(Xb.DROPDOWN_MENU)){var f=b(a).closest(Yb.DROPDOWN)[0];if(f){var g=[].slice.call(f.querySelectorAll(Yb.DROPDOWN_TOGGLE));b(g).addClass(Xb.ACTIVE)}a.setAttribute("aria-expanded",!0)}d&&d()},a._jQueryInterface=function(c){return this.each(function(){var d=b(this),e=d.data(Sb);if(e||(e=new a(this),d.data(Sb,e)),"string"==typeof c){if(void 0===e[c])throw new TypeError('No method named "'+c+'"');e[c]()}})},e(a,null,[{key:"VERSION",get:function(){return Rb}}]),a}();b(document).on(Wb.CLICK_DATA_API,Yb.DATA_TOGGLE,function(a){a.preventDefault(),Zb._jQueryInterface.call(b(this),"show")}),b.fn[Qb]=Zb._jQueryInterface,b.fn[Qb].Constructor=Zb,b.fn[Qb].noConflict=function(){return b.fn[Qb]=Vb,Zb._jQueryInterface};var $b="toast",_b="4.3.1",ac="bs.toast",bc="."+ac,cc=b.fn[$b],dc={CLICK_DISMISS:"click.dismiss"+bc,HIDE:"hide"+bc,HIDDEN:"hidden"+bc,SHOW:"show"+bc,SHOWN:"shown"+bc},ec={FADE:"fade",HIDE:"hide",SHOW:"show",SHOWING:"showing"},fc={animation:"boolean",autohide:"boolean",delay:"number"},gc={animation:!0,autohide:!0,delay:500},hc={DATA_DISMISS:'[data-dismiss="toast"]'},ic=function(){function a(a,b){this._element=a,this._config=this._getConfig(b),this._timeout=null,this._setListeners()}var c=a.prototype;return c.show=function(){var a=this;b(this._element).trigger(dc.SHOW),this._config.animation&&this._element.classList.add(ec.FADE);var c=function(){a._element.classList.remove(ec.SHOWING),a._element.classList.add(ec.SHOW),b(a._element).trigger(dc.SHOWN),a._config.autohide&&a.hide()};if(this._element.classList.remove(ec.HIDE),this._element.classList.add(ec.SHOWING),this._config.animation){var d=r.getTransitionDurationFromElement(this._element);b(this._element).one(r.TRANSITION_END,c).emulateTransitionEnd(d)}else c()},c.hide=function(a){var c=this;this._element.classList.contains(ec.SHOW)&&(b(this._element).trigger(dc.HIDE),a?this._close():this._timeout=setTimeout(function(){c._close()},this._config.delay))},c.dispose=function(){clearTimeout(this._timeout),this._timeout=null,this._element.classList.contains(ec.SHOW)&&this._element.classList.remove(ec.SHOW),b(this._element).off(dc.CLICK_DISMISS),b.removeData(this._element,ac),this._element=null,this._config=null},c._getConfig=function(a){return a=g({},gc,b(this._element).data(),"object"==typeof a&&a?a:{}),r.typeCheckConfig($b,a,this.constructor.DefaultType),a},c._setListeners=function(){var a=this;b(this._element).on(dc.CLICK_DISMISS,hc.DATA_DISMISS,function(){return a.hide(!0)})},c._close=function(){var a=this,c=function(){a._element.classList.add(ec.HIDE),b(a._element).trigger(dc.HIDDEN)};if(this._element.classList.remove(ec.SHOW),this._config.animation){var d=r.getTransitionDurationFromElement(this._element);b(this._element).one(r.TRANSITION_END,c).emulateTransitionEnd(d)}else c()},a._jQueryInterface=function(c){return this.each(function(){var d=b(this),e=d.data(ac),f="object"==typeof c&&c;if(e||(e=new a(this,f),d.data(ac,e)),"string"==typeof c){if(void 0===e[c])throw new TypeError('No method named "'+c+'"');e[c](this)}})},e(a,null,[{key:"VERSION",get:function(){return _b}},{key:"DefaultType",get:function(){return fc}},{key:"Default",get:function(){return gc}}]),a}();b.fn[$b]=ic._jQueryInterface,b.fn[$b].Constructor=ic,b.fn[$b].noConflict=function(){return b.fn[$b]=cc,ic._jQueryInterface},function(){if(void 0===b)throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");var a=b.fn.jquery.split(" ")[0].split("."),c=9;if(a[0]<2&&a[1]<c||1===a[0]&&a[1]===c&&a[2]<1||a[0]>=4)throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}(),a.Util=r,a.Alert=B,a.Button=L,a.Carousel=ba,a.Collapse=oa,a.Dropdown=Ia,a.Modal=Va,a.Popover=Cb,a.Scrollspy=Pb,a.Tab=Zb,a.Toast=ic,a.Tooltip=pb,Object.defineProperty(a,"__esModule",{value:!0})})},{jquery:256,"popper.js":259}],237:[function(a,b,c){b.exports=function(){function a(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function b(a){return null!=a&&!isNaN(a)}function c(a){return{left:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);d<e;){var f=d+e>>>1;a(b[f],c)<0?d=f+1:e=f}return d},right:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);d<e;){var f=d+e>>>1;a(b[f],c)>0?e=f:d=f+1}return d}}}function d(a){return a.length}function e(a){for(var b=1;a*b%1;)b*=10;return b}function f(a,b){try{for(var c in b)Object.defineProperty(a.prototype,c,{value:b[c],enumerable:!1})}catch(c){a.prototype=b}}function g(){}function h(a){return dg+a in this}function i(a){return(a=dg+a)in this&&delete this[a]}function j(){var a=[];return this.forEach(function(b){a.push(b)}),a}function k(){var a=0;for(var b in this)b.charCodeAt(0)===eg&&++a;return a}function l(){for(var a in this)if(a.charCodeAt(0)===eg)return!1;return!0}function m(){}function n(a,b,c){return function(){var d=c.apply(b,arguments);return d===b?a:d}}function o(a,b){if(b in a)return b;b=b.charAt(0).toUpperCase()+b.substring(1);for(var c=0,d=fg.length;c<d;++c){var e=fg[c]+b;if(e in a)return e}}function p(){}function q(){}function r(a){function b(){for(var b,d=c,e=-1,f=d.length;++e<f;)(b=d[e].on)&&b.apply(this,arguments);return a}var c=[],d=new g;return b.on=function(b,e){var f,g=d.get(b);return arguments.length<2?g&&g.on:(g&&(g.on=null,c=c.slice(0,f=c.indexOf(g)).concat(c.slice(f+1)),d.remove(b)),e&&c.push(d.set(b,{on:e})),a)},b}function s(){Sf.event.preventDefault()}function t(){for(var a,b=Sf.event;a=b.sourceEvent;)b=a;return b}function u(a){for(var b=new q,c=0,d=arguments.length;++c<d;)b[arguments[c]]=r(b);return b.of=function(c,d){return function(e){try{var f=e.sourceEvent=Sf.event;e.target=a,Sf.event=e,b[e.type].apply(c,d)}finally{Sf.event=f}}},b}function v(a){return hg(a,mg),a}function w(a){return"function"==typeof a?a:function(){return ig(a,this)}}function x(a){return"function"==typeof a?a:function(){return jg(a,this)}}function y(a,b){function c(){this.removeAttribute(a)}function d(){this.removeAttributeNS(a.space,a.local)}function e(){this.setAttribute(a,b)}function f(){this.setAttributeNS(a.space,a.local,b)}function g(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}function h(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}return a=Sf.ns.qualify(a),null==b?a.local?d:c:"function"==typeof b?a.local?h:g:a.local?f:e}function z(a){return a.trim().replace(/\s+/g," ")}function A(a){return new RegExp("(?:^|\\s+)"+Sf.requote(a)+"(?:\\s+|$)","g")}function B(a){return(a+"").trim().split(/^|\s+/)}function C(a,b){function c(){for(var c=-1;++c<e;)a[c](this,b)}function d(){for(var c=-1,d=b.apply(this,arguments);++c<e;)a[c](this,d)}a=B(a).map(D);var e=a.length;return"function"==typeof b?d:c}function D(a){var b=A(a);return function(c,d){if(e=c.classList)return d?e.add(a):e.remove(a);var e=c.getAttribute("class")||"";d?(b.lastIndex=0,b.test(e)||c.setAttribute("class",z(e+" "+a))):c.setAttribute("class",z(e.replace(b," ")))}}function E(a,b,c){function d(){this.style.removeProperty(a)}function e(){this.style.setProperty(a,b,c)}function f(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}return null==b?d:"function"==typeof b?f:e}function F(a,b){function c(){delete this[a]}function d(){this[a]=b}function e(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}return null==b?c:"function"==typeof b?e:d}function G(a){return"function"==typeof a?a:(a=Sf.ns.qualify(a)).local?function(){return this.ownerDocument.createElementNS(a.space,a.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,a)}}function H(a){return{__data__:a}}function I(a){return function(){return lg(this,a)}}function J(b){return arguments.length||(b=a),function(a,c){return a&&c?b(a.__data__,c.__data__):!a-!c}}function K(a,b){for(var c=0,d=a.length;c<d;c++)for(var e,f=a[c],g=0,h=f.length;g<h;g++)(e=f[g])&&b(e,g,c);return a}function L(a){return hg(a,og),a}function M(a){var b,c;return function(d,e,f){var g,h=a[f].update,i=h.length;for(f!=c&&(c=f,b=0),e>=b&&(b=e+1);!(g=h[b])&&++b<i;);return g}}function N(){var a=this.__transition__;a&&++a.active}function O(a,b,c){function d(){var b=this[g];b&&(this.removeEventListener(a,b,b.$),delete this[g])}function e(){var e=i(b,Uf(arguments));d.call(this),this.addEventListener(a,this[g]=e,e.$=c),e._=b}function f(){var b,c=new RegExp("^__on([^.]+)"+Sf.requote(a)+"$");for(var d in this)if(b=d.match(c)){var e=this[d];this.removeEventListener(b[1],e,e.$),delete this[d]}}var g="__on"+a,h=a.indexOf("."),i=P;h>0&&(a=a.substring(0,h));var j=qg.get(a);return j&&(a=j,i=Q),h?b?e:d:b?p:f}function P(a,b){return function(c){var d=Sf.event;Sf.event=c,b[0]=this.__data__;try{a.apply(this,b)}finally{Sf.event=d}}}function Q(a,b){var c=P(a,b);return function(a){var b=this,d=a.relatedTarget;d&&(d===b||8&d.compareDocumentPosition(b))||c.call(b,a)}}function R(){var a=".dragsuppress-"+ ++sg,b="click"+a,c=Sf.select(Xf).on("touchmove"+a,s).on("dragstart"+a,s).on("selectstart"+a,s);if(rg){var d=Wf.style,e=d[rg];d[rg]="none"}return function(f){function g(){c.on(b,null)}c.on(a,null),rg&&(d[rg]=e),f&&(c.on(b,function(){s(),g()},!0),setTimeout(g,0))}}function S(a,b){b.changedTouches&&(b=b.changedTouches[0]);var c=a.ownerSVGElement||a;if(c.createSVGPoint){var d=c.createSVGPoint();if(tg<0&&(Xf.scrollX||Xf.scrollY)){c=Sf.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var e=c[0][0].getScreenCTM();tg=!(e.f||e.e),c.remove()}return tg?(d.x=b.pageX,d.y=b.pageY):(d.x=b.clientX,d.y=b.clientY),d=d.matrixTransform(a.getScreenCTM().inverse()),[d.x,d.y]}var f=a.getBoundingClientRect();return[b.clientX-f.left-a.clientLeft,b.clientY-f.top-a.clientTop]}function T(){return Sf.event.changedTouches[0].identifier}function U(){return Sf.event.target}function V(){return Xf}function W(a){return a>0?1:a<0?-1:0}function X(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function Y(a){return a>1?0:a<-1?ug:Math.acos(a)}function Z(a){return a>1?wg:a<-1?-wg:Math.asin(a)}function $(a){return((a=Math.exp(a))-1/a)/2}function _(a){return((a=Math.exp(a))+1/a)/2}function aa(a){return((a=Math.exp(2*a))-1)/(a+1)}function ba(a){return(a=Math.sin(a/2))*a}function ca(){}function da(a,b,c){return this instanceof da?(this.h=+a,this.s=+b,void(this.l=+c)):arguments.length<2?a instanceof da?new da(a.h,a.s,a.l):ra(""+a,sa,da):new da(a,b,c)}function ea(a,b,c){function d(a){return a>360?a-=360:a<0&&(a+=360),a<60?f+(g-f)*a/60:a<180?g:a<240?f+(g-f)*(240-a)/60:f}function e(a){return Math.round(255*d(a))}var f,g;return a=isNaN(a)?0:(a%=360)<0?a+360:a,b=isNaN(b)?0:b<0?0:b>1?1:b,c=c<0?0:c>1?1:c,g=c<=.5?c*(1+b):c+b-c*b,f=2*c-g,new na(e(a+120),e(a),e(a-120))}function fa(a,b,c){return this instanceof fa?(this.h=+a,this.c=+b,void(this.l=+c)):arguments.length<2?a instanceof fa?new fa(a.h,a.c,a.l):a instanceof ha?ja(a.l,a.a,a.b):ja((a=ta((a=Sf.rgb(a)).r,a.g,a.b)).l,a.a,a.b):new fa(a,b,c)}function ga(a,b,c){return isNaN(a)&&(a=0),isNaN(b)&&(b=0),new ha(c,Math.cos(a*=zg)*b,Math.sin(a)*b)}function ha(a,b,c){return this instanceof ha?(this.l=+a,this.a=+b,void(this.b=+c)):arguments.length<2?a instanceof ha?new ha(a.l,a.a,a.b):a instanceof fa?ga(a.l,a.c,a.h):ta((a=na(a)).r,a.g,a.b):new ha(a,b,c)}function ia(a,b,c){var d=(a+16)/116,e=d+b/500,f=d-c/200;return e=ka(e)*Kg,d=ka(d)*Lg,f=ka(f)*Mg,new na(ma(3.2404542*e-1.5371385*d-.4985314*f),ma(-.969266*e+1.8760108*d+.041556*f),ma(.0556434*e-.2040259*d+1.0572252*f))}function ja(a,b,c){return a>0?new fa(Math.atan2(c,b)*Ag,Math.sqrt(b*b+c*c),a):new fa(NaN,NaN,a)}function ka(a){return a>.206893034?a*a*a:(a-4/29)/7.787037}function la(a){return a>.008856?Math.pow(a,1/3):7.787037*a+4/29}function ma(a){return Math.round(255*(a<=.00304?12.92*a:1.055*Math.pow(a,1/2.4)-.055))}function na(a,b,c){return this instanceof na?(this.r=~~a,this.g=~~b,void(this.b=~~c)):arguments.length<2?a instanceof na?new na(a.r,a.g,a.b):ra(""+a,na,ea):new na(a,b,c)}function oa(a){return new na(a>>16,a>>8&255,255&a)}function pa(a){return oa(a)+""}function qa(a){return a<16?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function ra(a,b,c){var d,e,f,g=0,h=0,i=0;if(d=/([a-z]+)\((.*)\)/i.exec(a))switch(e=d[2].split(","),d[1]){case"hsl":return c(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100);case"rgb":return b(va(e[0]),va(e[1]),va(e[2]))}return(f=Pg.get(a))?b(f.r,f.g,f.b):(null==a||"#"!==a.charAt(0)||isNaN(f=parseInt(a.substring(1),16))||(4===a.length?(g=(3840&f)>>4,g|=g>>4,h=240&f,h|=h>>4,i=15&f,i|=i<<4):7===a.length&&(g=(16711680&f)>>16,h=(65280&f)>>8,i=255&f)),b(g,h,i))}function sa(a,b,c){var d,e,f=Math.min(a/=255,b/=255,c/=255),g=Math.max(a,b,c),h=g-f,i=(g+f)/2
;return h?(e=i<.5?h/(g+f):h/(2-g-f),d=a==g?(b-c)/h+(b<c?6:0):b==g?(c-a)/h+2:(a-b)/h+4,d*=60):(d=NaN,e=i>0&&i<1?0:d),new da(d,e,i)}function ta(a,b,c){a=ua(a),b=ua(b),c=ua(c);var d=la((.4124564*a+.3575761*b+.1804375*c)/Kg),e=la((.2126729*a+.7151522*b+.072175*c)/Lg);return ha(116*e-16,500*(d-e),200*(e-la((.0193339*a+.119192*b+.9503041*c)/Mg)))}function ua(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function va(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*b):b}function wa(a){return"function"==typeof a?a:function(){return a}}function xa(a){return a}function ya(a){return function(b,c,d){return 2===arguments.length&&"function"==typeof c&&(d=c,c=null),za(b,c,a,d)}}function za(a,b,c,d){function e(){var a,b=i.status;if(!b&&i.responseText||b>=200&&b<300||304===b){try{a=c.call(f,i)}catch(a){return void g.error.call(f,a)}g.load.call(f,a)}else g.error.call(f,i)}var f={},g=Sf.dispatch("beforesend","progress","load","error"),h={},i=new XMLHttpRequest,j=null;return!Xf.XDomainRequest||"withCredentials"in i||!/^(http(s)?:)?\/\//.test(a)||(i=new XDomainRequest),"onload"in i?i.onload=i.onerror=e:i.onreadystatechange=function(){i.readyState>3&&e()},i.onprogress=function(a){var b=Sf.event;Sf.event=a;try{g.progress.call(f,i)}finally{Sf.event=b}},f.header=function(a,b){return a=(a+"").toLowerCase(),arguments.length<2?h[a]:(null==b?delete h[a]:h[a]=b+"",f)},f.mimeType=function(a){return arguments.length?(b=null==a?null:a+"",f):b},f.responseType=function(a){return arguments.length?(j=a,f):j},f.response=function(a){return c=a,f},["get","post"].forEach(function(a){f[a]=function(){return f.send.apply(f,[a].concat(Uf(arguments)))}}),f.send=function(c,d,e){if(2===arguments.length&&"function"==typeof d&&(e=d,d=null),i.open(c,a,!0),null==b||"accept"in h||(h.accept=b+",*/*"),i.setRequestHeader)for(var k in h)i.setRequestHeader(k,h[k]);return null!=b&&i.overrideMimeType&&i.overrideMimeType(b),null!=j&&(i.responseType=j),null!=e&&f.on("error",e).on("load",function(a){e(null,a)}),g.beforesend.call(f,i),i.send(null==d?null:d),f},f.abort=function(){return i.abort(),f},Sf.rebind(f,g,"on"),null==d?f:f.get(Aa(d))}function Aa(a){return 1===a.length?function(b,c){a(null==b?c:null)}:a}function Ba(){var a=Ca(),b=Da()-a;b>24?(isFinite(b)&&(clearTimeout(Tg),Tg=setTimeout(Ba,b)),Sg=0):(Sg=1,Vg(Ba))}function Ca(){var a=Date.now();for(Ug=Qg;Ug;)a>=Ug.t&&(Ug.f=Ug.c(a-Ug.t)),Ug=Ug.n;return a}function Da(){for(var a,b=Qg,c=1/0;b;)b.f?b=a?a.n=b.n:Qg=b.n:(b.t<c&&(c=b.t),b=(a=b).n);return Rg=a,c}function Ea(a,b){return b-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function Fa(a,b){var c=Math.pow(10,3*cg(8-b));return{scale:b>8?function(a){return a/c}:function(a){return a*c},symbol:a}}function Ga(a){var b=a.decimal,c=a.thousands,d=a.grouping,e=a.currency,f=d?function(a){for(var b=a.length,e=[],f=0,g=d[0];b>0&&g>0;)e.push(a.substring(b-=g,b+g)),g=d[f=(f+1)%d.length];return e.reverse().join(c)}:xa;return function(a){var c=Xg.exec(a),d=c[1]||" ",g=c[2]||">",h=c[3]||"",i=c[4]||"",j=c[5],k=+c[6],l=c[7],m=c[8],n=c[9],o=1,p="",q="",r=!1;switch(m&&(m=+m.substring(1)),(j||"0"===d&&"="===g)&&(j=d="0",g="=",l&&(k-=Math.floor((k-1)/4))),n){case"n":l=!0,n="g";break;case"%":o=100,q="%",n="f";break;case"p":o=100,q="%",n="r";break;case"b":case"o":case"x":case"X":"#"===i&&(p="0"+n.toLowerCase());case"c":case"d":r=!0,m=0;break;case"s":o=-1,n="r"}"$"===i&&(p=e[0],q=e[1]),"r"!=n||m||(n="g"),null!=m&&("g"==n?m=Math.max(1,Math.min(21,m)):"e"!=n&&"f"!=n||(m=Math.max(0,Math.min(20,m)))),n=Yg.get(n)||Ha;var s=j&&l;return function(a){var c=q;if(r&&a%1)return"";var e=a<0||0===a&&1/a<0?(a=-a,"-"):h;if(o<0){var i=Sf.formatPrefix(a,m);a=i.scale(a),c=i.symbol+q}else a*=o;a=n(a,m);var t=a.lastIndexOf("."),u=t<0?a:a.substring(0,t),v=t<0?"":b+a.substring(t+1);!j&&l&&(u=f(u));var w=p.length+u.length+v.length+(s?0:e.length),x=w<k?new Array(w=k-w+1).join(d):"";return s&&(u=f(x+u)),e+=p,a=u+v,("<"===g?e+a+x:">"===g?x+e+a:"^"===g?x.substring(0,w>>=1)+e+a+x.substring(w):e+(s?a:x+a))+c}}}function Ha(a){return a+""}function Ia(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ja(a,b,c){function d(b){var c=a(b),d=f(c,1);return b-c<d-b?c:d}function e(c){return b(c=a(new $g(c-1)),1),c}function f(a,c){return b(a=new $g(+a),c),a}function g(a,d,f){var g=e(a),h=[];if(f>1)for(;g<d;)c(g)%f||h.push(new Date(+g)),b(g,1);else for(;g<d;)h.push(new Date(+g)),b(g,1);return h}function h(a,b,c){try{$g=Ia;var d=new Ia;return d._=a,g(d,b,c)}finally{$g=Date}}a.floor=a,a.round=d,a.ceil=e,a.offset=f,a.range=g;var i=a.utc=Ka(a);return i.floor=i,i.round=Ka(d),i.ceil=Ka(e),i.offset=Ka(f),i.range=h,a}function Ka(a){return function(b,c){try{$g=Ia;var d=new Ia;return d._=b,a(d,c)._}finally{$g=Date}}}function La(a){function b(a){function b(b){for(var c,e,f,g=[],h=-1,i=0;++h<d;)37===a.charCodeAt(h)&&(g.push(a.substring(i,h)),null!=(e=ah[c=a.charAt(++h)])&&(c=a.charAt(++h)),(f=C[c])&&(c=f(b,null==e?"e"===c?" ":"0":e)),g.push(c),i=h+1);return g.push(a.substring(i,h)),g.join("")}var d=a.length;return b.parse=function(b){var d={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(c(d,a,b,0)!=b.length)return null;"p"in d&&(d.H=d.H%12+12*d.p);var e=null!=d.Z&&$g!==Ia,f=new(e?Ia:$g);return"j"in d?f.setFullYear(d.y,0,d.j):"w"in d&&("W"in d||"U"in d)?(f.setFullYear(d.y,0,1),f.setFullYear(d.y,0,"W"in d?(d.w+6)%7+7*d.W-(f.getDay()+5)%7:d.w+7*d.U-(f.getDay()+6)%7)):f.setFullYear(d.y,d.m,d.d),f.setHours(d.H+Math.floor(d.Z/100),d.M+d.Z%100,d.S,d.L),e?f._:f},b.toString=function(){return a},b}function c(a,b,c,d){for(var e,f,g,h=0,i=b.length,j=c.length;h<i;){if(d>=j)return-1;if(37===(e=b.charCodeAt(h++))){if(g=b.charAt(h++),!(f=D[g in ah?b.charAt(h++):g])||(d=f(a,c,d))<0)return-1}else if(e!=c.charCodeAt(d++))return-1}return d}function d(a,b,c){w.lastIndex=0;var d=w.exec(b.substring(c));return d?(a.w=x.get(d[0].toLowerCase()),c+d[0].length):-1}function e(a,b,c){u.lastIndex=0;var d=u.exec(b.substring(c));return d?(a.w=v.get(d[0].toLowerCase()),c+d[0].length):-1}function f(a,b,c){A.lastIndex=0;var d=A.exec(b.substring(c));return d?(a.m=B.get(d[0].toLowerCase()),c+d[0].length):-1}function g(a,b,c){y.lastIndex=0;var d=y.exec(b.substring(c));return d?(a.m=z.get(d[0].toLowerCase()),c+d[0].length):-1}function h(a,b,d){return c(a,C.c.toString(),b,d)}function i(a,b,d){return c(a,C.x.toString(),b,d)}function j(a,b,d){return c(a,C.X.toString(),b,d)}function k(a,b,c){var d=t.get(b.substring(c,c+=2).toLowerCase());return null==d?-1:(a.p=d,c)}var l=a.dateTime,m=a.date,n=a.time,o=a.periods,p=a.days,q=a.shortDays,r=a.months,s=a.shortMonths;b.utc=function(a){function c(a){try{$g=Ia;var b=new $g;return b._=a,d(b)}finally{$g=Date}}var d=b(a);return c.parse=function(a){try{$g=Ia;var b=d.parse(a);return b&&b._}finally{$g=Date}},c.toString=d.toString,c},b.multi=b.utc.multi=db;var t=Sf.map(),u=Na(p),v=Oa(p),w=Na(q),x=Oa(q),y=Na(r),z=Oa(r),A=Na(s),B=Oa(s);o.forEach(function(a,b){t.set(a.toLowerCase(),b)});var C={a:function(a){return q[a.getDay()]},A:function(a){return p[a.getDay()]},b:function(a){return s[a.getMonth()]},B:function(a){return r[a.getMonth()]},c:b(l),d:function(a,b){return Ma(a.getDate(),b,2)},e:function(a,b){return Ma(a.getDate(),b,2)},H:function(a,b){return Ma(a.getHours(),b,2)},I:function(a,b){return Ma(a.getHours()%12||12,b,2)},j:function(a,b){return Ma(1+Zg.dayOfYear(a),b,3)},L:function(a,b){return Ma(a.getMilliseconds(),b,3)},m:function(a,b){return Ma(a.getMonth()+1,b,2)},M:function(a,b){return Ma(a.getMinutes(),b,2)},p:function(a){return o[+(a.getHours()>=12)]},S:function(a,b){return Ma(a.getSeconds(),b,2)},U:function(a,b){return Ma(Zg.sundayOfYear(a),b,2)},w:function(a){return a.getDay()},W:function(a,b){return Ma(Zg.mondayOfYear(a),b,2)},x:b(m),X:b(n),y:function(a,b){return Ma(a.getFullYear()%100,b,2)},Y:function(a,b){return Ma(a.getFullYear()%1e4,b,4)},Z:bb,"%":function(){return"%"}},D={a:d,A:e,b:f,B:g,c:h,d:Xa,e:Xa,H:Za,I:Za,j:Ya,L:ab,m:Wa,M:$a,p:k,S:_a,U:Qa,w:Pa,W:Ra,x:i,X:j,y:Ta,Y:Sa,Z:Ua,"%":cb};return b}function Ma(a,b,c){var d=a<0?"-":"",e=(d?-a:a)+"",f=e.length;return d+(f<c?new Array(c-f+1).join(b)+e:e)}function Na(a){return new RegExp("^(?:"+a.map(Sf.requote).join("|")+")","i")}function Oa(a){for(var b=new g,c=-1,d=a.length;++c<d;)b.set(a[c].toLowerCase(),c);return b}function Pa(a,b,c){bh.lastIndex=0;var d=bh.exec(b.substring(c,c+1));return d?(a.w=+d[0],c+d[0].length):-1}function Qa(a,b,c){bh.lastIndex=0;var d=bh.exec(b.substring(c));return d?(a.U=+d[0],c+d[0].length):-1}function Ra(a,b,c){bh.lastIndex=0;var d=bh.exec(b.substring(c));return d?(a.W=+d[0],c+d[0].length):-1}function Sa(a,b,c){bh.lastIndex=0;var d=bh.exec(b.substring(c,c+4));return d?(a.y=+d[0],c+d[0].length):-1}function Ta(a,b,c){bh.lastIndex=0;var d=bh.exec(b.substring(c,c+2));return d?(a.y=Va(+d[0]),c+d[0].length):-1}function Ua(a,b,c){return/^[+-]\d{4}$/.test(b=b.substring(c,c+5))?(a.Z=-b,c+5):-1}function Va(a){return a+(a>68?1900:2e3)}function Wa(a,b,c){bh.lastIndex=0;var d=bh.exec(b.substring(c,c+2));return d?(a.m=d[0]-1,c+d[0].length):-1}function Xa(a,b,c){bh.lastIndex=0;var d=bh.exec(b.substring(c,c+2));return d?(a.d=+d[0],c+d[0].length):-1}function Ya(a,b,c){bh.lastIndex=0;var d=bh.exec(b.substring(c,c+3));return d?(a.j=+d[0],c+d[0].length):-1}function Za(a,b,c){bh.lastIndex=0;var d=bh.exec(b.substring(c,c+2));return d?(a.H=+d[0],c+d[0].length):-1}function $a(a,b,c){bh.lastIndex=0;var d=bh.exec(b.substring(c,c+2));return d?(a.M=+d[0],c+d[0].length):-1}function _a(a,b,c){bh.lastIndex=0;var d=bh.exec(b.substring(c,c+2));return d?(a.S=+d[0],c+d[0].length):-1}function ab(a,b,c){bh.lastIndex=0;var d=bh.exec(b.substring(c,c+3));return d?(a.L=+d[0],c+d[0].length):-1}function bb(a){var b=a.getTimezoneOffset(),c=b>0?"-":"+",d=~~(cg(b)/60),e=cg(b)%60;return c+Ma(d,"0",2)+Ma(e,"0",2)}function cb(a,b,c){ch.lastIndex=0;var d=ch.exec(b.substring(c,c+1));return d?c+d[0].length:-1}function db(a){for(var b=a.length,c=-1;++c<b;)a[c][0]=this(a[c][0]);return function(b){for(var c=0,d=a[c];!d[1](b);)d=a[++c];return d[0](b)}}function eb(){}function fb(a,b,c){var d=c.s=a+b,e=d-a,f=d-e;c.t=a-f+(b-e)}function gb(a,b){a&&gh.hasOwnProperty(a.type)&&gh[a.type](a,b)}function hb(a,b,c){var d,e=-1,f=a.length-c;for(b.lineStart();++e<f;)d=a[e],b.point(d[0],d[1],d[2]);b.lineEnd()}function ib(a,b){var c=-1,d=a.length;for(b.polygonStart();++c<d;)hb(a[c],b,1);b.polygonEnd()}function jb(){function a(a,b){a*=zg,b=b*zg/2+ug/4;var c=a-d,g=c>=0?1:-1,h=g*c,i=Math.cos(b),j=Math.sin(b),k=f*j,l=e*i+k*Math.cos(h),m=k*g*Math.sin(h);ih.add(Math.atan2(m,l)),d=a,e=i,f=j}var b,c,d,e,f;jh.point=function(g,h){jh.point=a,d=(b=g)*zg,e=Math.cos(h=(c=h)*zg/2+ug/4),f=Math.sin(h)},jh.lineEnd=function(){a(b,c)}}function kb(a){var b=a[0],c=a[1],d=Math.cos(c);return[d*Math.cos(b),d*Math.sin(b),Math.sin(c)]}function lb(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function mb(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function nb(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2]}function ob(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function pb(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b,a[1]/=b,a[2]/=b}function qb(a){return[Math.atan2(a[1],a[0]),Z(a[2])]}function rb(a,b){return cg(a[0]-b[0])<xg&&cg(a[1]-b[1])<xg}function sb(a,b){a*=zg;var c=Math.cos(b*=zg);tb(c*Math.cos(a),c*Math.sin(a),Math.sin(b))}function tb(a,b,c){++kh,mh+=(a-mh)/kh,nh+=(b-nh)/kh,oh+=(c-oh)/kh}function ub(){function a(a,e){a*=zg;var f=Math.cos(e*=zg),g=f*Math.cos(a),h=f*Math.sin(a),i=Math.sin(e),j=Math.atan2(Math.sqrt((j=c*i-d*h)*j+(j=d*g-b*i)*j+(j=b*h-c*g)*j),b*g+c*h+d*i);lh+=j,ph+=j*(b+(b=g)),qh+=j*(c+(c=h)),rh+=j*(d+(d=i)),tb(b,c,d)}var b,c,d;vh.point=function(e,f){e*=zg;var g=Math.cos(f*=zg);b=g*Math.cos(e),c=g*Math.sin(e),d=Math.sin(f),vh.point=a,tb(b,c,d)}}function vb(){vh.point=sb}function wb(){function a(a,b){a*=zg;var c=Math.cos(b*=zg),g=c*Math.cos(a),h=c*Math.sin(a),i=Math.sin(b),j=e*i-f*h,k=f*g-d*i,l=d*h-e*g,m=Math.sqrt(j*j+k*k+l*l),n=d*g+e*h+f*i,o=m&&-Y(n)/m,p=Math.atan2(m,n);sh+=o*j,th+=o*k,uh+=o*l,lh+=p,ph+=p*(d+(d=g)),qh+=p*(e+(e=h)),rh+=p*(f+(f=i)),tb(d,e,f)}var b,c,d,e,f;vh.point=function(g,h){b=g,c=h,vh.point=a,g*=zg;var i=Math.cos(h*=zg);d=i*Math.cos(g),e=i*Math.sin(g),f=Math.sin(h),tb(d,e,f)},vh.lineEnd=function(){a(b,c),vh.lineEnd=vb,vh.point=sb}}function xb(){return!0}function yb(a,b,c,d,e){var f=[],g=[];if(a.forEach(function(a){if(!((b=a.length-1)<=0)){var b,c=a[0],d=a[b];if(rb(c,d)){e.lineStart();for(var h=0;h<b;++h)e.point((c=a[h])[0],c[1]);return void e.lineEnd()}var i=new Ab(c,a,null,!0),j=new Ab(c,null,i,!1);i.o=j,f.push(i),g.push(j),i=new Ab(d,a,null,!1),j=new Ab(d,null,i,!0),i.o=j,f.push(i),g.push(j)}}),g.sort(b),zb(f),zb(g),f.length){for(var h=0,i=c,j=g.length;h<j;++h)g[h].e=i=!i;for(var k,l,m=f[0];;){for(var n=m,o=!0;n.v;)if((n=n.n)===m)return;k=n.z,e.lineStart();do{if(n.v=n.o.v=!0,n.e){if(o)for(var h=0,j=k.length;h<j;++h)e.point((l=k[h])[0],l[1]);else d(n.x,n.n.x,1,e);n=n.n}else{if(o){k=n.p.z;for(var h=k.length-1;h>=0;--h)e.point((l=k[h])[0],l[1])}else d(n.x,n.p.x,-1,e);n=n.p}n=n.o,k=n.z,o=!o}while(!n.v);e.lineEnd()}}}function zb(a){if(b=a.length){for(var b,c,d=0,e=a[0];++d<b;)e.n=c=a[d],c.p=e,e=c;e.n=c=a[0],c.p=e}}function Ab(a,b,c,d){this.x=a,this.z=b,this.o=c,this.e=d,this.v=!1,this.n=this.p=null}function Bb(a,b,c,d){return function(e,f){function g(b,c){var d=e(b,c);a(b=d[0],c=d[1])&&f.point(b,c)}function h(a,b){var c=e(a,b);q.point(c[0],c[1])}function i(){s.point=h,q.lineStart()}function j(){s.point=g,q.lineEnd()}function k(a,b){p.push([a,b]);var c=e(a,b);u.point(c[0],c[1])}function l(){u.lineStart(),p=[]}function m(){k(p[0][0],p[0][1]),u.lineEnd();var a,b=u.clean(),c=t.buffer(),d=c.length;if(p.pop(),o.push(p),p=null,d)if(1&b){a=c[0];var e,d=a.length-1,g=-1;if(d>0){for(v||(f.polygonStart(),v=!0),f.lineStart();++g<d;)f.point((e=a[g])[0],e[1]);f.lineEnd()}}else d>1&&2&b&&c.push(c.pop().concat(c.shift())),n.push(c.filter(Cb))}var n,o,p,q=b(f),r=e.invert(d[0],d[1]),s={point:g,lineStart:i,lineEnd:j,polygonStart:function(){s.point=k,s.lineStart=l,s.lineEnd=m,n=[],o=[]},polygonEnd:function(){s.point=g,s.lineStart=i,s.lineEnd=j,n=Sf.merge(n);var a=Fb(r,o);n.length?(v||(f.polygonStart(),v=!0),yb(n,Eb,a,c,f)):a&&(v||(f.polygonStart(),v=!0),f.lineStart(),c(null,null,1,f),f.lineEnd()),v&&(f.polygonEnd(),v=!1),n=o=null},sphere:function(){f.polygonStart(),f.lineStart(),c(null,null,1,f),f.lineEnd(),f.polygonEnd()}},t=Db(),u=b(t),v=!1;return s}}function Cb(a){return a.length>1}function Db(){var a,b=[];return{lineStart:function(){b.push(a=[])},point:function(b,c){a.push([b,c])},lineEnd:p,buffer:function(){var c=b;return b=[],a=null,c},rejoin:function(){b.length>1&&b.push(b.pop().concat(b.shift()))}}}function Eb(a,b){return((a=a.x)[0]<0?a[1]-wg-xg:wg-a[1])-((b=b.x)[0]<0?b[1]-wg-xg:wg-b[1])}function Fb(a,b){var c=a[0],d=a[1],e=[Math.sin(c),-Math.cos(c),0],f=0,g=0;ih.reset();for(var h=0,i=b.length;h<i;++h){var j=b[h],k=j.length;if(k)for(var l=j[0],m=l[0],n=l[1]/2+ug/4,o=Math.sin(n),p=Math.cos(n),q=1;;){q===k&&(q=0),a=j[q];var r=a[0],s=a[1]/2+ug/4,t=Math.sin(s),u=Math.cos(s),v=r-m,w=v>=0?1:-1,x=w*v,y=x>ug,z=o*t;if(ih.add(Math.atan2(z*w*Math.sin(x),p*u+z*Math.cos(x))),f+=y?v+w*vg:v,y^m>=c^r>=c){var A=mb(kb(l),kb(a));pb(A);var B=mb(e,A);pb(B);var C=(y^v>=0?-1:1)*Z(B[2]);(d>C||d===C&&(A[0]||A[1]))&&(g+=y^v>=0?1:-1)}if(!q++)break;m=r,o=t,p=u,l=a}}return(f<-xg||f<xg&&ih<0)^1&g}function Gb(a){var b,c=NaN,d=NaN,e=NaN;return{lineStart:function(){a.lineStart(),b=1},point:function(f,g){var h=f>0?ug:-ug,i=cg(f-c);cg(i-ug)<xg?(a.point(c,d=(d+g)/2>0?wg:-wg),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),a.point(f,d),b=0):e!==h&&i>=ug&&(cg(c-e)<xg&&(c-=e*xg),cg(f-h)<xg&&(f-=h*xg),d=Hb(c,d,f,g),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),b=0),a.point(c=f,d=g),e=h},lineEnd:function(){a.lineEnd(),c=d=NaN},clean:function(){return 2-b}}}function Hb(a,b,c,d){var e,f,g=Math.sin(a-c);return cg(g)>xg?Math.atan((Math.sin(b)*(f=Math.cos(d))*Math.sin(c)-Math.sin(d)*(e=Math.cos(b))*Math.sin(a))/(e*f*g)):(b+d)/2}function Ib(a,b,c,d){var e;if(null==a)e=c*wg,d.point(-ug,e),d.point(0,e),d.point(ug,e),d.point(ug,0),d.point(ug,-e),d.point(0,-e),d.point(-ug,-e),d.point(-ug,0),d.point(-ug,e);else if(cg(a[0]-b[0])>xg){var f=a[0]<b[0]?ug:-ug;e=c*f/2,d.point(-f,e),d.point(0,e),d.point(f,e)}else d.point(b[0],b[1])}function Jb(a){function b(a,b){return Math.cos(a)*Math.cos(b)>f}function c(a){var c,f,i,j,k;return{lineStart:function(){j=i=!1,k=1},point:function(l,m){var n,o=[l,m],p=b(l,m),q=g?p?0:e(l,m):p?e(l+(l<0?ug:-ug),m):0;if(!c&&(j=i=p)&&a.lineStart(),p!==i&&(n=d(c,o),(rb(c,n)||rb(o,n))&&(o[0]+=xg,o[1]+=xg,p=b(o[0],o[1]))),p!==i)k=0,p?(a.lineStart(),n=d(o,c),a.point(n[0],n[1])):(n=d(c,o),a.point(n[0],n[1]),a.lineEnd()),c=n;else if(h&&c&&g^p){var r;q&f||!(r=d(o,c,!0))||(k=0,g?(a.lineStart(),a.point(r[0][0],r[0][1]),a.point(r[1][0],r[1][1]),a.lineEnd()):(a.point(r[1][0],r[1][1]),a.lineEnd(),a.lineStart(),a.point(r[0][0],r[0][1])))}!p||c&&rb(c,o)||a.point(o[0],o[1]),c=o,i=p,f=q},lineEnd:function(){i&&a.lineEnd(),c=null},clean:function(){return k|(j&&i)<<1}}}function d(a,b,c){var d=kb(a),e=kb(b),g=[1,0,0],h=mb(d,e),i=lb(h,h),j=h[0],k=i-j*j;if(!k)return!c&&a;var l=f*i/k,m=-f*j/k,n=mb(g,h),o=ob(g,l);nb(o,ob(h,m));var p=n,q=lb(o,p),r=lb(p,p),s=q*q-r*(lb(o,o)-1);if(!(s<0)){var t=Math.sqrt(s),u=ob(p,(-q-t)/r);if(nb(u,o),u=qb(u),!c)return u;var v,w=a[0],x=b[0],y=a[1],z=b[1];x<w&&(v=w,w=x,x=v);var A=x-w,B=cg(A-ug)<xg,C=B||A<xg;if(!B&&z<y&&(v=y,y=z,z=v),C?B?y+z>0^u[1]<(cg(u[0]-w)<xg?y:z):y<=u[1]&&u[1]<=z:A>ug^(w<=u[0]&&u[0]<=x)){var D=ob(p,(-q+t)/r);return nb(D,o),[u,qb(D)]}}}function e(b,c){var d=g?a:ug-a,e=0;return b<-d?e|=1:b>d&&(e|=2),c<-d?e|=4:c>d&&(e|=8),e}var f=Math.cos(a),g=f>0,h=cg(f)>xg;return Bb(b,c,jc(a,6*zg),g?[0,-a]:[-ug,a-ug])}function Kb(a,b,c,d){return function(e){var f,g=e.a,h=e.b,i=g.x,j=g.y,k=h.x,l=h.y,m=0,n=1,o=k-i,p=l-j;if(f=a-i,o||!(f>0)){if(f/=o,o<0){if(f<m)return;f<n&&(n=f)}else if(o>0){if(f>n)return;f>m&&(m=f)}if(f=c-i,o||!(f<0)){if(f/=o,o<0){if(f>n)return;f>m&&(m=f)}else if(o>0){if(f<m)return;f<n&&(n=f)}if(f=b-j,p||!(f>0)){if(f/=p,p<0){if(f<m)return;f<n&&(n=f)}else if(p>0){if(f>n)return;f>m&&(m=f)}if(f=d-j,p||!(f<0)){if(f/=p,p<0){if(f>n)return;f>m&&(m=f)}else if(p>0){if(f<m)return;f<n&&(n=f)}return m>0&&(e.a={x:i+m*o,y:j+m*p}),n<1&&(e.b={x:i+n*o,y:j+n*p}),e}}}}}}function Lb(a,b,c,d){function e(d,e){return cg(d[0]-a)<xg?e>0?0:3:cg(d[0]-c)<xg?e>0?2:1:cg(d[1]-b)<xg?e>0?1:0:e>0?3:2}function f(a,b){return g(a.x,b.x)}function g(a,b){var c=e(a,1),d=e(b,1);return c!==d?c-d:0===c?b[1]-a[1]:1===c?a[0]-b[0]:2===c?a[1]-b[1]:b[0]-a[0]}return function(h){function i(a){for(var b=0,c=q.length,d=a[1],e=0;e<c;++e)for(var f,g=1,h=q[e],i=h.length,j=h[0];g<i;++g)f=h[g],j[1]<=d?f[1]>d&&X(j,f,a)>0&&++b:f[1]<=d&&X(j,f,a)<0&&--b,j=f;return 0!==b}function j(f,h,i,j){var k=0,l=0;if(null==f||(k=e(f,i))!==(l=e(h,i))||g(f,h)<0^i>0)do{j.point(0===k||3===k?a:c,k>1?d:b)}while((k=(k+i+4)%4)!==l);else j.point(h[0],h[1])}function k(e,f){return a<=e&&e<=c&&b<=f&&f<=d}function l(a,b){k(a,b)&&h.point(a,b)}function m(){D.point=o,q&&q.push(r=[]),y=!0,x=!1,v=w=NaN}function n(){p&&(o(s,t),u&&x&&B.rejoin(),p.push(B.buffer())),D.point=l,x&&h.lineEnd()}function o(a,b){a=Math.max(-xh,Math.min(xh,a)),b=Math.max(-xh,Math.min(xh,b));var c=k(a,b);if(q&&r.push([a,b]),y)s=a,t=b,u=c,y=!1,c&&(h.lineStart(),h.point(a,b));else if(c&&x)h.point(a,b);else{var d={a:{x:v,y:w},b:{x:a,y:b}};C(d)?(x||(h.lineStart(),h.point(d.a.x,d.a.y)),h.point(d.b.x,d.b.y),c||h.lineEnd(),z=!1):c&&(h.lineStart(),h.point(a,b),z=!1)}v=a,w=b,x=c}var p,q,r,s,t,u,v,w,x,y,z,A=h,B=Db(),C=Kb(a,b,c,d),D={point:l,lineStart:m,lineEnd:n,polygonStart:function(){h=B,p=[],q=[],z=!0},polygonEnd:function(){h=A,p=Sf.merge(p);var b=i([a,d]),c=z&&b,e=p.length;(c||e)&&(h.polygonStart(),c&&(h.lineStart(),j(null,null,1,h),h.lineEnd()),e&&yb(p,f,b,j,h),h.polygonEnd()),p=q=r=null}};return D}}function Mb(a,b){function c(c,d){return c=a(c,d),b(c[0],c[1])}return a.invert&&b.invert&&(c.invert=function(c,d){return(c=b.invert(c,d))&&a.invert(c[0],c[1])}),c}function Nb(a){var b=0,c=ug/3,d=bc(a),e=d(b,c);return e.parallels=function(a){return arguments.length?d(b=a[0]*ug/180,c=a[1]*ug/180):[b/ug*180,c/ug*180]},e}function Ob(a,b){function c(a,b){var c=Math.sqrt(f-2*e*Math.sin(b))/e;return[c*Math.sin(a*=e),g-c*Math.cos(a)]}var d=Math.sin(a),e=(d+Math.sin(b))/2,f=1+d*(2*e-d),g=Math.sqrt(f)/e;return c.invert=function(a,b){var c=g-b;return[Math.atan2(a,c)/e,Z((f-(a*a+c*c)*e*e)/(2*e))]},c}function Pb(){function a(a,b){zh+=e*a-d*b,d=a,e=b}var b,c,d,e;Eh.point=function(f,g){Eh.point=a,b=d=f,c=e=g},Eh.lineEnd=function(){a(b,c)}}function Qb(a,b){a<Ah&&(Ah=a),a>Ch&&(Ch=a),b<Bh&&(Bh=b),b>Dh&&(Dh=b)}function Rb(){function a(a,b){g.push("M",a,",",b,f)}function b(a,b){g.push("M",a,",",b),h.point=c}function c(a,b){g.push("L",a,",",b)}function d(){h.point=a}function e(){g.push("Z")}var f=Sb(4.5),g=[],h={point:a,lineStart:function(){h.point=b},lineEnd:d,polygonStart:function(){h.lineEnd=e},polygonEnd:function(){h.lineEnd=d,h.point=a},pointRadius:function(a){return f=Sb(a),h},result:function(){if(g.length){var a=g.join("");return g=[],a}}};return h}function Sb(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function Tb(a,b){mh+=a,nh+=b,++oh}function Ub(){function a(a,d){var e=a-b,f=d-c,g=Math.sqrt(e*e+f*f);ph+=g*(b+a)/2,qh+=g*(c+d)/2,rh+=g,Tb(b=a,c=d)}var b,c;Gh.point=function(d,e){Gh.point=a,Tb(b=d,c=e)}}function Vb(){Gh.point=Tb}function Wb(){function a(a,b){var c=a-d,f=b-e,g=Math.sqrt(c*c+f*f);ph+=g*(d+a)/2,qh+=g*(e+b)/2,rh+=g,g=e*a-d*b,sh+=g*(d+a),th+=g*(e+b),uh+=3*g,Tb(d=a,e=b)}var b,c,d,e;Gh.point=function(f,g){Gh.point=a,Tb(b=d=f,c=e=g)},Gh.lineEnd=function(){a(b,c)}}function Xb(a){function b(b,c){a.moveTo(b,c),a.arc(b,c,g,0,vg)}function c(b,c){a.moveTo(b,c),h.point=d}function d(b,c){a.lineTo(b,c)}function e(){h.point=b}function f(){a.closePath()}var g=4.5,h={point:b,lineStart:function(){h.point=c},lineEnd:e,polygonStart:function(){h.lineEnd=f},polygonEnd:function(){h.lineEnd=e,h.point=b},pointRadius:function(a){return g=a,h},result:p};return h}function Yb(a){function b(a){return(h?d:c)(a)}function c(b){return _b(b,function(c,d){c=a(c,d),b.point(c[0],c[1])})}function d(b){function c(c,d){c=a(c,d),b.point(c[0],c[1])}function d(){t=NaN,y.point=f,b.lineStart()}function f(c,d){var f=kb([c,d]),g=a(c,d);e(t,u,s,v,w,x,t=g[0],u=g[1],s=c,v=f[0],w=f[1],x=f[2],h,b),b.point(t,u)}function g(){y.point=c,b.lineEnd()}function i(){d(),y.point=j,y.lineEnd=k}function j(a,b){f(l=a,m=b),n=t,o=u,p=v,q=w,r=x,y.point=f}function k(){e(t,u,s,v,w,x,n,o,l,p,q,r,h,b),y.lineEnd=g,g()}var l,m,n,o,p,q,r,s,t,u,v,w,x,y={point:c,lineStart:d,lineEnd:g,polygonStart:function(){b.polygonStart(),y.lineStart=i},polygonEnd:function(){b.polygonEnd(),y.lineStart=d}};return y}function e(b,c,d,h,i,j,k,l,m,n,o,p,q,r){var s=k-b,t=l-c,u=s*s+t*t;if(u>4*f&&q--){var v=h+n,w=i+o,x=j+p,y=Math.sqrt(v*v+w*w+x*x),z=Math.asin(x/=y),A=cg(cg(x)-1)<xg||cg(d-m)<xg?(d+m)/2:Math.atan2(w,v),B=a(A,z),C=B[0],D=B[1],E=C-b,F=D-c,G=t*E-s*F;(G*G/u>f||cg((s*E+t*F)/u-.5)>.3||h*n+i*o+j*p<g)&&(e(b,c,d,h,i,j,C,D,A,v/=y,w/=y,x,q,r),r.point(C,D),e(C,D,A,v,w,x,k,l,m,n,o,p,q,r))}}var f=.5,g=Math.cos(30*zg),h=16;return b.precision=function(a){return arguments.length?(h=(f=a*a)>0&&16,b):Math.sqrt(f)},b}function Zb(a){var b=Yb(function(b,c){return a([b*Ag,c*Ag])});return function(a){return cc(b(a))}}function $b(a){this.stream=a}function _b(a,b){return{point:b,sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function ac(a){return bc(function(){return a})()}function bc(a){function b(a){return a=h(a[0]*zg,a[1]*zg),[a[0]*m+i,j-a[1]*m]}function c(a){return(a=h.invert((a[0]-i)/m,(j-a[1])/m))&&[a[0]*Ag,a[1]*Ag]}function d(){h=Mb(g=fc(r,s,t),f);var a=f(p,q);return i=n-a[0]*m,j=o+a[1]*m,e()}function e(){return k&&(k.valid=!1,k=null),b}var f,g,h,i,j,k,l=Yb(function(a,b){return a=f(a,b),[a[0]*m+i,j-a[1]*m]}),m=150,n=480,o=250,p=0,q=0,r=0,s=0,t=0,u=wh,v=xa,w=null,x=null;return b.stream=function(a){return k&&(k.valid=!1),k=cc(u(g,l(v(a)))),k.valid=!0,k},b.clipAngle=function(a){return arguments.length?(u=null==a?(w=a,wh):Jb((w=+a)*zg),e()):w},b.clipExtent=function(a){return arguments.length?(x=a,v=a?Lb(a[0][0],a[0][1],a[1][0],a[1][1]):xa,e()):x},b.scale=function(a){return arguments.length?(m=+a,d()):m},b.translate=function(a){return arguments.length?(n=+a[0],o=+a[1],d()):[n,o]},b.center=function(a){return arguments.length?(p=a[0]%360*zg,q=a[1]%360*zg,d()):[p*Ag,q*Ag]},b.rotate=function(a){return arguments.length?(r=a[0]%360*zg,s=a[1]%360*zg,t=a.length>2?a[2]%360*zg:0,d()):[r*Ag,s*Ag,t*Ag]},Sf.rebind(b,l,"precision"),function(){return f=a.apply(this,arguments),b.invert=f.invert&&c,d()}}function cc(a){return _b(a,function(b,c){a.point(b*zg,c*zg)})}function dc(a,b){return[a,b]}function ec(a,b){return[a>ug?a-vg:a<-ug?a+vg:a,b]}function fc(a,b,c){return a?b||c?Mb(hc(a),ic(b,c)):hc(a):b||c?ic(b,c):ec}function gc(a){return function(b,c){return b+=a,[b>ug?b-vg:b<-ug?b+vg:b,c]}}function hc(a){var b=gc(a);return b.invert=gc(-a),b}function ic(a,b){function c(a,b){var c=Math.cos(b),h=Math.cos(a)*c,i=Math.sin(a)*c,j=Math.sin(b),k=j*d+h*e;return[Math.atan2(i*f-k*g,h*d-j*e),Z(k*f+i*g)]}var d=Math.cos(a),e=Math.sin(a),f=Math.cos(b),g=Math.sin(b);return c.invert=function(a,b){var c=Math.cos(b),h=Math.cos(a)*c,i=Math.sin(a)*c,j=Math.sin(b),k=j*f-i*g;return[Math.atan2(i*f+j*g,h*d+k*e),Z(k*d-h*e)]},c}function jc(a,b){var c=Math.cos(a),d=Math.sin(a);return function(e,f,g,h){var i=g*b;null!=e?(e=kc(c,e),f=kc(c,f),(g>0?e<f:e>f)&&(e+=g*vg)):(e=a+g*vg,f=a-.5*i);for(var j,k=e;g>0?k>f:k<f;k-=i)h.point((j=qb([c,-d*Math.cos(k),-d*Math.sin(k)]))[0],j[1])}}function kc(a,b){var c=kb(b);c[0]-=a,pb(c);var d=Y(-c[1]);return((-c[2]<0?-d:d)+2*Math.PI-xg)%(2*Math.PI)}function lc(a,b,c){var d=Sf.range(a,b-xg,c).concat(b);return function(a){return d.map(function(b){return[a,b]})}}function mc(a,b,c){var d=Sf.range(a,b-xg,c).concat(b);return function(a){return d.map(function(b){return[b,a]})}}function nc(a){return a.source}function oc(a){return a.target}function pc(a,b,c,d){var e=Math.cos(b),f=Math.sin(b),g=Math.cos(d),h=Math.sin(d),i=e*Math.cos(a),j=e*Math.sin(a),k=g*Math.cos(c),l=g*Math.sin(c),m=2*Math.asin(Math.sqrt(ba(d-b)+e*g*ba(c-a))),n=1/Math.sin(m),o=m?function(a){var b=Math.sin(a*=m)*n,c=Math.sin(m-a)*n,d=c*i+b*k,e=c*j+b*l,g=c*f+b*h;return[Math.atan2(e,d)*Ag,Math.atan2(g,Math.sqrt(d*d+e*e))*Ag]}:function(){return[a*Ag,b*Ag]};return o.distance=m,o}function qc(){function a(a,e){var f=Math.sin(e*=zg),g=Math.cos(e),h=cg((a*=zg)-b),i=Math.cos(h);Hh+=Math.atan2(Math.sqrt((h=g*Math.sin(h))*h+(h=d*f-c*g*i)*h),c*f+d*g*i),b=a,c=f,d=g}var b,c,d;Ih.point=function(e,f){b=e*zg,c=Math.sin(f*=zg),d=Math.cos(f),Ih.point=a},Ih.lineEnd=function(){Ih.point=Ih.lineEnd=p}}function rc(a,b){function c(b,c){var d=Math.cos(b),e=Math.cos(c),f=a(d*e);return[f*e*Math.sin(b),f*Math.sin(c)]}return c.invert=function(a,c){var d=Math.sqrt(a*a+c*c),e=b(d),f=Math.sin(e),g=Math.cos(e);return[Math.atan2(a*f,d*g),Math.asin(d&&c*f/d)]},c}function sc(a,b){function c(a,b){g>0?b<-wg+xg&&(b=-wg+xg):b>wg-xg&&(b=wg-xg);var c=g/Math.pow(e(b),f);return[c*Math.sin(f*a),g-c*Math.cos(f*a)]}var d=Math.cos(a),e=function(a){return Math.tan(ug/4+a/2)},f=a===b?Math.sin(a):Math.log(d/Math.cos(b))/Math.log(e(b)/e(a)),g=d*Math.pow(e(a),f)/f;return f?(c.invert=function(a,b){var c=g-b,d=W(f)*Math.sqrt(a*a+c*c);return[Math.atan2(a,c)/f,2*Math.atan(Math.pow(g/d,1/f))-wg]},c):uc}function tc(a,b){function c(a,b){var c=f-b;return[c*Math.sin(e*a),f-c*Math.cos(e*a)]}var d=Math.cos(a),e=a===b?Math.sin(a):(d-Math.cos(b))/(b-a),f=d/e+a;return cg(e)<xg?dc:(c.invert=function(a,b){var c=f-b;return[Math.atan2(a,c)/e,f-W(e)*Math.sqrt(a*a+c*c)]},c)}function uc(a,b){return[a,Math.log(Math.tan(ug/4+b/2))]}function vc(a){var b,c=ac(a),d=c.scale,e=c.translate,f=c.clipExtent;return c.scale=function(){var a=d.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.translate=function(){var a=e.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.clipExtent=function(a){var g=f.apply(c,arguments);if(g===c){if(b=null==a){var h=ug*d(),i=e();f([[i[0]-h,i[1]-h],[i[0]+h,i[1]+h]])}}else b&&(g=null);return g},c.clipExtent(null)}function wc(a,b){return[Math.log(Math.tan(ug/4+b/2)),-a]}function xc(a){return a[0]}function yc(a){return a[1]}function zc(a){for(var b=a.length,c=[0,1],d=2,e=2;e<b;e++){for(;d>1&&X(a[c[d-2]],a[c[d-1]],a[e])<=0;)--d;c[d++]=e}return c.slice(0,d)}function Ac(a,b){return a[0]-b[0]||a[1]-b[1]}function Bc(a,b,c){return(c[0]-b[0])*(a[1]-b[1])<(c[1]-b[1])*(a[0]-b[0])}function Cc(a,b,c,d){var e=a[0],f=c[0],g=b[0]-e,h=d[0]-f,i=a[1],j=c[1],k=b[1]-i,l=d[1]-j,m=(h*(i-j)-l*(e-f))/(l*g-h*k);return[e+m*g,i+m*k]}function Dc(a){var b=a[0],c=a[a.length-1];return!(b[0]-c[0]||b[1]-c[1])}function Ec(){Zc(this),this.edge=this.site=this.circle=null}function Fc(a){var b=Uh.pop()||new Ec;return b.site=a,b}function Gc(a){Qc(a),Rh.remove(a),Uh.push(a),Zc(a)}function Hc(a){var b=a.circle,c=b.x,d=b.cy,e={x:c,y:d},f=a.P,g=a.N,h=[a];Gc(a);for(var i=f;i.circle&&cg(c-i.circle.x)<xg&&cg(d-i.circle.cy)<xg;)f=i.P,h.unshift(i),Gc(i),i=f;h.unshift(i),Qc(i);for(var j=g;j.circle&&cg(c-j.circle.x)<xg&&cg(d-j.circle.cy)<xg;)g=j.N,h.push(j),Gc(j),j=g;h.push(j),Qc(j);var k,l=h.length;for(k=1;k<l;++k)j=h[k],i=h[k-1],Wc(j.edge,i.site,j.site,e);i=h[0],j=h[l-1],j.edge=Uc(i.site,j.site,null,e),Pc(i),Pc(j)}function Ic(a){for(var b,c,d,e,f=a.x,g=a.y,h=Rh._;h;)if((d=Jc(h,g)-f)>xg)h=h.L;else{if(!((e=f-Kc(h,g))>xg)){d>-xg?(b=h.P,c=h):e>-xg?(b=h,c=h.N):b=c=h;break}if(!h.R){b=h;break}h=h.R}var i=Fc(a);if(Rh.insert(b,i),b||c){if(b===c)return Qc(b),c=Fc(b.site),Rh.insert(i,c),i.edge=c.edge=Uc(b.site,i.site),Pc(b),void Pc(c);if(!c)return void(i.edge=Uc(b.site,i.site));Qc(b),Qc(c);var j=b.site,k=j.x,l=j.y,m=a.x-k,n=a.y-l,o=c.site,p=o.x-k,q=o.y-l,r=2*(m*q-n*p),s=m*m+n*n,t=p*p+q*q,u={x:(q*s-n*t)/r+k,y:(m*t-p*s)/r+l};Wc(c.edge,j,o,u),i.edge=Uc(j,a,null,u),c.edge=Uc(a,o,null,u),Pc(b),Pc(c)}}function Jc(a,b){var c=a.site,d=c.x,e=c.y,f=e-b;if(!f)return d;var g=a.P;if(!g)return-1/0;c=g.site;var h=c.x,i=c.y,j=i-b;if(!j)return h;var k=h-d,l=1/f-1/j,m=k/j;return l?(-m+Math.sqrt(m*m-2*l*(k*k/(-2*j)-i+j/2+e-f/2)))/l+d:(d+h)/2}function Kc(a,b){var c=a.N;if(c)return Jc(c,b);var d=a.site;return d.y===b?d.x:1/0}function Lc(a){this.site=a,this.edges=[]}function Mc(a){for(var b,c,d,e,f,g,h,i,j,k,l=a[0][0],m=a[1][0],n=a[0][1],o=a[1][1],p=Qh,q=p.length;q--;)if((f=p[q])&&f.prepare())for(h=f.edges,i=h.length,g=0;g<i;)k=h[g].end(),d=k.x,e=k.y,j=h[++g%i].start(),b=j.x,c=j.y,(cg(d-b)>xg||cg(e-c)>xg)&&(h.splice(g,0,new Xc(Vc(f.site,k,cg(d-l)<xg&&o-e>xg?{x:l,y:cg(b-l)<xg?c:o}:cg(e-o)<xg&&m-d>xg?{x:cg(c-o)<xg?b:m,y:o}:cg(d-m)<xg&&e-n>xg?{x:m,y:cg(b-m)<xg?c:n}:cg(e-n)<xg&&d-l>xg?{x:cg(c-n)<xg?b:l,y:n}:null),f.site,null)),++i)}function Nc(a,b){return b.angle-a.angle}function Oc(){Zc(this),this.x=this.y=this.arc=this.site=this.cy=null}function Pc(a){var b=a.P,c=a.N;if(b&&c){var d=b.site,e=a.site,f=c.site;if(d!==f){var g=e.x,h=e.y,i=d.x-g,j=d.y-h,k=f.x-g,l=f.y-h,m=2*(i*l-j*k);if(!(m>=-yg)){var n=i*i+j*j,o=k*k+l*l,p=(l*n-j*o)/m,q=(i*o-k*n)/m,l=q+h,r=Vh.pop()||new Oc;r.arc=a,r.site=e,r.x=p+g,r.y=l+Math.sqrt(p*p+q*q),r.cy=l,a.circle=r;for(var s=null,t=Th._;t;)if(r.y<t.y||r.y===t.y&&r.x<=t.x){if(!t.L){s=t.P;break}t=t.L}else{if(!t.R){s=t;break}t=t.R}Th.insert(s,r),s||(Sh=r)}}}}function Qc(a){var b=a.circle;b&&(b.P||(Sh=b.N),Th.remove(b),Vh.push(b),Zc(b),a.circle=null)}function Rc(a){for(var b,c=Ph,d=Kb(a[0][0],a[0][1],a[1][0],a[1][1]),e=c.length;e--;)b=c[e],(!Sc(b,a)||!d(b)||cg(b.a.x-b.b.x)<xg&&cg(b.a.y-b.b.y)<xg)&&(b.a=b.b=null,c.splice(e,1))}function Sc(a,b){var c=a.b;if(c)return!0;var d,e,f=a.a,g=b[0][0],h=b[1][0],i=b[0][1],j=b[1][1],k=a.l,l=a.r,m=k.x,n=k.y,o=l.x,p=l.y,q=(m+o)/2,r=(n+p)/2;if(p===n){if(q<g||q>=h)return;if(m>o){if(f){if(f.y>=j)return}else f={x:q,y:i};c={x:q,y:j}}else{if(f){if(f.y<i)return}else f={x:q,y:j};c={x:q,y:i}}}else if(d=(m-o)/(p-n),e=r-d*q,d<-1||d>1)if(m>o){
if(f){if(f.y>=j)return}else f={x:(i-e)/d,y:i};c={x:(j-e)/d,y:j}}else{if(f){if(f.y<i)return}else f={x:(j-e)/d,y:j};c={x:(i-e)/d,y:i}}else if(n<p){if(f){if(f.x>=h)return}else f={x:g,y:d*g+e};c={x:h,y:d*h+e}}else{if(f){if(f.x<g)return}else f={x:h,y:d*h+e};c={x:g,y:d*g+e}}return a.a=f,a.b=c,!0}function Tc(a,b){this.l=a,this.r=b,this.a=this.b=null}function Uc(a,b,c,d){var e=new Tc(a,b);return Ph.push(e),c&&Wc(e,a,b,c),d&&Wc(e,b,a,d),Qh[a.i].edges.push(new Xc(e,a,b)),Qh[b.i].edges.push(new Xc(e,b,a)),e}function Vc(a,b,c){var d=new Tc(a,null);return d.a=b,d.b=c,Ph.push(d),d}function Wc(a,b,c,d){a.a||a.b?a.l===c?a.b=d:a.a=d:(a.a=d,a.l=b,a.r=c)}function Xc(a,b,c){var d=a.a,e=a.b;this.edge=a,this.site=b,this.angle=c?Math.atan2(c.y-b.y,c.x-b.x):a.l===b?Math.atan2(e.x-d.x,d.y-e.y):Math.atan2(d.x-e.x,e.y-d.y)}function Yc(){this._=null}function Zc(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function $c(a,b){var c=b,d=b.R,e=c.U;e?e.L===c?e.L=d:e.R=d:a._=d,d.U=e,c.U=d,c.R=d.L,c.R&&(c.R.U=c),d.L=c}function _c(a,b){var c=b,d=b.L,e=c.U;e?e.L===c?e.L=d:e.R=d:a._=d,d.U=e,c.U=d,c.L=d.R,c.L&&(c.L.U=c),d.R=c}function ad(a){for(;a.L;)a=a.L;return a}function bd(a,b){var c,d,e,f=a.sort(cd).pop();for(Ph=[],Qh=new Array(a.length),Rh=new Yc,Th=new Yc;;)if(e=Sh,f&&(!e||f.y<e.y||f.y===e.y&&f.x<e.x))f.x===c&&f.y===d||(Qh[f.i]=new Lc(f),Ic(f),c=f.x,d=f.y),f=a.pop();else{if(!e)break;Hc(e.arc)}b&&(Rc(b),Mc(b));var g={cells:Qh,edges:Ph};return Rh=Th=Ph=Qh=null,g}function cd(a,b){return b.y-a.y||b.x-a.x}function dd(a,b,c){return(a.x-c.x)*(b.y-a.y)-(a.x-b.x)*(c.y-a.y)}function ed(a){return a.x}function fd(a){return a.y}function gd(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function hd(a,b,c,d,e,f){if(!a(b,c,d,e,f)){var g=.5*(c+e),h=.5*(d+f),i=b.nodes;i[0]&&hd(a,i[0],c,d,g,h),i[1]&&hd(a,i[1],g,d,e,h),i[2]&&hd(a,i[2],c,h,g,f),i[3]&&hd(a,i[3],g,h,e,f)}}function id(a,b){a=Sf.rgb(a),b=Sf.rgb(b);var c=a.r,d=a.g,e=a.b,f=b.r-c,g=b.g-d,h=b.b-e;return function(a){return"#"+qa(Math.round(c+f*a))+qa(Math.round(d+g*a))+qa(Math.round(e+h*a))}}function jd(a,b){var c,d={},e={};for(c in a)c in b?d[c]=md(a[c],b[c]):e[c]=a[c];for(c in b)c in a||(e[c]=b[c]);return function(a){for(c in d)e[c]=d[c](a);return e}}function kd(a,b){return b-=a=+a,function(c){return a+b*c}}function ld(a,b){var c,d,e,f=Xh.lastIndex=Yh.lastIndex=0,g=-1,h=[],i=[];for(a+="",b+="";(c=Xh.exec(a))&&(d=Yh.exec(b));)(e=d.index)>f&&(e=b.substring(f,e),h[g]?h[g]+=e:h[++g]=e),(c=c[0])===(d=d[0])?h[g]?h[g]+=d:h[++g]=d:(h[++g]=null,i.push({i:g,x:kd(c,d)})),f=Yh.lastIndex;return f<b.length&&(e=b.substring(f),h[g]?h[g]+=e:h[++g]=e),h.length<2?i[0]?(b=i[0].x,function(a){return b(a)+""}):function(){return b}:(b=i.length,function(a){for(var c,d=0;d<b;++d)h[(c=i[d]).i]=c.x(a);return h.join("")})}function md(a,b){for(var c,d=Sf.interpolators.length;--d>=0&&!(c=Sf.interpolators[d](a,b)););return c}function nd(a,b){var c,d=[],e=[],f=a.length,g=b.length,h=Math.min(a.length,b.length);for(c=0;c<h;++c)d.push(md(a[c],b[c]));for(;c<f;++c)e[c]=a[c];for(;c<g;++c)e[c]=b[c];return function(a){for(c=0;c<h;++c)e[c]=d[c](a);return e}}function od(a){return function(b){return b<=0?0:b>=1?1:a(b)}}function pd(a){return function(b){return 1-a(1-b)}}function qd(a){return function(b){return.5*(b<.5?a(2*b):2-a(2-2*b))}}function rd(a){return a*a}function sd(a){return a*a*a}function td(a){if(a<=0)return 0;if(a>=1)return 1;var b=a*a,c=b*a;return 4*(a<.5?c:3*(a-b)+c-.75)}function ud(a){return function(b){return Math.pow(b,a)}}function vd(a){return 1-Math.cos(a*wg)}function wd(a){return Math.pow(2,10*(a-1))}function xd(a){return 1-Math.sqrt(1-a*a)}function yd(a,b){var c;return arguments.length<2&&(b=.45),arguments.length?c=b/vg*Math.asin(1/a):(a=1,c=b/4),function(d){return 1+a*Math.pow(2,-10*d)*Math.sin((d-c)*vg/b)}}function zd(a){return a||(a=1.70158),function(b){return b*b*((a+1)*b-a)}}function Ad(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function Bd(a,b){a=Sf.hcl(a),b=Sf.hcl(b);var c=a.h,d=a.c,e=a.l,f=b.h-c,g=b.c-d,h=b.l-e;return isNaN(g)&&(g=0,d=isNaN(d)?b.c:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):f>180?f-=360:f<-180&&(f+=360),function(a){return ga(c+f*a,d+g*a,e+h*a)+""}}function Cd(a,b){a=Sf.hsl(a),b=Sf.hsl(b);var c=a.h,d=a.s,e=a.l,f=b.h-c,g=b.s-d,h=b.l-e;return isNaN(g)&&(g=0,d=isNaN(d)?b.s:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):f>180?f-=360:f<-180&&(f+=360),function(a){return ea(c+f*a,d+g*a,e+h*a)+""}}function Dd(a,b){a=Sf.lab(a),b=Sf.lab(b);var c=a.l,d=a.a,e=a.b,f=b.l-c,g=b.a-d,h=b.b-e;return function(a){return ia(c+f*a,d+g*a,e+h*a)+""}}function Ed(a,b){return b-=a,function(c){return Math.round(a+b*c)}}function Fd(a){var b=[a.a,a.b],c=[a.c,a.d],d=Hd(b),e=Gd(b,c),f=Hd(Id(c,b,-e))||0;b[0]*c[1]<c[0]*b[1]&&(b[0]*=-1,b[1]*=-1,d*=-1,e*=-1),this.rotate=(d?Math.atan2(b[1],b[0]):Math.atan2(-c[0],c[1]))*Ag,this.translate=[a.e,a.f],this.scale=[d,f],this.skew=f?Math.atan2(e,f)*Ag:0}function Gd(a,b){return a[0]*b[0]+a[1]*b[1]}function Hd(a){var b=Math.sqrt(Gd(a,a));return b&&(a[0]/=b,a[1]/=b),b}function Id(a,b,c){return a[0]+=c*b[0],a[1]+=c*b[1],a}function Jd(a,b){var c,d=[],e=[],f=Sf.transform(a),g=Sf.transform(b),h=f.translate,i=g.translate,j=f.rotate,k=g.rotate,l=f.skew,m=g.skew,n=f.scale,o=g.scale;return h[0]!=i[0]||h[1]!=i[1]?(d.push("translate(",null,",",null,")"),e.push({i:1,x:kd(h[0],i[0])},{i:3,x:kd(h[1],i[1])})):i[0]||i[1]?d.push("translate("+i+")"):d.push(""),j!=k?(j-k>180?k+=360:k-j>180&&(j+=360),e.push({i:d.push(d.pop()+"rotate(",null,")")-2,x:kd(j,k)})):k&&d.push(d.pop()+"rotate("+k+")"),l!=m?e.push({i:d.push(d.pop()+"skewX(",null,")")-2,x:kd(l,m)}):m&&d.push(d.pop()+"skewX("+m+")"),n[0]!=o[0]||n[1]!=o[1]?(c=d.push(d.pop()+"scale(",null,",",null,")"),e.push({i:c-4,x:kd(n[0],o[0])},{i:c-2,x:kd(n[1],o[1])})):1==o[0]&&1==o[1]||d.push(d.pop()+"scale("+o+")"),c=e.length,function(a){for(var b,f=-1;++f<c;)d[(b=e[f]).i]=b.x(a);return d.join("")}}function Kd(a,b){return b=b-(a=+a)?1/(b-a):0,function(c){return(c-a)*b}}function Ld(a,b){return b=b-(a=+a)?1/(b-a):0,function(c){return Math.max(0,Math.min(1,(c-a)*b))}}function Md(a){for(var b=a.source,c=a.target,d=Od(b,c),e=[b];b!==d;)b=b.parent,e.push(b);for(var f=e.length;c!==d;)e.splice(f,0,c),c=c.parent;return e}function Nd(a){for(var b=[],c=a.parent;null!=c;)b.push(a),a=c,c=c.parent;return b.push(a),b}function Od(a,b){if(a===b)return a;for(var c=Nd(a),d=Nd(b),e=c.pop(),f=d.pop(),g=null;e===f;)g=e,e=c.pop(),f=d.pop();return g}function Pd(a){a.fixed|=2}function Qd(a){a.fixed&=-7}function Rd(a){a.fixed|=4,a.px=a.x,a.py=a.y}function Sd(a){a.fixed&=-5}function Td(a,b,c){var d=0,e=0;if(a.charge=0,!a.leaf)for(var f,g=a.nodes,h=g.length,i=-1;++i<h;)null!=(f=g[i])&&(Td(f,b,c),a.charge+=f.charge,d+=f.charge*f.cx,e+=f.charge*f.cy);if(a.point){a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5);var j=b*c[a.point.index];a.charge+=a.pointCharge=j,d+=j*a.point.x,e+=j*a.point.y}a.cx=d/a.charge,a.cy=e/a.charge}function Ud(a,b){return Sf.rebind(a,b,"sort","children","value"),a.nodes=a,a.links=$d,a}function Vd(a,b){for(var c=[a];null!=(a=c.pop());)if(b(a),(e=a.children)&&(d=e.length))for(var d,e;--d>=0;)c.push(e[d])}function Wd(a,b){for(var c=[a],d=[];null!=(a=c.pop());)if(d.push(a),(f=a.children)&&(e=f.length))for(var e,f,g=-1;++g<e;)c.push(f[g]);for(;null!=(a=d.pop());)b(a)}function Xd(a){return a.children}function Yd(a){return a.value}function Zd(a,b){return b.value-a.value}function $d(a){return Sf.merge(a.map(function(a){return(a.children||[]).map(function(b){return{source:a,target:b}})}))}function _d(a){return a.x}function ae(a){return a.y}function be(a,b,c){a.y0=b,a.y=c}function ce(a){return Sf.range(a.length)}function de(a){for(var b=-1,c=a[0].length,d=[];++b<c;)d[b]=0;return d}function ee(a){for(var b,c=1,d=0,e=a[0][1],f=a.length;c<f;++c)(b=a[c][1])>e&&(d=c,e=b);return d}function fe(a){return a.reduce(ge,0)}function ge(a,b){return a+b[1]}function he(a,b){return ie(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function ie(a,b){for(var c=-1,d=+a[0],e=(a[1]-d)/b,f=[];++c<=b;)f[c]=e*c+d;return f}function je(a){return[Sf.min(a),Sf.max(a)]}function ke(a,b){return a.value-b.value}function le(a,b){var c=a._pack_next;a._pack_next=b,b._pack_prev=a,b._pack_next=c,c._pack_prev=b}function me(a,b){a._pack_next=b,b._pack_prev=a}function ne(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.r+b.r;return.999*e*e>c*c+d*d}function oe(a){function b(a){k=Math.min(a.x-a.r,k),l=Math.max(a.x+a.r,l),m=Math.min(a.y-a.r,m),n=Math.max(a.y+a.r,n)}if((c=a.children)&&(j=c.length)){var c,d,e,f,g,h,i,j,k=1/0,l=-1/0,m=1/0,n=-1/0;if(c.forEach(pe),d=c[0],d.x=-d.r,d.y=0,b(d),j>1&&(e=c[1],e.x=e.r,e.y=0,b(e),j>2))for(f=c[2],se(d,e,f),b(f),le(d,f),d._pack_prev=f,le(f,e),e=d._pack_next,g=3;g<j;g++){se(d,e,f=c[g]);var o=0,p=1,q=1;for(h=e._pack_next;h!==e;h=h._pack_next,p++)if(ne(h,f)){o=1;break}if(1==o)for(i=d._pack_prev;i!==h._pack_prev&&!ne(i,f);i=i._pack_prev,q++);o?(p<q||p==q&&e.r<d.r?me(d,e=h):me(d=i,e),g--):(le(d,f),e=f,b(f))}var r=(k+l)/2,s=(m+n)/2,t=0;for(g=0;g<j;g++)f=c[g],f.x-=r,f.y-=s,t=Math.max(t,f.r+Math.sqrt(f.x*f.x+f.y*f.y));a.r=t,c.forEach(qe)}}function pe(a){a._pack_next=a._pack_prev=a}function qe(a){delete a._pack_next,delete a._pack_prev}function re(a,b,c,d){var e=a.children;if(a.x=b+=d*a.x,a.y=c+=d*a.y,a.r*=d,e)for(var f=-1,g=e.length;++f<g;)re(e[f],b,c,d)}function se(a,b,c){var d=a.r+c.r,e=b.x-a.x,f=b.y-a.y;if(d&&(e||f)){var g=b.r+c.r,h=e*e+f*f;g*=g,d*=d;var i=.5+(d-g)/(2*h),j=Math.sqrt(Math.max(0,2*g*(d+h)-(d-=h)*d-g*g))/(2*h);c.x=a.x+i*e+j*f,c.y=a.y+i*f-j*e}else c.x=a.x+d,c.y=a.y}function te(a,b){return a.parent==b.parent?1:2}function ue(a){var b=a.children;return b.length?b[0]:a.t}function ve(a){var b,c=a.children;return(b=c.length)?c[b-1]:a.t}function we(a,b,c){var d=c/(b.i-a.i);b.c-=d,b.s+=c,a.c+=d,b.z+=c,b.m+=c}function xe(a){for(var b,c=0,d=0,e=a.children,f=e.length;--f>=0;)b=e[f],b.z+=c,b.m+=c,c+=b.s+(d+=b.c)}function ye(a,b,c){return a.a.parent===b.parent?a.a:c}function ze(a){return 1+Sf.max(a,function(a){return a.y})}function Ae(a){return a.reduce(function(a,b){return a+b.x},0)/a.length}function Be(a){var b=a.children;return b&&b.length?Be(b[0]):a}function Ce(a){var b,c=a.children;return c&&(b=c.length)?Ce(c[b-1]):a}function De(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function Ee(a,b){var c=a.x+b[3],d=a.y+b[0],e=a.dx-b[1]-b[3],f=a.dy-b[0]-b[2];return e<0&&(c+=e/2,e=0),f<0&&(d+=f/2,f=0),{x:c,y:d,dx:e,dy:f}}function Fe(a){var b=a[0],c=a[a.length-1];return b<c?[b,c]:[c,b]}function Ge(a){return a.rangeExtent?a.rangeExtent():Fe(a.range())}function He(a,b,c,d){var e=c(a[0],a[1]),f=d(b[0],b[1]);return function(a){return f(e(a))}}function Ie(a,b){var c,d=0,e=a.length-1,f=a[d],g=a[e];return g<f&&(c=d,d=e,e=c,c=f,f=g,g=c),a[d]=b.floor(f),a[e]=b.ceil(g),a}function Je(a){return a?{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}:hi}function Ke(a,b,c,d){var e=[],f=[],g=0,h=Math.min(a.length,b.length)-1;for(a[h]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());++g<=h;)e.push(c(a[g-1],a[g])),f.push(d(b[g-1],b[g]));return function(b){var c=Sf.bisect(a,b,1,h)-1;return f[c](e[c](b))}}function Le(a,b,c,d){function e(){var e=Math.min(a.length,b.length)>2?Ke:He,i=d?Ld:Kd;return g=e(a,b,i,c),h=e(b,a,i,md),f}function f(a){return g(a)}var g,h;return f.invert=function(a){return h(a)},f.domain=function(b){return arguments.length?(a=b.map(Number),e()):a},f.range=function(a){return arguments.length?(b=a,e()):b},f.rangeRound=function(a){return f.range(a).interpolate(Ed)},f.clamp=function(a){return arguments.length?(d=a,e()):d},f.interpolate=function(a){return arguments.length?(c=a,e()):c},f.ticks=function(b){return Pe(a,b)},f.tickFormat=function(b,c){return Qe(a,b,c)},f.nice=function(b){return Ne(a,b),e()},f.copy=function(){return Le(a,b,c,d)},e()}function Me(a,b){return Sf.rebind(a,b,"range","rangeRound","interpolate","clamp")}function Ne(a,b){return Ie(a,Je(Oe(a,b)[2]))}function Oe(a,b){null==b&&(b=10);var c=Fe(a),d=c[1]-c[0],e=Math.pow(10,Math.floor(Math.log(d/b)/Math.LN10)),f=b/d*e;return f<=.15?e*=10:f<=.35?e*=5:f<=.75&&(e*=2),c[0]=Math.ceil(c[0]/e)*e,c[1]=Math.floor(c[1]/e)*e+.5*e,c[2]=e,c}function Pe(a,b){return Sf.range.apply(Sf,Oe(a,b))}function Qe(a,b,c){var d=Oe(a,b);if(c){var e=Xg.exec(c);if(e.shift(),"s"===e[8]){var f=Sf.formatPrefix(Math.max(cg(d[0]),cg(d[1])));return e[7]||(e[7]="."+Re(f.scale(d[2]))),e[8]="f",c=Sf.format(e.join("")),function(a){return c(f.scale(a))+f.symbol}}e[7]||(e[7]="."+Se(e[8],d)),c=e.join("")}else c=",."+Re(d[2])+"f";return Sf.format(c)}function Re(a){return-Math.floor(Math.log(a)/Math.LN10+.01)}function Se(a,b){var c=Re(b[2]);return a in ii?Math.abs(c-Re(Math.max(cg(b[0]),cg(b[1]))))+ +("e"!==a):c-2*("%"===a)}function Te(a,b,c,d){function e(a){return(c?Math.log(a<0?0:a):-Math.log(a>0?0:-a))/Math.log(b)}function f(a){return c?Math.pow(b,a):-Math.pow(b,-a)}function g(b){return a(e(b))}return g.invert=function(b){return f(a.invert(b))},g.domain=function(b){return arguments.length?(c=b[0]>=0,a.domain((d=b.map(Number)).map(e)),g):d},g.base=function(c){return arguments.length?(b=+c,a.domain(d.map(e)),g):b},g.nice=function(){var b=Ie(d.map(e),c?Math:ki);return a.domain(b),d=b.map(f),g},g.ticks=function(){var a=Fe(d),g=[],h=a[0],i=a[1],j=Math.floor(e(h)),k=Math.ceil(e(i)),l=b%1?2:b;if(isFinite(k-j)){if(c){for(;j<k;j++)for(var m=1;m<l;m++)g.push(f(j)*m);g.push(f(j))}else for(g.push(f(j));j++<k;)for(var m=l-1;m>0;m--)g.push(f(j)*m);for(j=0;g[j]<h;j++);for(k=g.length;g[k-1]>i;k--);g=g.slice(j,k)}return g},g.tickFormat=function(a,b){if(!arguments.length)return ji;arguments.length<2?b=ji:"function"!=typeof b&&(b=Sf.format(b));var d,h=Math.max(.1,a/g.ticks().length),i=c?(d=1e-12,Math.ceil):(d=-1e-12,Math.floor);return function(a){return a/f(i(e(a)+d))<=h?b(a):""}},g.copy=function(){return Te(a.copy(),b,c,d)},Me(g,a)}function Ue(a,b,c){function d(b){return a(e(b))}var e=Ve(b),f=Ve(1/b);return d.invert=function(b){return f(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain((c=b.map(Number)).map(e)),d):c},d.ticks=function(a){return Pe(c,a)},d.tickFormat=function(a,b){return Qe(c,a,b)},d.nice=function(a){return d.domain(Ne(c,a))},d.exponent=function(g){return arguments.length?(e=Ve(b=g),f=Ve(1/b),a.domain(c.map(e)),d):b},d.copy=function(){return Ue(a.copy(),b,c)},Me(d,a)}function Ve(a){return function(b){return b<0?-Math.pow(-b,a):Math.pow(b,a)}}function We(a,b){function c(c){return f[((e.get(c)||("range"===b.t?e.set(c,a.push(c)):NaN))-1)%f.length]}function d(b,c){return Sf.range(a.length).map(function(a){return b+c*a})}var e,f,h;return c.domain=function(d){if(!arguments.length)return a;a=[],e=new g;for(var f,h=-1,i=d.length;++h<i;)e.has(f=d[h])||e.set(f,a.push(f));return c[b.t].apply(c,b.a)},c.range=function(a){return arguments.length?(f=a,h=0,b={t:"range",a:arguments},c):f},c.rangePoints=function(e,g){arguments.length<2&&(g=0);var i=e[0],j=e[1],k=(j-i)/(Math.max(1,a.length-1)+g);return f=d(a.length<2?(i+j)/2:i+k*g/2,k),h=0,b={t:"rangePoints",a:arguments},c},c.rangeBands=function(e,g,i){arguments.length<2&&(g=0),arguments.length<3&&(i=g);var j=e[1]<e[0],k=e[j-0],l=e[1-j],m=(l-k)/(a.length-g+2*i);return f=d(k+m*i,m),j&&f.reverse(),h=m*(1-g),b={t:"rangeBands",a:arguments},c},c.rangeRoundBands=function(e,g,i){arguments.length<2&&(g=0),arguments.length<3&&(i=g);var j=e[1]<e[0],k=e[j-0],l=e[1-j],m=Math.floor((l-k)/(a.length-g+2*i)),n=l-k-(a.length-g)*m;return f=d(k+Math.round(n/2),m),j&&f.reverse(),h=Math.round(m*(1-g)),b={t:"rangeRoundBands",a:arguments},c},c.rangeBand=function(){return h},c.rangeExtent=function(){return Fe(b.a[0])},c.copy=function(){return We(a,b)},c.domain(a)}function Xe(c,d){function e(){var a=0,b=d.length;for(g=[];++a<b;)g[a-1]=Sf.quantile(c,a/b);return f}function f(a){if(!isNaN(a=+a))return d[Sf.bisect(g,a)]}var g;return f.domain=function(d){return arguments.length?(c=d.filter(b).sort(a),e()):c},f.range=function(a){return arguments.length?(d=a,e()):d},f.quantiles=function(){return g},f.invertExtent=function(a){return a=d.indexOf(a),a<0?[NaN,NaN]:[a>0?g[a-1]:c[0],a<g.length?g[a]:c[c.length-1]]},f.copy=function(){return Xe(c,d)},e()}function Ye(a,b,c){function d(b){return c[Math.max(0,Math.min(g,Math.floor(f*(b-a))))]}function e(){return f=c.length/(b-a),g=c.length-1,d}var f,g;return d.domain=function(c){return arguments.length?(a=+c[0],b=+c[c.length-1],e()):[a,b]},d.range=function(a){return arguments.length?(c=a,e()):c},d.invertExtent=function(b){return b=c.indexOf(b),b=b<0?NaN:b/f+a,[b,b+1/f]},d.copy=function(){return Ye(a,b,c)},e()}function Ze(a,b){function c(c){if(c<=c)return b[Sf.bisect(a,c)]}return c.domain=function(b){return arguments.length?(a=b,c):a},c.range=function(a){return arguments.length?(b=a,c):b},c.invertExtent=function(c){return c=b.indexOf(c),[a[c-1],a[c]]},c.copy=function(){return Ze(a,b)},c}function $e(a){function b(a){return+a}return b.invert=b,b.domain=b.range=function(c){return arguments.length?(a=c.map(b),b):a},b.ticks=function(b){return Pe(a,b)},b.tickFormat=function(b,c){return Qe(a,b,c)},b.copy=function(){return $e(a)},b}function _e(a){return a.innerRadius}function af(a){return a.outerRadius}function bf(a){return a.startAngle}function cf(a){return a.endAngle}function df(a){function b(b){function g(){j.push("M",f(a(k),h))}for(var i,j=[],k=[],l=-1,m=b.length,n=wa(c),o=wa(d);++l<m;)e.call(this,i=b[l],l)?k.push([+n.call(this,i,l),+o.call(this,i,l)]):k.length&&(g(),k=[]);return k.length&&g(),j.length?j.join(""):null}var c=xc,d=yc,e=xb,f=ef,g=f.key,h=.7;return b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b.defined=function(a){return arguments.length?(e=a,b):e},b.interpolate=function(a){return arguments.length?(g="function"==typeof a?f=a:(f=ri.get(a)||ef).key,b):g},b.tension=function(a){return arguments.length?(h=a,b):h},b}function ef(a){return a.join("L")}function ff(a){return ef(a)+"Z"}function gf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d[0]+(d=a[b])[0])/2,"V",d[1]);return c>1&&e.push("H",d[0]),e.join("")}function hf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("V",(d=a[b])[1],"H",d[0]);return e.join("")}function jf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d=a[b])[0],"V",d[1]);return e.join("")}function kf(a,b){return a.length<4?ef(a):a[1]+nf(a.slice(1,a.length-1),of(a,b))}function lf(a,b){return a.length<3?ef(a):a[0]+nf((a.push(a[0]),a),of([a[a.length-2]].concat(a,[a[1]]),b))}function mf(a,b){return a.length<3?ef(a):a[0]+nf(a,of(a,b))}function nf(a,b){if(b.length<1||a.length!=b.length&&a.length!=b.length+2)return ef(a);var c=a.length!=b.length,d="",e=a[0],f=a[1],g=b[0],h=g,i=1;if(c&&(d+="Q"+(f[0]-2*g[0]/3)+","+(f[1]-2*g[1]/3)+","+f[0]+","+f[1],e=a[1],i=2),b.length>1){h=b[1],f=a[i],i++,d+="C"+(e[0]+g[0])+","+(e[1]+g[1])+","+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1];for(var j=2;j<b.length;j++,i++)f=a[i],h=b[j],d+="S"+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1]}if(c){var k=a[i];d+="Q"+(f[0]+2*h[0]/3)+","+(f[1]+2*h[1]/3)+","+k[0]+","+k[1]}return d}function of(a,b){for(var c,d=[],e=(1-b)/2,f=a[0],g=a[1],h=1,i=a.length;++h<i;)c=f,f=g,g=a[h],d.push([e*(g[0]-c[0]),e*(g[1]-c[1])]);return d}function pf(a){if(a.length<3)return ef(a);var b=1,c=a.length,d=a[0],e=d[0],f=d[1],g=[e,e,e,(d=a[1])[0]],h=[f,f,f,d[1]],i=[e,",",f,"L",tf(ui,g),",",tf(ui,h)];for(a.push(a[c-1]);++b<=c;)d=a[b],g.shift(),g.push(d[0]),h.shift(),h.push(d[1]),uf(i,g,h);return a.pop(),i.push("L",d),i.join("")}function qf(a){if(a.length<4)return ef(a);for(var b,c=[],d=-1,e=a.length,f=[0],g=[0];++d<3;)b=a[d],f.push(b[0]),g.push(b[1]);for(c.push(tf(ui,f)+","+tf(ui,g)),--d;++d<e;)b=a[d],f.shift(),f.push(b[0]),g.shift(),g.push(b[1]),uf(c,f,g);return c.join("")}function rf(a){for(var b,c,d=-1,e=a.length,f=e+4,g=[],h=[];++d<4;)c=a[d%e],g.push(c[0]),h.push(c[1]);for(b=[tf(ui,g),",",tf(ui,h)],--d;++d<f;)c=a[d%e],g.shift(),g.push(c[0]),h.shift(),h.push(c[1]),uf(b,g,h);return b.join("")}function sf(a,b){var c=a.length-1;if(c)for(var d,e,f=a[0][0],g=a[0][1],h=a[c][0]-f,i=a[c][1]-g,j=-1;++j<=c;)d=a[j],e=j/c,d[0]=b*d[0]+(1-b)*(f+e*h),d[1]=b*d[1]+(1-b)*(g+e*i);return pf(a)}function tf(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function uf(a,b,c){a.push("C",tf(si,b),",",tf(si,c),",",tf(ti,b),",",tf(ti,c),",",tf(ui,b),",",tf(ui,c))}function vf(a,b){return(b[1]-a[1])/(b[0]-a[0])}function wf(a){for(var b=0,c=a.length-1,d=[],e=a[0],f=a[1],g=d[0]=vf(e,f);++b<c;)d[b]=(g+(g=vf(e=f,f=a[b+1])))/2;return d[b]=g,d}function xf(a){for(var b,c,d,e,f=[],g=wf(a),h=-1,i=a.length-1;++h<i;)b=vf(a[h],a[h+1]),cg(b)<xg?g[h]=g[h+1]=0:(c=g[h]/b,d=g[h+1]/b,(e=c*c+d*d)>9&&(e=3*b/Math.sqrt(e),g[h]=e*c,g[h+1]=e*d));for(h=-1;++h<=i;)e=(a[Math.min(i,h+1)][0]-a[Math.max(0,h-1)][0])/(6*(1+g[h]*g[h])),f.push([e||0,g[h]*e||0]);return f}function yf(a){return a.length<3?ef(a):a[0]+nf(a,xf(a))}function zf(a){for(var b,c,d,e=-1,f=a.length;++e<f;)b=a[e],c=b[0],d=b[1]+pi,b[0]=c*Math.cos(d),b[1]=c*Math.sin(d);return a}function Af(a){function b(b){function i(){p.push("M",h(a(r),l),k,j(a(q.reverse()),l),"Z")}for(var m,n,o,p=[],q=[],r=[],s=-1,t=b.length,u=wa(c),v=wa(e),w=c===d?function(){return n}:wa(d),x=e===f?function(){return o}:wa(f);++s<t;)g.call(this,m=b[s],s)?(q.push([n=+u.call(this,m,s),o=+v.call(this,m,s)]),r.push([+w.call(this,m,s),+x.call(this,m,s)])):q.length&&(i(),q=[],r=[]);return q.length&&i(),p.length?p.join(""):null}var c=xc,d=xc,e=0,f=yc,g=xb,h=ef,i=h.key,j=h,k="L",l=.7;return b.x=function(a){return arguments.length?(c=d=a,b):d},b.x0=function(a){return arguments.length?(c=a,b):c},b.x1=function(a){return arguments.length?(d=a,b):d},b.y=function(a){return arguments.length?(e=f=a,b):f},b.y0=function(a){return arguments.length?(e=a,b):e},b.y1=function(a){return arguments.length?(f=a,b):f},b.defined=function(a){return arguments.length?(g=a,b):g},b.interpolate=function(a){return arguments.length?(i="function"==typeof a?h=a:(h=ri.get(a)||ef).key,j=h.reverse||h,k=h.closed?"M":"L",b):i},b.tension=function(a){return arguments.length?(l=a,b):l},b}function Bf(a){return a.radius}function Cf(a){return[a.x,a.y]}function Df(a){return function(){var b=a.apply(this,arguments),c=b[0],d=b[1]+pi;return[c*Math.cos(d),c*Math.sin(d)]}}function Ef(){return 64}function Ff(){return"circle"}function Gf(a){var b=Math.sqrt(a/ug);return"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+-b+"A"+b+","+b+" 0 1,1 0,"+b+"Z"}function Hf(a,b){return hg(a,Ai),a.id=b,a}function If(a,b,c,d){var e=a.id;return K(a,"function"==typeof c?function(a,f,g){a.__transition__[e].tween.set(b,d(c.call(a,a.__data__,f,g)))}:(c=d(c),function(a){a.__transition__[e].tween.set(b,c)}))}function Jf(a){return null==a&&(a=""),function(){this.textContent=a}}function Kf(a,b,c,d){var e=a.__transition__||(a.__transition__={active:0,count:0}),f=e[c];if(!f){var h=d.time;f=e[c]={tween:new g,time:h,ease:d.ease,delay:d.delay,duration:d.duration},++e.count,Sf.timer(function(d){function g(d){if(e.active>c)return j();e.active=c,f.event&&f.event.start.call(a,k,b),f.tween.forEach(function(c,d){(d=d.call(a,k,b))&&p.push(d)}),Sf.timer(function(){return o.c=i(d||1)?xb:i,1},0,h)}function i(d){if(e.active!==c)return j();for(var g=d/n,h=l(g),i=p.length;i>0;)p[--i].call(a,h);return g>=1?(f.event&&f.event.end.call(a,k,b),j()):void 0}function j(){return--e.count?delete e[c]:delete a.__transition__,1}var k=a.__data__,l=f.ease,m=f.delay,n=f.duration,o=Ug,p=[];if(o.t=m+h,m<=d)return g(d-m);o.c=g},0,h)}}function Lf(a,b){a.attr("transform",function(a){return"translate("+b(a)+",0)"})}function Mf(a,b){a.attr("transform",function(a){return"translate(0,"+b(a)+")"})}function Nf(a){return a.toISOString()}function Of(a,b,c){function d(b){return a(b)}function e(a,c){var d=a[1]-a[0],e=d/c,f=Sf.bisect(Ji,e);return f==Ji.length?[b.year,Oe(a.map(function(a){return a/31536e6}),c)[2]]:f?b[e/Ji[f-1]<Ji[f]/e?f-1:f]:[Mi,Oe(a,c)[2]]}return d.invert=function(b){return Pf(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain(b),d):a.domain().map(Pf)},d.nice=function(a,b){function c(c){return!isNaN(c)&&!a.range(c,Pf(+c+1),b).length}var f=d.domain(),g=Fe(f),h=null==a?e(g,10):"number"==typeof a&&e(g,a);return h&&(a=h[0],b=h[1]),d.domain(Ie(f,b>1?{floor:function(b){for(;c(b=a.floor(b));)b=Pf(b-1);return b},ceil:function(b){for(;c(b=a.ceil(b));)b=Pf(+b+1);return b}}:a))},d.ticks=function(a,b){var c=Fe(d.domain()),f=null==a?e(c,10):"number"==typeof a?e(c,a):!a.range&&[{range:a},b];return f&&(a=f[0],b=f[1]),a.range(c[0],Pf(+c[1]+1),b<1?1:b)},d.tickFormat=function(){return c},d.copy=function(){return Of(a.copy(),b,c)},Me(d,a)}function Pf(a){return new Date(a)}function Qf(a){return JSON.parse(a.responseText)}function Rf(a){var b=Vf.createRange();return b.selectNode(Vf.body),b.createContextualFragment(a.responseText)}var Sf={version:"3.4.11"};Date.now||(Date.now=function(){return+new Date});var Tf=[].slice,Uf=function(a){return Tf.call(a)},Vf=document,Wf=Vf.documentElement,Xf=window;try{Uf(Wf.childNodes)[0].nodeType}catch(a){Uf=function(a){for(var b=a.length,c=new Array(b);b--;)c[b]=a[b];return c}}try{Vf.createElement("div").style.setProperty("opacity",0,"")}catch(a){var Yf=Xf.Element.prototype,Zf=Yf.setAttribute,$f=Yf.setAttributeNS,_f=Xf.CSSStyleDeclaration.prototype,ag=_f.setProperty;Yf.setAttribute=function(a,b){Zf.call(this,a,b+"")},Yf.setAttributeNS=function(a,b,c){$f.call(this,a,b,c+"")},_f.setProperty=function(a,b,c){ag.call(this,a,b+"",c)}}Sf.ascending=a,Sf.descending=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN},Sf.min=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f&&!(null!=(c=a[e])&&c<=c);)c=void 0;for(;++e<f;)null!=(d=a[e])&&c>d&&(c=d)}else{for(;++e<f&&!(null!=(c=b.call(a,a[e],e))&&c<=c);)c=void 0;for(;++e<f;)null!=(d=b.call(a,a[e],e))&&c>d&&(c=d)}return c},Sf.max=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f&&!(null!=(c=a[e])&&c<=c);)c=void 0;for(;++e<f;)null!=(d=a[e])&&d>c&&(c=d)}else{for(;++e<f&&!(null!=(c=b.call(a,a[e],e))&&c<=c);)c=void 0;for(;++e<f;)null!=(d=b.call(a,a[e],e))&&d>c&&(c=d)}return c},Sf.extent=function(a,b){var c,d,e,f=-1,g=a.length;if(1===arguments.length){for(;++f<g&&!(null!=(c=e=a[f])&&c<=c);)c=e=void 0;for(;++f<g;)null!=(d=a[f])&&(c>d&&(c=d),e<d&&(e=d))}else{for(;++f<g&&!(null!=(c=e=b.call(a,a[f],f))&&c<=c);)c=void 0;for(;++f<g;)null!=(d=b.call(a,a[f],f))&&(c>d&&(c=d),e<d&&(e=d))}return[c,e]},Sf.sum=function(a,b){var c,d=0,e=a.length,f=-1;if(1===arguments.length)for(;++f<e;)isNaN(c=+a[f])||(d+=c);else for(;++f<e;)isNaN(c=+b.call(a,a[f],f))||(d+=c);return d},Sf.mean=function(a,c){var d,e=0,f=a.length,g=-1,h=f;if(1===arguments.length)for(;++g<f;)b(d=a[g])?e+=d:--h;else for(;++g<f;)b(d=c.call(a,a[g],g))?e+=d:--h;return h?e/h:void 0},Sf.quantile=function(a,b){var c=(a.length-1)*b+1,d=Math.floor(c),e=+a[d-1],f=c-d;return f?e+f*(a[d]-e):e},Sf.median=function(c,d){return arguments.length>1&&(c=c.map(d)),c=c.filter(b),c.length?Sf.quantile(c.sort(a),.5):void 0};var bg=c(a);Sf.bisectLeft=bg.left,Sf.bisect=Sf.bisectRight=bg.right,Sf.bisector=function(b){return c(1===b.length?function(c,d){return a(b(c),d)}:b)},Sf.shuffle=function(a){for(var b,c,d=a.length;d;)c=Math.random()*d--|0,b=a[d],a[d]=a[c],a[c]=b;return a},Sf.permute=function(a,b){for(var c=b.length,d=new Array(c);c--;)d[c]=a[b[c]];return d},Sf.pairs=function(a){for(var b=0,c=a.length-1,d=a[0],e=new Array(c<0?0:c);b<c;)e[b]=[d,d=a[++b]];return e},Sf.zip=function(){if(!(e=arguments.length))return[];for(var a=-1,b=Sf.min(arguments,d),c=new Array(b);++a<b;)for(var e,f=-1,g=c[a]=new Array(e);++f<e;)g[f]=arguments[f][a];return c},Sf.transpose=function(a){return Sf.zip.apply(Sf,a)},Sf.keys=function(a){var b=[];for(var c in a)b.push(c);return b},Sf.values=function(a){var b=[];for(var c in a)b.push(a[c]);return b},Sf.entries=function(a){var b=[];for(var c in a)b.push({key:c,value:a[c]});return b},Sf.merge=function(a){for(var b,c,d,e=a.length,f=-1,g=0;++f<e;)g+=a[f].length;for(c=new Array(g);--e>=0;)for(d=a[e],b=d.length;--b>=0;)c[--g]=d[b];return c};var cg=Math.abs;Sf.range=function(a,b,c){if(arguments.length<3&&(c=1,arguments.length<2&&(b=a,a=0)),(b-a)/c==1/0)throw new Error("infinite range");var d,f=[],g=e(cg(c)),h=-1;if(a*=g,b*=g,c*=g,c<0)for(;(d=a+c*++h)>b;)f.push(d/g);else for(;(d=a+c*++h)<b;)f.push(d/g);return f},Sf.map=function(a){var b=new g;if(a instanceof g)a.forEach(function(a,c){b.set(a,c)});else for(var c in a)b.set(c,a[c]);return b},f(g,{has:h,get:function(a){return this[dg+a]},set:function(a,b){return this[dg+a]=b},remove:i,keys:j,values:function(){var a=[];return this.forEach(function(b,c){a.push(c)}),a},entries:function(){var a=[];return this.forEach(function(b,c){a.push({key:b,value:c})}),a},size:k,empty:l,forEach:function(a){for(var b in this)b.charCodeAt(0)===eg&&a.call(this,b.substring(1),this[b])}});var dg="\0",eg=dg.charCodeAt(0);Sf.nest=function(){function a(b,h,i){if(i>=f.length)return d?d.call(e,h):c?h.sort(c):h;for(var j,k,l,m,n=-1,o=h.length,p=f[i++],q=new g;++n<o;)(m=q.get(j=p(k=h[n])))?m.push(k):q.set(j,[k]);return b?(k=b(),l=function(c,d){k.set(c,a(b,d,i))}):(k={},l=function(c,d){k[c]=a(b,d,i)}),q.forEach(l),k}function b(a,c){if(c>=f.length)return a;var d=[],e=h[c++];return a.forEach(function(a,e){d.push({key:a,values:b(e,c)})}),e?d.sort(function(a,b){return e(a.key,b.key)}):d}var c,d,e={},f=[],h=[];return e.map=function(b,c){return a(c,b,0)},e.entries=function(c){return b(a(Sf.map,c,0),0)},e.key=function(a){return f.push(a),e},e.sortKeys=function(a){return h[f.length-1]=a,e},e.sortValues=function(a){return c=a,e},e.rollup=function(a){return d=a,e},e},Sf.set=function(a){var b=new m;if(a)for(var c=0,d=a.length;c<d;++c)b.add(a[c]);return b},f(m,{has:h,add:function(a){return this[dg+a]=!0,a},remove:function(a){return(a=dg+a)in this&&delete this[a]},values:j,size:k,empty:l,forEach:function(a){for(var b in this)b.charCodeAt(0)===eg&&a.call(this,b.substring(1))}}),Sf.behavior={},Sf.rebind=function(a,b){for(var c,d=1,e=arguments.length;++d<e;)a[c=arguments[d]]=n(a,b,b[c]);return a};var fg=["webkit","ms","moz","Moz","o","O"];Sf.dispatch=function(){for(var a=new q,b=-1,c=arguments.length;++b<c;)a[arguments[b]]=r(a);return a},q.prototype.on=function(a,b){var c=a.indexOf("."),d="";if(c>=0&&(d=a.substring(c+1),a=a.substring(0,c)),a)return arguments.length<2?this[a].on(d):this[a].on(d,b);if(2===arguments.length){if(null==b)for(a in this)this.hasOwnProperty(a)&&this[a].on(d,null);return this}},Sf.event=null,Sf.requote=function(a){return a.replace(gg,"\\$&")};var gg=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,hg={}.__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=b[c]},ig=function(a,b){return b.querySelector(a)},jg=function(a,b){return b.querySelectorAll(a)},kg=Wf.matches||Wf[o(Wf,"matchesSelector")],lg=function(a,b){return kg.call(a,b)};"function"==typeof Sizzle&&(ig=function(a,b){return Sizzle(a,b)[0]||null},jg=Sizzle,lg=Sizzle.matchesSelector),Sf.selection=function(){return pg};var mg=Sf.selection.prototype=[];mg.select=function(a){var b,c,d,e,f=[];a=w(a);for(var g=-1,h=this.length;++g<h;){f.push(b=[]),b.parentNode=(d=this[g]).parentNode;for(var i=-1,j=d.length;++i<j;)(e=d[i])?(b.push(c=a.call(e,e.__data__,i,g)),c&&"__data__"in e&&(c.__data__=e.__data__)):b.push(null)}return v(f)},mg.selectAll=function(a){var b,c,d=[];a=x(a);for(var e=-1,f=this.length;++e<f;)for(var g=this[e],h=-1,i=g.length;++h<i;)(c=g[h])&&(d.push(b=Uf(a.call(c,c.__data__,h,e))),b.parentNode=c);return v(d)};var ng={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};Sf.ns={prefix:ng,qualify:function(a){var b=a.indexOf(":"),c=a;return b>=0&&(c=a.substring(0,b),a=a.substring(b+1)),ng.hasOwnProperty(c)?{space:ng[c],local:a}:a}},mg.attr=function(a,b){if(arguments.length<2){if("string"==typeof a){var c=this.node();return a=Sf.ns.qualify(a),a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}for(b in a)this.each(y(b,a[b]));return this}return this.each(y(a,b))},mg.classed=function(a,b){if(arguments.length<2){
if("string"==typeof a){var c=this.node(),d=(a=B(a)).length,e=-1;if(b=c.classList){for(;++e<d;)if(!b.contains(a[e]))return!1}else for(b=c.getAttribute("class");++e<d;)if(!A(a[e]).test(b))return!1;return!0}for(b in a)this.each(C(b,a[b]));return this}return this.each(C(a,b))},mg.style=function(a,b,c){var d=arguments.length;if(d<3){if("string"!=typeof a){d<2&&(b="");for(c in a)this.each(E(c,a[c],b));return this}if(d<2)return Xf.getComputedStyle(this.node(),null).getPropertyValue(a);c=""}return this.each(E(a,b,c))},mg.property=function(a,b){if(arguments.length<2){if("string"==typeof a)return this.node()[a];for(b in a)this.each(F(b,a[b]));return this}return this.each(F(a,b))},mg.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent},mg.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML},mg.append=function(a){return a=G(a),this.select(function(){return this.appendChild(a.apply(this,arguments))})},mg.insert=function(a,b){return a=G(a),b=w(b),this.select(function(){return this.insertBefore(a.apply(this,arguments),b.apply(this,arguments)||null)})},mg.remove=function(){return this.each(function(){var a=this.parentNode;a&&a.removeChild(this)})},mg.data=function(a,b){function c(a,c){var d,e,f,h=a.length,l=c.length,m=Math.min(h,l),n=new Array(l),o=new Array(l),p=new Array(h);if(b){var q,r=new g,s=new g,t=[];for(d=-1;++d<h;)q=b.call(e=a[d],e.__data__,d),r.has(q)?p[d]=e:r.set(q,e),t.push(q);for(d=-1;++d<l;)q=b.call(c,f=c[d],d),(e=r.get(q))?(n[d]=e,e.__data__=f):s.has(q)||(o[d]=H(f)),s.set(q,f),r.remove(q);for(d=-1;++d<h;)r.has(t[d])&&(p[d]=a[d])}else{for(d=-1;++d<m;)e=a[d],f=c[d],e?(e.__data__=f,n[d]=e):o[d]=H(f);for(;d<l;++d)o[d]=H(c[d]);for(;d<h;++d)p[d]=a[d]}o.update=n,o.parentNode=n.parentNode=p.parentNode=a.parentNode,i.push(o),j.push(n),k.push(p)}var d,e,f=-1,h=this.length;if(!arguments.length){for(a=new Array(h=(d=this[0]).length);++f<h;)(e=d[f])&&(a[f]=e.__data__);return a}var i=L([]),j=v([]),k=v([]);if("function"==typeof a)for(;++f<h;)c(d=this[f],a.call(d,d.parentNode.__data__,f));else for(;++f<h;)c(d=this[f],a);return j.enter=function(){return i},j.exit=function(){return k},j},mg.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")},mg.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=I(a));for(var f=0,g=this.length;f<g;f++){e.push(b=[]),b.parentNode=(c=this[f]).parentNode;for(var h=0,i=c.length;h<i;h++)(d=c[h])&&a.call(d,d.__data__,h,f)&&b.push(d)}return v(e)},mg.order=function(){for(var a=-1,b=this.length;++a<b;)for(var c,d=this[a],e=d.length-1,f=d[e];--e>=0;)(c=d[e])&&(f&&f!==c.nextSibling&&f.parentNode.insertBefore(c,f),f=c);return this},mg.sort=function(a){a=J.apply(this,arguments);for(var b=-1,c=this.length;++b<c;)this[b].sort(a);return this.order()},mg.each=function(a){return K(this,function(b,c,d){a.call(b,b.__data__,c,d)})},mg.call=function(a){var b=Uf(arguments);return a.apply(b[0]=this,b),this},mg.empty=function(){return!this.node()},mg.node=function(){for(var a=0,b=this.length;a<b;a++)for(var c=this[a],d=0,e=c.length;d<e;d++){var f=c[d];if(f)return f}return null},mg.size=function(){var a=0;return this.each(function(){++a}),a};var og=[];Sf.selection.enter=L,Sf.selection.enter.prototype=og,og.append=mg.append,og.empty=mg.empty,og.node=mg.node,og.call=mg.call,og.size=mg.size,og.select=function(a){for(var b,c,d,e,f,g=[],h=-1,i=this.length;++h<i;){d=(e=this[h]).update,g.push(b=[]),b.parentNode=e.parentNode;for(var j=-1,k=e.length;++j<k;)(f=e[j])?(b.push(d[j]=c=a.call(e.parentNode,f.__data__,j,h)),c.__data__=f.__data__):b.push(null)}return v(g)},og.insert=function(a,b){return arguments.length<2&&(b=M(this)),mg.insert.call(this,a,b)},mg.transition=function(){for(var a,b,c=wi||++Bi,d=[],e=xi||{time:Date.now(),ease:td,delay:0,duration:250},f=-1,g=this.length;++f<g;){d.push(a=[]);for(var h=this[f],i=-1,j=h.length;++i<j;)(b=h[i])&&Kf(b,i,c,e),a.push(b)}return Hf(d,c)},mg.interrupt=function(){return this.each(N)},Sf.select=function(a){var b=["string"==typeof a?ig(a,Vf):a];return b.parentNode=Wf,v([b])},Sf.selectAll=function(a){var b=Uf("string"==typeof a?jg(a,Vf):a);return b.parentNode=Wf,v([b])};var pg=Sf.select(Wf);mg.on=function(a,b,c){var d=arguments.length;if(d<3){if("string"!=typeof a){d<2&&(b=!1);for(c in a)this.each(O(c,a[c],b));return this}if(d<2)return(d=this.node()["__on"+a])&&d._;c=!1}return this.each(O(a,b,c))};var qg=Sf.map({mouseenter:"mouseover",mouseleave:"mouseout"});qg.forEach(function(a){"on"+a in Vf&&qg.remove(a)});var rg="onselectstart"in Vf?null:o(Wf.style,"userSelect"),sg=0;Sf.mouse=function(a){return S(a,t())};var tg=/WebKit/.test(Xf.navigator.userAgent)?-1:0;Sf.touches=function(a,b){return arguments.length<2&&(b=t().touches),b?Uf(b).map(function(b){var c=S(a,b);return c.identifier=b.identifier,c}):[]},Sf.behavior.drag=function(){function a(){this.on("mousedown.drag",e).on("touchstart.drag",f)}function b(a,b,e,f,g){return function(){function h(){var a,c,d=b(m,p);d&&(a=d[0]-t[0],c=d[1]-t[1],o|=a|c,t=d,n({type:"drag",x:d[0]+j[0],y:d[1]+j[1],dx:a,dy:c}))}function i(){b(m,p)&&(r.on(f+q,null).on(g+q,null),s(o&&Sf.event.target===l),n({type:"dragend"}))}var j,k=this,l=Sf.event.target,m=k.parentNode,n=c.of(k,arguments),o=0,p=a(),q=".drag"+(null==p?"":"-"+p),r=Sf.select(e()).on(f+q,h).on(g+q,i),s=R(),t=b(m,p);d?(j=d.apply(k,arguments),j=[j.x-t[0],j.y-t[1]]):j=[0,0],n({type:"dragstart"})}}var c=u(a,"drag","dragstart","dragend"),d=null,e=b(p,Sf.mouse,V,"mousemove","mouseup"),f=b(T,Sf.touch,U,"touchmove","touchend");return a.origin=function(b){return arguments.length?(d=b,a):d},Sf.rebind(a,c,"on")};var ug=Math.PI,vg=2*ug,wg=ug/2,xg=1e-6,yg=xg*xg,zg=ug/180,Ag=180/ug,Bg=Math.SQRT2,Cg=2,Dg=4;Sf.interpolateZoom=function(a,b){function c(a){var b=a*s;if(r){var c=_(p),g=f/(Cg*m)*(c*aa(Bg*b+p)-$(p));return[d+g*j,e+g*k,f*c/_(Bg*b+p)]}return[d+a*j,e+a*k,f*Math.exp(Bg*b)]}var d=a[0],e=a[1],f=a[2],g=b[0],h=b[1],i=b[2],j=g-d,k=h-e,l=j*j+k*k,m=Math.sqrt(l),n=(i*i-f*f+Dg*l)/(2*f*Cg*m),o=(i*i-f*f-Dg*l)/(2*i*Cg*m),p=Math.log(Math.sqrt(n*n+1)-n),q=Math.log(Math.sqrt(o*o+1)-o),r=q-p,s=(r||Math.log(i/f))/Bg;return c.duration=1e3*s,c},Sf.behavior.zoom=function(){function a(a){a.on(B,j).on(Gg+".zoom",l).on("dblclick.zoom",m).on(E,k)}function b(a){return[(a[0]-y.x)/y.k,(a[1]-y.y)/y.k]}function c(a){return[a[0]*y.k+y.x,a[1]*y.k+y.y]}function d(a){y.k=Math.max(A[0],Math.min(A[1],a))}function e(a,b){b=c(b),y.x+=a[0]-b[0],y.y+=a[1]-b[1]}function f(){v&&v.domain(t.range().map(function(a){return(a-y.x)/y.k}).map(t.invert)),x&&x.domain(w.range().map(function(a){return(a-y.y)/y.k}).map(w.invert))}function g(a){a({type:"zoomstart"})}function h(a){f(),a({type:"zoom",scale:y.k,translate:[y.x,y.y]})}function i(a){a({type:"zoomend"})}function j(){function a(){k=1,e(Sf.mouse(d),m),h(j)}function c(){l.on(C,null).on(D,null),n(k&&Sf.event.target===f),i(j)}var d=this,f=Sf.event.target,j=F.of(d,arguments),k=0,l=Sf.select(Xf).on(C,a).on(D,c),m=b(Sf.mouse(d)),n=R();N.call(d),g(j)}function k(){function a(){var a=Sf.touches(n);return m=y.k,a.forEach(function(a){a.identifier in p&&(p[a.identifier]=b(a))}),a}function c(){var b=Sf.event.target;Sf.select(b).on(u,f).on(v,l),w.push(b);for(var c=Sf.event.changedTouches,g=0,i=c.length;g<i;++g)p[c[g].identifier]=null;var j=a(),k=Date.now();if(1===j.length){if(k-r<500){var m=j[0],n=p[m.identifier];d(2*y.k),e(m,n),s(),h(o)}r=k}else if(j.length>1){var m=j[0],t=j[1],x=m[0]-t[0],z=m[1]-t[1];q=x*x+z*z}}function f(){for(var a,b,c,f,g=Sf.touches(n),i=0,j=g.length;i<j;++i,f=null)if(c=g[i],f=p[c.identifier]){if(b)break;a=c,b=f}if(f){var k=(k=c[0]-a[0])*k+(k=c[1]-a[1])*k,l=q&&Math.sqrt(k/q);a=[(a[0]+c[0])/2,(a[1]+c[1])/2],b=[(b[0]+f[0])/2,(b[1]+f[1])/2],d(l*m)}r=null,e(a,b),h(o)}function l(){if(Sf.event.touches.length){for(var b=Sf.event.changedTouches,c=0,d=b.length;c<d;++c)delete p[b[c].identifier];for(var e in p)return void a()}Sf.selectAll(w).on(t,null),x.on(B,j).on(E,k),z(),i(o)}var m,n=this,o=F.of(n,arguments),p={},q=0,t=".zoom-"+Sf.event.changedTouches[0].identifier,u="touchmove"+t,v="touchend"+t,w=[],x=Sf.select(n).on(B,null).on(E,c),z=R();N.call(n),c(),g(o)}function l(){var a=F.of(this,arguments);q?clearTimeout(q):(n=b(o=p||Sf.mouse(this)),N.call(this),g(a)),q=setTimeout(function(){q=null,i(a)},50),s(),d(Math.pow(2,.002*Eg())*y.k),e(o,n),h(a)}function m(){var a=F.of(this,arguments),c=Sf.mouse(this),f=b(c),j=Math.log(y.k)/Math.LN2;g(a),d(Math.pow(2,Sf.event.shiftKey?Math.ceil(j)-1:Math.floor(j)+1)),e(c,f),h(a),i(a)}var n,o,p,q,r,t,v,w,x,y={x:0,y:0,k:1},z=[960,500],A=Fg,B="mousedown.zoom",C="mousemove.zoom",D="mouseup.zoom",E="touchstart.zoom",F=u(a,"zoomstart","zoom","zoomend");return a.event=function(a){a.each(function(){var a=F.of(this,arguments),b=y;wi?Sf.select(this).transition().each("start.zoom",function(){y=this.__chart__||{x:0,y:0,k:1},g(a)}).tween("zoom:zoom",function(){var c=z[0],d=z[1],e=c/2,f=d/2,g=Sf.interpolateZoom([(e-y.x)/y.k,(f-y.y)/y.k,c/y.k],[(e-b.x)/b.k,(f-b.y)/b.k,c/b.k]);return function(b){var d=g(b),i=c/d[2];this.__chart__=y={x:e-d[0]*i,y:f-d[1]*i,k:i},h(a)}}).each("end.zoom",function(){i(a)}):(this.__chart__=y,g(a),h(a),i(a))})},a.translate=function(b){return arguments.length?(y={x:+b[0],y:+b[1],k:y.k},f(),a):[y.x,y.y]},a.scale=function(b){return arguments.length?(y={x:y.x,y:y.y,k:+b},f(),a):y.k},a.scaleExtent=function(b){return arguments.length?(A=null==b?Fg:[+b[0],+b[1]],a):A},a.center=function(b){return arguments.length?(p=b&&[+b[0],+b[1]],a):p},a.size=function(b){return arguments.length?(z=b&&[+b[0],+b[1]],a):z},a.x=function(b){return arguments.length?(v=b,t=b.copy(),y={x:0,y:0,k:1},a):v},a.y=function(b){return arguments.length?(x=b,w=b.copy(),y={x:0,y:0,k:1},a):x},Sf.rebind(a,F,"on")};var Eg,Fg=[0,1/0],Gg="onwheel"in Vf?(Eg=function(){return-Sf.event.deltaY*(Sf.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Vf?(Eg=function(){return Sf.event.wheelDelta},"mousewheel"):(Eg=function(){return-Sf.event.detail},"MozMousePixelScroll");Sf.color=ca,ca.prototype.toString=function(){return this.rgb()+""},Sf.hsl=da;var Hg=da.prototype=new ca;Hg.brighter=function(a){return a=Math.pow(.7,arguments.length?a:1),new da(this.h,this.s,this.l/a)},Hg.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new da(this.h,this.s,a*this.l)},Hg.rgb=function(){return ea(this.h,this.s,this.l)},Sf.hcl=fa;var Ig=fa.prototype=new ca;Ig.brighter=function(a){return new fa(this.h,this.c,Math.min(100,this.l+Jg*(arguments.length?a:1)))},Ig.darker=function(a){return new fa(this.h,this.c,Math.max(0,this.l-Jg*(arguments.length?a:1)))},Ig.rgb=function(){return ga(this.h,this.c,this.l).rgb()},Sf.lab=ha;var Jg=18,Kg=.95047,Lg=1,Mg=1.08883,Ng=ha.prototype=new ca;Ng.brighter=function(a){return new ha(Math.min(100,this.l+Jg*(arguments.length?a:1)),this.a,this.b)},Ng.darker=function(a){return new ha(Math.max(0,this.l-Jg*(arguments.length?a:1)),this.a,this.b)},Ng.rgb=function(){return ia(this.l,this.a,this.b)},Sf.rgb=na;var Og=na.prototype=new ca;Og.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var b=this.r,c=this.g,d=this.b,e=30;return b||c||d?(b&&b<e&&(b=e),c&&c<e&&(c=e),d&&d<e&&(d=e),new na(Math.min(255,b/a),Math.min(255,c/a),Math.min(255,d/a))):new na(e,e,e)},Og.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new na(a*this.r,a*this.g,a*this.b)},Og.hsl=function(){return sa(this.r,this.g,this.b)},Og.toString=function(){return"#"+qa(this.r)+qa(this.g)+qa(this.b)};var Pg=Sf.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Pg.forEach(function(a,b){Pg.set(a,oa(b))}),Sf.functor=wa,Sf.xhr=ya(xa),Sf.dsv=function(a,b){function c(a,c,f){arguments.length<3&&(f=c,c=null);var g=za(a,b,null==c?d:e(c),f);return g.row=function(a){return arguments.length?g.response(null==(c=a)?d:e(a)):c},g}function d(a){return c.parse(a.responseText)}function e(a){return function(b){return c.parse(b.responseText,a)}}function f(b){return b.map(g).join(a)}function g(a){return h.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var h=new RegExp('["'+a+"\n]"),i=a.charCodeAt(0);return c.parse=function(a,b){var d;return c.parseRows(a,function(a,c){if(d)return d(a,c-1);var e=new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}");d=b?function(a,c){return b(e(a),c)}:e})},c.parseRows=function(a,b){function c(){if(k>=j)return g;if(e)return e=!1,f;var b=k;if(34===a.charCodeAt(b)){for(var c=b;c++<j;)if(34===a.charCodeAt(c)){if(34!==a.charCodeAt(c+1))break;++c}k=c+2;var d=a.charCodeAt(c+1);return 13===d?(e=!0,10===a.charCodeAt(c+2)&&++k):10===d&&(e=!0),a.substring(b+1,c).replace(/""/g,'"')}for(;k<j;){var d=a.charCodeAt(k++),h=1;if(10===d)e=!0;else if(13===d)e=!0,10===a.charCodeAt(k)&&(++k,++h);else if(d!==i)continue;return a.substring(b,k-h)}return a.substring(b)}for(var d,e,f={},g={},h=[],j=a.length,k=0,l=0;(d=c())!==g;){for(var m=[];d!==f&&d!==g;)m.push(d),d=c();b&&!(m=b(m,l++))||h.push(m)}return h},c.format=function(b){if(Array.isArray(b[0]))return c.formatRows(b);var d=new m,e=[];return b.forEach(function(a){for(var b in a)d.has(b)||e.push(d.add(b))}),[e.map(g).join(a)].concat(b.map(function(b){return e.map(function(a){return g(b[a])}).join(a)})).join("\n")},c.formatRows=function(a){return a.map(f).join("\n")},c},Sf.csv=Sf.dsv(",","text/csv"),Sf.tsv=Sf.dsv("\t","text/tab-separated-values"),Sf.touch=function(a,b,c){if(arguments.length<3&&(c=b,b=t().changedTouches),b)for(var d,e=0,f=b.length;e<f;++e)if((d=b[e]).identifier===c)return S(a,d)};var Qg,Rg,Sg,Tg,Ug,Vg=Xf[o(Xf,"requestAnimationFrame")]||function(a){setTimeout(a,17)};Sf.timer=function(a,b,c){var d=arguments.length;d<2&&(b=0),d<3&&(c=Date.now());var e=c+b,f={c:a,t:e,f:!1,n:null};Rg?Rg.n=f:Qg=f,Rg=f,Sg||(Tg=clearTimeout(Tg),Sg=1,Vg(Ba))},Sf.timer.flush=function(){Ca(),Da()},Sf.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};var Wg=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(Fa);Sf.formatPrefix=function(a,b){var c=0;return a&&(a<0&&(a*=-1),b&&(a=Sf.round(a,Ea(a,b))),c=1+Math.floor(1e-12+Math.log(a)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((c-1)/3)))),Wg[8+c/3]};var Xg=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Yg=Sf.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){return(a=Sf.round(a,Ea(a,b))).toFixed(Math.max(0,Math.min(20,Ea(a*(1+1e-15),b))))}}),Zg=Sf.time={},$g=Date;Ia.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){_g.setUTCDate.apply(this._,arguments)},setDay:function(){_g.setUTCDay.apply(this._,arguments)},setFullYear:function(){_g.setUTCFullYear.apply(this._,arguments)},setHours:function(){_g.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){_g.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){_g.setUTCMinutes.apply(this._,arguments)},setMonth:function(){_g.setUTCMonth.apply(this._,arguments)},setSeconds:function(){_g.setUTCSeconds.apply(this._,arguments)},setTime:function(){_g.setTime.apply(this._,arguments)}};var _g=Date.prototype;Zg.year=Ja(function(a){return a=Zg.day(a),a.setMonth(0,1),a},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()}),Zg.years=Zg.year.range,Zg.years.utc=Zg.year.utc.range,Zg.day=Ja(function(a){var b=new $g(2e3,0);return b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1}),Zg.days=Zg.day.range,Zg.days.utc=Zg.day.utc.range,Zg.dayOfYear=function(a){var b=Zg.year(a);return Math.floor((a-b-6e4*(a.getTimezoneOffset()-b.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(a,b){b=7-b;var c=Zg[a]=Ja(function(a){return(a=Zg.day(a)).setDate(a.getDate()-(a.getDay()+b)%7),a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var c=Zg.year(a).getDay();return Math.floor((Zg.dayOfYear(a)+(c+b)%7)/7)-(c!==b)});Zg[a+"s"]=c.range,Zg[a+"s"].utc=c.utc.range,Zg[a+"OfYear"]=function(a){var c=Zg.year(a).getDay();return Math.floor((Zg.dayOfYear(a)+(c+b)%7)/7)}}),Zg.week=Zg.sunday,Zg.weeks=Zg.sunday.range,Zg.weeks.utc=Zg.sunday.utc.range,Zg.weekOfYear=Zg.sundayOfYear;var ah={"-":"",_:" ",0:"0"},bh=/^\s*\d+/,ch=/^%/;Sf.locale=function(a){return{numberFormat:Ga(a),timeFormat:La(a)}};var dh=Sf.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Sf.format=dh.numberFormat,Sf.geo={},eb.prototype={s:0,t:0,add:function(a){fb(a,this.t,eh),fb(eh.s,this.s,this),this.s?this.t+=eh.t:this.s=eh.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var eh=new eb;Sf.geo.stream=function(a,b){a&&fh.hasOwnProperty(a.type)?fh[a.type](a,b):gb(a,b)};var fh={Feature:function(a,b){gb(a.geometry,b)},FeatureCollection:function(a,b){for(var c=a.features,d=-1,e=c.length;++d<e;)gb(c[d].geometry,b)}},gh={Sphere:function(a,b){b.sphere()},Point:function(a,b){a=a.coordinates,b.point(a[0],a[1],a[2])},MultiPoint:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)a=c[d],b.point(a[0],a[1],a[2])},LineString:function(a,b){hb(a.coordinates,b,0)},MultiLineString:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)hb(c[d],b,0)},Polygon:function(a,b){ib(a.coordinates,b)},MultiPolygon:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)ib(c[d],b)},GeometryCollection:function(a,b){for(var c=a.geometries,d=-1,e=c.length;++d<e;)gb(c[d],b)}};Sf.geo.area=function(a){return hh=0,Sf.geo.stream(a,jh),hh};var hh,ih=new eb,jh={sphere:function(){hh+=4*ug},point:p,lineStart:p,lineEnd:p,polygonStart:function(){ih.reset(),jh.lineStart=jb},polygonEnd:function(){var a=2*ih;hh+=a<0?4*ug+a:a,jh.lineStart=jh.lineEnd=jh.point=p}};Sf.geo.bounds=function(){function a(a,b){t.push(u=[k=a,m=a]),b<l&&(l=b),b>n&&(n=b)}function b(b,c){var d=kb([b*zg,c*zg]);if(r){var e=mb(r,d),f=[e[1],-e[0],0],g=mb(f,e);pb(g),g=qb(g);var i=b-o,j=i>0?1:-1,p=g[0]*Ag*j,q=cg(i)>180;if(q^(j*o<p&&p<j*b)){var s=g[1]*Ag;s>n&&(n=s)}else if(p=(p+360)%360-180,q^(j*o<p&&p<j*b)){var s=-g[1]*Ag;s<l&&(l=s)}else c<l&&(l=c),c>n&&(n=c);q?b<o?h(k,b)>h(k,m)&&(m=b):h(b,m)>h(k,m)&&(k=b):m>=k?(b<k&&(k=b),b>m&&(m=b)):b>o?h(k,b)>h(k,m)&&(m=b):h(b,m)>h(k,m)&&(k=b)}else a(b,c);r=d,o=b}function c(){v.point=b}function d(){u[0]=k,u[1]=m,v.point=a,r=null}function e(a,c){if(r){var d=a-o;s+=cg(d)>180?d+(d>0?360:-360):d}else p=a,q=c;jh.point(a,c),b(a,c)}function f(){jh.lineStart()}function g(){e(p,q),jh.lineEnd(),cg(s)>xg&&(k=-(m=180)),u[0]=k,u[1]=m,r=null}function h(a,b){return(b-=a)<0?b+360:b}function i(a,b){return a[0]-b[0]}function j(a,b){return b[0]<=b[1]?b[0]<=a&&a<=b[1]:a<b[0]||b[1]<a}var k,l,m,n,o,p,q,r,s,t,u,v={point:a,lineStart:c,lineEnd:d,polygonStart:function(){v.point=e,v.lineStart=f,v.lineEnd=g,s=0,jh.polygonStart()},polygonEnd:function(){jh.polygonEnd(),v.point=a,v.lineStart=c,v.lineEnd=d,ih<0?(k=-(m=180),l=-(n=90)):s>xg?n=90:s<-xg&&(l=-90),u[0]=k,u[1]=m}};return function(a){n=m=-(k=l=1/0),t=[],Sf.geo.stream(a,v);var b=t.length;if(b){t.sort(i);for(var c,d=1,e=t[0],f=[e];d<b;++d)c=t[d],j(c[0],e)||j(c[1],e)?(h(e[0],c[1])>h(e[0],e[1])&&(e[1]=c[1]),h(c[0],e[1])>h(e[0],e[1])&&(e[0]=c[0])):f.push(e=c);for(var g,c,o=-1/0,b=f.length-1,d=0,e=f[b];d<=b;e=c,++d)c=f[d],(g=h(e[1],c[0]))>o&&(o=g,k=c[0],m=e[1])}return t=u=null,k===1/0||l===1/0?[[NaN,NaN],[NaN,NaN]]:[[k,l],[m,n]]}}(),Sf.geo.centroid=function(a){kh=lh=mh=nh=oh=ph=qh=rh=sh=th=uh=0,Sf.geo.stream(a,vh);var b=sh,c=th,d=uh,e=b*b+c*c+d*d;return e<yg&&(b=ph,c=qh,d=rh,lh<xg&&(b=mh,c=nh,d=oh),(e=b*b+c*c+d*d)<yg)?[NaN,NaN]:[Math.atan2(c,b)*Ag,Z(d/Math.sqrt(e))*Ag]};var kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh={sphere:p,point:sb,lineStart:ub,lineEnd:vb,polygonStart:function(){vh.lineStart=wb},polygonEnd:function(){vh.lineStart=ub}},wh=Bb(xb,Gb,Ib,[-ug,-ug/2]),xh=1e9;Sf.geo.clipExtent=function(){var a,b,c,d,e,f,g={stream:function(a){return e&&(e.valid=!1),e=f(a),e.valid=!0,e},extent:function(h){return arguments.length?(f=Lb(a=+h[0][0],b=+h[0][1],c=+h[1][0],d=+h[1][1]),e&&(e.valid=!1,e=null),g):[[a,b],[c,d]]}};return g.extent([[0,0],[960,500]])},(Sf.geo.conicEqualArea=function(){return Nb(Ob)}).raw=Ob,Sf.geo.albers=function(){return Sf.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},Sf.geo.albersUsa=function(){function a(a){var f=a[0],g=a[1];return b=null,c(f,g),b||(d(f,g),b)||e(f,g),b}var b,c,d,e,f=Sf.geo.albers(),g=Sf.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),h=Sf.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),i={point:function(a,c){b=[a,c]}};return a.invert=function(a){var b=f.scale(),c=f.translate(),d=(a[0]-c[0])/b,e=(a[1]-c[1])/b;return(e>=.12&&e<.234&&d>=-.425&&d<-.214?g:e>=.166&&e<.234&&d>=-.214&&d<-.115?h:f).invert(a)},a.stream=function(a){var b=f.stream(a),c=g.stream(a),d=h.stream(a);return{point:function(a,e){b.point(a,e),c.point(a,e),d.point(a,e)},sphere:function(){b.sphere(),c.sphere(),d.sphere()},lineStart:function(){b.lineStart(),c.lineStart(),d.lineStart()},lineEnd:function(){b.lineEnd(),c.lineEnd(),d.lineEnd()},polygonStart:function(){b.polygonStart(),c.polygonStart(),d.polygonStart()},polygonEnd:function(){b.polygonEnd(),c.polygonEnd(),d.polygonEnd()}}},a.precision=function(b){return arguments.length?(f.precision(b),g.precision(b),h.precision(b),a):f.precision()},a.scale=function(b){return arguments.length?(f.scale(b),g.scale(.35*b),h.scale(b),a.translate(f.translate())):f.scale()},a.translate=function(b){if(!arguments.length)return f.translate();var j=f.scale(),k=+b[0],l=+b[1];return c=f.translate(b).clipExtent([[k-.455*j,l-.238*j],[k+.455*j,l+.238*j]]).stream(i).point,d=g.translate([k-.307*j,l+.201*j]).clipExtent([[k-.425*j+xg,l+.12*j+xg],[k-.214*j-xg,l+.234*j-xg]]).stream(i).point,e=h.translate([k-.205*j,l+.212*j]).clipExtent([[k-.214*j+xg,l+.166*j+xg],[k-.115*j-xg,l+.234*j-xg]]).stream(i).point,a},a.scale(1070)};var yh,zh,Ah,Bh,Ch,Dh,Eh={point:p,lineStart:p,lineEnd:p,polygonStart:function(){zh=0,Eh.lineStart=Pb},polygonEnd:function(){Eh.lineStart=Eh.lineEnd=Eh.point=p,yh+=cg(zh/2)}},Fh={point:Qb,lineStart:p,lineEnd:p,polygonStart:p,polygonEnd:p},Gh={point:Tb,lineStart:Ub,lineEnd:Vb,polygonStart:function(){Gh.lineStart=Wb},polygonEnd:function(){Gh.point=Tb,Gh.lineStart=Ub,Gh.lineEnd=Vb}};Sf.geo.path=function(){function a(a){return a&&("function"==typeof h&&f.pointRadius(+h.apply(this,arguments)),g&&g.valid||(g=e(f)),Sf.geo.stream(a,g)),f.result()}function b(){return g=null,a}var c,d,e,f,g,h=4.5;return a.area=function(a){return yh=0,Sf.geo.stream(a,e(Eh)),yh},a.centroid=function(a){return mh=nh=oh=ph=qh=rh=sh=th=uh=0,Sf.geo.stream(a,e(Gh)),uh?[sh/uh,th/uh]:rh?[ph/rh,qh/rh]:oh?[mh/oh,nh/oh]:[NaN,NaN]},a.bounds=function(a){return Ch=Dh=-(Ah=Bh=1/0),Sf.geo.stream(a,e(Fh)),[[Ah,Bh],[Ch,Dh]]},a.projection=function(a){return arguments.length?(e=(c=a)?a.stream||Zb(a):xa,b()):c},a.context=function(a){return arguments.length?(f=null==(d=a)?new Rb:new Xb(a),"function"!=typeof h&&f.pointRadius(h),b()):d},a.pointRadius=function(b){return arguments.length?(h="function"==typeof b?b:(f.pointRadius(+b),+b),a):h},a.projection(Sf.geo.albersUsa()).context(null)},Sf.geo.transform=function(a){return{stream:function(b){var c=new $b(b);for(var d in a)c[d]=a[d];return c}}},$b.prototype={point:function(a,b){this.stream.point(a,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},Sf.geo.projection=ac,Sf.geo.projectionMutator=bc,(Sf.geo.equirectangular=function(){return ac(dc)}).raw=dc.invert=dc,Sf.geo.rotation=function(a){function b(b){return b=a(b[0]*zg,b[1]*zg),b[0]*=Ag,b[1]*=Ag,b}return a=fc(a[0]%360*zg,a[1]*zg,a.length>2?a[2]*zg:0),b.invert=function(b){return b=a.invert(b[0]*zg,b[1]*zg),b[0]*=Ag,b[1]*=Ag,b},b},ec.invert=dc,Sf.geo.circle=function(){function a(){var a="function"==typeof d?d.apply(this,arguments):d,b=fc(-a[0]*zg,-a[1]*zg,0).invert,e=[];return c(null,null,1,{point:function(a,c){e.push(a=b(a,c)),a[0]*=Ag,a[1]*=Ag}}),{type:"Polygon",coordinates:[e]}}var b,c,d=[0,0],e=6;return a.origin=function(b){return arguments.length?(d=b,a):d},a.angle=function(d){return arguments.length?(c=jc((b=+d)*zg,e*zg),a):b},a.precision=function(d){return arguments.length?(c=jc(b*zg,(e=+d)*zg),a):e},a.angle(90)},Sf.geo.distance=function(a,b){var c,d=(b[0]-a[0])*zg,e=a[1]*zg,f=b[1]*zg,g=Math.sin(d),h=Math.cos(d),i=Math.sin(e),j=Math.cos(e),k=Math.sin(f),l=Math.cos(f);return Math.atan2(Math.sqrt((c=l*g)*c+(c=j*k-i*l*h)*c),i*k+j*l*h)},Sf.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return Sf.range(Math.ceil(f/q)*q,e,q).map(m).concat(Sf.range(Math.ceil(j/r)*r,i,r).map(n)).concat(Sf.range(Math.ceil(d/o)*o,c,o).filter(function(a){return cg(a%q)>xg}).map(k)).concat(Sf.range(Math.ceil(h/p)*p,g,p).filter(function(a){return cg(a%r)>xg}).map(l))}var c,d,e,f,g,h,i,j,k,l,m,n,o=10,p=o,q=90,r=360,s=2.5;return a.lines=function(){return b().map(function(a){return{type:"LineString",coordinates:a}})},a.outline=function(){return{type:"Polygon",coordinates:[m(f).concat(n(i).slice(1),m(e).reverse().slice(1),n(j).reverse().slice(1))]}},a.extent=function(b){return arguments.length?a.majorExtent(b).minorExtent(b):a.minorExtent()},a.majorExtent=function(b){return arguments.length?(f=+b[0][0],e=+b[1][0],j=+b[0][1],i=+b[1][1],f>e&&(b=f,f=e,e=b),j>i&&(b=j,j=i,i=b),a.precision(s)):[[f,j],[e,i]]},a.minorExtent=function(b){return arguments.length?(d=+b[0][0],c=+b[1][0],h=+b[0][1],g=+b[1][1],d>c&&(b=d,d=c,c=b),h>g&&(b=h,h=g,g=b),a.precision(s)):[[d,h],[c,g]]},a.step=function(b){return arguments.length?a.majorStep(b).minorStep(b):a.minorStep()},a.majorStep=function(b){return arguments.length?(q=+b[0],r=+b[1],a):[q,r]},a.minorStep=function(b){return arguments.length?(o=+b[0],p=+b[1],a):[o,p]},a.precision=function(b){return arguments.length?(s=+b,k=lc(h,g,90),l=mc(d,c,s),m=lc(j,i,90),n=mc(f,e,s),a):s},a.majorExtent([[-180,-90+xg],[180,90-xg]]).minorExtent([[-180,-80-xg],[180,80+xg]])},Sf.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[b||d.apply(this,arguments),c||e.apply(this,arguments)]}}var b,c,d=nc,e=oc;return a.distance=function(){return Sf.geo.distance(b||d.apply(this,arguments),c||e.apply(this,arguments))},a.source=function(c){return arguments.length?(d=c,b="function"==typeof c?null:c,a):d},a.target=function(b){return arguments.length?(e=b,c="function"==typeof b?null:b,a):e},a.precision=function(){return arguments.length?a:0},a},Sf.geo.interpolate=function(a,b){return pc(a[0]*zg,a[1]*zg,b[0]*zg,b[1]*zg)},Sf.geo.length=function(a){return Hh=0,Sf.geo.stream(a,Ih),Hh};var Hh,Ih={sphere:p,point:p,lineStart:qc,lineEnd:p,polygonStart:p,polygonEnd:p},Jh=rc(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(Sf.geo.azimuthalEqualArea=function(){return ac(Jh)}).raw=Jh;var Kh=rc(function(a){var b=Math.acos(a);return b&&b/Math.sin(b)},xa);(Sf.geo.azimuthalEquidistant=function(){return ac(Kh)}).raw=Kh,(Sf.geo.conicConformal=function(){return Nb(sc)}).raw=sc,(Sf.geo.conicEquidistant=function(){return Nb(tc)}).raw=tc;var Lh=rc(function(a){return 1/a},Math.atan);(Sf.geo.gnomonic=function(){return ac(Lh)}).raw=Lh,uc.invert=function(a,b){return[a,2*Math.atan(Math.exp(b))-wg]},(Sf.geo.mercator=function(){return vc(uc)}).raw=uc;var Mh=rc(function(){return 1},Math.asin);(Sf.geo.orthographic=function(){return ac(Mh)}).raw=Mh;var Nh=rc(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(Sf.geo.stereographic=function(){return ac(Nh)}).raw=Nh,wc.invert=function(a,b){return[-b,2*Math.atan(Math.exp(a))-wg]},(Sf.geo.transverseMercator=function(){var a=vc(wc),b=a.center,c=a.rotate;return a.center=function(a){return a?b([-a[1],a[0]]):(a=b(),[a[1],-a[0]])},a.rotate=function(a){return a?c([a[0],a[1],a.length>2?a[2]+90:90]):(a=c(),[a[0],a[1],a[2]-90])},c([0,0,90])}).raw=wc,
Sf.geom={},Sf.geom.hull=function(a){function b(a){if(a.length<3)return[];var b,e=wa(c),f=wa(d),g=a.length,h=[],i=[];for(b=0;b<g;b++)h.push([+e.call(this,a[b],b),+f.call(this,a[b],b),b]);for(h.sort(Ac),b=0;b<g;b++)i.push([h[b][0],-h[b][1]]);var j=zc(h),k=zc(i),l=k[0]===j[0],m=k[k.length-1]===j[j.length-1],n=[];for(b=j.length-1;b>=0;--b)n.push(a[h[j[b]][2]]);for(b=+l;b<k.length-m;++b)n.push(a[h[k[b]][2]]);return n}var c=xc,d=yc;return arguments.length?b(a):(b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b)},Sf.geom.polygon=function(a){return hg(a,Oh),a};var Oh=Sf.geom.polygon.prototype=[];Oh.area=function(){for(var a,b=-1,c=this.length,d=this[c-1],e=0;++b<c;)a=d,d=this[b],e+=a[1]*d[0]-a[0]*d[1];return.5*e},Oh.centroid=function(a){var b,c,d=-1,e=this.length,f=0,g=0,h=this[e-1];for(arguments.length||(a=-1/(6*this.area()));++d<e;)b=h,h=this[d],c=b[0]*h[1]-h[0]*b[1],f+=(b[0]+h[0])*c,g+=(b[1]+h[1])*c;return[f*a,g*a]},Oh.clip=function(a){for(var b,c,d,e,f,g,h=Dc(a),i=-1,j=this.length-Dc(this),k=this[j-1];++i<j;){for(b=a.slice(),a.length=0,e=this[i],f=b[(d=b.length-h)-1],c=-1;++c<d;)g=b[c],Bc(g,k,e)?(Bc(f,k,e)||a.push(Cc(f,g,k,e)),a.push(g)):Bc(f,k,e)&&a.push(Cc(f,g,k,e)),f=g;h&&a.push(a[0]),k=e}return a};var Ph,Qh,Rh,Sh,Th,Uh=[],Vh=[];Lc.prototype.prepare=function(){for(var a,b=this.edges,c=b.length;c--;)a=b[c].edge,a.b&&a.a||b.splice(c,1);return b.sort(Nc),b.length},Xc.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Yc.prototype={insert:function(a,b){var c,d,e;if(a){if(b.P=a,b.N=a.N,a.N&&(a.N.P=b),a.N=b,a.R){for(a=a.R;a.L;)a=a.L;a.L=b}else a.R=b;c=a}else this._?(a=ad(this._),b.P=null,b.N=a,a.P=a.L=b,c=a):(b.P=b.N=null,this._=b,c=null);for(b.L=b.R=null,b.U=c,b.C=!0,a=b;c&&c.C;)d=c.U,c===d.L?(e=d.R,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.R&&($c(this,c),a=c,c=a.U),c.C=!1,d.C=!0,_c(this,d))):(e=d.L,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.L&&(_c(this,c),a=c,c=a.U),c.C=!1,d.C=!0,$c(this,d))),c=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P),a.P&&(a.P.N=a.N),a.N=a.P=null;var b,c,d,e=a.U,f=a.L,g=a.R;if(c=f?g?ad(g):f:g,e?e.L===a?e.L=c:e.R=c:this._=c,f&&g?(d=c.C,c.C=a.C,c.L=f,f.U=c,c!==g?(e=c.U,c.U=a.U,a=c.R,e.L=a,c.R=g,g.U=c):(c.U=e,e=c,a=c.R)):(d=a.C,a=c),a&&(a.U=e),!d){if(a&&a.C)return void(a.C=!1);do{if(a===this._)break;if(a===e.L){if(b=e.R,b.C&&(b.C=!1,e.C=!0,$c(this,e),b=e.R),b.L&&b.L.C||b.R&&b.R.C){b.R&&b.R.C||(b.L.C=!1,b.C=!0,_c(this,b),b=e.R),b.C=e.C,e.C=b.R.C=!1,$c(this,e),a=this._;break}}else if(b=e.L,b.C&&(b.C=!1,e.C=!0,_c(this,e),b=e.L),b.L&&b.L.C||b.R&&b.R.C){b.L&&b.L.C||(b.R.C=!1,b.C=!0,$c(this,b),b=e.L),b.C=e.C,e.C=b.L.C=!1,_c(this,e),a=this._;break}b.C=!0,a=e,e=e.U}while(!a.C);a&&(a.C=!1)}}},Sf.geom.voronoi=function(a){function b(a){var b=new Array(a.length),d=h[0][0],e=h[0][1],f=h[1][0],g=h[1][1];return bd(c(a),h).cells.forEach(function(c,h){var i=c.edges,j=c.site;(b[h]=i.length?i.map(function(a){var b=a.start();return[b.x,b.y]}):j.x>=d&&j.x<=f&&j.y>=e&&j.y<=g?[[d,g],[f,g],[f,e],[d,e]]:[]).point=a[h]}),b}function c(a){return a.map(function(a,b){return{x:Math.round(f(a,b)/xg)*xg,y:Math.round(g(a,b)/xg)*xg,i:b}})}var d=xc,e=yc,f=d,g=e,h=Wh;return a?b(a):(b.links=function(a){return bd(c(a)).edges.filter(function(a){return a.l&&a.r}).map(function(b){return{source:a[b.l.i],target:a[b.r.i]}})},b.triangles=function(a){var b=[];return bd(c(a)).cells.forEach(function(c,d){for(var e,f=c.site,g=c.edges.sort(Nc),h=-1,i=g.length,j=g[i-1].edge,k=j.l===f?j.r:j.l;++h<i;)j,e=k,j=g[h].edge,k=j.l===f?j.r:j.l,d<e.i&&d<k.i&&dd(f,e,k)<0&&b.push([a[d],a[e.i],a[k.i]])}),b},b.x=function(a){return arguments.length?(f=wa(d=a),b):d},b.y=function(a){return arguments.length?(g=wa(e=a),b):e},b.clipExtent=function(a){return arguments.length?(h=null==a?Wh:a,b):h===Wh?null:h},b.size=function(a){return arguments.length?b.clipExtent(a&&[[0,0],a]):h===Wh?null:h&&h[1]},b)};var Wh=[[-1e6,-1e6],[1e6,1e6]];Sf.geom.delaunay=function(a){return Sf.geom.voronoi().triangles(a)},Sf.geom.quadtree=function(a,b,c,d,e){function f(a){function f(a,b,c,d,e,f,g,h){if(!isNaN(c)&&!isNaN(d))if(a.leaf){var i=a.x,k=a.y;if(null!=i)if(cg(i-c)+cg(k-d)<.01)j(a,b,c,d,e,f,g,h);else{var l=a.point;a.x=a.y=a.point=null,j(a,l,i,k,e,f,g,h),j(a,b,c,d,e,f,g,h)}else a.x=c,a.y=d,a.point=b}else j(a,b,c,d,e,f,g,h)}function j(a,b,c,d,e,g,h,i){var j=.5*(e+h),k=.5*(g+i),l=c>=j,m=d>=k,n=(m<<1)+l;a.leaf=!1,a=a.nodes[n]||(a.nodes[n]=gd()),l?e=j:h=j,m?g=k:i=k,f(a,b,c,d,e,g,h,i)}var k,l,m,n,o,p,q,r,s,t=wa(h),u=wa(i);if(null!=b)p=b,q=c,r=d,s=e;else if(r=s=-(p=q=1/0),l=[],m=[],o=a.length,g)for(n=0;n<o;++n)k=a[n],k.x<p&&(p=k.x),k.y<q&&(q=k.y),k.x>r&&(r=k.x),k.y>s&&(s=k.y),l.push(k.x),m.push(k.y);else for(n=0;n<o;++n){var v=+t(k=a[n],n),w=+u(k,n);v<p&&(p=v),w<q&&(q=w),v>r&&(r=v),w>s&&(s=w),l.push(v),m.push(w)}var x=r-p,y=s-q;x>y?s=q+x:r=p+y;var z=gd();if(z.add=function(a){f(z,a,+t(a,++n),+u(a,n),p,q,r,s)},z.visit=function(a){hd(a,z,p,q,r,s)},n=-1,null==b){for(;++n<o;)f(z,a[n],l[n],m[n],p,q,r,s);--n}else a.forEach(z.add);return l=m=a=k=null,z}var g,h=xc,i=yc;return(g=arguments.length)?(h=ed,i=fd,3===g&&(e=c,d=b,c=b=0),f(a)):(f.x=function(a){return arguments.length?(h=a,f):h},f.y=function(a){return arguments.length?(i=a,f):i},f.extent=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=+a[0][0],c=+a[0][1],d=+a[1][0],e=+a[1][1]),f):null==b?null:[[b,c],[d,e]]},f.size=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=c=0,d=+a[0],e=+a[1]),f):null==b?null:[d-b,e-c]},f)},Sf.interpolateRgb=id,Sf.interpolateObject=jd,Sf.interpolateNumber=kd,Sf.interpolateString=ld;var Xh=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Yh=new RegExp(Xh.source,"g");Sf.interpolate=md,Sf.interpolators=[function(a,b){var c=typeof b;return("string"===c?Pg.has(b)||/^(#|rgb\(|hsl\()/.test(b)?id:ld:b instanceof ca?id:Array.isArray(b)?nd:"object"===c&&isNaN(b)?jd:kd)(a,b)}],Sf.interpolateArray=nd;var Zh=function(){return xa},$h=Sf.map({linear:Zh,poly:ud,quad:function(){return rd},cubic:function(){return sd},sin:function(){return vd},exp:function(){return wd},circle:function(){return xd},elastic:yd,back:zd,bounce:function(){return Ad}}),_h=Sf.map({in:xa,out:pd,"in-out":qd,"out-in":function(a){return qd(pd(a))}});Sf.ease=function(a){var b=a.indexOf("-"),c=b>=0?a.substring(0,b):a,d=b>=0?a.substring(b+1):"in";return c=$h.get(c)||Zh,d=_h.get(d)||xa,od(d(c.apply(null,Tf.call(arguments,1))))},Sf.interpolateHcl=Bd,Sf.interpolateHsl=Cd,Sf.interpolateLab=Dd,Sf.interpolateRound=Ed,Sf.transform=function(a){var b=Vf.createElementNS(Sf.ns.prefix.svg,"g");return(Sf.transform=function(a){if(null!=a){b.setAttribute("transform",a);var c=b.transform.baseVal.consolidate()}return new Fd(c?c.matrix:ai)})(a)},Fd.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ai={a:1,b:0,c:0,d:1,e:0,f:0};Sf.interpolateTransform=Jd,Sf.layout={},Sf.layout.bundle=function(){return function(a){for(var b=[],c=-1,d=a.length;++c<d;)b.push(Md(a[c]));return b}},Sf.layout.chord=function(){function a(){var a,j,l,m,n,o={},p=[],q=Sf.range(f),r=[];for(c=[],d=[],a=0,m=-1;++m<f;){for(j=0,n=-1;++n<f;)j+=e[m][n];p.push(j),r.push(Sf.range(f)),a+=j}for(g&&q.sort(function(a,b){return g(p[a],p[b])}),h&&r.forEach(function(a,b){a.sort(function(a,c){return h(e[b][a],e[b][c])})}),a=(vg-k*f)/a,j=0,m=-1;++m<f;){for(l=j,n=-1;++n<f;){var s=q[m],t=r[s][n],u=e[s][t],v=j,w=j+=u*a;o[s+"-"+t]={index:s,subindex:t,startAngle:v,endAngle:w,value:u}}d[s]={index:s,startAngle:l,endAngle:j,value:(j-l)/a},j+=k}for(m=-1;++m<f;)for(n=m-1;++n<f;){var x=o[m+"-"+n],y=o[n+"-"+m];(x.value||y.value)&&c.push(x.value<y.value?{source:y,target:x}:{source:x,target:y})}i&&b()}function b(){c.sort(function(a,b){return i((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var c,d,e,f,g,h,i,j={},k=0;return j.matrix=function(a){return arguments.length?(f=(e=a)&&e.length,c=d=null,j):e},j.padding=function(a){return arguments.length?(k=a,c=d=null,j):k},j.sortGroups=function(a){return arguments.length?(g=a,c=d=null,j):g},j.sortSubgroups=function(a){return arguments.length?(h=a,c=null,j):h},j.sortChords=function(a){return arguments.length?(i=a,c&&b(),j):i},j.chords=function(){return c||a(),c},j.groups=function(){return d||a(),d},j},Sf.layout.force=function(){function a(a){return function(b,c,d,e){if(b.point!==a){var f=b.cx-a.x,g=b.cy-a.y,h=e-c,i=f*f+g*g;if(h*h/q<i){if(i<o){var j=b.charge/i;a.px-=f*j,a.py-=g*j}return!0}if(b.point&&i&&i<o){var j=b.pointCharge/i;a.px-=f*j,a.py-=g*j}}return!b.charge}}function b(a){a.px=Sf.event.x,a.py=Sf.event.y,h.resume()}var c,d,e,f,g,h={},i=Sf.dispatch("start","tick","end"),j=[1,1],k=.9,l=bi,m=ci,n=-30,o=di,p=.1,q=.64,r=[],s=[];return h.tick=function(){if((d*=.99)<.005)return i.end({type:"end",alpha:d=0}),!0;var b,c,h,l,m,o,q,t,u,v=r.length,w=s.length;for(c=0;c<w;++c)h=s[c],l=h.source,m=h.target,t=m.x-l.x,u=m.y-l.y,(o=t*t+u*u)&&(o=d*f[c]*((o=Math.sqrt(o))-e[c])/o,t*=o,u*=o,m.x-=t*(q=l.weight/(m.weight+l.weight)),m.y-=u*q,l.x+=t*(q=1-q),l.y+=u*q);if((q=d*p)&&(t=j[0]/2,u=j[1]/2,c=-1,q))for(;++c<v;)h=r[c],h.x+=(t-h.x)*q,h.y+=(u-h.y)*q;if(n)for(Td(b=Sf.geom.quadtree(r),d,g),c=-1;++c<v;)(h=r[c]).fixed||b.visit(a(h));for(c=-1;++c<v;)h=r[c],h.fixed?(h.x=h.px,h.y=h.py):(h.x-=(h.px-(h.px=h.x))*k,h.y-=(h.py-(h.py=h.y))*k);i.tick({type:"tick",alpha:d})},h.nodes=function(a){return arguments.length?(r=a,h):r},h.links=function(a){return arguments.length?(s=a,h):s},h.size=function(a){return arguments.length?(j=a,h):j},h.linkDistance=function(a){return arguments.length?(l="function"==typeof a?a:+a,h):l},h.distance=h.linkDistance,h.linkStrength=function(a){return arguments.length?(m="function"==typeof a?a:+a,h):m},h.friction=function(a){return arguments.length?(k=+a,h):k},h.charge=function(a){return arguments.length?(n="function"==typeof a?a:+a,h):n},h.chargeDistance=function(a){return arguments.length?(o=a*a,h):Math.sqrt(o)},h.gravity=function(a){return arguments.length?(p=+a,h):p},h.theta=function(a){return arguments.length?(q=a*a,h):Math.sqrt(q)},h.alpha=function(a){return arguments.length?(a=+a,d?d=a>0?a:0:a>0&&(i.start({type:"start",alpha:d=a}),Sf.timer(h.tick)),h):d},h.start=function(){function a(a,d){if(!c){for(c=new Array(i),h=0;h<i;++h)c[h]=[];for(h=0;h<j;++h){var e=s[h];c[e.source.index].push(e.target),c[e.target.index].push(e.source)}}for(var f,g=c[b],h=-1,j=g.length;++h<j;)if(!isNaN(f=g[h][a]))return f;return Math.random()*d}var b,c,d,i=r.length,k=s.length,o=j[0],p=j[1];for(b=0;b<i;++b)(d=r[b]).index=b,d.weight=0;for(b=0;b<k;++b)d=s[b],"number"==typeof d.source&&(d.source=r[d.source]),"number"==typeof d.target&&(d.target=r[d.target]),++d.source.weight,++d.target.weight;for(b=0;b<i;++b)d=r[b],isNaN(d.x)&&(d.x=a("x",o)),isNaN(d.y)&&(d.y=a("y",p)),isNaN(d.px)&&(d.px=d.x),isNaN(d.py)&&(d.py=d.y);if(e=[],"function"==typeof l)for(b=0;b<k;++b)e[b]=+l.call(this,s[b],b);else for(b=0;b<k;++b)e[b]=l;if(f=[],"function"==typeof m)for(b=0;b<k;++b)f[b]=+m.call(this,s[b],b);else for(b=0;b<k;++b)f[b]=m;if(g=[],"function"==typeof n)for(b=0;b<i;++b)g[b]=+n.call(this,r[b],b);else for(b=0;b<i;++b)g[b]=n;return h.resume()},h.resume=function(){return h.alpha(.1)},h.stop=function(){return h.alpha(0)},h.drag=function(){if(c||(c=Sf.behavior.drag().origin(xa).on("dragstart.force",Pd).on("drag.force",b).on("dragend.force",Qd)),!arguments.length)return c;this.on("mouseover.force",Rd).on("mouseout.force",Sd).call(c)},Sf.rebind(h,i,"on")};var bi=20,ci=1,di=1/0;Sf.layout.hierarchy=function(){function a(e){var f,g=[e],h=[];for(e.depth=0;null!=(f=g.pop());)if(h.push(f),(j=c.call(a,f,f.depth))&&(i=j.length)){for(var i,j,k;--i>=0;)g.push(k=j[i]),k.parent=f,k.depth=f.depth+1;d&&(f.value=0),f.children=j}else d&&(f.value=+d.call(a,f,f.depth)||0),delete f.children;return Wd(e,function(a){var c,e;b&&(c=a.children)&&c.sort(b),d&&(e=a.parent)&&(e.value+=a.value)}),h}var b=Zd,c=Xd,d=Yd;return a.sort=function(c){return arguments.length?(b=c,a):b},a.children=function(b){return arguments.length?(c=b,a):c},a.value=function(b){return arguments.length?(d=b,a):d},a.revalue=function(b){return d&&(Vd(b,function(a){a.children&&(a.value=0)}),Wd(b,function(b){var c;b.children||(b.value=+d.call(a,b,b.depth)||0),(c=b.parent)&&(c.value+=b.value)})),b},a},Sf.layout.partition=function(){function a(b,c,d,e){var f=b.children;if(b.x=c,b.y=b.depth*e,b.dx=d,b.dy=e,f&&(g=f.length)){var g,h,i,j=-1;for(d=b.value?d/b.value:0;++j<g;)a(h=f[j],c,i=h.value*d,e),c+=i}}function b(a){var c=a.children,d=0;if(c&&(e=c.length))for(var e,f=-1;++f<e;)d=Math.max(d,b(c[f]));return 1+d}function c(c,f){var g=d.call(this,c,f);return a(g[0],0,e[0],e[1]/b(g[0])),g}var d=Sf.layout.hierarchy(),e=[1,1];return c.size=function(a){return arguments.length?(e=a,c):e},Ud(c,d)},Sf.layout.pie=function(){function a(f){var g=f.map(function(c,d){return+b.call(a,c,d)}),h=+("function"==typeof d?d.apply(this,arguments):d),i=(("function"==typeof e?e.apply(this,arguments):e)-h)/Sf.sum(g),j=Sf.range(f.length);null!=c&&j.sort(c===ei?function(a,b){return g[b]-g[a]}:function(a,b){return c(f[a],f[b])});var k=[];return j.forEach(function(a){var b;k[a]={data:f[a],value:b=g[a],startAngle:h,endAngle:h+=b*i}}),k}var b=Number,c=ei,d=0,e=vg;return a.value=function(c){return arguments.length?(b=c,a):b},a.sort=function(b){return arguments.length?(c=b,a):c},a.startAngle=function(b){return arguments.length?(d=b,a):d},a.endAngle=function(b){return arguments.length?(e=b,a):e},a};var ei={};Sf.layout.stack=function(){function a(h,i){var j=h.map(function(c,d){return b.call(a,c,d)}),k=j.map(function(b){return b.map(function(b,c){return[f.call(a,b,c),g.call(a,b,c)]})}),l=c.call(a,k,i);j=Sf.permute(j,l),k=Sf.permute(k,l);var m,n,o,p=d.call(a,k,i),q=j.length,r=j[0].length;for(n=0;n<r;++n)for(e.call(a,j[0][n],o=p[n],k[0][n][1]),m=1;m<q;++m)e.call(a,j[m][n],o+=k[m-1][n][1],k[m][n][1]);return h}var b=xa,c=ce,d=de,e=be,f=_d,g=ae;return a.values=function(c){return arguments.length?(b=c,a):b},a.order=function(b){return arguments.length?(c="function"==typeof b?b:fi.get(b)||ce,a):c},a.offset=function(b){return arguments.length?(d="function"==typeof b?b:gi.get(b)||de,a):d},a.x=function(b){return arguments.length?(f=b,a):f},a.y=function(b){return arguments.length?(g=b,a):g},a.out=function(b){return arguments.length?(e=b,a):e},a};var fi=Sf.map({"inside-out":function(a){var b,c,d=a.length,e=a.map(ee),f=a.map(fe),g=Sf.range(d).sort(function(a,b){return e[a]-e[b]}),h=0,i=0,j=[],k=[];for(b=0;b<d;++b)c=g[b],h<i?(h+=f[c],j.push(c)):(i+=f[c],k.push(c));return k.reverse().concat(j)},reverse:function(a){return Sf.range(a.length).reverse()},default:ce}),gi=Sf.map({silhouette:function(a){var b,c,d,e=a.length,f=a[0].length,g=[],h=0,i=[];for(c=0;c<f;++c){for(b=0,d=0;b<e;b++)d+=a[b][c][1];d>h&&(h=d),g.push(d)}for(c=0;c<f;++c)i[c]=(h-g[c])/2;return i},wiggle:function(a){var b,c,d,e,f,g,h,i,j,k=a.length,l=a[0],m=l.length,n=[];for(n[0]=i=j=0,c=1;c<m;++c){for(b=0,e=0;b<k;++b)e+=a[b][c][1];for(b=0,f=0,h=l[c][0]-l[c-1][0];b<k;++b){for(d=0,g=(a[b][c][1]-a[b][c-1][1])/(2*h);d<b;++d)g+=(a[d][c][1]-a[d][c-1][1])/h;f+=g*a[b][c][1]}n[c]=i-=e?f/e*h:0,i<j&&(j=i)}for(c=0;c<m;++c)n[c]-=j;return n},expand:function(a){var b,c,d,e=a.length,f=a[0].length,g=1/e,h=[];for(c=0;c<f;++c){for(b=0,d=0;b<e;b++)d+=a[b][c][1];if(d)for(b=0;b<e;b++)a[b][c][1]/=d;else for(b=0;b<e;b++)a[b][c][1]=g}for(c=0;c<f;++c)h[c]=0;return h},zero:de});Sf.layout.histogram=function(){function a(a,f){for(var g,h,i=[],j=a.map(c,this),k=d.call(this,j,f),l=e.call(this,k,j,f),f=-1,m=j.length,n=l.length-1,o=b?1:1/m;++f<n;)g=i[f]=[],g.dx=l[f+1]-(g.x=l[f]),g.y=0;if(n>0)for(f=-1;++f<m;)(h=j[f])>=k[0]&&h<=k[1]&&(g=i[Sf.bisect(l,h,1,n)-1],g.y+=o,g.push(a[f]));return i}var b=!0,c=Number,d=je,e=he;return a.value=function(b){return arguments.length?(c=b,a):c},a.range=function(b){return arguments.length?(d=wa(b),a):d},a.bins=function(b){return arguments.length?(e="number"==typeof b?function(a){return ie(a,b)}:wa(b),a):e},a.frequency=function(c){return arguments.length?(b=!!c,a):b},a},Sf.layout.pack=function(){function a(a,f){var g=c.call(this,a,f),h=g[0],i=e[0],j=e[1],k=null==b?Math.sqrt:"function"==typeof b?b:function(){return b};if(h.x=h.y=0,Wd(h,function(a){a.r=+k(a.value)}),Wd(h,oe),d){var l=d*(b?1:Math.max(2*h.r/i,2*h.r/j))/2;Wd(h,function(a){a.r+=l}),Wd(h,oe),Wd(h,function(a){a.r-=l})}return re(h,i/2,j/2,b?1:1/Math.max(2*h.r/i,2*h.r/j)),g}var b,c=Sf.layout.hierarchy().sort(ke),d=0,e=[1,1];return a.size=function(b){return arguments.length?(e=b,a):e},a.radius=function(c){return arguments.length?(b=null==c||"function"==typeof c?c:+c,a):b},a.padding=function(b){return arguments.length?(d=+b,a):d},Ud(a,c)},Sf.layout.tree=function(){function a(a,e){var k=g.call(this,a,e),l=k[0],m=b(l);if(Wd(m,c),m.parent.m=-m.z,Vd(m,d),j)Vd(l,f);else{var n=l,o=l,p=l;Vd(l,function(a){a.x<n.x&&(n=a),a.x>o.x&&(o=a),a.depth>p.depth&&(p=a)});var q=h(n,o)/2-n.x,r=i[0]/(o.x+h(o,n)/2+q),s=i[1]/(p.depth||1);Vd(l,function(a){a.x=(a.x+q)*r,a.y=a.depth*s})}return k}function b(a){for(var b,c={A:null,children:[a]},d=[c];null!=(b=d.pop());)for(var e,f=b.children,g=0,h=f.length;g<h;++g)d.push((f[g]=e={_:f[g],parent:b,children:(e=f[g].children)&&e.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:g}).a=e);return c.children[0]}function c(a){var b=a.children,c=a.parent.children,d=a.i?c[a.i-1]:null;if(b.length){xe(a);var f=(b[0].z+b[b.length-1].z)/2;d?(a.z=d.z+h(a._,d._),a.m=a.z-f):a.z=f}else d&&(a.z=d.z+h(a._,d._));a.parent.A=e(a,d,a.parent.A||c[0])}function d(a){a._.x=a.z+a.parent.m,a.m+=a.parent.m}function e(a,b,c){if(b){for(var d,e=a,f=a,g=b,i=e.parent.children[0],j=e.m,k=f.m,l=g.m,m=i.m;g=ve(g),e=ue(e),g&&e;)i=ue(i),f=ve(f),f.a=a,d=g.z+l-e.z-j+h(g._,e._),d>0&&(we(ye(g,a,c),a,d),j+=d,k+=d),l+=g.m,j+=e.m,m+=i.m,k+=f.m;g&&!ve(f)&&(f.t=g,f.m+=l-k),e&&!ue(i)&&(i.t=e,i.m+=j-m,c=a)}return c}function f(a){a.x*=i[0],a.y=a.depth*i[1]}var g=Sf.layout.hierarchy().sort(null).value(null),h=te,i=[1,1],j=null;return a.separation=function(b){return arguments.length?(h=b,a):h},a.size=function(b){return arguments.length?(j=null==(i=b)?f:null,a):j?null:i},a.nodeSize=function(b){return arguments.length?(j=null==(i=b)?null:f,a):j?i:null},Ud(a,g)},Sf.layout.cluster=function(){function a(a,f){var g,h=b.call(this,a,f),i=h[0],j=0;Wd(i,function(a){var b=a.children;b&&b.length?(a.x=Ae(b),a.y=ze(b)):(a.x=g?j+=c(a,g):0,a.y=0,g=a)});var k=Be(i),l=Ce(i),m=k.x-c(k,l)/2,n=l.x+c(l,k)/2;return Wd(i,e?function(a){a.x=(a.x-i.x)*d[0],a.y=(i.y-a.y)*d[1]}:function(a){a.x=(a.x-m)/(n-m)*d[0],a.y=(1-(i.y?a.y/i.y:1))*d[1]}),h}var b=Sf.layout.hierarchy().sort(null).value(null),c=te,d=[1,1],e=!1;return a.separation=function(b){return arguments.length?(c=b,a):c},a.size=function(b){return arguments.length?(e=null==(d=b),a):e?null:d},a.nodeSize=function(b){return arguments.length?(e=null!=(d=b),a):e?d:null},Ud(a,b)},Sf.layout.treemap=function(){function a(a,b){for(var c,d,e=-1,f=a.length;++e<f;)d=(c=a[e]).value*(b<0?0:b),c.area=isNaN(d)||d<=0?0:d}function b(c){var f=c.children;if(f&&f.length){var g,h,i,j=l(c),k=[],m=f.slice(),o=1/0,p="slice"===n?j.dx:"dice"===n?j.dy:"slice-dice"===n?1&c.depth?j.dy:j.dx:Math.min(j.dx,j.dy);for(a(m,j.dx*j.dy/c.value),k.area=0;(i=m.length)>0;)k.push(g=m[i-1]),k.area+=g.area,"squarify"!==n||(h=d(k,p))<=o?(m.pop(),o=h):(k.area-=k.pop().area,e(k,p,j,!1),p=Math.min(j.dx,j.dy),k.length=k.area=0,o=1/0);k.length&&(e(k,p,j,!0),k.length=k.area=0),f.forEach(b)}}function c(b){var d=b.children;if(d&&d.length){var f,g=l(b),h=d.slice(),i=[];for(a(h,g.dx*g.dy/b.value),i.area=0;f=h.pop();)i.push(f),i.area+=f.area,null!=f.z&&(e(i,f.z?g.dx:g.dy,g,!h.length),i.length=i.area=0);d.forEach(c)}}function d(a,b){for(var c,d=a.area,e=0,f=1/0,g=-1,h=a.length;++g<h;)(c=a[g].area)&&(c<f&&(f=c),c>e&&(e=c));return d*=d,b*=b,d?Math.max(b*e*o/d,d/(b*f*o)):1/0}function e(a,b,c,d){var e,f=-1,g=a.length,h=c.x,j=c.y,k=b?i(a.area/b):0;if(b==c.dx){for((d||k>c.dy)&&(k=c.dy);++f<g;)e=a[f],e.x=h,e.y=j,e.dy=k,h+=e.dx=Math.min(c.x+c.dx-h,k?i(e.area/k):0);e.z=!0,e.dx+=c.x+c.dx-h,c.y+=k,c.dy-=k}else{for((d||k>c.dx)&&(k=c.dx);++f<g;)e=a[f],e.x=h,e.y=j,e.dx=k,j+=e.dy=Math.min(c.y+c.dy-j,k?i(e.area/k):0);e.z=!1,e.dy+=c.y+c.dy-j,c.x+=k,c.dx-=k}}function f(d){var e=g||h(d),f=e[0];return f.x=0,f.y=0,f.dx=j[0],f.dy=j[1],g&&h.revalue(f),a([f],f.dx*f.dy/f.value),(g?c:b)(f),m&&(g=e),e}var g,h=Sf.layout.hierarchy(),i=Math.round,j=[1,1],k=null,l=De,m=!1,n="squarify",o=.5*(1+Math.sqrt(5));return f.size=function(a){return arguments.length?(j=a,f):j},f.padding=function(a){function b(b){var c=a.call(f,b,b.depth);return null==c?De(b):Ee(b,"number"==typeof c?[c,c,c,c]:c)}function c(b){return Ee(b,a)}if(!arguments.length)return k;var d;return l=null==(k=a)?De:"function"==(d=typeof a)?b:"number"===d?(a=[a,a,a,a],c):c,f},f.round=function(a){return arguments.length?(i=a?Math.round:Number,f):i!=Number},f.sticky=function(a){return arguments.length?(m=a,g=null,f):m},f.ratio=function(a){return arguments.length?(o=a,f):o},f.mode=function(a){return arguments.length?(n=a+"",f):n},Ud(f,h)},Sf.random={normal:function(a,b){var c=arguments.length;return c<2&&(b=1),c<1&&(a=0),function(){var c,d,e;do{c=2*Math.random()-1,d=2*Math.random()-1,e=c*c+d*d}while(!e||e>1);return a+b*c*Math.sqrt(-2*Math.log(e)/e)}},logNormal:function(){var a=Sf.random.normal.apply(Sf,arguments);return function(){return Math.exp(a())}},bates:function(a){var b=Sf.random.irwinHall(a);return function(){return b()/a}},irwinHall:function(a){return function(){for(var b=0,c=0;c<a;c++)b+=Math.random();return b}}},Sf.scale={};var hi={floor:xa,ceil:xa};Sf.scale.linear=function(){return Le([0,1],[0,1],md,!1)};var ii={s:1,g:1,p:1,r:1,e:1};Sf.scale.log=function(){return Te(Sf.scale.linear().domain([0,1]),10,!0,[1,10])};var ji=Sf.format(".0e"),ki={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};Sf.scale.pow=function(){return Ue(Sf.scale.linear(),1,[0,1])},Sf.scale.sqrt=function(){return Sf.scale.pow().exponent(.5)},Sf.scale.ordinal=function(){return We([],{t:"range",a:[[]]})},Sf.scale.category10=function(){return Sf.scale.ordinal().range(li)},Sf.scale.category20=function(){return Sf.scale.ordinal().range(mi)},Sf.scale.category20b=function(){return Sf.scale.ordinal().range(ni)},Sf.scale.category20c=function(){return Sf.scale.ordinal().range(oi)};var li=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(pa),mi=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(pa),ni=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(pa),oi=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(pa);Sf.scale.quantile=function(){return Xe([],[])},Sf.scale.quantize=function(){return Ye(0,1,[0,1])},Sf.scale.threshold=function(){return Ze([.5],[0,1])},Sf.scale.identity=function(){return $e([0,1])},Sf.svg={},Sf.svg.arc=function(){function a(){var a=b.apply(this,arguments),f=c.apply(this,arguments),g=d.apply(this,arguments)+pi,h=e.apply(this,arguments)+pi,i=(h<g&&(i=g,g=h,h=i),h-g),j=i<ug?"0":"1",k=Math.cos(g),l=Math.sin(g),m=Math.cos(h),n=Math.sin(h);return i>=qi?a?"M0,"+f+"A"+f+","+f+" 0 1,1 0,"+-f+"A"+f+","+f+" 0 1,1 0,"+f+"M0,"+a+"A"+a+","+a+" 0 1,0 0,"+-a+"A"+a+","+a+" 0 1,0 0,"+a+"Z":"M0,"+f+"A"+f+","+f+" 0 1,1 0,"+-f+"A"+f+","+f+" 0 1,1 0,"+f+"Z":a?"M"+f*k+","+f*l+"A"+f+","+f+" 0 "+j+",1 "+f*m+","+f*n+"L"+a*m+","+a*n+"A"+a+","+a+" 0 "+j+",0 "+a*k+","+a*l+"Z":"M"+f*k+","+f*l+"A"+f+","+f+" 0 "+j+",1 "+f*m+","+f*n+"L0,0Z"}var b=_e,c=af,d=bf,e=cf;return a.innerRadius=function(c){return arguments.length?(b=wa(c),a):b},a.outerRadius=function(b){return arguments.length?(c=wa(b),a):c},a.startAngle=function(b){return arguments.length?(d=wa(b),a):d},a.endAngle=function(b){return arguments.length?(e=wa(b),a):e},a.centroid=function(){var a=(b.apply(this,arguments)+c.apply(this,arguments))/2,f=(d.apply(this,arguments)+e.apply(this,arguments))/2+pi;return[Math.cos(f)*a,Math.sin(f)*a]},a};var pi=-wg,qi=vg-xg;Sf.svg.line=function(){return df(xa)};var ri=Sf.map({linear:ef,"linear-closed":ff,step:gf,"step-before":hf,"step-after":jf,basis:pf,"basis-open":qf,"basis-closed":rf,bundle:sf,cardinal:mf,"cardinal-open":kf,"cardinal-closed":lf,monotone:yf});ri.forEach(function(a,b){b.key=a,b.closed=/-closed$/.test(a)});var si=[0,2/3,1/3,0],ti=[0,1/3,2/3,0],ui=[0,1/6,2/3,1/6];Sf.svg.line.radial=function(){var a=df(zf);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a},hf.reverse=jf,jf.reverse=hf,Sf.svg.area=function(){return Af(xa)},Sf.svg.area.radial=function(){var a=Af(zf);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a},Sf.svg.chord=function(){function a(a,h){var i=b(this,f,a,h),j=b(this,g,a,h);return"M"+i.p0+d(i.r,i.p1,i.a1-i.a0)+(c(i,j)?e(i.r,i.p1,i.r,i.p0):e(i.r,i.p1,j.r,j.p0)+d(j.r,j.p1,j.a1-j.a0)+e(j.r,j.p1,i.r,i.p0))+"Z"}function b(a,b,c,d){var e=b.call(a,c,d),f=h.call(a,e,d),g=i.call(a,e,d)+pi,k=j.call(a,e,d)+pi;return{r:f,a0:g,a1:k,p0:[f*Math.cos(g),f*Math.sin(g)],p1:[f*Math.cos(k),f*Math.sin(k)]}}function c(a,b){return a.a0==b.a0&&a.a1==b.a1}function d(a,b,c){return"A"+a+","+a+" 0 "+ +(c>ug)+",1 "+b}function e(a,b,c,d){return"Q 0,0 "+d}var f=nc,g=oc,h=Bf,i=bf,j=cf;return a.radius=function(b){return arguments.length?(h=wa(b),a):h},a.source=function(b){return arguments.length?(f=wa(b),a):f},a.target=function(b){return arguments.length?(g=wa(b),a):g},a.startAngle=function(b){return arguments.length?(i=wa(b),a):i},a.endAngle=function(b){return arguments.length?(j=wa(b),a):j},a},Sf.svg.diagonal=function(){function a(a,e){var f=b.call(this,a,e),g=c.call(this,a,e),h=(f.y+g.y)/2,i=[f,{x:f.x,y:h},{x:g.x,y:h},g];return i=i.map(d),"M"+i[0]+"C"+i[1]+" "+i[2]+" "+i[3]}var b=nc,c=oc,d=Cf;return a.source=function(c){return arguments.length?(b=wa(c),a):b},a.target=function(b){return arguments.length?(c=wa(b),a):c},a.projection=function(b){return arguments.length?(d=b,a):d},a},Sf.svg.diagonal.radial=function(){var a=Sf.svg.diagonal(),b=Cf,c=a.projection;return a.projection=function(a){return arguments.length?c(Df(b=a)):b},a},Sf.svg.symbol=function(){function a(a,d){return(vi.get(b.call(this,a,d))||Gf)(c.call(this,a,d))}var b=Ff,c=Ef;return a.type=function(c){return arguments.length?(b=wa(c),a):b},a.size=function(b){return arguments.length?(c=wa(b),a):c},a};var vi=Sf.map({circle:Gf,cross:function(a){var b=Math.sqrt(a/5)/2;return"M"+-3*b+","+-b+"H"+-b+"V"+-3*b+"H"+b+"V"+-b+"H"+3*b+"V"+b+"H"+b+"V"+3*b+"H"+-b+"V"+b+"H"+-3*b+"Z"},diamond:function(a){var b=Math.sqrt(a/(2*zi)),c=b*zi;return"M0,"+-b+"L"+c+",0 0,"+b+" "+-c+",0Z"},square:function(a){var b=Math.sqrt(a)/2;return"M"+-b+","+-b+"L"+b+","+-b+" "+b+","+b+" "+-b+","+b+"Z"},"triangle-down":function(a){var b=Math.sqrt(a/yi),c=b*yi/2;return"M0,"+c+"L"+b+","+-c+" "+-b+","+-c+"Z"},"triangle-up":function(a){var b=Math.sqrt(a/yi),c=b*yi/2;return"M0,"+-c+"L"+b+","+c+" "+-b+","+c+"Z"}});Sf.svg.symbolTypes=vi.keys();var wi,xi,yi=Math.sqrt(3),zi=Math.tan(30*zg),Ai=[],Bi=0;Ai.call=mg.call,Ai.empty=mg.empty,Ai.node=mg.node,Ai.size=mg.size,Sf.transition=function(a){return arguments.length?wi?a.transition():a:pg.transition()},Sf.transition.prototype=Ai,Ai.select=function(a){var b,c,d,e=this.id,f=[];a=w(a);for(var g=-1,h=this.length;++g<h;){f.push(b=[]);for(var i=this[g],j=-1,k=i.length;++j<k;)(d=i[j])&&(c=a.call(d,d.__data__,j,g))?("__data__"in d&&(c.__data__=d.__data__),Kf(c,j,e,d.__transition__[e]),b.push(c)):b.push(null)}return Hf(f,e)},Ai.selectAll=function(a){var b,c,d,e,f,g=this.id,h=[];a=x(a);for(var i=-1,j=this.length;++i<j;)for(var k=this[i],l=-1,m=k.length;++l<m;)if(d=k[l]){f=d.__transition__[g],c=a.call(d,d.__data__,l,i),h.push(b=[]);for(var n=-1,o=c.length;++n<o;)(e=c[n])&&Kf(e,n,g,f),b.push(e)}return Hf(h,g)},Ai.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=I(a));for(var f=0,g=this.length;f<g;f++){e.push(b=[]);for(var c=this[f],h=0,i=c.length;h<i;h++)(d=c[h])&&a.call(d,d.__data__,h,f)&&b.push(d)}return Hf(e,this.id)},Ai.tween=function(a,b){var c=this.id;return arguments.length<2?this.node().__transition__[c].tween.get(a):K(this,null==b?function(b){b.__transition__[c].tween.remove(a)}:function(d){d.__transition__[c].tween.set(a,b)})},Ai.attr=function(a,b){function c(){this.removeAttribute(h)}function d(){this.removeAttributeNS(h.space,h.local)}function e(a){return null==a?c:(a+="",function(){var b,c=this.getAttribute(h);return c!==a&&(b=g(c,a),function(a){this.setAttribute(h,b(a))})})}function f(a){return null==a?d:(a+="",function(){var b,c=this.getAttributeNS(h.space,h.local);return c!==a&&(b=g(c,a),function(a){this.setAttributeNS(h.space,h.local,b(a))})})}if(arguments.length<2){for(b in a)this.attr(b,a[b]);return this}var g="transform"==a?Jd:md,h=Sf.ns.qualify(a);return If(this,"attr."+a,b,h.local?f:e)},Ai.attrTween=function(a,b){function c(a,c){var d=b.call(this,a,c,this.getAttribute(e));return d&&function(a){this.setAttribute(e,d(a))}}function d(a,c){var d=b.call(this,a,c,this.getAttributeNS(e.space,e.local));return d&&function(a){this.setAttributeNS(e.space,e.local,d(a))}}var e=Sf.ns.qualify(a);return this.tween("attr."+a,e.local?d:c)},Ai.style=function(a,b,c){function d(){this.style.removeProperty(a)}function e(b){return null==b?d:(b+="",function(){var d,e=Xf.getComputedStyle(this,null).getPropertyValue(a);return e!==b&&(d=md(e,b),function(b){this.style.setProperty(a,d(b),c)})})}var f=arguments.length;if(f<3){if("string"!=typeof a){f<2&&(b="");for(c in a)this.style(c,a[c],b);return this}c=""}return If(this,"style."+a,b,e)},Ai.styleTween=function(a,b,c){function d(d,e){var f=b.call(this,d,e,Xf.getComputedStyle(this,null).getPropertyValue(a));return f&&function(b){this.style.setProperty(a,f(b),c)}}return arguments.length<3&&(c=""),this.tween("style."+a,d)},Ai.text=function(a){return If(this,"text",a,Jf)},Ai.remove=function(){return this.each("end.transition",function(){var a;this.__transition__.count<2&&(a=this.parentNode)&&a.removeChild(this)})},Ai.ease=function(a){var b=this.id;return arguments.length<1?this.node().__transition__[b].ease:("function"!=typeof a&&(a=Sf.ease.apply(Sf,arguments)),K(this,function(c){c.__transition__[b].ease=a}))},Ai.delay=function(a){var b=this.id;return arguments.length<1?this.node().__transition__[b].delay:K(this,"function"==typeof a?function(c,d,e){c.__transition__[b].delay=+a.call(c,c.__data__,d,e)}:(a=+a,function(c){c.__transition__[b].delay=a}))},Ai.duration=function(a){var b=this.id;return arguments.length<1?this.node().__transition__[b].duration:K(this,"function"==typeof a?function(c,d,e){c.__transition__[b].duration=Math.max(1,a.call(c,c.__data__,d,e))}:(a=Math.max(1,a),function(c){c.__transition__[b].duration=a}))},Ai.each=function(a,b){var c=this.id;if(arguments.length<2){var d=xi,e=wi;wi=c,K(this,function(b,d,e){xi=b.__transition__[c],a.call(b,b.__data__,d,e)}),xi=d,wi=e}else K(this,function(d){var e=d.__transition__[c];(e.event||(e.event=Sf.dispatch("start","end"))).on(a,b)});return this},Ai.transition=function(){for(var a,b,c,d,e=this.id,f=++Bi,g=[],h=0,i=this.length;h<i;h++){g.push(a=[]);for(var b=this[h],j=0,k=b.length;j<k;j++)(c=b[j])&&(d=Object.create(c.__transition__[e]),d.delay+=d.duration,Kf(c,j,f,d)),a.push(c)}return Hf(g,f)},Sf.svg.axis=function(){function a(a){a.each(function(){
var a,j=Sf.select(this),k=this.__chart__||c,l=this.__chart__=c.copy(),m=null==i?l.ticks?l.ticks.apply(l,h):l.domain():i,n=null==b?l.tickFormat?l.tickFormat.apply(l,h):xa:b,o=j.selectAll(".tick").data(m,l),p=o.enter().insert("g",".domain").attr("class","tick").style("opacity",xg),q=Sf.transition(o.exit()).style("opacity",xg).remove(),r=Sf.transition(o.order()).style("opacity",1),s=Ge(l),t=j.selectAll(".domain").data([0]),u=(t.enter().append("path").attr("class","domain"),Sf.transition(t));p.append("line"),p.append("text");var v=p.select("line"),w=r.select("line"),x=o.select("text").text(n),y=p.select("text"),z=r.select("text");switch(d){case"bottom":a=Lf,v.attr("y2",e),y.attr("y",Math.max(e,0)+g),w.attr("x2",0).attr("y2",e),z.attr("x",0).attr("y",Math.max(e,0)+g),x.attr("dy",".71em").style("text-anchor","middle"),u.attr("d","M"+s[0]+","+f+"V0H"+s[1]+"V"+f);break;case"top":a=Lf,v.attr("y2",-e),y.attr("y",-(Math.max(e,0)+g)),w.attr("x2",0).attr("y2",-e),z.attr("x",0).attr("y",-(Math.max(e,0)+g)),x.attr("dy","0em").style("text-anchor","middle"),u.attr("d","M"+s[0]+","+-f+"V0H"+s[1]+"V"+-f);break;case"left":a=Mf,v.attr("x2",-e),y.attr("x",-(Math.max(e,0)+g)),w.attr("x2",-e).attr("y2",0),z.attr("x",-(Math.max(e,0)+g)).attr("y",0),x.attr("dy",".32em").style("text-anchor","end"),u.attr("d","M"+-f+","+s[0]+"H0V"+s[1]+"H"+-f);break;case"right":a=Mf,v.attr("x2",e),y.attr("x",Math.max(e,0)+g),w.attr("x2",e).attr("y2",0),z.attr("x",Math.max(e,0)+g).attr("y",0),x.attr("dy",".32em").style("text-anchor","start"),u.attr("d","M"+f+","+s[0]+"H0V"+s[1]+"H"+f)}if(l.rangeBand){var A=l,B=A.rangeBand()/2;k=l=function(a){return A(a)+B}}else k.rangeBand?k=l:q.call(a,l);p.call(a,k),r.call(a,l)})}var b,c=Sf.scale.linear(),d=Ci,e=6,f=6,g=3,h=[10],i=null;return a.scale=function(b){return arguments.length?(c=b,a):c},a.orient=function(b){return arguments.length?(d=b in Di?b+"":Ci,a):d},a.ticks=function(){return arguments.length?(h=arguments,a):h},a.tickValues=function(b){return arguments.length?(i=b,a):i},a.tickFormat=function(c){return arguments.length?(b=c,a):b},a.tickSize=function(b){var c=arguments.length;return c?(e=+b,f=+arguments[c-1],a):e},a.innerTickSize=function(b){return arguments.length?(e=+b,a):e},a.outerTickSize=function(b){return arguments.length?(f=+b,a):f},a.tickPadding=function(b){return arguments.length?(g=+b,a):g},a.tickSubdivide=function(){return arguments.length&&a},a};var Ci="bottom",Di={top:1,right:1,bottom:1,left:1};Sf.svg.brush=function(){function a(f){f.each(function(){var f=Sf.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",e).on("touchstart.brush",e),g=f.selectAll(".background").data([0]);g.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),f.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var h=f.selectAll(".resize").data(o,xa);h.exit().remove(),h.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return Ei[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),h.style("display",a.empty()?"none":null);var k,l=Sf.transition(f),m=Sf.transition(g);i&&(k=Ge(i),m.attr("x",k[0]).attr("width",k[1]-k[0]),c(l)),j&&(k=Ge(j),m.attr("y",k[0]).attr("height",k[1]-k[0]),d(l)),b(l)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+k[+/e$/.test(a)]+","+l[+/^s/.test(a)]+")"})}function c(a){a.select(".extent").attr("x",k[0]),a.selectAll(".extent,.n>rect,.s>rect").attr("width",k[1]-k[0])}function d(a){a.select(".extent").attr("y",l[0]),a.selectAll(".extent,.e>rect,.w>rect").attr("height",l[1]-l[0])}function e(){function e(){32==Sf.event.keyCode&&(C||(t=null,E[0]-=k[1],E[1]-=l[1],C=2),s())}function o(){32==Sf.event.keyCode&&2==C&&(E[0]+=k[1],E[1]+=l[1],C=0,s())}function p(){var a=Sf.mouse(v),e=!1;u&&(a[0]+=u[0],a[1]+=u[1]),C||(Sf.event.altKey?(t||(t=[(k[0]+k[1])/2,(l[0]+l[1])/2]),E[0]=k[+(a[0]<t[0])],E[1]=l[+(a[1]<t[1])]):t=null),A&&q(a,i,0)&&(c(y),e=!0),B&&q(a,j,1)&&(d(y),e=!0),e&&(b(y),x({type:"brush",mode:C?"move":"resize"}))}function q(a,b,c){var d,e,h=Ge(b),i=h[0],j=h[1],o=E[c],p=c?l:k,q=p[1]-p[0];if(C&&(i-=o,j-=q+o),d=(c?n:m)?Math.max(i,Math.min(j,a[c])):a[c],C?e=(d+=o)+q:(t&&(o=Math.max(i,Math.min(j,2*t[c]-d))),o<d?(e=d,d=o):e=o),p[0]!=d||p[1]!=e)return c?g=null:f=null,p[0]=d,p[1]=e,!0}function r(){p(),y.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null),Sf.select("body").style("cursor",null),F.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),D(),x({type:"brushend"})}var t,u,v=this,w=Sf.select(Sf.event.target),x=h.of(v,arguments),y=Sf.select(v),z=w.datum(),A=!/^(n|s)$/.test(z)&&i,B=!/^(e|w)$/.test(z)&&j,C=w.classed("extent"),D=R(),E=Sf.mouse(v),F=Sf.select(Xf).on("keydown.brush",e).on("keyup.brush",o);if(Sf.event.changedTouches?F.on("touchmove.brush",p).on("touchend.brush",r):F.on("mousemove.brush",p).on("mouseup.brush",r),y.interrupt().selectAll("*").interrupt(),C)E[0]=k[0]-E[0],E[1]=l[0]-E[1];else if(z){var G=+/w$/.test(z),H=+/^n/.test(z);u=[k[1-G]-E[0],l[1-H]-E[1]],E[0]=k[G],E[1]=l[H]}else Sf.event.altKey&&(t=E.slice());y.style("pointer-events","none").selectAll(".resize").style("display",null),Sf.select("body").style("cursor",w.style("cursor")),x({type:"brushstart"}),p()}var f,g,h=u(a,"brushstart","brush","brushend"),i=null,j=null,k=[0,0],l=[0,0],m=!0,n=!0,o=Fi[0];return a.event=function(a){a.each(function(){var a=h.of(this,arguments),b={x:k,y:l,i:f,j:g},c=this.__chart__||b;this.__chart__=b,wi?Sf.select(this).transition().each("start.brush",function(){f=c.i,g=c.j,k=c.x,l=c.y,a({type:"brushstart"})}).tween("brush:brush",function(){var c=nd(k,b.x),d=nd(l,b.y);return f=g=null,function(e){k=b.x=c(e),l=b.y=d(e),a({type:"brush",mode:"resize"})}}).each("end.brush",function(){f=b.i,g=b.j,a({type:"brush",mode:"resize"}),a({type:"brushend"})}):(a({type:"brushstart"}),a({type:"brush",mode:"resize"}),a({type:"brushend"}))})},a.x=function(b){return arguments.length?(i=b,o=Fi[!i<<1|!j],a):i},a.y=function(b){return arguments.length?(j=b,o=Fi[!i<<1|!j],a):j},a.clamp=function(b){return arguments.length?(i&&j?(m=!!b[0],n=!!b[1]):i?m=!!b:j&&(n=!!b),a):i&&j?[m,n]:i?m:j?n:null},a.extent=function(b){var c,d,e,h,m;return arguments.length?(i&&(c=b[0],d=b[1],j&&(c=c[0],d=d[0]),f=[c,d],i.invert&&(c=i(c),d=i(d)),d<c&&(m=c,c=d,d=m),c==k[0]&&d==k[1]||(k=[c,d])),j&&(e=b[0],h=b[1],i&&(e=e[1],h=h[1]),g=[e,h],j.invert&&(e=j(e),h=j(h)),h<e&&(m=e,e=h,h=m),e==l[0]&&h==l[1]||(l=[e,h])),a):(i&&(f?(c=f[0],d=f[1]):(c=k[0],d=k[1],i.invert&&(c=i.invert(c),d=i.invert(d)),d<c&&(m=c,c=d,d=m))),j&&(g?(e=g[0],h=g[1]):(e=l[0],h=l[1],j.invert&&(e=j.invert(e),h=j.invert(h)),h<e&&(m=e,e=h,h=m))),i&&j?[[c,e],[d,h]]:i?[c,d]:j&&[e,h])},a.clear=function(){return a.empty()||(k=[0,0],l=[0,0],f=g=null),a},a.empty=function(){return!!i&&k[0]==k[1]||!!j&&l[0]==l[1]},Sf.rebind(a,h,"on")};var Ei={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Fi=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Gi=Zg.format=dh.timeFormat,Hi=Gi.utc,Ii=Hi("%Y-%m-%dT%H:%M:%S.%LZ");Gi.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Nf:Ii,Nf.parse=function(a){var b=new Date(a);return isNaN(b)?null:b},Nf.toString=Ii.toString,Zg.second=Ja(function(a){return new $g(1e3*Math.floor(a/1e3))},function(a,b){a.setTime(a.getTime()+1e3*Math.floor(b))},function(a){return a.getSeconds()}),Zg.seconds=Zg.second.range,Zg.seconds.utc=Zg.second.utc.range,Zg.minute=Ja(function(a){return new $g(6e4*Math.floor(a/6e4))},function(a,b){a.setTime(a.getTime()+6e4*Math.floor(b))},function(a){return a.getMinutes()}),Zg.minutes=Zg.minute.range,Zg.minutes.utc=Zg.minute.utc.range,Zg.hour=Ja(function(a){var b=a.getTimezoneOffset()/60;return new $g(36e5*(Math.floor(a/36e5-b)+b))},function(a,b){a.setTime(a.getTime()+36e5*Math.floor(b))},function(a){return a.getHours()}),Zg.hours=Zg.hour.range,Zg.hours.utc=Zg.hour.utc.range,Zg.month=Ja(function(a){return a=Zg.day(a),a.setDate(1),a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()}),Zg.months=Zg.month.range,Zg.months.utc=Zg.month.utc.range;var Ji=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Ki=[[Zg.second,1],[Zg.second,5],[Zg.second,15],[Zg.second,30],[Zg.minute,1],[Zg.minute,5],[Zg.minute,15],[Zg.minute,30],[Zg.hour,1],[Zg.hour,3],[Zg.hour,6],[Zg.hour,12],[Zg.day,1],[Zg.day,2],[Zg.week,1],[Zg.month,1],[Zg.month,3],[Zg.year,1]],Li=Gi.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",xb]]),Mi={range:function(a,b,c){return Sf.range(Math.ceil(a/c)*c,+b,c).map(Pf)},floor:xa,ceil:xa};Ki.year=Zg.year,Zg.scale=function(){return Of(Sf.scale.linear(),Ki,Li)};var Ni=Ki.map(function(a){return[a[0].utc,a[1]]}),Oi=Hi.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],["%Y",xb]]);return Ni.year=Zg.year.utc,Zg.scale.utc=function(){return Of(Sf.scale.linear(),Ni,Oi)},Sf.text=ya(function(a){return a.responseText}),Sf.json=function(a,b){return za(a,"application/json",Qf,b)},Sf.html=function(a,b){return za(a,"text/html",Rf,b)},Sf.xml=ya(function(a){return a.responseXML}),Sf}()},{}],238:[function(b,c,d){(function(e,f){!function(b,e){"object"==typeof d&&void 0!==c?c.exports=e():"function"==typeof a&&a.amd?a(e):b.ES6Promise=e()}(this,function(){"use strict";function a(a){var b=typeof a;return null!==a&&("object"===b||"function"===b)}function c(a){return"function"==typeof a}function d(a){U=a}function g(a){V=a}function h(){return function(){return e.nextTick(m)}}function i(){return void 0!==T?function(){T(m)}:l()}function j(){var a=0,b=new Y(m),c=document.createTextNode("");return b.observe(c,{characterData:!0}),function(){c.data=a=++a%2}}function k(){var a=new MessageChannel;return a.port1.onmessage=m,function(){return a.port2.postMessage(0)}}function l(){var a=setTimeout;return function(){return a(m,1)}}function m(){for(var a=0;a<S;a+=2){(0,_[a])(_[a+1]),_[a]=void 0,_[a+1]=void 0}S=0}function n(){try{var a=Function("return this")().require("vertx");return T=a.runOnLoop||a.runOnContext,i()}catch(a){return l()}}function o(a,b){var c=this,d=new this.constructor(q);void 0===d[ba]&&I(d);var e=c._state;if(e){var f=arguments[e-1];V(function(){return F(e,d,f,c._result)})}else C(c,d,a,b);return d}function p(a){var b=this;if(a&&"object"==typeof a&&a.constructor===b)return a;var c=new b(q);return y(c,a),c}function q(){}function r(){return new TypeError("You cannot resolve a promise with itself")}function s(){return new TypeError("A promises callback cannot return that same promise.")}function t(a){try{return a.then}catch(a){return fa.error=a,fa}}function u(a,b,c,d){try{a.call(b,c,d)}catch(a){return a}}function v(a,b,c){V(function(a){var d=!1,e=u(c,b,function(c){d||(d=!0,b!==c?y(a,c):A(a,c))},function(b){d||(d=!0,B(a,b))},"Settle: "+(a._label||" unknown promise"));!d&&e&&(d=!0,B(a,e))},a)}function w(a,b){b._state===da?A(a,b._result):b._state===ea?B(a,b._result):C(b,void 0,function(b){return y(a,b)},function(b){return B(a,b)})}function x(a,b,d){b.constructor===a.constructor&&d===o&&b.constructor.resolve===p?w(a,b):d===fa?(B(a,fa.error),fa.error=null):void 0===d?A(a,b):c(d)?v(a,b,d):A(a,b)}function y(b,c){b===c?B(b,r()):a(c)?x(b,c,t(c)):A(b,c)}function z(a){a._onerror&&a._onerror(a._result),D(a)}function A(a,b){a._state===ca&&(a._result=b,a._state=da,0!==a._subscribers.length&&V(D,a))}function B(a,b){a._state===ca&&(a._state=ea,a._result=b,V(z,a))}function C(a,b,c,d){var e=a._subscribers,f=e.length;a._onerror=null,e[f]=b,e[f+da]=c,e[f+ea]=d,0===f&&a._state&&V(D,a)}function D(a){var b=a._subscribers,c=a._state;if(0!==b.length){for(var d=void 0,e=void 0,f=a._result,g=0;g<b.length;g+=3)d=b[g],e=b[g+c],d?F(c,d,e,f):e(f);a._subscribers.length=0}}function E(a,b){try{return a(b)}catch(a){return fa.error=a,fa}}function F(a,b,d,e){var f=c(d),g=void 0,h=void 0,i=void 0,j=void 0;if(f){if(g=E(d,e),g===fa?(j=!0,h=g.error,g.error=null):i=!0,b===g)return void B(b,s())}else g=e,i=!0;b._state!==ca||(f&&i?y(b,g):j?B(b,h):a===da?A(b,g):a===ea&&B(b,g))}function G(a,b){try{b(function(b){y(a,b)},function(b){B(a,b)})}catch(b){B(a,b)}}function H(){return ga++}function I(a){a[ba]=ga++,a._state=void 0,a._result=void 0,a._subscribers=[]}function J(){return new Error("Array Methods must be provided an Array")}function K(a){return new ha(this,a).promise}function L(a){var b=this;return new b(R(a)?function(c,d){for(var e=a.length,f=0;f<e;f++)b.resolve(a[f]).then(c,d)}:function(a,b){return b(new TypeError("You must pass an array to race."))})}function M(a){var b=this,c=new b(q);return B(c,a),c}function N(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function O(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function P(){var a=void 0;if(void 0!==f)a=f;else if("undefined"!=typeof self)a=self;else try{a=Function("return this")()}catch(a){throw new Error("polyfill failed because global object is unavailable in this environment")}var b=a.Promise;if(b){var c=null;try{c=Object.prototype.toString.call(b.resolve())}catch(a){}if("[object Promise]"===c&&!b.cast)return}a.Promise=ia}var Q=void 0;Q=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)};var R=Q,S=0,T=void 0,U=void 0,V=function(a,b){_[S]=a,_[S+1]=b,2===(S+=2)&&(U?U(m):aa())},W="undefined"!=typeof window?window:void 0,X=W||{},Y=X.MutationObserver||X.WebKitMutationObserver,Z="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),$="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,_=new Array(1e3),aa=void 0;aa=Z?h():Y?j():$?k():void 0===W&&"function"==typeof b?n():l();var ba=Math.random().toString(36).substring(2),ca=void 0,da=1,ea=2,fa={error:null},ga=0,ha=function(){function a(a,b){this._instanceConstructor=a,this.promise=new a(q),this.promise[ba]||I(this.promise),R(b)?(this.length=b.length,this._remaining=b.length,this._result=new Array(this.length),0===this.length?A(this.promise,this._result):(this.length=this.length||0,this._enumerate(b),0===this._remaining&&A(this.promise,this._result))):B(this.promise,J())}return a.prototype._enumerate=function(a){for(var b=0;this._state===ca&&b<a.length;b++)this._eachEntry(a[b],b)},a.prototype._eachEntry=function(a,b){var c=this._instanceConstructor,d=c.resolve;if(d===p){var e=t(a);if(e===o&&a._state!==ca)this._settledAt(a._state,b,a._result);else if("function"!=typeof e)this._remaining--,this._result[b]=a;else if(c===ia){var f=new c(q);x(f,a,e),this._willSettleAt(f,b)}else this._willSettleAt(new c(function(b){return b(a)}),b)}else this._willSettleAt(d(a),b)},a.prototype._settledAt=function(a,b,c){var d=this.promise;d._state===ca&&(this._remaining--,a===ea?B(d,c):this._result[b]=c),0===this._remaining&&A(d,this._result)},a.prototype._willSettleAt=function(a,b){var c=this;C(a,void 0,function(a){return c._settledAt(da,b,a)},function(a){return c._settledAt(ea,b,a)})},a}(),ia=function(){function a(b){this[ba]=H(),this._result=this._state=void 0,this._subscribers=[],q!==b&&("function"!=typeof b&&N(),this instanceof a?G(this,b):O())}return a.prototype.catch=function(a){return this.then(null,a)},a.prototype.finally=function(a){var b=this,d=b.constructor;return c(a)?b.then(function(b){return d.resolve(a()).then(function(){return b})},function(b){return d.resolve(a()).then(function(){throw b})}):b.then(a,a)},a}();return ia.prototype.then=o,ia.all=K,ia.race=L,ia.resolve=p,ia.reject=M,ia._setScheduler=d,ia._setAsap=g,ia._asap=V,ia.polyfill=P,ia.Promise=ia,ia})}).call(this,b("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:275}],239:[function(a,b,c){(function(){c.ACCEPT_HEADER={xml:"application/xml",json:"application/json",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",csv:"text/comma-separated-values",fasta:"text/x-fasta",gff3:"text/x-gff3",bed:"text/x-bed",objects:"application/json;type=objects",jsonobjects:"application/json;type=objects",jsontable:"application/json;type=table",jsonrows:"application/json;type=rows",jsoncount:"application/json;type=count",jsonp:"application/javascript",jsonpobjects:"application/javascript;type=objects",jsonptable:"application/javascript;type=table",jsonprows:"application/javascript;type=rows",jsonpcount:"application/javascript;type=count"}}).call(this)},{}],240:[function(a,b,c){(function(){var b,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;e=a("url"),d=a("JSONStream"),m=a("http"),b=a("./constants").ACCEPT_HEADER,h=a("./version").VERSION,s=r=a("./util"),k=s.error,j=s.defer,n=s.merge,s.invoke,g="node-http/imjs-"+h,f="application/x-www-form-urlencoded",c.supports=function(){return!0},q=function(a,b,c){return function(a){var e,f;return null==a.pipe?c(new Error("response is not a stream")):(a.on("error",c),null!=a.statusCode&&200!==a.statusCode?(e=d.parse("error"),e.pause(),a.pipe(e),c([a.statusCode,e])):(f=d.parse("results.*"),f.pause(),a.pipe(f),b(f)))}},l=function(a,b,c,d){var e,f;return e=a.type,f=a.url,"Could not parse response to "+e+" "+f+': "'+b+'" ('+d+": "+c+")"},i=function(a,b,c){return function(d){var e;return e="",d.on("data",function(a){return e+=a}),d.on("error",c),d.on("end",function(){var f,g,h,i,j,k;if(null!=(null!=d?d.headers:void 0)&&(f=d.headers["content-type"]),"application/json"!==f&&!/json/.test(a.dataType)&&!/json/.test(a.data.format))return(i=e.match(/\[ERROR\] (\d+)([\s\S]*)/))?c(new Error(i[2])):(200<=(k=d.statusCode)&&k<400?b:c)(e);if(""===e&&200===d.statusCode)return b();try{return j=JSON.parse(e),(h=j.error)?c(new Error(h)):b(j)}catch(b){return g=b,c(d.statusCode>=400?new Error(d.statusCode):new Error(l(a,e,g,d.statusCode)))}})}},c.iterReq=function(a,b,c){return function(d,e,f,g,h){var i,j,l,m,o;return null==e&&(e={}),null==f&&(f=function(){}),null==g&&(g=function(){}),null==h&&(h=function(){}),r.isFunction(e)&&(o=[{},e,f,g],e=o[0],f=o[1],g=o[2],h=o[3]),m=n({format:c},e,{query:d.toXML()}),i=function(a){return a.on("data",f),a.on("error",g),a.on("end",h),setTimeout(function(){if(null!=a.resume)return a.resume()},3),a},l=function(a){var b,c;return c=a[0],b=a[1],b.on("data",g),b.on("error",g),b.on("end",h),null!=b.resume&&b.resume(),k(c)},j=this.makeRequest(a,b,m,null,!0),j.then(i,l),j}},p=function(a,b,c){var d;return d=setTimeout(function(){return b("Request timed out.")},a),c.then(function(){return cancelTimeout(d)})},o=function(a){var c,d,h,i,j,k,l,m;if(!a.url)throw new Error("No url provided in "+JSON.stringify(a));if("string"==typeof a.data){if(h=a.data,"GET"===(k=a.type)||"DELETE"===k)throw new Error("Invalid request. "+a.type+" requests must not have bodies")}else h=r.querystring(a.data);if(d=e.parse(a.url,!0),d.withCredentials=!1,d.method=a.type||"GET",null!=a.port&&(d.port=a.port),d.headers={"User-Agent":g,Accept:b[a.dataType]},("GET"===(l=d.method)||"DELETE"===l)&&(null!=h?h.length:void 0)?(i=/\?/.test(d.path)?"&":"?",d.path+=i+h,h=null):(d.headers["Content-Type"]=(a.contentType||f)+"; charset=UTF-8",d.headers["Content-Length"]=h.length),null!=a.headers){m=a.headers;for(c in m)j=m[c],d.headers[c]=j}return null!=a.auth&&(d.auth=a.auth),[d,h]},c.doReq=function(a,b){var c,d,e,f,g,h,k,l,n,r,s;r=j(),f=r.promise,k=r.resolve,g=r.reject,f.then(null,a.error);try{s=o(a),n=s[0],e=s[1],d=(b?q:i)(a,k,g),h=m.request(n,d),h.on("error",function(b){return g(new Error("Error: "+n.method+" "+a.url+": "+b))}),null!=e&&h.write(e),h.end(),l=a.timeout,l>0&&p(l,g,f)}catch(a){c=a,g(c)}return f}}).call(this)},{"./constants":239,"./util":251,"./version":252,JSONStream:232,http:295,url:301}],241:[function(a,b,c){(function(){var b,d,e,f,g,h,i,j,k,l,m,n,o,p,q={}.hasOwnProperty,r=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},s=function(a,b){return function(){return a.apply(b,arguments)}};k=a("./util"),n=c,o=k.uniqBy,i=k.difference,h=k.defer,p=k.withCB,m=k.id,l=k.get,j=k.fold,g=k.concatMap,f=6e4,b=function(){function a(a){var b,c;for(b in a)q.call(a,b)&&(c=a[b],this[b]=c)}var b;return a.prototype.getStats=function(a){return null!=a?this.stats[a]:this.stats},b=g(l("matches")),a.prototype.getMatches=function(a){var c;return"MATCH"===a?this.matches[a]:null!=(c=b(this.matches[a]))?c:[]},a.prototype.getMatchIds=function(a){return null!=a?this.getMatches(a).map(l("id")):this.allMatchIds()},a.prototype.goodMatchIds=function(){return this.getMatchIds("MATCH")},a.prototype.allMatchIds=function(){return j(function(a){return function(b,c){return b.concat(a.getMatchIds(c))}}(this))(this.goodMatchIds(),["DUPLICATE","WILDCARD","TYPE_CONVERTED","OTHER"])},a}(),e=function(){function a(a){var b,c;for(b in a)q.call(a,b)&&(c=a[b],this[b]=c)}var b,c,d,e;return e=o(m),b=g(m),c=function(a){var c,d;return b(function(){var b,e;b=a.identifiers,e=[];for(c in b)d=b[c],e.push(d);return e}())},d=function(a,b){return null==b||r.call(c(a),b)>=0},a.prototype.getStats=function(a){switch(a){case"objects":return this.getObjectStats();case"identifiers":return this.getIdentifierStats();default:return{objects:this.getObjectStats(),identifiers:this.getIdentifierStats()}}},a.prototype.getIdentifierStats=function(){var a,c,d,f,g,h;return h=function(a){var c,d;return e(b(function(){var b,e,f;for(f=[],b=0,e=a.length;b<e;b++)d=a[b],f.push(function(){var a;a=[];for(c in null!=d?d.identifiers:void 0)a.push(c);return a}());return f}()))},f=h(this.getMatches("MATCH")),c=h(this.getMatches()),g=f.length,a=c.length,d=i(c,f).length,{matches:g,all:a,issues:d}},a.prototype.getObjectStats=function(){var a,b,d,e;return e=this.goodMatchIds().length,a=this.allMatchIds().length,b=function(){var a;a=[];for(m in this)q.call(this,m)&&(d=this[m],r.call(c(d),"MATCH")<0&&a.push(m));return a}.call(this).length,{matches:e,all:a,issues:b}},a.prototype.getMatches=function(a){var b,c;c=[];for(m in this)q.call(this,m)&&(b=this[m],d(b,a)&&c.push(b));return c},a.prototype.getMatchIds=function(a){var b,c;c=[];for(m in this)q.call(this,m)&&(b=this[m],d(b,a)&&c.push(m));return c},a.prototype.goodMatchIds=function(){return this.getMatchIds("MATCH")},a.prototype.allMatchIds=function(){return this.getMatchIds()},a}(),d=function(){function a(a,b){this.uid=a,this.service=b,this.del=s(this.del,this),this.fetchResults=s(this.fetchResults,this),this.fetchErrorMessage=s(this.fetchErrorMessage,this),this.fetchStatus=s(this.fetchStatus,this)}return a.prototype.fetchStatus=function(a){return p(a,this.service.get("ids/"+this.uid+"/status").then(l("status")))},a.prototype.fetchErrorMessage=function(a){return p(a,this.service.get("ids/"+this.uid+"/status").then(l("message")))},a.prototype.fetchResults=function(a){var c,d;return c=this.service.get("ids/"+this.uid+"/result").then(l("results")),d=this.service.fetchVersion(),d.then(function(a){return c.then(function(c){return a>=16?new b(c):new e(c)})})},a.prototype.del=function(a){return p(a,this.service.makeRequest("DELETE","ids/"+this.uid))},a.prototype.decay=50,a.prototype.poll=function(a,b,c){var d,e,g,i,j,k,l;return l=h(),g=l.promise,j=l.resolve,i=l.reject,g.then(a,b),e=null!=c?c:function(){},k=this.fetchStatus(),k.then(null,i),d=this.decay,this.decay=Math.min(f,1.25*d),k.then(function(a){return function(b){switch(e(b),b){case"SUCCESS":return a.fetchResults().then(j,i);case"ERROR":return a.fetchErrorMessage().then(i,i);default:return setTimeout(function(){return a.poll(j,i,e)},d)}}}(this)),g},a}(),d.prototype.wait=d.prototype.poll,d.create=function(a){return function(b){return new d(b,a)}},n.IDResolutionJob=d,n.CategoryResults=b,n.IdResults=e}).call(this)},{"./util":251}],242:[function(a,b,c){(function(){var b,d,e,f,g,h,i,j,k,l,m,n,o=function(a,b){return function(){return a.apply(b,arguments)}},p={}.hasOwnProperty,q=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};m=a("./util"),i=c,l=m.merge,n=m.withCB,g=m.get,j=m.invoke,m.REQUIRES_VERSION,m.set,f=m.dejoin,e="lists/shares",b="lists/invitations",k=function(a){return"__folder__"===a.substr(0,a.indexOf(":"))},h=function(a){return a.substr(a.indexOf(":")+1)},d=function(){function a(a,b){var c,d;this.service=b,this._updateTags=o(this._updateTags,this),this.hasTag=o(this.hasTag,this);for(c in a)p.call(a,c)&&(d=a[c],this[c]=d);this.dateCreated=null!=this.dateCreated?new Date(this.dateCreated):null,this.folders=this.tags.filter(k).map(h)}var c;return a.prototype.hasTag=function(a){return q.call(this.tags,a)>=0},a.prototype.query=function(a){return null==a&&(a=["*"]),this.service.query({select:a,from:this.type,where:[[this.type,"IN",this.name]]})},a.prototype.del=function(a){return this.service.makeRequest("DELETE","lists",{name:this.name},a)},c=function(a){return a.tags},a.prototype._updateTags=function(a,b){if(null==a)return this.tags=b.slice(),this.folders=this.tags.filter(k).map(h)},a.prototype.fetchTags=function(a){return n(this._updateTags,a,this.service.makeRequest("GET","list/tags",{name:this.name}).then(c))},a.prototype.addTags=function(a,b){var d;return d={name:this.name,tags:a},n(this._updateTags,b,this.service.makeRequest("POST","list/tags",d).then(c))},a.prototype.removeTags=function(a,b){var d;return d={name:this.name,tags:a},n(this._updateTags,b,this.service.makeRequest("DELETE","list/tags",d).then(c))},a.prototype.contents=function(a){return n(a,this.query().then(f).then(j("records")))},a.prototype.rename=function(a,b){var c;return c=this.service.post("lists/rename",{oldname:this.name,newname:a}).then(g("listName")).then(function(a){return function(b){return a.name=b}}(this)).then(this.service.fetchList),n(b,c)},a.prototype.copy=function(a,b){var c,d,e,f,h,i,k;return null==a&&(a={}),null==b&&(b=function(){}),1===arguments.length&&m.isFunction(a)&&(h=[{},a],a=h[0],b=h[1]),"string"==typeof a&&(a={name:a}),d=c=null!=(i=a.name)?i:this.name+"_copy",f=this.tags.concat(null!=(k=a.tags)?k:[]),e=this.query(["id"]),n(b,this.service.fetchLists().then(j("map",g("name"))).then(function(a){return function(b){var g;for(g=1;q.call(b,d)>=0;)d=c+"-"+g++;return e.then(j("saveAsList",{name:d,tags:f,description:a.description}))}}(this)))},a.prototype.enrichment=function(a,b){return this.service.enrichment(l({list:this.name},a),b)},a.prototype.shareWithUser=function(a,b){return n(b,this.service.post(e,{list:this.name,with:a}))},a.prototype.inviteUserToShare=function(a,c,d){return null==c&&(c=!0),null==d&&(d=function(){}),n(d,this.service.post(b,{list:this.name,to:a,notify:!!c}))},a}(),i.List=d}).call(this)},{"./util":251}],243:[function(a,b,c){(function(){var b,d,e,f,g,h,i,j,k=function(a,b){return function(){return a.apply(b,arguments)}},l=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};f=a("./table").Table,e=a("./path").PathInfo,j=a("./util"),j.flatten,g=j.find,j.error,i=j.omap,h=c,b=new f({name:"Object",tags:[],displayName:"Object",attributes:{},references:{},collections:{}}),d=function(){function a(a){var c,d;this.name=a.name,c=a.classes,this.findCommonType=k(this.findCommonType,this),this.findSharedAncestor=k(this.findSharedAncestor,this),this.getAncestorsOf=k(this.getAncestorsOf,this),this.getSubclassesOf=k(this.getSubclassesOf,this),this.getPathInfo=k(this.getPathInfo,this),d=i(function(a){return function(b,c){return[b,new f(c,a)]}}(this)),this.classes=d(c),this.classes["java.lang.Object"]=b}return a.prototype.getPathInfo=function(a,b){return e.parse(this,a,b)},a.prototype.getSubclassesOf=function(a){var b,c,d,e,f,g;if(null==(c=a&&a.name?a:this.classes[a]))throw new Error(a+" is not a table");d=[c.name],f=this.classes;for(e in f)b=f[e],g=c.name,l.call(b.parents(),g)>=0&&(d=d.concat(this.getSubclassesOf(b)));return d},a.prototype.getAncestorsOf=function(a){var b,c;if(null==(b=a&&a.name?a:this.classes[a]))throw new Error(a+" is not a table");return c=b.parents(),c.filter(function(a){return function(b){return a.classes[b]}}(this)).reduce(function(a){return function(b,c){return b.concat(a.getAncestorsOf(c))}}(this),c)},a.prototype.findSharedAncestor=function(a,b){var c,d;return null===b||null===a?null:a===b?a:(c=this.getAncestorsOf(a),l.call(c,b)>=0?b:(d=this.getAncestorsOf(b),l.call(d,a)>=0?a:g(c,function(a){return l.call(d,a)>=0})))},a.prototype.findCommonType=function(a){return null==a&&(a=[]),a.reduce(this.findSharedAncestor)},a}(),d.prototype.makePath=d.prototype.getPathInfo,d.prototype.findCommonTypeOfMultipleClasses=d.prototype.findCommonType,d.load=function(a){var b;try{return new d(a)}catch(a){throw b=a,new Error("Error loading model: "+b)}},d.INTEGRAL_TYPES=["int","Integer","long","Long"],d.FRACTIONAL_TYPES=["double","Double","float","Float"],d.NUMERIC_TYPES=d.INTEGRAL_TYPES.concat(d.FRACTIONAL_TYPES),d.BOOLEAN_TYPES=["boolean","Boolean"],h.Model=d}).call(this)},{"./path":244,"./table":249,"./util":251}],244:[function(a,b,c){(function(){var b,d,e,f,g,h,i,j,k,l,m,n,o,p,q=function(a,b){return function(){return a.apply(b,arguments)}},r=[].slice,s=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};k=c,o=a("./util"),p=o.withCB,g=o.concatMap,j=o.get,f=o.any,m=o.set,h=o.copy,n=o.success,i=o.error,b={},d={},l=function(a,b,c){var d,e,f;return(null!=a?a.name:void 0)+"|"+(null!=a&&null!=(f=a.service)?f.root:void 0)+"|"+b+":"+function(){var a;a=[];for(d in c)e=c[d],a.push(d+"="+e);return a}()},e=function(){function a(a){var b,c;this.root=a.root,this.model=a.model,this.descriptors=a.descriptors,this.subclasses=a.subclasses,this.displayName=a.displayName,this.ident=a.ident,this.allDescriptors=q(this.allDescriptors,this),this.getChildNodes=q(this.getChildNodes,this),this.getDisplayName=q(this.getDisplayName,this),this.isa=q(this.isa,this),this.append=q(this.append,this),this.getParent=q(this.getParent,this),this.getEndClass=q(this.getEndClass,this),this.containsCollection=q(this.containsCollection,this),this.isCollection=q(this.isCollection,this),this.isReverseReference=q(this.isReverseReference,this),this.isReference=q(this.isReference,this),this.isClass=q(this.isClass,this),this.isAttribute=q(this.isAttribute,this),this.isRoot=q(this.isRoot,this),c=this.descriptors,this.mid=2<=c.length?r.call(c,0,b=c.length-1):(b=0,[]),this.end=c[b++],null==this.ident&&(this.ident=l(this.model,this,this.subclasses))}return a.prototype.isRoot=function(){return 0===this.descriptors.length},a.prototype.isAttribute=function(){return null!=this.end&&!this.isReference()},a.prototype.isClass=function(){return this.isRoot()||this.isReference()},a.prototype.isReference=function(){var a;return null!=(null!=(a=this.end)?a.referencedType:void 0)},a.prototype.isReverseReference=function(){var a,b,c,d,e;return!!(this.isReference()&&this.mid.length>0)&&(e=this.end,d=e.reverseReference,c=e.referencedType,b=this.getParent(),a=b.getParent(),null!=c&&a.isa(c)&&b.end.name===d)},a.prototype.isCollection=function(){var a,b;return null!=(a=null!=(b=this.end)?b.isCollection:void 0)&&a},a.prototype.containsCollection=function(){return f(this.descriptors,function(a){return a.isCollection})},
a.prototype.getEndClass=function(){var a;return this.model.classes[this.subclasses[this.toString()]||(null!=(a=this.end)?a.referencedType:void 0)]||this.root},a.prototype.getParent=function(){var b;if(this.isRoot())throw new Error("Root paths do not have parents");return b={root:this.root,model:this.model,descriptors:this.mid.slice(),subclasses:this.subclasses},new a(b)},a.prototype.append=function(b){var c,d;if(this.isAttribute())throw new Error(this+" is an attribute.");if(null==(d="string"==typeof b?this.getType().fields[b]:b))throw new Error(b+" is not a field of "+this.getType());return c={root:this.root,model:this.model,descriptors:this.descriptors.concat([d]),subclasses:this.subclasses},new a(c)},a.prototype.isa=function(a){var b,c;return null!=a&&(this.isAttribute()?this.getType()===a:(b=a.name?a.name:""+a,c=this.getType(),b===c.name||s.call(this.model.getAncestorsOf(c),b)>=0))},a.prototype.getDisplayName=function(a){var c,d,e,f;return(d=this.displayName)?n(d):(null==this.namePromise&&(this.namePromise=(c=b[this.ident])?n(c):this.isRoot()&&this.root.displayName?n(this.root.displayName):null==this.model.service?i("No service"):(f="model"+g(function(a){return"/"+a.name})(this.allDescriptors()),e=m({format:"json"})(h(this.subclasses)),this.model.service.get(f,e).then(j("display")).then(function(a){return function(c){var d;return null!=b[d=a.ident]?b[d]:b[d]=c}}(this)))),p(a,this.namePromise))},a.prototype.getChildNodes=function(){var a,b,c,d,e;d=(null!=(c=this.getEndClass())?c.fields:void 0)||{},e=[];for(b in d)a=d[b],e.push(this.append(a));return e},a.prototype.allDescriptors=function(){return[this.root].concat(this.descriptors)},a.prototype.toString=function(){return this.allDescriptors().map(j("name")).join(".")},a.prototype.equals=function(a){return this===a||this.ident&&(null!=a?a.ident:void 0)===this.ident},a.prototype.getType=function(){var a,b;return(null!=(a=this.end)&&null!=(b=a.type)?b.replace(/java\.lang\./,""):void 0)||this.getEndClass()},a}(),e.prototype.toPathString=e.prototype.toString,e.parse=function(a,b,c){var f,g,h,i,j,k,m,n,o;return null==c&&(c={}),j=l(a,b,c),(f=d[j])?f:(n=(b+"").split("."),o=g=a.classes[n.shift()],k=o.name,h=function(){var d,e,f,h;for(h=[],d=0,e=n.length;d<e;d++){if(m=n[d],!(i=(null!=g?g.fields[m]:void 0)||(null!=(f=g=a.classes[c[k]])?f.fields[m]:void 0)))throw new Error("Could not find "+m+" in "+g+" when parsing "+b);k+="."+m,g=a.classes[i.type||i.referencedType],h.push(i)}return h}(),d[j]=new e({root:o,model:a,descriptors:h,subclasses:c,ident:j}))},e.flushCache=function(){return d={},b={}},k.PathInfo=e}).call(this)},{"./util":251}],245:[function(a,b,c){(function(){var c;c=a("es6-promise").Promise,b.exports=c}).call(this)},{"es6-promise":254}],246:[function(a,b,c){(function(){var b,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},_=function(a,b){return function(){return a.apply(b,arguments)}},aa=[].slice,ba={}.hasOwnProperty;e=a("backbone-events-standalone"),B=c,B.xml=a("./xml"),R=a("./util"),h=R.REQUIRES_VERSION,S=R.withCB,E=R.merge,u=R.filter,J=R.partition,v=R.fold,p=R.concatMap,z=R.id,w=R.get,R.invoke,O=R.querystring,x=function(a){var b;if(!(b=null!=(null!=a?a.toLowerCase:void 0)?g.OP_DICT[a.toLowerCase()]:null))throw new Error("Illegal constraint operator: "+a);return b},b=["path","op","code"],j=b.concat(["value","extraValue"]),i=["rowByRow","eachRow","recordByRecord","eachRecord","records","rows","table","tableRows","values"],f=function(a){return R.compose(a.fetchList,w("listName"))},d=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],r=function(a){return null==a&&(a=""),a.substr(a.indexOf("."))},o=function(a){return null!=a?"<value>"+R.escape(a)+"</value>":"<nullValue/>"},l=function(a,b){var c,d;return function(){var e;e=[];for(c in a)d=a[c],$.call(b,c)>=0&&e.push(c+'="'+R.escape(d)+'" ');return e}().join("")},I=function(a){return"<constraint "+l(a,b)+"/>"},P=function(a){return"<constraint "+l(a,["path","type"])+"/>"},L=function(a){return"<constraint "+l(a,j)+"/>"},G=function(a){return"<constraint "+l(a,b)+">"+p(o)(a.values)+"</constraint>"},A=function(a){return"<constraint "+l(a,b)+'ids="'+a.ids.join(",")+'"/>'},m=function(a){var b;return null!=a.values?G(a):null!=a.ids?A(a):null==a.op?P(a):(b=a.op,$.call(g.NULL_OPS,b)>=0?I(a):L(a))},y=function(a){return a.replace(/^[^\.]+\./,"")},q=function(a){var b,c,d,e,f,g,h,i,j,k,l;return g=a.path,j=a.type,f=a.op,k=a.value,l=a.values,d=a.extraValue,e=a.ids,b=a.code,c=a.editable,i=a.switched,h=a.switchable,e=null!=e?e.slice():void 0,l=null!=l?l.slice():void 0,H({path:g,type:j,op:f,value:k,values:l,extraValue:d,ids:e,code:b,editable:c,switched:i,switchable:h})},n=function(a){var b;return b=q(a),b.path=y(b.path),b},H=function(a){var b;for(b in a)null==a[b]&&delete a[b];return a},s=function(a,b){return"Did not remove a single constraint. original = "+a+", reduced = "+b},D=function(a,b){var c,d,e,f,h,i,j;if(c={path:a},null===b)c.op="IS NULL";else if(R.isArray(b))c.op="ONE OF",c.values=b;else if("string"==(i=typeof b)||"number"===i||"boolean"===i)j="function"==typeof b.toUpperCase?b.toUpperCase():void 0,$.call(g.NULL_OPS,j)>=0?c.op=b:(c.op="=",c.value=b);else if(e=function(){var a;a=[];for(d in b)h=b[d],a.push(d);return a}(),$.call(e,"isa")>=0)R.isArray(b.isa)?(c.op=d,c.values=b.isa):c.type=b.isa;else{$.call(e,"extraValue")>=0&&(c.extraValue=b.extraValue);for(d in b)f=b[d],"extraValue"!==d&&(c.op=d,R.isArray(f)?c.values=f:c.value=f)}return c},C=function(a){var b,c,d,e;return a=a.slice(),c={path:a.shift()},1===a.length?(b=a[0],e="function"==typeof b.toUpperCase?b.toUpperCase():void 0,$.call(g.NULL_OPS,e)>=0?c.op=b:c.type=b):a.length>=2&&(c.op=a[0],d=a[1],R.isArray(d)?c.values=d:c.value=d,3===a.length&&(c.extraValue=a[2])),c},N=function(a){var b;return function(){var c,d,e;for(e=[],c=0,d=a.length;c<d;c++)b=a[c],e.push(b.path+" "+b.direction);return e}().join(" ")},M=function(a){var b,c,d,e,f,g,h;if(null==a)return[];for(c=a.split(/\s+/),d=function(){var a,b,d;for(d=[],e=a=0,b=c.length/2;0<=b?a<b:a>b;e=0<=b?++a:--a)d.push(2*e);return d}(),h=[],f=0,g=d.length;f<g;f++)b=d[f],h.push([c[b],c[b+1]]);return h},K=function(){var a,b;if(b=this.sortOrder,this.sortOrder=function(){var c,d,e;for(e=[],c=0,d=b.length;c<d;c++)a=b[c],this.isRelevant(a.path)&&e.push(a);return e}.call(this),b.length!==this.sortOrder.length)return this.trigger("change:sortorder change:orderby",this.sortOrder.slice())},g=function(){function a(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;for(i=null!=c?c:{},d=i.model,f=i.summaryFields,this.addConstraint=_(this.addConstraint,this),this.expandStar=_(this.expandStar,this),this.adjustPath=_(this.adjustPath,this),this.select=_(this.select,this),null==a&&(a={}),this.constraints=[],this.views=[],this.joins={},this.displayNames=R.copy(null!=(j=null!=(l=a.displayNames)?l:a.aliases)?j:{}),m=["name","title","comment","description","type"],g=0,h=m.length;g<h;g++)e=m[g],null!=a[e]&&(this[e]=a[e]);this.service=null!=b?b:{},this.model=null!=(n=null!=d?d:a.model)?n:{},this.summaryFields=null!=(o=null!=f?f:a.summaryFields)?o:{},this.root=null!=(p=a.root)?p:a.from,this.maxRows=null!=(q=null!=(r=a.size)?r:a.limit)?q:a.maxRows,this.start=null!=(s=null!=(k=a.start)?k:a.offset)?s:0,this.select(a.views||a.view||a.select||[]),this.addConstraints(a.constraints||a.where||[]),this.addJoins(a.joins||a.join||[]),this.orderBy(a.sortOrder||a.orderBy||[]),null!=a.constraintLogic&&(this.constraintLogic=a.constraintLogic),this.on("change:views",K,this)}var b,c,e,g,i,j,k,o,t;return a.JOIN_STYLES=["INNER","OUTER"],a.BIO_FORMATS=["gff3","fasta","bed"],a.NULL_OPS=["IS NULL","IS NOT NULL"],a.ATTRIBUTE_VALUE_OPS=["=","!=",">",">=","<","<=","CONTAINS","LIKE","NOT LIKE"],a.MULTIVALUE_OPS=["ONE OF","NONE OF"],a.RANGE_OPS=["OVERLAPS","DOES NOT OVERLAP","OUTSIDE","WITHIN","CONTAINS","DOES NOT CONTAIN"],a.TERNARY_OPS=["LOOKUP"],a.LOOP_OPS=["=","!="],a.LIST_OPS=["IN","NOT IN"],a.OP_DICT={"=":"=","==":"==",eq:"=",eqq:"==","!=":"!=",ne:"!=",">":">",gt:">",">=":">=",ge:">=","<":"<",lt:"<","<=":"<=",le:"<=",contains:"CONTAINS",CONTAINS:"CONTAINS","does not contain":"DOES NOT CONTAIN","DOES NOT CONTAIN":"DOES NOT CONTAIN",like:"LIKE",LIKE:"LIKE","not like":"NOT LIKE","NOT LIKE":"NOT LIKE",lookup:"LOOKUP","IS NULL":"IS NULL","is null":"IS NULL","IS NOT NULL":"IS NOT NULL","is not null":"IS NOT NULL","ONE OF":"ONE OF","one of":"ONE OF","NONE OF":"NONE OF","none of":"NONE OF",in:"IN","not in":"NOT IN",IN:"IN","NOT IN":"NOT IN",WITHIN:"WITHIN",within:"WITHIN",OVERLAPS:"OVERLAPS",overlaps:"OVERLAPS","DOES NOT OVERLAP":"DOES NOT OVERLAP","does not overlap":"DOES NOT OVERLAP",OUTSIDE:"OUTSIDE",outside:"OUTSIDE",ISA:"ISA",isa:"ISA"},i=["name","view","sortOrder","constraintLogic","title","description","comment"],c=["path","type","op","code","value","ids"],k=function(a,b){var c,d,e,f;for(f=[],d=0,e=b.length;d<e;d++)c=b[d],a.hasAttribute(c)&&f.push([c,a.getAttribute(c)]);return f},e=function(a,b){var c,d,e,f,g;for(f=a.getElementsByTagName(b),g=[],d=0,e=f.length;d<e;d++)c=f[d],g.push(c);return g},t=function(a){return function(b){return b.getAttribute(a)}},a.fromXML=function(a){var b,d,f,g,h,j,l;if(d=B.xml.parse(a),!(j=e(d,"query")[0]||e(d,"template")[0]))throw new Error("no query in xml");return g=t("path"),l=t("style"),h=R.pairsToObj(k(j,i)),h.view=h.view.split(/\s+/),h.sortOrder=M(h.sortOrder),h.joins=function(){var a,b,c,d;for(c=e(j,"join"),d=[],a=0,b=c.length;a<b;a++)f=c[a],"OUTER"===l(f)&&d.push(g(f));return d}(),h.constraints=function(){var a,d,f,g;for(f=e(j,"constraint"),g=[],a=0,d=f.length;a<d;a++)b=f[a],g.push(function(a){var b,d,f,g,h;return b=R.pairsToObj(k(a,c)),null!=b.ids&&(b.ids=function(){var a,c,d,e;for(d=b.ids.split(","),e=[],a=0,c=d.length;a<c;a++)h=d[a],e.push(parseInt(h,10));return e}()),g=e(a,"value"),g.length&&(b.values=function(){var a,b,c;for(c=[],a=0,b=g.length;a<b;a++)f=g[a],c.push(function(){var a,b,c,e;for(c=f.childNodes,e=[],a=0,b=c.length;a<b;a++)d=c[a],e.push(d.data);return e}().join(""));return c}()),b}(b));return g}(),h},a.prototype.constraints=[],a.prototype.views=[],a.prototype.joins={},a.prototype.constraintLogic="",a.prototype.sortOrder="",a.prototype.name=null,a.prototype.title=null,a.prototype.comment=null,a.prototype.description=null,a.prototype.removeFromSelect=function(a){var b,c,d,e;return null==a&&(a=[]),a=R.stringList(a),b=R.compose(this.expandStar,this.adjustPath),a=R.flatten(function(){var c,e,f;for(f=[],c=0,e=a.length;c<e;c++)d=a[c],f.push(b(d));return f}()),this.sortOrder=function(){var b,d,e,f,g;for(e=this.sortOrder,g=[],b=0,d=e.length;b<d;b++)c=e[b],f=c.path,$.call(a,f)>=0||g.push(c);return g}.call(this),this.views=function(){var b,c,d,f;for(d=this.views,f=[],b=0,c=d.length;b<c;b++)e=d[b],$.call(a,e)>=0||f.push(e);return f}.call(this),this.trigger("remove:view",a),this.trigger("change:views",this.views),this.trigger("change",this.views)},a.prototype.removeConstraint=function(a,b){var c,d,e,f;if(null==b&&(b=!1),e=this.constraints,d="string"==typeof a?function(b){return b.code===a}:function(b){var c,d;return b.path===a.path&&b.op===a.op&&b.value===a.value&&b.extraValue===a.extraValue&&a.type===b.type&&(null!=(c=b.values)?c.join("%%"):void 0)===(null!=(d=a.values)?d.join("%%"):void 0)},f=function(){var a,b,f;for(f=[],a=0,b=e.length;a<b;a++)c=e[a],d(c)||f.push(c);return f}(),f.length!==e.length-1)throw new Error(s(e,f));if(this.constraints=f,!b)return this.trigger("change:constraints"),this.trigger("change"),this.trigger("removed:constraint",R.find(e,d))},a.prototype.addToSelect=function(a,b){var c,d,e,f,g,h,i,j;if(null==a&&(a=[]),null==b&&(b={}),a=R.stringList(a),d=R.compose(this.expandStar,this.adjustPath),f=R.flatten(function(){var b,c,e;for(e=[],b=0,c=a.length;b<c;b++)g=a[b],e.push(d(g));return e}()),c=function(){var a,b,c;for(c=[],a=0,b=f.length;a<b;a++)e=f[a],$.call(this.views,e)>=0&&c.push(e);return c}.call(this),c.length)throw new Error(c+" already in the select list");if(c=function(){var a,b,c;for(c=[],a=0,b=f.length;a<b;a++)e=f[a],function(){var a,b,c;for(c=[],a=0,b=f.length;a<b;a++)(h=f[a])===e&&c.push(h);return c}().length>1&&c.push(e);return c}(),c.length)throw new Error(c+" specified multiple times as arguments to addToSelect");return(i=this.views).push.apply(i,f),b.silent?b.events=(null!=(j=b.events)?j:[]).concat(["change","add:view","change:views"]):(this.trigger("add:view change:views",f),this.trigger("change")),this},a.prototype.select=function(a,b){var c,d;d=this.views.slice();try{this.views=[],this.addToSelect(a,b)}catch(a){c=a,this.views=d,R.error(c)}return this},a.prototype.adjustPath=function(a){return a=a&&a.name?a.name:""+a,null!=this.root?a.match("^"+this.root)||(a=this.root+"."+a):this.root=a.split(".")[0],a},a.prototype.getPossiblePaths=function(a,b,c){var d,e,f,g,h;return null==a&&(a=3),null==b&&(b=!0),null==c&&(c=null),g="string"==typeof c?function(a){return a[c]()}:c,d=function(a){return function(c,e){var f,g,h,i,j,k;return j=a.getPathInfo(c),!b&&j.isReverseReference()?[]:j.isAttribute()?[j]:(f=j.getType(),k=p(function(a){return d(c+"."+a.name,e-1)}),i=f&&e>0?k(function(){var a,b;a=f.fields,b=[];for(h in a)g=a[h],b.push(g);return b}()):[],[j].concat(i))}}(this),e=a+"-"+b,null==this._possiblePaths&&(this._possiblePaths={}),f=(null!=(h=this._possiblePaths)[e]?h[e]:h[e]=d(this.root,a)).slice(),null!=g?f.filter(g):f},a.prototype.getPathInfo=function(a){var b,c,d;return b=this.adjustPath(a),c=null!=(d=this.model)&&"function"==typeof d.getPathInfo?d.getPathInfo(b,this.getSubclasses()):void 0,c&&b in this.displayNames&&(c.displayName=this.displayNames[b]),c},a.prototype.makePath=a.prototype.getPathInfo,o=function(a){return[a.path,a.type]},j=R.compose(R.pairsToObj,R.map(o),u(w("type"))),a.prototype.getSubclasses=function(){return j(this.constraints)},a.prototype.getType=function(a){return this.getPathInfo(a).getType()},a.prototype.getViewNodes=function(){var a,b;return b=function(a){return function(b){return a.getPathInfo(b).getParent()}}(this),R.uniqBy(String,function(){var c,d,e,f;for(e=this.views,f=[],c=0,d=e.length;c<d;c++)a=e[c],f.push(b(a));return f}.call(this))},a.prototype.isInView=function(a){var b,c,d;if(!(b=this.getPathInfo(a)))throw new Error("Invalid path: "+a);return b.isAttribute()?(d=b.toString(),$.call(this.views,d)>=0):(c=b.toString(),R.any(this.getViewNodes(),function(a){return a.toString()===c}))},a.prototype.isConstrained=function(a,b){var c,d;if(null==b&&(b=!1),!(c=this.getPathInfo(a)))throw new Error("Invalid path: "+a);return d=function(a){return null!=a.op&&a.path===c.toString()},!c.isAttribute()&&b&&(d=function(a){return function(b){return null!=b.op&&(b.path===c.toString()||c.equals(a.getPathInfo(b.path).getParent()))}}(this)),R.any(this.constraints,d)},a.prototype.canHaveMultipleValues=function(a){return this.getPathInfo(a).containsCollection()},a.prototype.getQueryNodes=function(){var a,b,c,d;return d=this.getViewNodes(),b=function(){var b,d,e,f;for(e=this.constraints,f=[],b=0,d=e.length;b<d;b++)a=e[b],null==a.type&&(c=this.getPathInfo(a.path),c.isAttribute()?f.push(c.getParent()):f.push(c));return f}.call(this),R.uniqBy(String,d.concat(b))},a.prototype.isInQuery=function(a){var b,c,d,e,f,g;if(c=this.getPathInfo(a)){for(d=c.toPathString(),g=this.views.concat(function(){var a,c,d,e;for(d=this.constraints,e=[],a=0,c=d.length;a<c;a++)b=d[a],null==b.type&&e.push(b.path);return e}.call(this)),e=0,f=g.length;e<f;e++)if(a=g[e],0===a.indexOf(d))return!0;return!1}return!0},a.prototype.isRelevant=function(a){var b,c,d;return c=this.getPathInfo(a),c.isAttribute()&&(c=c.getParent()),d=c.toString(),b=this.getViewNodes(),R.any(b,function(a){return a.toPathString()===d})},a.prototype.expandStar=function(a){var b,c,d,e,f,g,h,i;if(/\*$/.test(a))if(h=a.substr(0,a.lastIndexOf(".")),d=function(a){return h+a},c=this.getType(h),/\.\*$/.test(a)){if(c&&this.summaryFields[c.name])return e=R.compose(d,r),function(){var a,b,d,g;for(d=this.summaryFields[c.name],g=[],a=0,b=d.length;a<b;a++)f=d[a],this.hasView(f)||g.push(e(f));return g}.call(this)}else if(/\.\*\*$/.test(a))return i=this.expandStar(h+".*"),b=function(){var a;a=[];for(g in c.attributes)a.push(d("."+g));return a}(),R.uniqBy(z,i.concat(b));return a},a.prototype.isOuterJoin=function(a){return"OUTER"===this.joins[this.adjustPath(a)]},a.prototype.hasView=function(a){var b;return this.views&&(b=this.adjustPath(a),$.call(this.views,b)>=0)},a.prototype.count=function(a){if(this.service.count)return this.service.count(this,a);throw new Error("This query has no service with count functionality attached.")},a.prototype.appendToList=function(a,b){var c,d,e,g,h;return(null!=a?a.name:void 0)?(c=a.name,h=function(b,c){if(null==b)return a.size=c.size}):(c=String(a),h=null),g=this.makeListQuery(),e={listName:c,query:g.toXML()},d=f(this.service),S(h,b,this.service.post("query/append/tolist",e).then(d))},a.prototype.selectPreservingImpliedConstraints=function(a){var b,c,d,e,f;for(null==a&&(a=[]),c=this.clone(),c.select(a),f=this.getViewNodes(),d=0,e=f.length;d<e;d++)b=f[d],this.isOuterJoined(b)||c.isInView(b||c.isConstrained(b))||null==b.getEndClass().fields.id||c.addConstraint([b.append("id"),"IS NOT NULL"]);return c},a.prototype.makeListQuery=function(){var a,b;return a=this.views.slice(),1===a.length&&(null!=(b=a[0])?b.match(/\.id$/):void 0)||(a=["id"]),this.selectPreservingImpliedConstraints(a)},a.prototype.saveAsList=function(a,b){var c,d;return d=this.makeListQuery(),c=R.copy(a),c.listName=c.listName||c.name,c.query=d.toXML(),a.tags&&(c.tags=a.tags.join(";")),S(b,this.service.post("query/tolist",c).then(f(this.service)))},a.prototype.summarise=function(a,b,c){return this.filterSummary(a,"",b,c)},a.prototype.summarize=function(){var a;return a=1<=arguments.length?aa.call(arguments,0):[],this.summarise.apply(this,a)},g=function(a){var b,c,d,e,f,g,h;for(b=null!=(null!=(g=a.results[0])?g.max:void 0),h=a.results,e=0,f=h.length;e<f;e++)c=h[e],c.count=parseInt(c.count,10);return d={uniqueValues:a.uniqueValues,filteredCount:a.filteredCount},b&&(d=E(d,a.results[0])),a.stats=d,a},a.prototype.filterSummary=function(a,b,c,d){var e,f,h;return null==d&&(d=function(){}),R.isFunction(c)&&(h=[c,null],d=h[0],c=h[1]),a=this.adjustPath(a),f=this.clone(),$.call(f.views,a)<0&&f.views.push(a),e={query:f.toXML(),summaryPath:a,format:"jsonrows"},c&&(e.size=c),b&&(e.filterTerm=b),S(d,this.service.post("query/results",e).then(g))},a.prototype.clone=function(b){var c,d,e,f;if(c=new a(this,this.service),null==c._callbacks&&(c._callbacks={}),b){f=this._callbacks;for(d in f)ba.call(f,d)&&(e=f[d],c._callbacks[d]=e);c.off("change:views",K,this)}return c},a.prototype.next=function(){var a;return a=this.clone(),this.maxRows&&(a.start=this.start+this.maxRows),a},a.prototype.previous=function(){var a;return a=this.clone(),this.maxRows?a.start=this.start-this.maxRows:a.start=0,a},a.prototype.getSortDirection=function(a){var b,c;if(b=this.adjustPath(a),!this.isInQuery(b)&&!this.isRelevant(b))throw new Error(a+" is not in the query");return c=R.find(this.sortOrder,function(a){var c;return c=a.path,b===c}),null!=c?c.direction:void 0},a.prototype.isOuterJoined=function(a){var b,c;a=this.adjustPath(a),c=this.joins;for(b in c)if("OUTER"===c[b]&&0===a.indexOf(b))return!0;return!1},a.prototype.getOuterJoin=function(a){var b,c;return a=this.adjustPath(a),b=function(){var a;a=[];for(c in this.joins)a.push(c);return a}.call(this).sort(function(a,b){return b.length-a.length}),R.find(b,function(b){return function(c){return"OUTER"===b.joins[c]&&0===a.indexOf(c)}}(this))},a.prototype._parse_sort_order=function(a){var b,c,d,e,f,g;if(null==a)throw new Error("No input");if("string"==typeof a)e={path:a,direction:"ASC"};else if(R.isArray(a))d=a[0],b=a[1],e={path:d,direction:b};else if(null==a.path){for(c in a)f=a[c],g=[c,f],d=g[0],b=g[1];e={path:d,direction:b}}else d=a.path,b=a.direction,e={path:d,direction:b};return e.path=this.adjustPath(e.path),null==e.direction&&(e.direction="ASC"),e.direction=e.direction.toUpperCase(),e},a.prototype.addOrSetSortOrder=function(a){var b,c;return a=this._parse_sort_order(a),b=this.getSortDirection(a.path),null==b?this.addSortOrder(a):b!==a.direction&&(c=R.find(this.sortOrder,function(b){return b.path===a.path}),c.direction=a.direction,this.trigger("change:sortorder",this.sortOrder),this.trigger("change")),this},a.prototype.addSortOrder=function(a,b){var c;if(c=(null!=b?b:{}).silent,this.sortOrder.push(this._parse_sort_order(a)),!c)return this.trigger("add:sortorder",a),this.trigger("change:sortorder",this.sortOrder),this.trigger("change")},a.prototype.orderBy=function(a,b){var c,d,e,f,g,h,i,j;for(null==b&&(b={}),f=this.sortOrder.slice(),this.sortOrder=[],h=0,i=a.length;h<i;h++)e=a[h],this.addSortOrder(this._parse_sort_order(e),{silent:!0});return c=function(){var a,b,c,e,f;for(c=this.sortOrder,f=[],a=0,b=c.length;a<b;a++)e=c[a],g=e.path,d=e.direction,f.push({path:g,direction:d});return f}.call(this),this.trigger("set:sortorder",c),N(f)!==this.getSorting()&&(b.silent?b.events=(null!=(j=b.events)?j:[]).concat(["change","change:sortorder"]):(this.trigger("change:sortorder",c),this.trigger("change"))),this},a.prototype.addJoins=function(a){var b,c,d,e,f,g,h;if(R.isArray(a)){for(g=[],e=0,f=a.length;e<f;e++)b=a[e],g.push(this.addJoin(b));return g}h=[];for(c in a)d=a[c],h.push(this.addJoin({path:c,style:d}));return h},a.prototype.addJoin=function(a){return"string"==typeof a&&(a={path:a,style:"OUTER"}),this.setJoinStyle(a.path,a.style)},a.prototype.setJoinStyle=function(b,c){if(null==c&&(c="OUTER"),b=this.adjustPath(b),c=c.toUpperCase(),$.call(a.JOIN_STYLES,c)<0)throw new Error("Invalid join style: "+c);return this.joins[b]!==c&&(this.joins[b]=c,this.trigger("change:joins",{path:b,style:c}),this.trigger("change")),this},a.prototype.addConstraints=function(a,b){var c,d,e,f,g,h,i;if(null==b&&(b="and"),this.__silent__=!0,e=this.constraintLogic,R.isArray(a))for(h=0,i=a.length;h<i;h++)c=a[h],this.addConstraint(c,b);else{g=function(a){return function(c,d){return a.addConstraint(D(c,d),b)}}(this);for(f in a)d=a[f],g(f,d)}return this.__silent__=!1,this.trigger("add:constraint"),this.trigger("change:constraints"),e!==this.constraintLogic&&this.trigger("change:logic",this.constraintLogic),this.trigger("change")},a.prototype.addConstraint=function(a,b){var c,e,f,g,h,i,j;if(null==b&&(b="and"),"and"!==b&&"or"!==b)throw new Error("Unknown logical conjunction: "+b);return a=R.isArray(a)?C(a):q(a),"OFF"===a.switched?this:(a.path=this.adjustPath(a.path),null==a.type&&(a.op=x(a.op)),this.constraints.push(a),f="or"===b||(null!=(j=this.constraintLogic)?j.length:void 0)>0,g=this.constraints.length,i=this.constraintLogic,f&&(h=2===g?d[0]+" "+b+" "+d[1]:(e=this.constraintLogic,e||(e=function(){var a,b,e;for(e=[],c=a=0,b=g-2;0<=b?a<=b:a>=b;c=0<=b?++a:--a)e.push(d[c]);return e}().join(" and ")),"("+e+") "+b+" "+d[g-1]),this.constraintLogic=h),this.__silent__||(this.trigger("add:constraint",a),this.trigger("change:constraints"),i!==this.constraintLogic&&this.trigger("change:logic",this.constraintLogic),this.trigger("change")),this)},a.prototype.getSorting=function(){return N(this.sortOrder)},a.prototype.getConstraintXML=function(){var a,b;return b=function(){var b,c,d,e;for(d=this.constraints,e=[],b=0,c=d.length;b<c;b++)a=d[b],(null==a.type||this.isInQuery(a.path))&&e.push(a);return e}.call(this),b.length?p(m)(p(z)(J(function(a){return null!=a.type})(b))):""},a.prototype.getJoinXML=function(){var a,b,c;return c=function(){var c,d;c=this.joins,d=[];for(a in c)b=c[a],this.isInQuery(a)&&"OUTER"===b&&d.push('<join path="'+a+'" style="OUTER"/>');return d}.call(this),c.join("")},a.prototype.toXML=function(){var a,b,c;return a={model:this.model.name,view:this.views.join(" "),sortOrder:this.getSorting(),constraintLogic:this.constraintLogic},null!=this.name&&(a.name=this.name),"<query "+function(){var d;d=[];for(b in a)(c=a[b])&&d.push(b+'="'+c+'"');return d}().join(" ")+" >"+this.getJoinXML()+this.getConstraintXML()+"</query>"},a.prototype.toJSON=function(){var a,b,c,d,e;return H({name:this.name,title:this.title,comment:this.comment,description:this.description,constraintLogic:this.constraintLogic,from:this.root,select:function(){var a,b,c,d;for(c=this.views,d=[],a=0,b=c.length;a<b;a++)e=c[a],d.push(y(e));return d}.call(this),orderBy:function(){var a,d,e,f,g;for(e=this.sortOrder,g=[],a=0,d=e.length;a<d;a++)f=e[a],c=f.path,b=f.direction,g.push({path:y(c),direction:b});return g}.call(this),joins:function(){var a,b;a=this.joins,b=[];for(c in a)"OUTER"===(d=a[c])&&b.push(y(c));return b}.call(this),where:function(){var b,c,d,e;for(d=this.constraints,e=[],b=0,c=d.length;b<c;b++)a=d[b],e.push(n(a));return e}.call(this)})},a.prototype.fetchCode=function(a,b){var c;return c={query:this.toXML(),lang:a},S(b,this.service.post("query/code",c).then(this.service.VERIFIER).then(w("code")))},a.prototype.setName=function(a){this.name=a},a.prototype.save=function(a,b){return h(this.service,16,function(c){return function(){var d,e;return R.isFunction(a)&&(e=[null,a],a=e[0],b=e[1]),null!=a&&c.setName(a),d={type:"PUT",path:"user/queries",data:c.toXML(),contentType:"application/xml",dataType:"json"},S(b,c.service.authorise(d)).then(function(a){return c.service.doReq(a)}).then(function(a){return a.queries})}}(this))},a.prototype.store=function(a,b){return h(this.service,16,function(c){return function(){var d,e,f,g;return R.isFunction(a)&&(g=[null,a],a=g[0],b=g[1]),null!=a&&c.setName(a),f=function(a,b){if(null==a)return c.setName(b)},d=R.compose(w(c.name),w("queries")),e={type:"POST",path:"user/queries",data:c.toXML(),contentType:"application/xml",dataType:"json"},S(b,f,c.service.authorise(e)).then(function(a){return c.service.doReq(a)}).then(d)}}(this))},a.prototype.saveAsTemplate=function(a,b){return h(this.service,16,function(c){return function(){var d,e;if(R.isFunction(a)&&(e=[null,a],a=e[0],b=e[1]),null!=a&&c.setName(a),!c.name)throw new Error("Templates must have a name");return d={type:"POST",path:"templates",data:"<template "+l(c,["name","title","comment"])+">"+c.toXML()+"</template>",contentType:"application/xml",dataType:"json"},S(b,c.service.authorise(d).then(function(a){return c.service.doReq(a)}))}}(this))},a.prototype.getCodeURI=function(a){var b,c;return b={query:this.toXML(),lang:a,format:"text"},null!=(null!=(c=this.service)?c.token:void 0)&&(b.token=this.service.token),this.service.root+"query/code?"+O(b)},a.prototype.getExportURI=function(b,c){var d,e;return null==b&&(b="tab"),null==c&&(c={}),$.call(a.BIO_FORMATS,b)>=0?this["get"+b.toUpperCase()+"URI"](c):(d=E(c,{query:this.toXML(),format:b}),null!=(null!=(e=this.service)?e.token:void 0)&&(d.token=this.service.token),this.service.root+"query/results?"+O(d))},a.prototype.needsAuthentication=function(){return R.any(this.constraints,function(a){var b;return"NOT IN"===(b=a.op)||"IN"===b})},a.prototype.fetchQID=function(a){return S(a,this.service.post("queries",{query:this.toXML()}).then(w("id")))},b=function(a){return a.append("primaryIdentifier").toString()},a.prototype.__bio_req=function(a,c){var d,e;return e=this.makeListQuery(),d=function(b){return R.any(a,function(a){return b.isa(a)})},e.views=R.take(c)(function(){var a,e,f,g;for(f=this.getViewNodes(),g=[],a=0,e=f.length;a<e;a++)c=f[a],d(c)&&g.push(b(c));return g}.call(this)),{query:e.toXML(),format:"text"}},a.prototype._fasta_req=function(){return this.__bio_req(["SequenceFeature","Protein"],1)},a.prototype._gff3_req=function(){return this.__bio_req(["SequenceFeature"])},a.prototype._bed_req=a.prototype._gff3_req,a}(),Q=v(function(a,b){return a.concat(b)}),g.prototype.toString=g.prototype.toXML,g.ATTRIBUTE_OPS=Q([g.ATTRIBUTE_VALUE_OPS,g.MULTIVALUE_OPS,g.NULL_OPS]),g.REFERENCE_OPS=Q([g.TERNARY_OPS,g.LOOP_OPS,g.LIST_OPS]),k=function(a,b){return function(c,d){var e,f,g,h,i;return null==c&&(c={}),null==d&&(d=function(){}),R.isFunction(c)&&(i=[{},c],c=i[0],d=i[1]),e=function(a){return function(b){var c;return c=a.getPathInfo(b),c.isAttribute()?c:c.append("id")}}(this),null!=(null!=c?c.view:void 0)&&(c.view=function(){var a,b,d,e;for(d=c.view,e=[],a=0,b=d.length;a<b;a++)h=d[a],e.push(this.getPathInfo(h).toString());return e}.call(this)),f=null!=c.export?this.selectPreservingImpliedConstraints(c.export.map(e)):this,g=E(f[a](),c),b.call(f,g,d)}},Z=g.BIO_FORMATS,T=function(a){var b,c,d;return c="_"+a+"_req",b="get"+a.toUpperCase(),d=b+"URI",g.prototype[b]=k(c,function(b,c){return S(c,this.service.post("query/results/"+a,b))}),g.prototype[d]=k(c,function(b,c){return null!=this.service.token&&(b.token=this.service.token),this.service.root+"query/results/"+a+"?"+O(b)})};for(V=0,X=Z.length;V<X;V++)t=Z[V],T(t);for(U=function(a){return function(){var b,c,d,e;if(c=arguments[0],b=2<=arguments.length?aa.call(arguments,1):[],this.service[a])return null==c?c={}:R.isFunction(c)&&(c={},b=function(){var a,b,c;for(c=[],a=0,b=arguments.length;a<b;a++)d=arguments[a],c.push(d);return c}.apply(this,arguments)),c=H(E({start:this.start,size:this.maxRows},c)),(e=this.service)[a].apply(e,[this,c].concat(aa.call(b)));throw new Error("Service does not provide '"+a+"'.")}},W=0,Y=i.length;W<Y;W++)F=i[W],g.prototype[F]=U(F);e.mixin(g.prototype),g.prototype.emit=g.prototype.trigger,g.prototype.bind=g.prototype.on,B.Query=g}).call(this)},{"./util":251,"./xml":253,"backbone-events-standalone":234}],247:[function(a,b,c){(function(){var b,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa=function(a,b){return function(){return a.apply(b,arguments)}},pa={}.hasOwnProperty,qa=[].slice;for(x=a("./promise"),s=a("./model").Model,A=a("./query").Query,p=a("./lists").List,N=a("./user").User,k=a("./id-resolution-job").IDResolutionJob,fa=a("./version"),ea=a("./util"),Y=a("./http"),da=ea.querystring,ga=ea.withCB,$=ea.map,_=ea.merge,W=ea.get,ba=ea.set,Z=ea.invoke,ca=ea.success,V=ea.error,D=ea.REQUIRES_VERSION,U=ea.dejoin,O={},d={},B={},q={},H={},R={},g="http://",P="version",K="templates",C="version/release",e="classkeys",m="lists",r="model",G="summaryfields",y="query/results",z="search",S="widgets",h="list/enrichment",T="listswithobject",n={union:"lists/union",intersection:"lists/intersect",difference:"lists/diff"},E="lists/subtract",Q="user/whoami",J=y+"/tablerows",w="user/preferences",v="path/values",M="user/tokens",l="ids",u={},ma=[P,C,e,S,r,G,z,v],ia=0,ka=ma.length;ia<ka;ia++)aa=ma[ia],u[aa]=!0;for(b={},na=[Q,w,n,E,T,h,K,M],ja=0,la=na.length;ja<la;ja++)aa=na[ja],b[aa]=!0;t=function(a,c){return!u[a]&&(!!b[a]||(null==c||!c.needsAuthentication||c.needsAuthentication()))},i=/^https?:\/\//i,j=/service\/?$/i,F="/service/",f=function(a){var b;return(null!=(b=console.error)?b:console.log)(a)},ha=function(a,b,c,d,e){var f,g,h,i,j;return h=this.root,i=this.useCache,g=null!=this[a]?this[a]:this[a]=i&&(j=b[h])?ca(j):(f={type:"GET",dataType:"json",data:{format:"json"}},this.doReq(_(f,{url:this.root+c})).then(function(a){return b[h]=a[d]})),ga(e,g)},X=function(a){return function(b){return new x(function(c,d){var e;return(e=ea.find(b,function(b){return b.name===a}))?c(e):d('List "'+a+'" not found among: '+b.map(W("name")))})}},o=function(a,b){return null==b&&(b="listName"),ea.compose(a.fetchList,W(b))},L=function(a){var b,c,d,e,f,g;for(null==a&&(a=[]),e=ea.isArray(a)?a:[a],g=[],c=0,d=e.length;c<d;c++)b=e[c],g.push(null!=(f=b.name)?f:b);return g},I=function(){function a(a){var b;if(this.root=a.root,this.token=a.token,this.errorHandler=a.errorHandler,this.DEBUG=a.DEBUG,this.help=a.help,b=a.noCache,this.headers=a.headers,this.connectAs=oa(this.connectAs,this),this.createList=oa(this.createList,this),this.resolveIds=oa(this.resolveIds,this),this.templateQuery=oa(this.templateQuery,this),this.savedQuery=oa(this.savedQuery,this),this.query=oa(this.query,this),this.fetchRelease=oa(this.fetchRelease,this),this.fetchClassKeys=oa(this.fetchClassKeys,this),
this.fetchVersion=oa(this.fetchVersion,this),this.fetchSummaryFields=oa(this.fetchSummaryFields,this),this.fetchModel=oa(this.fetchModel,this),this.fetchWidgetMap=oa(this.fetchWidgetMap,this),this.fetchWidgets=oa(this.fetchWidgets,this),this.complement=oa(this.complement,this),this.fetchListsContaining=oa(this.fetchListsContaining,this),this.fetchList=oa(this.fetchList,this),this.findLists=oa(this.findLists,this),this.fetchLists=oa(this.fetchLists,this),this.fetchTemplates=oa(this.fetchTemplates,this),this.tableRows=oa(this.tableRows,this),this.values=oa(this.values,this),this.rows=oa(this.rows,this),this.records=oa(this.records,this),this.table=oa(this.table,this),this.pathValues=oa(this.pathValues,this),this.fetchUser=oa(this.fetchUser,this),this.whoami=oa(this.whoami,this),this.findById=oa(this.findById,this),this.count=oa(this.count,this),this.enrichment=oa(this.enrichment,this),null==this.root)throw new Error("No service root provided. This is required");i.test(this.root)||(this.root=g+this.root),j.test(this.root)||(this.root=this.root+F),this.root=this.root.replace(/ice$/,"ice/"),null==this.headers&&(this.headers=null),null==this.errorHandler&&(this.errorHandler=f),null==this.help&&(this.help="no.help.available@dev.null"),this.useCache=!b,this.getFormat=function(a){return function(a){return null==a&&(a="json"),a}}()}var b,c,u,x,I,M;return a.prototype.doReq=function(){return arguments[0]=this.attachCustomHeaders(arguments[0]),Y.doReq.apply(this,arguments)},a.prototype.post=function(a,b){return this.makeRequest("POST",a,b)},a.prototype.get=function(a,b){return this.makeRequest("GET",a,b)},a.prototype.makeRequest=function(a,b,c,d,e){var f,g,h,i,j,k,l;return null==a&&(a="GET"),null==b&&(b=""),null==c&&(c={}),null==d&&(d=function(){}),null==e&&(e=!1),ea.isArray(d)&&(j=d,d=j[0],g=j[1]),ea.isArray(c)&&(c=ea.pairsToObj(c)),null==g&&(g=this.errorHandler),c=ea.copy(c),f=this.getFormat(c.format),Y.supports(a)||(k=[a,Y.getMethod(a)],c.method=k[0],a=k[1]),h={data:c,dataType:f,success:d,error:g,path:b,type:a},null!=c.auth&&(h.auth=c.auth,delete h.data.auth),null!=c.headers&&(h.headers=ea.copy(c.headers),delete h.data.headers),(i=null!=(l=c.timeout)?l:this.timeout)&&(h.timeout=i,delete c.timeout),this.authorise(h).then(function(a){return function(b){return a.doReq(b,e)}}(this))},a.prototype.authorise=function(a){return this.fetchVersion().then(function(b){return function(c){var d,e,f;return d=ea.copy(a),null==d.headers&&(d.headers={}),d.url=b.root+d.path,e=[],c<14&&("string"==typeof d.data?e.push(["format",d.dataType]):d.data.format=d.dataType),null!=b.token&&t(a.path,null!=(f=d.data)?f.query:void 0)&&(c>=14?d.headers.Authorization="Token "+b.token:"string"==typeof d.data?e.push(["token",b.token]):d.data.token=b.token),e.length&&(d.url+="?"+da(e)),d}}(this))},a.prototype.attachCustomHeaders=function(a){var b;return null!=this.headers?(b=ea.copy(a),b.headers=ea.merge(b.headers,this.headers),b):a},a.prototype.enrichment=function(a,b){return D(this,8,function(c){return function(){var d;return d=_({maxp:.05,correction:"Holm-Bonferroni"},a),ga(b,c.get(h,d).then(W("results")))}}(this))},a.prototype.search=function(a,b){return null==a&&(a={}),null==b&&(b=function(){}),D(this,9,function(c){return function(){var d,e,f,g;if(ea.isFunction(a)&&(g=[a,{}],b=g[0],a=g[1]),"string"==typeof a)e={q:a};else{e={q:a.q,start:a.start,size:a.size};for(d in a)pa.call(a,d)&&(f=a[d],"q"!==d&&"start"!==d&&"size"!==d&&(e["facet_"+d]=f))}return ga(b,c.post(z,e))}}(this))},a.prototype.makePath=function(a,b,c){return null==b&&(b={}),null==c&&(c=function(){}),ga(c,this.fetchModel().then(function(c){return c.makePath(a,b)}))},a.prototype.count=function(a,b){var c,d;return null==b&&(b=function(){}),c=a?null!=a.toPathString?(aa=a.isClass()?a.append("id"):a,this.pathValues(aa,"count")):null!=a.toXML?(d={query:a,format:"jsoncount"},this.post(y,d).then(W("count"))):"string"==typeof a?this.fetchModel().then(function(b){return function(c){try{return b.count(c.makePath(a))}catch(c){return c,b.query({select:[a]}).then(b.count)}}}(this)):this.query(a).then(this.count):V("Not enough arguments"),ga(b,c)},a.prototype.findById=function(a,b,c,d){var e,f;return null==c&&(c=["**"]),null==d&&(d=function(){}),ea.isFunction(c)&&(f=[["**"],c],c=f[0],d=f[1]),e=this.query({from:a,select:c,where:{id:b}}).then(U).then(Z("records")).then(W(0)),ga(d,e)},a.prototype.lookup=function(a,b,c,d){var e,f;return ea.isFunction(c)&&(f=[null,c],c=f[0],d=f[1]),e=this.query({from:a,select:["**"],where:[[a,"LOOKUP",b,c]]}).then(U).then(Z("records")),ga(d,e)},a.prototype.find=function(a,b,c,d){var e;return ea.isFunction(c)&&(e=[null,c],c=e[0],d=e[1]),ga(d,this.lookup(a,b,c).then(function(a){return null==a||0===a.length?V("Nothing found"):a.length>1?V("Multiple items found: "+a.slice(0,3)+"..."):ca(a[0])}))},a.prototype.whoami=function(a){return D(this,9,function(b){return function(){return ga(a,b.get(Q).then(W("user")).then(function(a){return new N(b,a)}))}}(this))},a.prototype.fetchUser=function(){var a;return a=1<=arguments.length?qa.call(arguments,0):[],this.whoami.apply(this,a)},I=function(a,b){return{format:a,path:String(b),typeConstraints:JSON.stringify(b.subclasses)}},a.prototype.pathValues=function(a,b,c){return null==b&&(b={}),D(this,6,function(d){return function(){var e,f,g,h,i;return"string"==typeof b&&(h=b,b={}),ea.isFunction(b)&&(i=[c,b],b=i[0],c=i[1]),"count"!==h&&(h="results"),f="count"===h?"jsoncount":"json",g=function(){var c;try{return this.fetchModel().then(Z("makePath",a,null!=(c=a.subclasses)?c:b)).then(function(a){return I(f,a)}).then(function(a){return function(b){return a.post(v,b)}}(this)).then(W(h))}catch(a){return e=a,V(e)}}.call(d),ga(c,g)}}(this))},a.prototype.doPagedRequest=function(a,b,c,d,e){var f,g;return null==c&&(c={}),null==e&&(e=function(){}),null!=a.toXML?(ea.isFunction(c)&&(g=[c,{}],e=g[0],c=g[1]),f=_(c,{query:a,format:d}),ga(e,this.post(b,f).then(W("results")))):this.query(a).then(function(a){return function(f){return a.doPagedRequest(f,b,c,d,e)}}(this))},a.prototype.table=function(a,b,c){return this.doPagedRequest(a,y,b,"jsontable",c)},a.prototype.records=function(a,b,c){return this.doPagedRequest(a,y,b,"jsonobjects",c)},a.prototype.rows=function(a,b,c){return this.doPagedRequest(a,y,b,"json",c)},a.prototype.values=function(a,b,c){var d,e;return ea.isFunction(b)&&(e=[b,c],c=e[0],b=e[1]),d=null==a?V("No query term supplied"):null!=a.descriptors||"string"==typeof a?this.pathValues(a,b).then($(W("value"))):null!=a.toXML?1!==a.views.length?V("Expected one column, got "+a.views.length):this.rows(a,b).then($(W(0))):this.query(a).then(function(a){return function(c){return a.values(c,b)}}(this)),ga(c,d)},a.prototype.tableRows=function(a,b,c){return this.doPagedRequest(a,J,b,"json",c)},a.prototype.fetchTemplates=function(a){return ga(a,this.get(K).then(W("templates")))},a.prototype.fetchLists=function(a){return this.findLists("",a)},a.prototype.findLists=function(a,b){return null==a&&(a=""),null==b&&(b=function(){}),this.fetchVersion().then(function(c){return function(d){var e;return ga(b,a&&d<13?V("Finding lists by name on the server requires version 13. This is only "+d):(e=function(a){var b,d,e,f;for(f=[],d=0,e=a.length;d<e;d++)b=a[d],f.push(new p(b,c));return f},c.get(m,{name:a}).then(W("lists")).then(e)))}}(this))},a.prototype.fetchList=function(a,b){return this.fetchVersion().then(function(c){return function(d){return ga(b,d<13?c.findLists().then(X(a)):c.findLists(a).then(W(0)))}}(this))},a.prototype.fetchListsContaining=function(a,b){var c;return c=function(a){return function(b){var c,d,e,f;for(f=[],d=0,e=b.length;d<e;d++)c=b[d],f.push(new p(c,a));return f}}(this),ga(b,this.get(T,a).then(W("lists")).then(c))},a.prototype.combineLists=function(a,b,c){var d,e,f,g,h,i;return i=_({lists:[],tags:[]},b),f=i.name,e=i.lists,h=i.tags,d=i.description,g={name:f,description:d},null==g.description&&(g.description=a+" of "+e.join(", ")),g.tags=h.join(";"),g.lists=e.join(";"),ga(c,this.get(n[a],g).then(o(this)))},a.prototype.merge=function(){return this.combineLists.apply(this,["union"].concat(qa.call(arguments)))},a.prototype.intersect=function(){return this.combineLists.apply(this,["intersection"].concat(qa.call(arguments)))},a.prototype.diff=function(){return this.combineLists.apply(this,["difference"].concat(qa.call(arguments)))},a.prototype.complement=function(a,b){var c,d,e,f,g,h,i,j,k;return null==a&&(a={}),null==b&&(b=function(){}),f=a.from,e=a.exclude,h=a.name,d=a.description,k=a.tags,c=function(){return"Relative complement of "+g.join(" and ")+" in "+i.join(" and ")},i=L(f),g=L(e),null==h&&(h=c()),null==d&&(d=c()),null==k&&(k=[]),j={name:h,description:d,tags:k,lists:g,references:i},ga(b,this.post(E,j).then(o(this)))},a.prototype.fetchWidgets=function(a){return D(this,8,function(b){return function(){return ha.call(b,"widgets",R,S,"widgets",a)}}(this))},M=ea.omap(function(a){return[a.name,a]}),a.prototype.fetchWidgetMap=function(a){return D(this,8,function(b){return function(){return ga(a,null!=b.__wmap__?b.__wmap__:b.__wmap__=b.fetchWidgets().then(M))}}(this))},a.prototype.fetchModel=function(a){var b;return b=ha.call(this,"model",q,r,"model").then(s.load).then(ba({service:this})),ga(a,b)},a.prototype.fetchSummaryFields=function(a){return ha.call(this,"summaryFields",H,G,"classes",a)},a.prototype.fetchVersion=function(a){return ha.call(this,"version",O,P,"version",a)},a.prototype.fetchClassKeys=function(a){return ha.call(this,"classkeys",d,e,"classes",a)},a.prototype.fetchRelease=function(a){return ha.call(this,"release",B,C,"version",a)},a.prototype.query=function(a,b){var c;return c=function(b){return function(c){var d,e;return d=c[0],e=c[1],new A(a,b,{model:d,summaryFields:e})}}(this),ga(b,ea.parallel(this.fetchModel(),this.fetchSummaryFields()).then(c))},x=function(a,b){return function(c){return c?a.query(c):V("No query found called "+b)}},c=function(a){return a?"string"==typeof a?ca():V("Name must be a string"):V("Name not provided")},a.prototype.savedQuery=function(a,b){return D(this,16,function(d){return function(){return c(a).then(function(){return ga(b,d.get("user/queries",{filter:a}).then(function(b){return b.queries[a]}).then(x(d,a)))})}}(this))},a.prototype.templateQuery=function(a,b){return c(a).then(function(c){return function(){return ga(b,c.fetchTemplates().then(W(a)).then(ba("type","TEMPLATE")).then(x(c,a)))}}(this))},a.prototype.manageUserPreferences=function(a,b,c){return D(this,11,function(d){return function(){return ga(c,d.makeRequest(a,w,b).then(W("preferences")))}}(this))},a.prototype.resolveIds=function(a,b){return D(this,10,function(c){return function(){var d;return d={type:"POST",url:c.root+l,contentType:"application/json",data:JSON.stringify(a),dataType:"json"},ga(b,c.doReq(d).then(W("uid")).then(k.create(c)))}}(this))},a.prototype.resolutionJob=function(a){return k.create(this)(a)},a.prototype.createList=function(a,b,c){var d,e;return null==a&&(a={}),null==b&&(b=""),null==c&&(c=function(){}),d=function(b){return function(c){return _(c,{token:b.token,tags:a.tags||[]})}}(this),e={data:ea.isArray(b)?b.map(function(a){return'"'+a+'"'}).join("\n"):b,dataType:"json",url:this.root+"lists?"+da(d(a)),type:"POST",contentType:"text/plain"},ga(c,this.doReq(e).then(o(this)))},u=function(a){return a.user.temporaryToken},a.prototype.connectAs=function(b){return a.connect(_(this,{token:b,noCache:!this.useCache}))},a.prototype.register=function(a,b,c){return D(this,9,function(d){return function(){return ga(c,d.post("users",{name:a,password:b}).then(u).then(d.connectAs))}}(this))},b=300,a.prototype.getDeregistrationToken=function(a,c){return null==a&&(a=b),D(this,16,function(b){return function(){var d;return d=null!=b.token?b.post("user/deregistration",{validity:a}).then(W("token")):V("Not registered"),ga(c,d)}}(this))},a.prototype.deregister=function(a,b){return D(this,16,function(c){return function(){return ga(b,c.makeRequest("DELETE","user",{deregistrationToken:a,format:"xml"}))}}(this))},a.prototype.login=function(a,b,c){return D(this,9,function(d){return function(){var e;return e=a+":"+b,ga(c,d.logout().then(function(a){return a.get("user/token",{auth:e})})).then(W("token")).then(d.connectAs)}}(this))},a.prototype.logout=function(a){return ga(a,ca(this.connectAs()))},a}(),I.prototype.rowByRow=function(){var a,b,c;return c=arguments[0],a=2<=arguments.length?qa.call(arguments,1):[],b=Y.iterReq("POST",y,"json"),null!=c.toXML?b.apply(this,arguments):this.query(c).then(function(b){return function(c){return b.rowByRow.apply(b,[c].concat(qa.call(a)))}}(this))},I.prototype.eachRow=I.prototype.rowByRow,I.prototype.recordByRecord=function(){var a,b,c;return c=arguments[0],a=2<=arguments.length?qa.call(arguments,1):[],b=Y.iterReq("POST",y,"jsonobjects"),null!=c.toXML?b.apply(this,arguments):this.query(c).then(function(b){return function(c){return b.recordByRecord.apply(b,[c].concat(qa.call(a)))}}(this))},I.prototype.eachRecord=I.prototype.recordByRecord,I.prototype.union=I.prototype.merge,I.prototype.difference=I.prototype.diff,I.prototype.symmetricDifference=I.prototype.diff,I.prototype.relativeComplement=I.prototype.complement,I.prototype.subtract=I.prototype.complement,I.flushCaches=function(){return q={},O={},B={},d={},H={},R={}},I.connect=function(a){if(null==(null!=a?a.root:void 0))throw new Error("Invalid options provided: "+JSON.stringify(a));return new I(a)},c.Service=I,c.Model=s,c.Query=A,c.utils=ea,c.VERSION=fa.VERSION,c.imjs=fa}).call(this)},{"./http":240,"./id-resolution-job":241,"./lists":242,"./model":243,"./promise":245,"./query":246,"./user":250,"./util":251,"./version":252}],248:[function(a,b,c){(function(a){(function(){c.DOMParser=null!=a.DOMParser?a.DOMParser:function(){function a(){throw new Error("DOMParser is not available")}return a}()}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],249:[function(a,b,c){(function(){var b,d,e,f=function(a,b){return function(){return a.apply(b,arguments)}};d=function(a,b){var c,d,e;e=[];for(c in a)d=a[c],e.push(b[c]=d);return e},b=a("./promise"),e=["attributes","references","collections"],c.Table=function(){function a(a,b){var c,g,h,i,j,k,l;for(this.model=b,this.getDisplayName=f(this.getDisplayName,this),this.name=a.name,this.tags=a.tags,this.displayName=a.displayName,this.attributes=a.attributes,this.references=a.references,this.collections=a.collections,this.fields={},this.__parents__=null!=(k=a.extends)?k:[],i=0,j=e.length;i<j;i++){if(g=e[i],null==this[g])throw new Error("Bad model data: missing "+g);d(this[g],this.fields)}l=this.collections;for(h in l)c=l[h],c.isCollection=!0}return a.prototype.toString=function(){var a,b;return"[Table name="+this.name+", fields=["+function(){var c,d;c=this.fields,d=[];for(a in c)b=c[a],d.push(a);return d}.call(this)+"]]"},a.prototype.parents=function(){var a;return(null!=(a=this.__parents__)?a:[]).slice()},a.prototype.getDisplayName=function(){return new b(function(a){return function(b,c){return null!=a.model?b(a.model.makePath(a.name).getDisplayName()):c(new Error("model not set - cannot make path"))}}(this))},a}()}).call(this)},{"./promise":245}],250:[function(a,b,c){(function(){var b,d,e,f,g,h,i,j=function(a,b){return function(){return a.apply(b,arguments)}};i=a("./util"),h=i.withCB,f=i.get,g=i.isFunction,b=i.any,e=i.error,d=function(a,b,c,d){return a.service.manageUserPreferences(c,b,d).then(function(b){return a.preferences=b})},c.User=function(){function a(a,b){this.service=a,this.username=b.username,this.preferences=b.preferences,this.refresh=j(this.refresh,this),this.clearPreferences=j(this.clearPreferences,this),this.clearPreference=j(this.clearPreference,this),this.setPreferences=j(this.setPreferences,this),this.setPreference=j(this.setPreference,this),this.hasPreferences=null!=this.preferences,null==this.preferences&&(this.preferences={})}return a.prototype.setPreference=function(a,b,c){var d,f;if(g(b)&&(f=[null,b],b=f[0],c=f[1]),"string"==typeof a)d={},d[a]=b;else{if(null!=b)return h(c,e("Incorrect arguments to setPreference"));d=a}return this.setPreferences(d,c)},a.prototype.setPreferences=function(a,b){return d(this,a,"POST",b)},a.prototype.clearPreference=function(a,b){return d(this,{key:a},"DELETE",b)},a.prototype.clearPreferences=function(a){return d(this,{},"DELETE",a)},a.prototype.refresh=function(a){return d(this,{},"GET",a)},a.prototype.createToken=function(a,c,d){var e,i;return null==a&&(a="day"),null==d&&b([a,c],g)&&(g(a)?(e=[null,null,a],a=e[0],c=e[1],d=e[2]):g(c)&&(i=[null,c],c=i[0],d=i[1])),h(d,this.service.post("user/tokens",{type:a,message:c}).then(f("token")))},a.prototype.fetchCurrentTokens=function(a){return h(a,this.service.get("user/tokens").then(f("tokens")))},a.prototype.revokeAllTokens=function(a){return h(a,this.service.makeRequest("DELETE","user/tokens"))},a.prototype.revokeToken=function(a,b){return h(b,this.service.makeRequest("DELETE","user/tokens/"+a))},a}()}).call(this)},{"./util":251}],251:[function(a,b,c){(function(){var b,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w=[].slice,x=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},y={}.hasOwnProperty;b=a("./promise"),s=c,s.defer=function(){var a;return a={},a.promise=new b(function(b,c){return a.resolve=b,a.reject=c}),a},g=function(a){return encodeURIComponent(String(a))},r=function(a){var b;return function(){var c,d,e;for(e=[],c=0,d=a.length;c<d;c++)b=a[c],e.push(b.map(g).join("="));return e}().join("&")},s.querystring=function(a){var b,c,d,e,f,g;if(!a)return"";if(o(a))d=a.slice();else{d=[];for(b in a)g=a[b],o(g)?(e=function(){var a,c,d;for(d=[],a=0,c=g.length;a<c;a++)f=g[a],d.push([b,f]);return d}(),d=d.concat(e)):d.push([b,g])}return r(function(){var a,b,e;for(e=[],a=0,b=d.length;a<b;a++)c=d[a],null!=c[1]&&e.push(c);return e}())},s.curry=f=function(){var a,b;return b=arguments[0],a=2<=arguments.length?w.call(arguments,1):[],function(){var c;return c=1<=arguments.length?w.call(arguments,0):[],b.apply(null,a.concat(c))}},s.error=i=function(a){return new b(function(b,c){return c(new Error(a))})},s.success=t=function(a){return new b(function(b,c){return b(a)})},s.parallel=function(){var a;return a=1<=arguments.length?w.call(arguments,0):[],1===a.length&&!a[0].then&&a[0].length?b.all(a[0]):b.all(a)},s.withCB=function(){var a,b,c,d,e,g,h,i;for(b=2<=arguments.length?w.call(arguments,0,g=arguments.length-1):(g=0,[]),e=arguments[g++],h=0,i=b.length;h<i;h++)null!=(a=b[h])&&(d=f(a,null),c=a,e.then(d,c));return e},s.fold=k=function(a){return function(b,c){var d,e,f;if(1===arguments.length&&(c=(null!=b?b.slice():void 0)||b,b=(null!=c?c.shift():void 0)||{}),null==c)throw new Error("xs is null");if(null!=c.reduce)return c.reduce(a,b);e=b;for(d in c)f=c[d],e=null!=e?a(e,d,f):{k:f};return e}},s.take=function(a){return function(b){return null!=a?b.slice(0,+(a-1)+1||9e9):b.slice()}},s.filter=function(a){return function(b){var c,d,e,f;for(f=[],d=0,e=b.length;d<e;d++)c=b[d],a(c)&&f.push(c);return f}},s.uniqBy=function(a,b){var c,d,e,g,h,i;if(1===arguments.length)return f(s.uniqBy,a);if(d=[],e=[],null==b)return e;for(h=0,i=b.length;h<i;h++)g=b[h],c=a(g),x.call(d,c)<0&&(d.push(c),e.push(g));return e},s.find=function(a,b){var c,d,e;if(1===arguments.length)return b=a,function(a){return s.find(a,b)};for(d=0,e=a.length;d<e;d++)if(c=a[d],b(c))return c;return null},o=null!=(v=Array.isArray)?v:function(a){return null!=(null!=a?a.splice:void 0)&&null!=(null!=a?a.push:void 0)&&null!=(null!=a?a.pop:void 0)&&null!=(null!=a?a.slice:void 0)},s.isArray=o,s.isFunction="function"!=typeof/./?function(a){return"function"==typeof a}:function(a){return null!=a&&null!=a.call&&null!=a.apply&&"[object Function]"===a.toString()},h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"},s.escape=function(a){var b,c,d,e,f,g;if(null==a)return"";for(e=String(a).replace(/[&<>"']/g,function(a){return h[a]}),d=[],c=f=0,g=e.length;0<=g?f<=g:f>=g;c=0<=g?++f:--f)b=e.charCodeAt(c),b>256?d.push("&#"+b+";"):d.push(e.charAt(c));return d.join("")},s.omap=function(a){var b;return b=k(function(b,c,d){var e,f,g;return g=a(c,d),e=g[0],f=g[1],o(f)&&(f=f.slice()),b[e]=f,b}),function(a){return b({},a)}},s.copy=s.omap(function(a,b){return[a,b]}),s.partition=function(a){return function(b){return k(function(b,c){var d,e;return e=b[0],d=b[1],a(c)?[e.concat([c]),d]:[e,d.concat([c])]})([[],[]],b)}},s.merge=function(a,b){return extend(extend({},a),b)},s.extend=function(a,b){var c,d,e;e=[];for(c in b)d=b[c],e.push(a[c]=d);return e},s.id=l=function(a){return a},s.concatMap=function(a){return function(b){var c,d,e,f,g;for(d=void 0,f=0,g=b.length;f<g;f++)e=b[f],c=a(e),d=void 0===d?c:"number"==typeof d?d+c:null!=d.concat?d.concat(c):p(d,c);return d}},s.map=function(a){return m("map",a)},e=k(function(a,b){return function(){var c;return c=1<=arguments.length?w.call(arguments,0):[],a(b.apply(null,c))}}),s.compose=function(){var a;return a=1<=arguments.length?w.call(arguments,0):[],e(a)},s.flatMap=s.concatMap,s.difference=function(a,b){var c,d,e,f;for(f=[],d=0,e=a.length;d<e;d++)c=a[d],x.call(b,c)<0&&f.push(c);return f},s.stringList=function(a){return"string"==typeof a?[a]:a},s.flatten=j=function(){var a,b,c,d,e,f,g,h,i;for(c=1<=arguments.length?w.call(arguments,0):[],a=[],e=0,g=c.length;e<g;e++)if(b=c[e],o(b))for(i=j.apply(null,b),f=0,h=i.length;f<h;f++)d=i[f],a.push(d);else a.push(b);return a},s.sum=s.concatMap(l),s.merge=p=function(){var a,b,c,d,e,f,g;for(d=1<=arguments.length?w.call(arguments,0):[],b={},f=0,g=d.length;f<g;f++){c=d[f];for(a in c)y.call(c,a)&&(e=c[a],b[a]=e)}return b},s.any=function(a,b){var c,d,e;for(null==b&&(b=l),d=0,e=a.length;d<e;d++)if(c=a[d],b(c))return!0;return!1},s.invoke=m=function(){var a,b;return b=arguments[0],a=2<=arguments.length?w.call(arguments,1):[],n(b,a)},s.invokeWith=n=function(a,b,c){return null==b&&(b=[]),null==c&&(c=null),function(d){if(null==d)throw new Error('Cannot call method "'+a+'" of null');if(d[a])return d[a].apply(c||d,b);throw new Error('Cannot call undefined method "'+a+" of "+d)}},s.get=function(a){return function(b){return b[a]}},s.set=function(a,b){return function(c){var d,e;if(2===arguments.length)c[a]=b;else for(d in a)y.call(a,d)&&(e=a[d],c[d]=e);return c}},d=function(a,b){return"This service requires a service at version "+a+" or above. This one is at "+b},s.REQUIRES_VERSION=function(a,b,c){return a.fetchVersion().then(function(a){return a>=b?c():i(d(b,a))})},s.dejoin=function(a){var b,c,d,e,f;for(f=a.views,d=0,e=f.length;d<e;d++)c=f[d],b=c.split("."),b.length>2&&a.addJoin(b.slice(1,-1).join("."));return a},u=k(function(a,b){return a.then(b)}),s.sequence=function(){var a;return a=1<=arguments.length?w.call(arguments,0):[],u(t(),a)},q=k(function(a,b){var c,d;if(c=b[0],d=b[1],null!=a[c])throw new Error("Duplicate key: "+c);return a[c]=d,a}),s.pairsToObj=function(a){return q({},a)}}).call(this)},{"./promise":245}],252:[function(a,b,c){(function(){c.VERSION="3.16.0"}).call(this)},{}],253:[function(a,b,c){(function(){var b,d;b=a("xmldom").DOMParser,d=function(a){return a=a.replace(/^\s*/g,""),a=a.replace(/\s$/g,""),0===a.length?a:">"!==a[a.length-1]?a+">":a},c.parse=function(a){var c,e;if("string"!=typeof a)throw new Error("Expected a string - got "+a);if(!(a=d(a)))throw new Error("Expected content - got empty string");if(!(c=function(){try{return e=new b,e.parseFromString(a,"text/xml")}catch(a){}}())||!c.documentElement||c.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+a);return c}}).call(this)},{xmldom:248}],254:[function(b,c,d){(function(d,e){(function(){"use strict";function f(a){return"function"==typeof a||"object"==typeof a&&null!==a}function g(a){return"function"==typeof a}function h(a){return"object"==typeof a&&null!==a}function i(a){U=a}function j(a){Y=a}function k(){var a=d.nextTick,b=d.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(b)&&"0"===b[1]&&"10"===b[2]&&(a=setImmediate),function(){a(p)}}function l(){return function(){T(p)}}function m(){var a=0,b=new _(p),c=document.createTextNode("");return b.observe(c,{characterData:!0}),function(){c.data=a=++a%2}}function n(){var a=new MessageChannel;return a.port1.onmessage=p,function(){a.port2.postMessage(0)}}function o(){return function(){setTimeout(p,1)}}function p(){for(var a=0;a<X;a+=2){(0,ca[a])(ca[a+1]),ca[a]=void 0,ca[a+1]=void 0}X=0}function q(){try{var a=b,c=a("vertx");return T=c.runOnLoop||c.runOnContext,l()}catch(a){return o()}}function r(){}function s(){return new TypeError("You cannot resolve a promise with itself")}function t(){return new TypeError("A promises callback cannot return that same promise.")}function u(a){try{return a.then}catch(a){return ga.error=a,ga}}function v(a,b,c,d){try{a.call(b,c,d)}catch(a){return a}}function w(a,b,c){Y(function(a){var d=!1,e=v(c,b,function(c){d||(d=!0,b!==c?z(a,c):B(a,c))},function(b){d||(d=!0,C(a,b))},"Settle: "+(a._label||" unknown promise"));!d&&e&&(d=!0,C(a,e))},a)}function x(a,b){b._state===ea?B(a,b._result):b._state===fa?C(a,b._result):D(b,void 0,function(b){z(a,b)},function(b){C(a,b)})}function y(a,b){if(b.constructor===a.constructor)x(a,b);else{var c=u(b);c===ga?C(a,ga.error):void 0===c?B(a,b):g(c)?w(a,b,c):B(a,b)}}function z(a,b){a===b?C(a,s()):f(b)?y(a,b):B(a,b)}function A(a){a._onerror&&a._onerror(a._result),E(a)}function B(a,b){a._state===da&&(a._result=b,a._state=ea,0!==a._subscribers.length&&Y(E,a))}function C(a,b){a._state===da&&(a._state=fa,a._result=b,Y(A,a))}function D(a,b,c,d){var e=a._subscribers,f=e.length;a._onerror=null,e[f]=b,e[f+ea]=c,e[f+fa]=d,0===f&&a._state&&Y(E,a)}function E(a){var b=a._subscribers,c=a._state;if(0!==b.length){for(var d,e,f=a._result,g=0;g<b.length;g+=3)d=b[g],e=b[g+c],d?H(c,d,e,f):e(f);a._subscribers.length=0}}function F(){this.error=null}function G(a,b){try{return a(b)}catch(a){return ha.error=a,ha}}function H(a,b,c,d){var e,f,h,i,j=g(c);if(j){if(e=G(c,d),e===ha?(i=!0,f=e.error,e=null):h=!0,b===e)return void C(b,t())}else e=d,h=!0;b._state!==da||(j&&h?z(b,e):i?C(b,f):a===ea?B(b,e):a===fa&&C(b,e))}function I(a,b){try{b(function(b){z(a,b)},function(b){C(a,b)})}catch(b){C(a,b)}}function J(a,b){var c=this;c._instanceConstructor=a,c.promise=new a(r),c._validateInput(b)?(c._input=b,c.length=b.length,c._remaining=b.length,c._init(),0===c.length?B(c.promise,c._result):(c.length=c.length||0,c._enumerate(),0===c._remaining&&B(c.promise,c._result))):C(c.promise,c._validationError())}function K(a){return new ia(this,a).promise}function L(a){function b(a){z(e,a)}function c(a){C(e,a)}var d=this,e=new d(r);if(!W(a))return C(e,new TypeError("You must pass an array to race.")),e;for(var f=a.length,g=0;e._state===da&&g<f;g++)D(d.resolve(a[g]),void 0,b,c);return e}function M(a){var b=this;if(a&&"object"==typeof a&&a.constructor===b)return a;var c=new b(r);return z(c,a),c}function N(a){var b=this,c=new b(r);return C(c,a),c}function O(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function P(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function Q(a){this._id=na++,this._state=void 0,this._result=void 0,this._subscribers=[],r!==a&&(g(a)||O(),this instanceof Q||P(),I(this,a))}function R(){var a;if(void 0!==e)a=e;else if("undefined"!=typeof self)a=self;else try{a=Function("return this")()}catch(a){throw new Error("polyfill failed because global object is unavailable in this environment")}var b=a.Promise;b&&"[object Promise]"===Object.prototype.toString.call(b.resolve())&&!b.cast||(a.Promise=oa)}var S;S=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)};var T,U,V,W=S,X=0,Y=function(a,b){ca[X]=a,ca[X+1]=b,2===(X+=2)&&(U?U(p):V())},Z="undefined"!=typeof window?window:void 0,$=Z||{},_=$.MutationObserver||$.WebKitMutationObserver,aa=void 0!==d&&"[object process]"==={}.toString.call(d),ba="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ca=new Array(1e3);V=aa?k():_?m():ba?n():void 0===Z&&"function"==typeof b?q():o();var da=void 0,ea=1,fa=2,ga=new F,ha=new F;J.prototype._validateInput=function(a){return W(a)},J.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},J.prototype._init=function(){this._result=new Array(this.length)};var ia=J;J.prototype._enumerate=function(){for(var a=this,b=a.length,c=a.promise,d=a._input,e=0;c._state===da&&e<b;e++)a._eachEntry(d[e],e)},J.prototype._eachEntry=function(a,b){var c=this,d=c._instanceConstructor;h(a)?a.constructor===d&&a._state!==da?(a._onerror=null,c._settledAt(a._state,b,a._result)):c._willSettleAt(d.resolve(a),b):(c._remaining--,c._result[b]=a)},J.prototype._settledAt=function(a,b,c){var d=this,e=d.promise;e._state===da&&(d._remaining--,a===fa?C(e,c):d._result[b]=c),0===d._remaining&&B(e,d._result)},J.prototype._willSettleAt=function(a,b){var c=this;D(a,void 0,function(a){c._settledAt(ea,b,a)},function(a){c._settledAt(fa,b,a)})};var ja=K,ka=L,la=M,ma=N,na=0,oa=Q;Q.all=ja,Q.race=ka,Q.resolve=la,Q.reject=ma,Q._setScheduler=i,Q._setAsap=j,Q._asap=Y,Q.prototype={constructor:Q,then:function(a,b){var c=this,d=c._state;if(d===ea&&!a||d===fa&&!b)return this;var e=new this.constructor(r),f=c._result;if(d){var g=arguments[d-1];Y(function(){H(d,e,g,f)})}else D(c,e,a,b);return e},catch:function(a){return this.then(null,a)}};var pa=R,qa={Promise:oa,polyfill:pa};"function"==typeof a&&a.amd?a(function(){return qa}):void 0!==c&&c.exports?c.exports=qa:void 0!==this&&(this.ES6Promise=qa),pa()}).call(this)}).call(this,b("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:275}],255:[function(b,c,d){!function(b){"function"==typeof a&&a.amd?a(["jquery"],b):b(jQuery)}(function(a){function b(a){for(var b=a.css("visibility");"inherit"===b;)a=a.parent(),b=a.css("visibility");return"hidden"!==b}function c(a){for(var b,c;a.length&&a[0]!==document;){if(("absolute"===(b=a.css("position"))||"relative"===b||"fixed"===b)&&(c=parseInt(a.css("zIndex"),10),!isNaN(c)&&0!==c))return c;a=a.parent()}return 0}function d(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},
a.extend(this._defaults,this.regional[""]),this.regional.en=a.extend(!0,{},this.regional[""]),this.regional["en-US"]=a.extend(!0,{},this.regional.en),this.dpDiv=e(a("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function e(b){var c="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return b.on("mouseout",c,function(){a(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&a(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&a(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",c,f)}function f(){a.datepicker._isDisabledDatepicker(n.inline?n.dpDiv.parent()[0]:n.input[0])||(a(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),a(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&a(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&a(this).addClass("ui-datepicker-next-hover"))}function g(b,c){a.extend(b,c);for(var d in c)null==c[d]&&(b[d]=c[d]);return b}function h(a){return function(){var b=this.element.val();a.apply(this,arguments),this._refresh(),b!==this.element.val()&&this._trigger("change")}}a.ui=a.ui||{};var i=(a.ui.version="1.12.1",0),j=Array.prototype.slice;a.cleanData=function(b){return function(c){var d,e,f;for(f=0;null!=(e=c[f]);f++)try{d=a._data(e,"events"),d&&d.remove&&a(e).triggerHandler("remove")}catch(a){}b(c)}}(a.cleanData),a.widget=function(b,c,d){var e,f,g,h={},i=b.split(".")[0];b=b.split(".")[1];var j=i+"-"+b;return d||(d=c,c=a.Widget),a.isArray(d)&&(d=a.extend.apply(null,[{}].concat(d))),a.expr.pseudos[j.toLowerCase()]=function(b){return!!a.data(b,j)},a[i]=a[i]||{},e=a[i][b],f=a[i][b]=function(a,b){if(!this._createWidget)return new f(a,b);arguments.length&&this._createWidget(a,b)},a.extend(f,e,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),g=new c,g.options=a.widget.extend({},g.options),a.each(d,function(b,d){if(!a.isFunction(d))return void(h[b]=d);h[b]=function(){function a(){return c.prototype[b].apply(this,arguments)}function e(a){return c.prototype[b].apply(this,a)}return function(){var b,c=this._super,f=this._superApply;return this._super=a,this._superApply=e,b=d.apply(this,arguments),this._super=c,this._superApply=f,b}}()}),f.prototype=a.widget.extend(g,{widgetEventPrefix:e?g.widgetEventPrefix||b:b},h,{constructor:f,namespace:i,widgetName:b,widgetFullName:j}),e?(a.each(e._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,f,c._proto)}),delete e._childConstructors):c._childConstructors.push(f),a.widget.bridge(b,f),f},a.widget.extend=function(b){for(var c,d,e=j.call(arguments,1),f=0,g=e.length;f<g;f++)for(c in e[f])d=e[f][c],e[f].hasOwnProperty(c)&&void 0!==d&&(a.isPlainObject(d)?b[c]=a.isPlainObject(b[c])?a.widget.extend({},b[c],d):a.widget.extend({},d):b[c]=d);return b},a.widget.bridge=function(b,c){var d=c.prototype.widgetFullName||b;a.fn[b]=function(e){var f="string"==typeof e,g=j.call(arguments,1),h=this;return f?this.length||"instance"!==e?this.each(function(){var c,f=a.data(this,d);return"instance"===e?(h=f,!1):f?a.isFunction(f[e])&&"_"!==e.charAt(0)?(c=f[e].apply(f,g),c!==f&&void 0!==c?(h=c&&c.jquery?h.pushStack(c.get()):c,!1):void 0):a.error("no such method '"+e+"' for "+b+" widget instance"):a.error("cannot call methods on "+b+" prior to initialization; attempted to call method '"+e+"'")}):h=void 0:(g.length&&(e=a.widget.extend.apply(null,[e].concat(g))),this.each(function(){var b=a.data(this,d);b?(b.option(e||{}),b._init&&b._init()):a.data(this,d,new c(e,this))})),h}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(b,c){c=a(c||this.defaultElement||this)[0],this.element=a(c),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=a(),this.hoverable=a(),this.focusable=a(),this.classesElementLookup={},c!==this&&(a.data(c,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===c&&this.destroy()}}),this.document=a(c.style?c.ownerDocument:c.document||c),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){var b=this;this._destroy(),a.each(this.classesElementLookup,function(a,c){b._removeClass(c,a)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:a.noop,widget:function(){return this.element},option:function(b,c){var d,e,f,g=b;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof b)if(g={},d=b.split("."),b=d.shift(),d.length){for(e=g[b]=a.widget.extend({},this.options[b]),f=0;f<d.length-1;f++)e[d[f]]=e[d[f]]||{},e=e[d[f]];if(b=d.pop(),1===arguments.length)return void 0===e[b]?null:e[b];e[b]=c}else{if(1===arguments.length)return void 0===this.options[b]?null:this.options[b];g[b]=c}return this._setOptions(g),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return"classes"===a&&this._setOptionClasses(b),this.options[a]=b,"disabled"===a&&this._setOptionDisabled(b),this},_setOptionClasses:function(b){var c,d,e;for(c in b)e=this.classesElementLookup[c],b[c]!==this.options.classes[c]&&e&&e.length&&(d=a(e.get()),this._removeClass(e,c),d.addClass(this._classes({element:d,keys:c,classes:b,add:!0})))},_setOptionDisabled:function(a){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!a),a&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(b){function c(c,f){var g,h;for(h=0;h<c.length;h++)g=e.classesElementLookup[c[h]]||a(),g=a(b.add?a.uniqueSort(g.get().concat(b.element.get())):g.not(b.element).get()),e.classesElementLookup[c[h]]=g,d.push(c[h]),f&&b.classes[c[h]]&&d.push(b.classes[c[h]])}var d=[],e=this;return b=a.extend({element:this.element,classes:this.options.classes||{}},b),this._on(b.element,{remove:"_untrackClassesElement"}),b.keys&&c(b.keys.match(/\S+/g)||[],!0),b.extra&&c(b.extra.match(/\S+/g)||[]),d.join(" ")},_untrackClassesElement:function(b){var c=this;a.each(c.classesElementLookup,function(d,e){-1!==a.inArray(b.target,e)&&(c.classesElementLookup[d]=a(e.not(b.target).get()))})},_removeClass:function(a,b,c){return this._toggleClass(a,b,c,!1)},_addClass:function(a,b,c){return this._toggleClass(a,b,c,!0)},_toggleClass:function(a,b,c,d){d="boolean"==typeof d?d:c;var e="string"==typeof a||null===a,f={extra:e?b:c,keys:e?a:b,element:e?this.element:a,add:d};return f.element.toggleClass(this._classes(f),d),this},_on:function(b,c,d){var e,f=this;"boolean"!=typeof b&&(d=c,c=b,b=!1),d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget()),a.each(d,function(d,g){function h(){if(b||!0!==f.options.disabled&&!a(this).hasClass("ui-state-disabled"))return("string"==typeof g?f[g]:g).apply(f,arguments)}"string"!=typeof g&&(h.guid=g.guid=g.guid||h.guid||a.guid++);var i=d.match(/^([\w:-]*)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.on(j,k,h):c.on(j,h)})},_off:function(b,c){c=(c||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,b.off(c).off(c),this.bindings=a(this.bindings.not(b).get()),this.focusable=a(this.focusable.not(b).get()),this.hoverable=a(this.hoverable.not(b).get())},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){this._addClass(a(b.currentTarget),null,"ui-state-hover")},mouseleave:function(b){this._removeClass(a(b.currentTarget),null,"ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){this._addClass(a(b.currentTarget),null,"ui-state-focus")},focusout:function(b){this._removeClass(a(b.currentTarget),null,"ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&!1===g.apply(this.element[0],[c].concat(d))||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?!0===e||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}});a.widget;!function(){function b(a,b,c){return[parseFloat(a[0])*(l.test(a[0])?b/100:1),parseFloat(a[1])*(l.test(a[1])?c/100:1)]}function c(b,c){return parseInt(a.css(b,c),10)||0}function d(b){var c=b[0];return 9===c.nodeType?{width:b.width(),height:b.height(),offset:{top:0,left:0}}:a.isWindow(c)?{width:b.width(),height:b.height(),offset:{top:b.scrollTop(),left:b.scrollLeft()}}:c.preventDefault?{width:0,height:0,offset:{top:c.pageY,left:c.pageX}}:{width:b.outerWidth(),height:b.outerHeight(),offset:b.offset()}}var e,f=Math.max,g=Math.abs,h=/left|center|right/,i=/top|center|bottom/,j=/[\+\-]\d+(\.[\d]+)?%?/,k=/^\w+/,l=/%$/,m=a.fn.position;a.position={scrollbarWidth:function(){if(void 0!==e)return e;var b,c,d=a("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),f=d.children()[0];return a("body").append(d),b=f.offsetWidth,d.css("overflow","scroll"),c=f.offsetWidth,b===c&&(c=d[0].clientWidth),d.remove(),e=b-c},getScrollInfo:function(b){var c=b.isWindow||b.isDocument?"":b.element.css("overflow-x"),d=b.isWindow||b.isDocument?"":b.element.css("overflow-y"),e="scroll"===c||"auto"===c&&b.width<b.element[0].scrollWidth;return{width:"scroll"===d||"auto"===d&&b.height<b.element[0].scrollHeight?a.position.scrollbarWidth():0,height:e?a.position.scrollbarWidth():0}},getWithinInfo:function(b){var c=a(b||window),d=a.isWindow(c[0]),e=!!c[0]&&9===c[0].nodeType;return{element:c,isWindow:d,isDocument:e,offset:d||e?{left:0,top:0}:a(b).offset(),scrollLeft:c.scrollLeft(),scrollTop:c.scrollTop(),width:c.outerWidth(),height:c.outerHeight()}}},a.fn.position=function(e){if(!e||!e.of)return m.apply(this,arguments);e=a.extend({},e);var l,n,o,p,q,r,s=a(e.of),t=a.position.getWithinInfo(e.within),u=a.position.getScrollInfo(t),v=(e.collision||"flip").split(" "),w={};return r=d(s),s[0].preventDefault&&(e.at="left top"),n=r.width,o=r.height,p=r.offset,q=a.extend({},p),a.each(["my","at"],function(){var a,b,c=(e[this]||"").split(" ");1===c.length&&(c=h.test(c[0])?c.concat(["center"]):i.test(c[0])?["center"].concat(c):["center","center"]),c[0]=h.test(c[0])?c[0]:"center",c[1]=i.test(c[1])?c[1]:"center",a=j.exec(c[0]),b=j.exec(c[1]),w[this]=[a?a[0]:0,b?b[0]:0],e[this]=[k.exec(c[0])[0],k.exec(c[1])[0]]}),1===v.length&&(v[1]=v[0]),"right"===e.at[0]?q.left+=n:"center"===e.at[0]&&(q.left+=n/2),"bottom"===e.at[1]?q.top+=o:"center"===e.at[1]&&(q.top+=o/2),l=b(w.at,n,o),q.left+=l[0],q.top+=l[1],this.each(function(){var d,h,i=a(this),j=i.outerWidth(),k=i.outerHeight(),m=c(this,"marginLeft"),r=c(this,"marginTop"),x=j+m+c(this,"marginRight")+u.width,y=k+r+c(this,"marginBottom")+u.height,z=a.extend({},q),A=b(w.my,i.outerWidth(),i.outerHeight());"right"===e.my[0]?z.left-=j:"center"===e.my[0]&&(z.left-=j/2),"bottom"===e.my[1]?z.top-=k:"center"===e.my[1]&&(z.top-=k/2),z.left+=A[0],z.top+=A[1],d={marginLeft:m,marginTop:r},a.each(["left","top"],function(b,c){a.ui.position[v[b]]&&a.ui.position[v[b]][c](z,{targetWidth:n,targetHeight:o,elemWidth:j,elemHeight:k,collisionPosition:d,collisionWidth:x,collisionHeight:y,offset:[l[0]+A[0],l[1]+A[1]],my:e.my,at:e.at,within:t,elem:i})}),e.using&&(h=function(a){var b=p.left-z.left,c=b+n-j,d=p.top-z.top,h=d+o-k,l={target:{element:s,left:p.left,top:p.top,width:n,height:o},element:{element:i,left:z.left,top:z.top,width:j,height:k},horizontal:c<0?"left":b>0?"right":"center",vertical:h<0?"top":d>0?"bottom":"middle"};n<j&&g(b+c)<n&&(l.horizontal="center"),o<k&&g(d+h)<o&&(l.vertical="middle"),f(g(b),g(c))>f(g(d),g(h))?l.important="horizontal":l.important="vertical",e.using.call(this,a,l)}),i.offset(a.extend(z,{using:h}))})},a.ui.position={fit:{left:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollLeft:d.offset.left,g=d.width,h=a.left-b.collisionPosition.marginLeft,i=e-h,j=h+b.collisionWidth-g-e;b.collisionWidth>g?i>0&&j<=0?(c=a.left+i+b.collisionWidth-g-e,a.left+=i-c):a.left=j>0&&i<=0?e:i>j?e+g-b.collisionWidth:e:i>0?a.left+=i:j>0?a.left-=j:a.left=f(a.left-h,a.left)},top:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollTop:d.offset.top,g=b.within.height,h=a.top-b.collisionPosition.marginTop,i=e-h,j=h+b.collisionHeight-g-e;b.collisionHeight>g?i>0&&j<=0?(c=a.top+i+b.collisionHeight-g-e,a.top+=i-c):a.top=j>0&&i<=0?e:i>j?e+g-b.collisionHeight:e:i>0?a.top+=i:j>0?a.top-=j:a.top=f(a.top-h,a.top)}},flip:{left:function(a,b){var c,d,e=b.within,f=e.offset.left+e.scrollLeft,h=e.width,i=e.isWindow?e.scrollLeft:e.offset.left,j=a.left-b.collisionPosition.marginLeft,k=j-i,l=j+b.collisionWidth-h-i,m="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,n="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,o=-2*b.offset[0];k<0?((c=a.left+m+n+o+b.collisionWidth-h-f)<0||c<g(k))&&(a.left+=m+n+o):l>0&&((d=a.left-b.collisionPosition.marginLeft+m+n+o-i)>0||g(d)<l)&&(a.left+=m+n+o)},top:function(a,b){var c,d,e=b.within,f=e.offset.top+e.scrollTop,h=e.height,i=e.isWindow?e.scrollTop:e.offset.top,j=a.top-b.collisionPosition.marginTop,k=j-i,l=j+b.collisionHeight-h-i,m="top"===b.my[1],n=m?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,o="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,p=-2*b.offset[1];k<0?((d=a.top+n+o+p+b.collisionHeight-h-f)<0||d<g(k))&&(a.top+=n+o+p):l>0&&((c=a.top-b.collisionPosition.marginTop+n+o+p-i)>0||g(c)<l)&&(a.top+=n+o+p)}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments),a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments),a.ui.position.fit.top.apply(this,arguments)}}}}();a.ui.position,a.extend(a.expr.pseudos,{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])}}),a.fn.extend({disableSelection:function(){var a="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(a+".ui-disableSelection",function(a){a.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}});a.ui.focusable=function(c,d){var e,f,g,h,i,j=c.nodeName.toLowerCase();return"area"===j?(e=c.parentNode,f=e.name,!(!c.href||!f||"map"!==e.nodeName.toLowerCase())&&(g=a("img[usemap='#"+f+"']"),g.length>0&&g.is(":visible"))):(/^(input|select|textarea|button|object)$/.test(j)?(h=!c.disabled)&&(i=a(c).closest("fieldset")[0])&&(h=!i.disabled):h="a"===j?c.href||d:d,h&&a(c).is(":visible")&&b(a(c)))},a.extend(a.expr.pseudos,{focusable:function(b){return a.ui.focusable(b,null!=a.attr(b,"tabindex"))}});a.ui.focusable,a.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):a(this[0].form)},a.ui.formResetMixin={_formResetHandler:function(){var b=a(this);setTimeout(function(){var c=b.data("ui-form-reset-instances");a.each(c,function(){this.refresh()})})},_bindFormResetHandler:function(){if(this.form=this.element.form(),this.form.length){var a=this.form.data("ui-form-reset-instances")||[];a.length||this.form.on("reset.ui-form-reset",this._formResetHandler),a.push(this),this.form.data("ui-form-reset-instances",a)}},_unbindFormResetHandler:function(){if(this.form.length){var b=this.form.data("ui-form-reset-instances");b.splice(a.inArray(this,b),1),b.length?this.form.data("ui-form-reset-instances",b):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}};"1.7"===a.fn.jquery.substring(0,3)&&(a.each(["Width","Height"],function(b,c){function d(b,c,d,f){return a.each(e,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),f&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var e="Width"===c?["Left","Right"]:["Top","Bottom"],f=c.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+c]=function(b){return void 0===b?g["inner"+c].call(this):this.each(function(){a(this).css(f,d(this,b)+"px")})},a.fn["outer"+c]=function(b,e){return"number"!=typeof b?g["outer"+c].call(this,b):this.each(function(){a(this).css(f,d(this,b,!0,e)+"px")})}}),a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))});var k=(a.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},a.ui.escapeSelector=function(){var a=/([!"#$%&'()*+,.\/:;<=>?@[\]^`{|}~])/g;return function(b){return b.replace(a,"\\$1")}}(),a.fn.labels=function(){var b,c,d,e,f;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(e=this.eq(0).parents("label"),d=this.attr("id"),d&&(b=this.eq(0).parents().last(),f=b.add(b.length?b.siblings():this.siblings()),c="label[for='"+a.ui.escapeSelector(d)+"']",e=e.add(f.find(c).addBack(c))),this.pushStack(e))},a.fn.scrollParent=function(b){var c=this.css("position"),d="absolute"===c,e=b?/(auto|scroll|hidden)/:/(auto|scroll)/,f=this.parents().filter(function(){var b=a(this);return(!d||"static"!==b.css("position"))&&e.test(b.css("overflow")+b.css("overflow-y")+b.css("overflow-x"))}).eq(0);return"fixed"!==c&&f.length?f:a(this[0].ownerDocument||document)},a.extend(a.expr.pseudos,{tabbable:function(b){var c=a.attr(b,"tabindex"),d=null!=c;return(!d||c>=0)&&a.ui.focusable(b,d)}}),a.fn.extend({uniqueId:function(){var a=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&a(this).removeAttr("id")})}}),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),!1);a(document).on("mouseup",function(){k=!1});a.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.on("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).on("click."+this.widgetName,function(c){if(!0===a.data(c.target,b.widgetName+".preventClickEvent"))return a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!k){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var c=this,d=1===b.which,e=!("string"!=typeof this.options.cancel||!b.target.nodeName)&&a(b.target).closest(this.options.cancel).length;return!(d&&!e&&this._mouseCapture(b))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=!1!==this._mouseStart(b),!this._mouseStarted)?(b.preventDefault(),!0):(!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return c._mouseMove(a)},this._mouseUpDelegate=function(a){return c._mouseUp(a)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),k=!0,!0))}},_mouseMove:function(b){if(this._mouseMoved){if(a.ui.ie&&(!document.documentMode||document.documentMode<9)&&!b.button)return this._mouseUp(b);if(!b.which)if(b.originalEvent.altKey||b.originalEvent.ctrlKey||b.originalEvent.metaKey||b.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(b)}return(b.which||b.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,b),this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted)},_mouseUp:function(b){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,k=!1,b.preventDefault()},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),a.ui.plugin={add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c,d){var e,f=a.plugins[b];if(f&&(d||a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType))for(e=0;e<f.length;e++)a.options[f[e][0]]&&f[e][1].apply(a.element,c)}},a.ui.safeActiveElement=function(a){var b;try{b=a.activeElement}catch(c){b=a.body}return b||(b=a.body),b.nodeName||(b=a.body),b},a.ui.safeBlur=function(b){b&&"body"!==b.nodeName.toLowerCase()&&a(b).trigger("blur")};a.widget("ui.draggable",a.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(a,b){this._super(a,b),"handle"===a&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){if((this.helper||this.element).is(".ui-draggable-dragging"))return void(this.destroyOnClear=!0);this._removeHandleClassName(),this._mouseDestroy()},_mouseCapture:function(b){var c=this.options;return!(this.helper||c.disabled||a(b.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(b),!!this.handle&&(this._blurActiveElement(b),this._blockFrames(!0===c.iframeFix?"iframe":c.iframeFix),!0))},_blockFrames:function(b){this.iframeBlocks=this.document.find(b).map(function(){var b=a(this);return a("<div>").css("position","absolute").appendTo(b.parent()).outerWidth(b.outerWidth()).outerHeight(b.outerHeight()).offset(b.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(b){var c=a.ui.safeActiveElement(this.document[0]);a(b.target).closest(c).length||a.ui.safeBlur(c)},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===a(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(b),this.originalPosition=this.position=this._generatePosition(b,!1),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),this._setContainment(),!1===this._trigger("start",b)?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_refreshOffsets:function(a){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:a.pageX-this.offset.left,top:a.pageY-this.offset.top}},_mouseDrag:function(b,c){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(b,!0),this.positionAbs=this._convertPositionTo("absolute"),!c){var d=this._uiHash();if(!1===this._trigger("drag",b,d))return this._mouseUp(new a.Event("mouseup",b)),!1;this.position=d.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=this,d=!1;return a.ui.ddmanager&&!this.options.dropBehaviour&&(d=a.ui.ddmanager.drop(this,b)),this.dropped&&(d=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!d||"valid"===this.options.revert&&d||!0===this.options.revert||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)?a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==c._trigger("stop",b)&&c._clear()}):!1!==this._trigger("stop",b)&&this._clear(),!1},_mouseUp:function(b){return this._unblockFrames(),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),this.handleElement.is(b.target)&&this.element.trigger("focus"),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new a.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(b){return!this.options.handle||!!a(b.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper),e=d?a(c.helper.apply(this.element[0],[b])):"clone"===c.helper?this.element.clone().removeAttr("id"):this.element;return e.parents("body").length||e.appendTo("parent"===c.appendTo?this.element[0].parentNode:c.appendTo),d&&e[0]===this.element[0]&&this._setPositionRelative(),e[0]===this.element[0]||/(fixed|absolute)/.test(e.css("position"))||e.css("position","absolute"),e},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_isRootNode:function(a){return/(html|body)/i.test(a.tagName)||a===this.document[0]},_getParentOffset:function(){var b=this.offsetParent.offset(),c=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==c&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var a=this.element.position(),b=this._isRootNode(this.scrollParent[0]);return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+(b?0:this.scrollParent.scrollTop()),left:a.left-(parseInt(this.helper.css("left"),10)||0)+(b?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options,f=this.document[0];return this.relativeContainer=null,e.containment?"window"===e.containment?void(this.containment=[a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,a(window).scrollLeft()+a(window).width()-this.helperProportions.width-this.margins.left,a(window).scrollTop()+(a(window).height()||f.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===e.containment?void(this.containment=[0,0,a(f).width()-this.helperProportions.width-this.margins.left,(a(f).height()||f.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):e.containment.constructor===Array?void(this.containment=e.containment):("parent"===e.containment&&(e.containment=this.helper[0].parentNode),c=a(e.containment),void((d=c[0])&&(b=/(scroll|auto)/.test(c.css("overflow")),this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(b?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=c))):void(this.containment=null)},_convertPositionTo:function(a,b){b||(b=this.position);var c="absolute"===a?1:-1,d=this._isRootNode(this.scrollParent[0]);return{top:b.top+this.offset.relative.top*c+this.offset.parent.top*c-("fixed"===this.cssPosition?-this.offset.scroll.top:d?0:this.offset.scroll.top)*c,left:b.left+this.offset.relative.left*c+this.offset.parent.left*c-("fixed"===this.cssPosition?-this.offset.scroll.left:d?0:this.offset.scroll.left)*c}},_generatePosition:function(a,b){var c,d,e,f,g=this.options,h=this._isRootNode(this.scrollParent[0]),i=a.pageX,j=a.pageY;return h&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),b&&(this.containment&&(this.relativeContainer?(d=this.relativeContainer.offset(),c=[this.containment[0]+d.left,this.containment[1]+d.top,this.containment[2]+d.left,this.containment[3]+d.top]):c=this.containment,
a.pageX-this.offset.click.left<c[0]&&(i=c[0]+this.offset.click.left),a.pageY-this.offset.click.top<c[1]&&(j=c[1]+this.offset.click.top),a.pageX-this.offset.click.left>c[2]&&(i=c[2]+this.offset.click.left),a.pageY-this.offset.click.top>c[3]&&(j=c[3]+this.offset.click.top)),g.grid&&(e=g.grid[1]?this.originalPageY+Math.round((j-this.originalPageY)/g.grid[1])*g.grid[1]:this.originalPageY,j=c?e-this.offset.click.top>=c[1]||e-this.offset.click.top>c[3]?e:e-this.offset.click.top>=c[1]?e-g.grid[1]:e+g.grid[1]:e,f=g.grid[0]?this.originalPageX+Math.round((i-this.originalPageX)/g.grid[0])*g.grid[0]:this.originalPageX,i=c?f-this.offset.click.left>=c[0]||f-this.offset.click.left>c[2]?f:f-this.offset.click.left>=c[0]?f-g.grid[0]:f+g.grid[0]:f),"y"===g.axis&&(i=this.originalPageX),"x"===g.axis&&(j=this.originalPageY)),{top:j-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:h?0:this.offset.scroll.top),left:i-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:h?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d,this],!0),/^(drag|start|stop)/.test(b)&&(this.positionAbs=this._convertPositionTo("absolute"),d.offset=this.positionAbs),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c,d){var e=a.extend({},c,{item:d.element});d.sortables=[],a(d.options.connectToSortable).each(function(){var c=a(this).sortable("instance");c&&!c.options.disabled&&(d.sortables.push(c),c.refreshPositions(),c._trigger("activate",b,e))})},stop:function(b,c,d){var e=a.extend({},c,{item:d.element});d.cancelHelperRemoval=!1,a.each(d.sortables,function(){var a=this;a.isOver?(a.isOver=0,d.cancelHelperRemoval=!0,a.cancelHelperRemoval=!1,a._storedCSS={position:a.placeholder.css("position"),top:a.placeholder.css("top"),left:a.placeholder.css("left")},a._mouseStop(b),a.options.helper=a.options._helper):(a.cancelHelperRemoval=!0,a._trigger("deactivate",b,e))})},drag:function(b,c,d){a.each(d.sortables,function(){var e=!1,f=this;f.positionAbs=d.positionAbs,f.helperProportions=d.helperProportions,f.offset.click=d.offset.click,f._intersectsWith(f.containerCache)&&(e=!0,a.each(d.sortables,function(){return this.positionAbs=d.positionAbs,this.helperProportions=d.helperProportions,this.offset.click=d.offset.click,this!==f&&this._intersectsWith(this.containerCache)&&a.contains(f.element[0],this.element[0])&&(e=!1),e})),e?(f.isOver||(f.isOver=1,d._parent=c.helper.parent(),f.currentItem=c.helper.appendTo(f.element).data("ui-sortable-item",!0),f.options._helper=f.options.helper,f.options.helper=function(){return c.helper[0]},b.target=f.currentItem[0],f._mouseCapture(b,!0),f._mouseStart(b,!0,!0),f.offset.click.top=d.offset.click.top,f.offset.click.left=d.offset.click.left,f.offset.parent.left-=d.offset.parent.left-f.offset.parent.left,f.offset.parent.top-=d.offset.parent.top-f.offset.parent.top,d._trigger("toSortable",b),d.dropped=f.element,a.each(d.sortables,function(){this.refreshPositions()}),d.currentItem=d.element,f.fromOutside=d),f.currentItem&&(f._mouseDrag(b),c.position=f.position)):f.isOver&&(f.isOver=0,f.cancelHelperRemoval=!0,f.options._revert=f.options.revert,f.options.revert=!1,f._trigger("out",b,f._uiHash(f)),f._mouseStop(b,!0),f.options.revert=f.options._revert,f.options.helper=f.options._helper,f.placeholder&&f.placeholder.remove(),c.helper.appendTo(d._parent),d._refreshOffsets(b),c.position=d._generatePosition(b,!0),d._trigger("fromSortable",b),d.dropped=!1,a.each(d.sortables,function(){this.refreshPositions()}))})}}),a.ui.plugin.add("draggable","cursor",{start:function(b,c,d){var e=a("body"),f=d.options;e.css("cursor")&&(f._cursor=e.css("cursor")),e.css("cursor",f.cursor)},stop:function(b,c,d){var e=d.options;e._cursor&&a("body").css("cursor",e._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c,d){var e=a(c.helper),f=d.options;e.css("opacity")&&(f._opacity=e.css("opacity")),e.css("opacity",f.opacity)},stop:function(b,c,d){var e=d.options;e._opacity&&a(c.helper).css("opacity",e._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(a,b,c){c.scrollParentNotHidden||(c.scrollParentNotHidden=c.helper.scrollParent(!1)),c.scrollParentNotHidden[0]!==c.document[0]&&"HTML"!==c.scrollParentNotHidden[0].tagName&&(c.overflowOffset=c.scrollParentNotHidden.offset())},drag:function(b,c,d){var e=d.options,f=!1,g=d.scrollParentNotHidden[0],h=d.document[0];g!==h&&"HTML"!==g.tagName?(e.axis&&"x"===e.axis||(d.overflowOffset.top+g.offsetHeight-b.pageY<e.scrollSensitivity?g.scrollTop=f=g.scrollTop+e.scrollSpeed:b.pageY-d.overflowOffset.top<e.scrollSensitivity&&(g.scrollTop=f=g.scrollTop-e.scrollSpeed)),e.axis&&"y"===e.axis||(d.overflowOffset.left+g.offsetWidth-b.pageX<e.scrollSensitivity?g.scrollLeft=f=g.scrollLeft+e.scrollSpeed:b.pageX-d.overflowOffset.left<e.scrollSensitivity&&(g.scrollLeft=f=g.scrollLeft-e.scrollSpeed))):(e.axis&&"x"===e.axis||(b.pageY-a(h).scrollTop()<e.scrollSensitivity?f=a(h).scrollTop(a(h).scrollTop()-e.scrollSpeed):a(window).height()-(b.pageY-a(h).scrollTop())<e.scrollSensitivity&&(f=a(h).scrollTop(a(h).scrollTop()+e.scrollSpeed))),e.axis&&"y"===e.axis||(b.pageX-a(h).scrollLeft()<e.scrollSensitivity?f=a(h).scrollLeft(a(h).scrollLeft()-e.scrollSpeed):a(window).width()-(b.pageX-a(h).scrollLeft())<e.scrollSensitivity&&(f=a(h).scrollLeft(a(h).scrollLeft()+e.scrollSpeed)))),!1!==f&&a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,b)}}),a.ui.plugin.add("draggable","snap",{start:function(b,c,d){var e=d.options;d.snapElements=[],a(e.snap.constructor!==String?e.snap.items||":data(ui-draggable)":e.snap).each(function(){var b=a(this),c=b.offset();this!==d.element[0]&&d.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:c.top,left:c.left})})},drag:function(b,c,d){var e,f,g,h,i,j,k,l,m,n,o=d.options,p=o.snapTolerance,q=c.offset.left,r=q+d.helperProportions.width,s=c.offset.top,t=s+d.helperProportions.height;for(m=d.snapElements.length-1;m>=0;m--)i=d.snapElements[m].left-d.margins.left,j=i+d.snapElements[m].width,k=d.snapElements[m].top-d.margins.top,l=k+d.snapElements[m].height,r<i-p||q>j+p||t<k-p||s>l+p||!a.contains(d.snapElements[m].item.ownerDocument,d.snapElements[m].item)?(d.snapElements[m].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[m].item})),d.snapElements[m].snapping=!1):("inner"!==o.snapMode&&(e=Math.abs(k-t)<=p,f=Math.abs(l-s)<=p,g=Math.abs(i-r)<=p,h=Math.abs(j-q)<=p,e&&(c.position.top=d._convertPositionTo("relative",{top:k-d.helperProportions.height,left:0}).top),f&&(c.position.top=d._convertPositionTo("relative",{top:l,left:0}).top),g&&(c.position.left=d._convertPositionTo("relative",{top:0,left:i-d.helperProportions.width}).left),h&&(c.position.left=d._convertPositionTo("relative",{top:0,left:j}).left)),n=e||f||g||h,"outer"!==o.snapMode&&(e=Math.abs(k-s)<=p,f=Math.abs(l-t)<=p,g=Math.abs(i-q)<=p,h=Math.abs(j-r)<=p,e&&(c.position.top=d._convertPositionTo("relative",{top:k,left:0}).top),f&&(c.position.top=d._convertPositionTo("relative",{top:l-d.helperProportions.height,left:0}).top),g&&(c.position.left=d._convertPositionTo("relative",{top:0,left:i}).left),h&&(c.position.left=d._convertPositionTo("relative",{top:0,left:j-d.helperProportions.width}).left)),!d.snapElements[m].snapping&&(e||f||g||h||n)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[m].item})),d.snapElements[m].snapping=e||f||g||h||n)}}),a.ui.plugin.add("draggable","stack",{start:function(b,c,d){var e,f=d.options,g=a.makeArray(a(f.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});g.length&&(e=parseInt(a(g[0]).css("zIndex"),10)||0,a(g).each(function(b){a(this).css("zIndex",e+b)}),this.css("zIndex",e+g.length))}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c,d){var e=a(c.helper),f=d.options;e.css("zIndex")&&(f._zIndex=e.css("zIndex")),e.css("zIndex",f.zIndex)},stop:function(b,c,d){var e=d.options;e._zIndex&&a(c.helper).css("zIndex",e._zIndex)}});a.ui.draggable;a.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var b,c=this.options,d=c.accept;this.isover=!1,this.isout=!0,this.accept=a.isFunction(d)?d:function(a){return a.is(d)},this.proportions=function(){if(!arguments.length)return b||(b={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight});b=arguments[0]},this._addToManager(c.scope),c.addClasses&&this._addClass("ui-droppable")},_addToManager:function(b){a.ui.ddmanager.droppables[b]=a.ui.ddmanager.droppables[b]||[],a.ui.ddmanager.droppables[b].push(this)},_splice:function(a){for(var b=0;b<a.length;b++)a[b]===this&&a.splice(b,1)},_destroy:function(){var b=a.ui.ddmanager.droppables[this.options.scope];this._splice(b)},_setOption:function(b,c){if("accept"===b)this.accept=a.isFunction(c)?c:function(a){return a.is(c)};else if("scope"===b){var d=a.ui.ddmanager.droppables[this.options.scope];this._splice(d),this._addToManager(c)}this._super(b,c)},_activate:function(b){var c=a.ui.ddmanager.current;this._addActiveClass(),c&&this._trigger("activate",b,this.ui(c))},_deactivate:function(b){var c=a.ui.ddmanager.current;this._removeActiveClass(),c&&this._trigger("deactivate",b,this.ui(c))},_over:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!==this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this._addHoverClass(),this._trigger("over",b,this.ui(c)))},_out:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!==this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this._removeHoverClass(),this._trigger("out",b,this.ui(c)))},_drop:function(b,c){var d=c||a.ui.ddmanager.current,e=!1;return!(!d||(d.currentItem||d.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var c=a(this).droppable("instance");if(c.options.greedy&&!c.options.disabled&&c.options.scope===d.options.scope&&c.accept.call(c.element[0],d.currentItem||d.element)&&l(d,a.extend(c,{offset:c.element.offset()}),c.options.tolerance,b))return e=!0,!1}),!e&&(!!this.accept.call(this.element[0],d.currentItem||d.element)&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",b,this.ui(d)),this.element)))},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var l=a.ui.intersect=function(){function a(a,b,c){return a>=b&&a<b+c}return function(b,c,d,e){if(!c.offset)return!1;var f=(b.positionAbs||b.position.absolute).left+b.margins.left,g=(b.positionAbs||b.position.absolute).top+b.margins.top,h=f+b.helperProportions.width,i=g+b.helperProportions.height,j=c.offset.left,k=c.offset.top,l=j+c.proportions().width,m=k+c.proportions().height;switch(d){case"fit":return j<=f&&h<=l&&k<=g&&i<=m;case"intersect":return j<f+b.helperProportions.width/2&&h-b.helperProportions.width/2<l&&k<g+b.helperProportions.height/2&&i-b.helperProportions.height/2<m;case"pointer":return a(e.pageY,k,c.proportions().height)&&a(e.pageX,j,c.proportions().width);case"touch":return(g>=k&&g<=m||i>=k&&i<=m||g<k&&i>m)&&(f>=j&&f<=l||h>=j&&h<=l||f<j&&h>l);default:return!1}}}();a.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(b,c){var d,e,f=a.ui.ddmanager.droppables[b.options.scope]||[],g=c?c.type:null,h=(b.currentItem||b.element).find(":data(ui-droppable)").addBack();a:for(d=0;d<f.length;d++)if(!(f[d].options.disabled||b&&!f[d].accept.call(f[d].element[0],b.currentItem||b.element))){for(e=0;e<h.length;e++)if(h[e]===f[d].element[0]){f[d].proportions().height=0;continue a}f[d].visible="none"!==f[d].element.css("display"),f[d].visible&&("mousedown"===g&&f[d]._activate.call(f[d],c),f[d].offset=f[d].element.offset(),f[d].proportions({width:f[d].element[0].offsetWidth,height:f[d].element[0].offsetHeight}))}},drop:function(b,c){var d=!1;return a.each((a.ui.ddmanager.droppables[b.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&l(b,this,this.options.tolerance,c)&&(d=this._drop.call(this,c)||d),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,c)))}),d},dragStart:function(b,c){b.element.parentsUntil("body").on("scroll.droppable",function(){b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)})},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c),a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var d,e,f,g=l(b,this,this.options.tolerance,c),h=!g&&this.isover?"isout":g&&!this.isover?"isover":null;h&&(this.options.greedy&&(e=this.options.scope,f=this.element.parents(":data(ui-droppable)").filter(function(){return a(this).droppable("instance").options.scope===e}),f.length&&(d=a(f[0]).droppable("instance"),d.greedyChild="isover"===h)),d&&"isover"===h&&(d.isover=!1,d.isout=!0,d._out.call(d,c)),this[h]=!0,this["isout"===h?"isover":"isout"]=!1,this["isover"===h?"_over":"_out"].call(this,c),d&&"isout"===h&&(d.isout=!1,d.isover=!0,d._over.call(d,c)))}})},dragStop:function(b,c){b.element.parentsUntil("body").off("scroll.droppable"),b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)}},!1!==a.uiBackCompat&&a.widget("ui.droppable",a.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}});a.ui.droppable;a.widget("ui.resizable",a.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(a){return parseFloat(a)||0},_isNumber:function(a){return!isNaN(parseFloat(a))},_hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0||(b[d]=1,e=b[d]>0,b[d]=0,e)},_create:function(){var b,c=this.options,d=this;this._addClass("ui-resizable"),a.extend(this,{_aspectRatio:!!c.aspectRatio,aspectRatio:c.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:c.helper||c.ghost||c.animate?c.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(a("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,b={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(b),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(b),this._proportionallyResize()),this._setupHandles(),c.autoHide&&a(this.element).on("mouseenter",function(){c.disabled||(d._removeClass("ui-resizable-autohide"),d._handles.show())}).on("mouseleave",function(){c.disabled||d.resizing||(d._addClass("ui-resizable-autohide"),d._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var b,c=function(b){a(b).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(c(this.element),b=this.element,this.originalElement.css({position:b.css("position"),width:b.outerWidth(),height:b.outerHeight(),top:b.css("top"),left:b.css("left")}).insertAfter(b),b.remove()),this.originalElement.css("resize",this.originalResizeStyle),c(this.originalElement),this},_setOption:function(a,b){switch(this._super(a,b),a){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var b,c,d,e,f,g=this.options,h=this;if(this.handles=g.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=a(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),d=this.handles.split(","),this.handles={},c=0;c<d.length;c++)b=a.trim(d[c]),e="ui-resizable-"+b,f=a("<div>"),this._addClass(f,"ui-resizable-handle "+e),f.css({zIndex:g.zIndex}),this.handles[b]=".ui-resizable-"+b,this.element.append(f);this._renderAxis=function(b){var c,d,e,f;b=b||this.element;for(c in this.handles)this.handles[c].constructor===String?this.handles[c]=this.element.children(this.handles[c]).first().show():(this.handles[c].jquery||this.handles[c].nodeType)&&(this.handles[c]=a(this.handles[c]),this._on(this.handles[c],{mousedown:h._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(d=a(this.handles[c],this.element),f=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth(),e=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join(""),b.css(e,f),this._proportionallyResize()),this._handles=this._handles.add(this.handles[c])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){h.resizing||(this.className&&(f=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),h.axis=f&&f[1]?f[1]:"se")}),g.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(b){var c,d,e=!1;for(c in this.handles)((d=a(this.handles[c])[0])===b.target||a.contains(d,b.target))&&(e=!0);return!this.options.disabled&&e},_mouseStart:function(b){var c,d,e,f=this.options,g=this.element;return this.resizing=!0,this._renderProxy(),c=this._num(this.helper.css("left")),d=this._num(this.helper.css("top")),f.containment&&(c+=a(f.containment).scrollLeft()||0,d+=a(f.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:c,top:d},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:g.width(),height:g.height()},this.originalSize=this._helper?{width:g.outerWidth(),height:g.outerHeight()}:{width:g.width(),height:g.height()},this.sizeDiff={width:g.outerWidth()-g.width(),height:g.outerHeight()-g.height()},this.originalPosition={left:c,top:d},this.originalMousePosition={left:b.pageX,top:b.pageY},this.aspectRatio="number"==typeof f.aspectRatio?f.aspectRatio:this.originalSize.width/this.originalSize.height||1,e=a(".ui-resizable-"+this.axis).css("cursor"),a("body").css("cursor","auto"===e?this.axis+"-resize":e),this._addClass("ui-resizable-resizing"),this._propagate("start",b),!0},_mouseDrag:function(b){var c,d,e=this.originalMousePosition,f=this.axis,g=b.pageX-e.left||0,h=b.pageY-e.top||0,i=this._change[f];return this._updatePrevProperties(),!!i&&(c=i.apply(this,[b,g,h]),this._updateVirtualBoundaries(b.shiftKey),(this._aspectRatio||b.shiftKey)&&(c=this._updateRatio(c,b)),c=this._respectSize(c,b),this._updateCache(c),this._propagate("resize",b),d=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),a.isEmptyObject(d)||(this._updatePrevProperties(),this._trigger("resize",b,this.ui()),this._applyChanges()),!1)},_mouseStop:function(b){this.resizing=!1;var c,d,e,f,g,h,i,j=this.options,k=this;return this._helper&&(c=this._proportionallyResizeElements,d=c.length&&/textarea/i.test(c[0].nodeName),e=d&&this._hasScroll(c[0],"left")?0:k.sizeDiff.height,f=d?0:k.sizeDiff.width,g={width:k.helper.width()-f,height:k.helper.height()-e},h=parseFloat(k.element.css("left"))+(k.position.left-k.originalPosition.left)||null,i=parseFloat(k.element.css("top"))+(k.position.top-k.originalPosition.top)||null,j.animate||this.element.css(a.extend(g,{top:i,left:h})),k.helper.height(k.size.height),k.helper.width(k.size.width),this._helper&&!j.animate&&this._proportionallyResize()),a("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var a={};return this.position.top!==this.prevPosition.top&&(a.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(a.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(a.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(a.height=this.size.height+"px"),this.helper.css(a),a},_updateVirtualBoundaries:function(a){var b,c,d,e,f,g=this.options;f={minWidth:this._isNumber(g.minWidth)?g.minWidth:0,maxWidth:this._isNumber(g.maxWidth)?g.maxWidth:1/0,minHeight:this._isNumber(g.minHeight)?g.minHeight:0,maxHeight:this._isNumber(g.maxHeight)?g.maxHeight:1/0},(this._aspectRatio||a)&&(b=f.minHeight*this.aspectRatio,d=f.minWidth/this.aspectRatio,c=f.maxHeight*this.aspectRatio,e=f.maxWidth/this.aspectRatio,b>f.minWidth&&(f.minWidth=b),d>f.minHeight&&(f.minHeight=d),c<f.maxWidth&&(f.maxWidth=c),e<f.maxHeight&&(f.maxHeight=e)),this._vBoundaries=f},_updateCache:function(a){this.offset=this.helper.offset(),this._isNumber(a.left)&&(this.position.left=a.left),this._isNumber(a.top)&&(this.position.top=a.top),this._isNumber(a.height)&&(this.size.height=a.height),this._isNumber(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var b=this.position,c=this.size,d=this.axis;return this._isNumber(a.height)?a.width=a.height*this.aspectRatio:this._isNumber(a.width)&&(a.height=a.width/this.aspectRatio),"sw"===d&&(a.left=b.left+(c.width-a.width),a.top=null),"nw"===d&&(a.top=b.top+(c.height-a.height),a.left=b.left+(c.width-a.width)),a},_respectSize:function(a){var b=this._vBoundaries,c=this.axis,d=this._isNumber(a.width)&&b.maxWidth&&b.maxWidth<a.width,e=this._isNumber(a.height)&&b.maxHeight&&b.maxHeight<a.height,f=this._isNumber(a.width)&&b.minWidth&&b.minWidth>a.width,g=this._isNumber(a.height)&&b.minHeight&&b.minHeight>a.height,h=this.originalPosition.left+this.originalSize.width,i=this.originalPosition.top+this.originalSize.height,j=/sw|nw|w/.test(c),k=/nw|ne|n/.test(c);return f&&(a.width=b.minWidth),g&&(a.height=b.minHeight),d&&(a.width=b.maxWidth),e&&(a.height=b.maxHeight),f&&j&&(a.left=h-b.minWidth),d&&j&&(a.left=h-b.maxWidth),g&&k&&(a.top=i-b.minHeight),e&&k&&(a.top=i-b.maxHeight),a.width||a.height||a.left||!a.top?a.width||a.height||a.top||!a.left||(a.left=null):a.top=null,a},_getPaddingPlusBorderDimensions:function(a){for(var b=0,c=[],d=[a.css("borderTopWidth"),a.css("borderRightWidth"),a.css("borderBottomWidth"),a.css("borderLeftWidth")],e=[a.css("paddingTop"),a.css("paddingRight"),a.css("paddingBottom"),a.css("paddingLeft")];b<4;b++)c[b]=parseFloat(d[b])||0,c[b]+=parseFloat(e[b])||0;return{height:c[0]+c[2],width:c[1]+c[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var a,b=0,c=this.helper||this.element;b<this._proportionallyResizeElements.length;b++)a=this._proportionallyResizeElements[b],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(a)),a.css({height:c.height()-this.outerDimensions.height||0,width:c.width()-this.outerDimensions.width||0})},_renderProxy:function(){var b=this.element,c=this.options;this.elementOffset=b.offset(),this._helper?(this.helper=this.helper||a("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++c.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){var c=this.originalSize;return{left:this.originalPosition.left+b,width:c.width-b}},n:function(a,b,c){var d=this.originalSize;return{top:this.originalPosition.top+c,height:d.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]),"resize"!==b&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),a.ui.plugin.add("resizable","animate",{stop:function(b){var c=a(this).resizable("instance"),d=c.options,e=c._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&c._hasScroll(e[0],"left")?0:c.sizeDiff.height,h=f?0:c.sizeDiff.width,i={width:c.size.width-h,height:c.size.height-g},j=parseFloat(c.element.css("left"))+(c.position.left-c.originalPosition.left)||null,k=parseFloat(c.element.css("top"))+(c.position.top-c.originalPosition.top)||null;c.element.animate(a.extend(i,k&&j?{top:k,left:j}:{}),{duration:d.animateDuration,easing:d.animateEasing,step:function(){var d={width:parseFloat(c.element.css("width")),height:parseFloat(c.element.css("height")),top:parseFloat(c.element.css("top")),left:parseFloat(c.element.css("left"))};e&&e.length&&a(e[0]).css({width:d.width,height:d.height}),c._updateCache(d),c._propagate("resize",b)}})}}),a.ui.plugin.add("resizable","containment",{start:function(){var b,c,d,e,f,g,h,i=a(this).resizable("instance"),j=i.options,k=i.element,l=j.containment,m=l instanceof a?l.get(0):/parent/.test(l)?k.parent().get(0):l;m&&(i.containerElement=a(m),/document/.test(l)||l===document?(i.containerOffset={left:0,top:0},i.containerPosition={left:0,top:0},i.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight}):(b=a(m),c=[],a(["Top","Right","Left","Bottom"]).each(function(a,d){c[a]=i._num(b.css("padding"+d))}),i.containerOffset=b.offset(),i.containerPosition=b.position(),i.containerSize={height:b.innerHeight()-c[3],width:b.innerWidth()-c[1]},d=i.containerOffset,e=i.containerSize.height,f=i.containerSize.width,g=i._hasScroll(m,"left")?m.scrollWidth:f,h=i._hasScroll(m)?m.scrollHeight:e,i.parentData={element:m,left:d.left,top:d.top,width:g,height:h}))},resize:function(b){var c,d,e,f,g=a(this).resizable("instance"),h=g.options,i=g.containerOffset,j=g.position,k=g._aspectRatio||b.shiftKey,l={top:0,left:0},m=g.containerElement,n=!0;m[0]!==document&&/static/.test(m.css("position"))&&(l=i),j.left<(g._helper?i.left:0)&&(g.size.width=g.size.width+(g._helper?g.position.left-i.left:g.position.left-l.left),k&&(g.size.height=g.size.width/g.aspectRatio,n=!1),g.position.left=h.helper?i.left:0),j.top<(g._helper?i.top:0)&&(g.size.height=g.size.height+(g._helper?g.position.top-i.top:g.position.top),k&&(g.size.width=g.size.height*g.aspectRatio,n=!1),g.position.top=g._helper?i.top:0),e=g.containerElement.get(0)===g.element.parent().get(0),f=/relative|absolute/.test(g.containerElement.css("position")),e&&f?(g.offset.left=g.parentData.left+g.position.left,g.offset.top=g.parentData.top+g.position.top):(g.offset.left=g.element.offset().left,g.offset.top=g.element.offset().top),c=Math.abs(g.sizeDiff.width+(g._helper?g.offset.left-l.left:g.offset.left-i.left)),d=Math.abs(g.sizeDiff.height+(g._helper?g.offset.top-l.top:g.offset.top-i.top)),c+g.size.width>=g.parentData.width&&(g.size.width=g.parentData.width-c,k&&(g.size.height=g.size.width/g.aspectRatio,n=!1)),d+g.size.height>=g.parentData.height&&(g.size.height=g.parentData.height-d,k&&(g.size.width=g.size.height*g.aspectRatio,n=!1)),n||(g.position.left=g.prevPosition.left,g.position.top=g.prevPosition.top,g.size.width=g.prevSize.width,g.size.height=g.prevSize.height)},stop:function(){var b=a(this).resizable("instance"),c=b.options,d=b.containerOffset,e=b.containerPosition,f=b.containerElement,g=a(b.helper),h=g.offset(),i=g.outerWidth()-b.sizeDiff.width,j=g.outerHeight()-b.sizeDiff.height;b._helper&&!c.animate&&/relative/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j}),b._helper&&!c.animate&&/static/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j})}}),a.ui.plugin.add("resizable","alsoResize",{start:function(){var b=a(this).resizable("instance"),c=b.options;a(c.alsoResize).each(function(){var b=a(this);b.data("ui-resizable-alsoresize",{width:parseFloat(b.width()),height:parseFloat(b.height()),left:parseFloat(b.css("left")),top:parseFloat(b.css("top"))})})},resize:function(b,c){var d=a(this).resizable("instance"),e=d.options,f=d.originalSize,g=d.originalPosition,h={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-g.top||0,left:d.position.left-g.left||0};a(e.alsoResize).each(function(){var b=a(this),d=a(this).data("ui-resizable-alsoresize"),e={},f=b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(f,function(a,b){var c=(d[b]||0)+(h[b]||0);c&&c>=0&&(e[b]=c||null)}),b.css(e)})},stop:function(){a(this).removeData("ui-resizable-alsoresize")}}),a.ui.plugin.add("resizable","ghost",{start:function(){var b=a(this).resizable("instance"),c=b.size;b.ghost=b.originalElement.clone(),b.ghost.css({opacity:.25,display:"block",position:"relative",height:c.height,width:c.width,margin:0,left:0,top:0}),b._addClass(b.ghost,"ui-resizable-ghost"),!1!==a.uiBackCompat&&"string"==typeof b.options.ghost&&b.ghost.addClass(this.options.ghost),b.ghost.appendTo(b.helper)},resize:function(){var b=a(this).resizable("instance");b.ghost&&b.ghost.css({
position:"relative",height:b.size.height,width:b.size.width})},stop:function(){var b=a(this).resizable("instance");b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}}),a.ui.plugin.add("resizable","grid",{resize:function(){var b,c=a(this).resizable("instance"),d=c.options,e=c.size,f=c.originalSize,g=c.originalPosition,h=c.axis,i="number"==typeof d.grid?[d.grid,d.grid]:d.grid,j=i[0]||1,k=i[1]||1,l=Math.round((e.width-f.width)/j)*j,m=Math.round((e.height-f.height)/k)*k,n=f.width+l,o=f.height+m,p=d.maxWidth&&d.maxWidth<n,q=d.maxHeight&&d.maxHeight<o,r=d.minWidth&&d.minWidth>n,s=d.minHeight&&d.minHeight>o;d.grid=i,r&&(n+=j),s&&(o+=k),p&&(n-=j),q&&(o-=k),/^(se|s|e)$/.test(h)?(c.size.width=n,c.size.height=o):/^(ne)$/.test(h)?(c.size.width=n,c.size.height=o,c.position.top=g.top-m):/^(sw)$/.test(h)?(c.size.width=n,c.size.height=o,c.position.left=g.left-l):((o-k<=0||n-j<=0)&&(b=c._getPaddingPlusBorderDimensions(this)),o-k>0?(c.size.height=o,c.position.top=g.top-m):(o=k-b.height,c.size.height=o,c.position.top=g.top+f.height-o),n-j>0?(c.size.width=n,c.position.left=g.left-l):(n=j-b.width,c.size.width=n,c.position.left=g.left+f.width-n))}});a.ui.resizable,a.widget("ui.selectable",a.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var b=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){b.elementPos=a(b.element[0]).offset(),b.selectees=a(b.options.filter,b.element[0]),b._addClass(b.selectees,"ui-selectee"),b.selectees.each(function(){var c=a(this),d=c.offset(),e={left:d.left-b.elementPos.left,top:d.top-b.elementPos.top};a.data(this,"selectable-item",{element:this,$element:c,left:e.left,top:e.top,right:e.left+c.outerWidth(),bottom:e.top+c.outerHeight(),startselected:!1,selected:c.hasClass("ui-selected"),selecting:c.hasClass("ui-selecting"),unselecting:c.hasClass("ui-unselecting")})})},this.refresh(),this._mouseInit(),this.helper=a("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(b){var c=this,d=this.options;this.opos=[b.pageX,b.pageY],this.elementPos=a(this.element[0]).offset(),this.options.disabled||(this.selectees=a(d.filter,this.element[0]),this._trigger("start",b),a(d.appendTo).append(this.helper),this.helper.css({left:b.pageX,top:b.pageY,width:0,height:0}),d.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var d=a.data(this,"selectable-item");d.startselected=!0,b.metaKey||b.ctrlKey||(c._removeClass(d.$element,"ui-selected"),d.selected=!1,c._addClass(d.$element,"ui-unselecting"),d.unselecting=!0,c._trigger("unselecting",b,{unselecting:d.element}))}),a(b.target).parents().addBack().each(function(){var d,e=a.data(this,"selectable-item");if(e)return d=!b.metaKey&&!b.ctrlKey||!e.$element.hasClass("ui-selected"),c._removeClass(e.$element,d?"ui-unselecting":"ui-selected")._addClass(e.$element,d?"ui-selecting":"ui-unselecting"),e.unselecting=!d,e.selecting=d,e.selected=d,d?c._trigger("selecting",b,{selecting:e.element}):c._trigger("unselecting",b,{unselecting:e.element}),!1}))},_mouseDrag:function(b){if(this.dragged=!0,!this.options.disabled){var c,d=this,e=this.options,f=this.opos[0],g=this.opos[1],h=b.pageX,i=b.pageY;return f>h&&(c=h,h=f,f=c),g>i&&(c=i,i=g,g=c),this.helper.css({left:f,top:g,width:h-f,height:i-g}),this.selectees.each(function(){var c=a.data(this,"selectable-item"),j=!1,k={};c&&c.element!==d.element[0]&&(k.left=c.left+d.elementPos.left,k.right=c.right+d.elementPos.left,k.top=c.top+d.elementPos.top,k.bottom=c.bottom+d.elementPos.top,"touch"===e.tolerance?j=!(k.left>h||k.right<f||k.top>i||k.bottom<g):"fit"===e.tolerance&&(j=k.left>f&&k.right<h&&k.top>g&&k.bottom<i),j?(c.selected&&(d._removeClass(c.$element,"ui-selected"),c.selected=!1),c.unselecting&&(d._removeClass(c.$element,"ui-unselecting"),c.unselecting=!1),c.selecting||(d._addClass(c.$element,"ui-selecting"),c.selecting=!0,d._trigger("selecting",b,{selecting:c.element}))):(c.selecting&&((b.metaKey||b.ctrlKey)&&c.startselected?(d._removeClass(c.$element,"ui-selecting"),c.selecting=!1,d._addClass(c.$element,"ui-selected"),c.selected=!0):(d._removeClass(c.$element,"ui-selecting"),c.selecting=!1,c.startselected&&(d._addClass(c.$element,"ui-unselecting"),c.unselecting=!0),d._trigger("unselecting",b,{unselecting:c.element}))),c.selected&&(b.metaKey||b.ctrlKey||c.startselected||(d._removeClass(c.$element,"ui-selected"),c.selected=!1,d._addClass(c.$element,"ui-unselecting"),c.unselecting=!0,d._trigger("unselecting",b,{unselecting:c.element})))))}),!1}},_mouseStop:function(b){var c=this;return this.dragged=!1,a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");c._removeClass(d.$element,"ui-unselecting"),d.unselecting=!1,d.startselected=!1,c._trigger("unselected",b,{unselected:d.element})}),a(".ui-selecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");c._removeClass(d.$element,"ui-selecting")._addClass(d.$element,"ui-selected"),d.selecting=!1,d.selected=!0,d.startselected=!0,c._trigger("selected",b,{selected:d.element})}),this._trigger("stop",b),this.helper.remove(),!1}}),a.widget("ui.sortable",a.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(a,b,c){return a>=b&&a<b+c},_isFloating:function(a){return/left|right/.test(a.css("float"))||/inline|table-cell/.test(a.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(a,b){this._super(a,b),"handle"===a&&this._setHandleClassName()},_setHandleClassName:function(){var b=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),a.each(this.items,function(){b._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(b,c){var d=null,e=!1,f=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(b),a(b.target).parents().each(function(){if(a.data(this,f.widgetName+"-item")===f)return d=a(this),!1}),a.data(b.target,f.widgetName+"-item")===f&&(d=a(b.target)),!!d&&(!(this.options.handle&&!c&&(a(this.options.handle,d).find("*").addBack().each(function(){this===b.target&&(e=!0)}),!e))&&(this.currentItem=d,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(b,c,d){var e,f,g=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,g.cursorAt&&this._adjustOffsetFromHelper(g.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),g.containment&&this._setContainment(),g.cursor&&"auto"!==g.cursor&&(f=this.document.find("body"),this.storedCursor=f.css("cursor"),f.css("cursor",g.cursor),this.storedStylesheet=a("<style>*{ cursor: "+g.cursor+" !important; }</style>").appendTo(f)),g.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",g.opacity)),g.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",g.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!d)for(e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("activate",b,this._uiHash(this));return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(b),!0},_mouseDrag:function(b){var c,d,e,f,g=this.options,h=!1;for(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<g.scrollSensitivity?this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop+g.scrollSpeed:b.pageY-this.overflowOffset.top<g.scrollSensitivity&&(this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop-g.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<g.scrollSensitivity?this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft+g.scrollSpeed:b.pageX-this.overflowOffset.left<g.scrollSensitivity&&(this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft-g.scrollSpeed)):(b.pageY-this.document.scrollTop()<g.scrollSensitivity?h=this.document.scrollTop(this.document.scrollTop()-g.scrollSpeed):this.window.height()-(b.pageY-this.document.scrollTop())<g.scrollSensitivity&&(h=this.document.scrollTop(this.document.scrollTop()+g.scrollSpeed)),b.pageX-this.document.scrollLeft()<g.scrollSensitivity?h=this.document.scrollLeft(this.document.scrollLeft()-g.scrollSpeed):this.window.width()-(b.pageX-this.document.scrollLeft())<g.scrollSensitivity&&(h=this.document.scrollLeft(this.document.scrollLeft()+g.scrollSpeed))),!1!==h&&a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),c=this.items.length-1;c>=0;c--)if(d=this.items[c],e=d.item[0],(f=this._intersectsWithPointer(d))&&d.instance===this.currentContainer&&!(e===this.currentItem[0]||this.placeholder[1===f?"next":"prev"]()[0]===e||a.contains(this.placeholder[0],e)||"semi-dynamic"===this.options.type&&a.contains(this.element[0],e))){if(this.direction=1===f?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(d))break;this._rearrange(b,d),this._trigger("change",b,this._uiHash());break}return this._contactContainers(b),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,c){if(b){if(a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b),this.options.revert){var d=this,e=this.placeholder.offset(),f=this.options.axis,g={};f&&"x"!==f||(g.left=e.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),f&&"y"!==f||(g.top=e.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,a(this.helper).animate(g,parseInt(this.options.revert,10)||500,function(){d._clear(b)})}else this._clear(b,c);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new a.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var b=this.containers.length-1;b>=0;b--)this.containers[b]._trigger("deactivate",null,this._uiHash(this)),this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",null,this._uiHash(this)),this.containers[b].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[\-=_](.+)/);c&&d.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))}),!d.length&&b.key&&d.push(b.key+"="),d.join("&")},toArray:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},c.each(function(){d.push(a(b.item||this).attr(b.attribute||"id")||"")}),d},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,i=h+a.height,j=this.offset.click.top,k=this.offset.click.left,l="x"===this.options.axis||d+j>h&&d+j<i,m="y"===this.options.axis||b+k>f&&b+k<g,n=l&&m;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?n:f<b+this.helperProportions.width/2&&c-this.helperProportions.width/2<g&&h<d+this.helperProportions.height/2&&e-this.helperProportions.height/2<i},_intersectsWithPointer:function(a){var b,c,d="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,a.top,a.height),e="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,a.left,a.width);return!(!d||!e)&&(b=this._getDragVerticalDirection(),c=this._getDragHorizontalDirection(),this.floating?"right"===c||"down"===b?2:1:b&&("down"===b?2:1))},_intersectsWithSides:function(a){var b=this._isOverAxis(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height),c=this._isOverAxis(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width),d=this._getDragVerticalDirection(),e=this._getDragHorizontalDirection();return this.floating&&e?"right"===e&&c||"left"===e&&!c:d&&("down"===d&&b||"up"===d&&!b)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!==a&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!==a&&(a>0?"right":"left")},refresh:function(a){return this._refreshItems(a),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor===String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){function c(){h.push(this)}var d,e,f,g,h=[],i=[],j=this._connectWith();if(j&&b)for(d=j.length-1;d>=0;d--)for(f=a(j[d],this.document[0]),e=f.length-1;e>=0;e--)(g=a.data(f[e],this.widgetFullName))&&g!==this&&!g.options.disabled&&i.push([a.isFunction(g.options.items)?g.options.items.call(g.element):a(g.options.items,g.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),g]);for(i.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),d=i.length-1;d>=0;d--)i[d][0].each(c);return a(h)},_removeCurrentsFromItems:function(){var b=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=a.grep(this.items,function(a){for(var c=0;c<b.length;c++)if(b[c]===a.item[0])return!1;return!0})},_refreshItems:function(b){this.items=[],this.containers=[this];var c,d,e,f,g,h,i,j,k=this.items,l=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],m=this._connectWith();if(m&&this.ready)for(c=m.length-1;c>=0;c--)for(e=a(m[c],this.document[0]),d=e.length-1;d>=0;d--)(f=a.data(e[d],this.widgetFullName))&&f!==this&&!f.options.disabled&&(l.push([a.isFunction(f.options.items)?f.options.items.call(f.element[0],b,{item:this.currentItem}):a(f.options.items,f.element),f]),this.containers.push(f));for(c=l.length-1;c>=0;c--)for(g=l[c][1],h=l[c][0],d=0,j=h.length;d<j;d++)i=a(h[d]),i.data(this.widgetName+"-item",g),k.push({item:i,instance:g,width:0,height:0,left:0,top:0})},refreshPositions:function(b){this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var c,d,e,f;for(c=this.items.length-1;c>=0;c--)d=this.items[c],d.instance!==this.currentContainer&&this.currentContainer&&d.item[0]!==this.currentItem[0]||(e=this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item,b||(d.width=e.outerWidth(),d.height=e.outerHeight()),f=e.offset(),d.left=f.left,d.top=f.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(c=this.containers.length-1;c>=0;c--)f=this.containers[c].element.offset(),this.containers[c].containerCache.left=f.left,this.containers[c].containerCache.top=f.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight();return this},_createPlaceholder:function(b){b=b||this;var c,d=b.options;d.placeholder&&d.placeholder.constructor!==String||(c=d.placeholder,d.placeholder={element:function(){var d=b.currentItem[0].nodeName.toLowerCase(),e=a("<"+d+">",b.document[0]);return b._addClass(e,"ui-sortable-placeholder",c||b.currentItem[0].className)._removeClass(e,"ui-sortable-helper"),"tbody"===d?b._createTrPlaceholder(b.currentItem.find("tr").eq(0),a("<tr>",b.document[0]).appendTo(e)):"tr"===d?b._createTrPlaceholder(b.currentItem,e):"img"===d&&e.attr("src",b.currentItem.attr("src")),c||e.css("visibility","hidden"),e},update:function(a,e){c&&!d.forcePlaceholderSize||(e.height()||e.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10)))}}),b.placeholder=a(d.placeholder.element.call(b.element,b.currentItem)),b.currentItem.after(b.placeholder),d.placeholder.update(b,b.placeholder)},_createTrPlaceholder:function(b,c){var d=this;b.children().each(function(){a("<td>&#160;</td>",d.document[0]).attr("colspan",a(this).attr("colspan")||1).appendTo(c)})},_contactContainers:function(b){var c,d,e,f,g,h,i,j,k,l,m=null,n=null;for(c=this.containers.length-1;c>=0;c--)if(!a.contains(this.currentItem[0],this.containers[c].element[0]))if(this._intersectsWith(this.containers[c].containerCache)){if(m&&a.contains(this.containers[c].element[0],m.element[0]))continue;m=this.containers[c],n=c}else this.containers[c].containerCache.over&&(this.containers[c]._trigger("out",b,this._uiHash(this)),this.containers[c].containerCache.over=0);if(m)if(1===this.containers.length)this.containers[n].containerCache.over||(this.containers[n]._trigger("over",b,this._uiHash(this)),this.containers[n].containerCache.over=1);else{for(e=1e4,f=null,k=m.floating||this._isFloating(this.currentItem),g=k?"left":"top",h=k?"width":"height",l=k?"pageX":"pageY",d=this.items.length-1;d>=0;d--)a.contains(this.containers[n].element[0],this.items[d].item[0])&&this.items[d].item[0]!==this.currentItem[0]&&(i=this.items[d].item.offset()[g],j=!1,b[l]-i>this.items[d][h]/2&&(j=!0),Math.abs(b[l]-i)<e&&(e=Math.abs(b[l]-i),f=this.items[d],this.direction=j?"up":"down"));if(!f&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[n])return void(this.currentContainer.containerCache.over||(this.containers[n]._trigger("over",b,this._uiHash()),this.currentContainer.containerCache.over=1));f?this._rearrange(b,f,null,!0):this._rearrange(b,null,this.containers[n].element,!0),this._trigger("change",b,this._uiHash()),this.containers[n]._trigger("change",b,this._uiHash(this)),this.currentContainer=this.containers[n],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[n]._trigger("over",b,this._uiHash(this)),this.containers[n].containerCache.over=1}},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):"clone"===c.helper?this.currentItem.clone():this.currentItem;return d.parents("body").length||a("parent"!==c.appendTo?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]),d[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),d[0].style.width&&!c.forceHelperSize||d.width(this.currentItem.width()),d[0].style.height&&!c.forceHelperSize||d.height(this.currentItem.height()),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options;"parent"===e.containment&&(e.containment=this.helper[0].parentNode),"document"!==e.containment&&"window"!==e.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===e.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===e.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(e.containment)||(b=a(e.containment)[0],c=a(e.containment).offset(),d="hidden"!==a(b).css("overflow"),this.containment=[c.left+(parseInt(a(b).css("borderLeftWidth"),10)||0)+(parseInt(a(b).css("paddingLeft"),10)||0)-this.margins.left,c.top+(parseInt(a(b).css("borderTopWidth"),10)||0)+(parseInt(a(b).css("paddingTop"),10)||0)-this.margins.top,c.left+(d?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(a(b).css("borderLeftWidth"),10)||0)-(parseInt(a(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,c.top+(d?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(a(b).css("borderTopWidth"),10)||0)-(parseInt(a(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"===b?1:-1,e="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*d,left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d}},_generatePosition:function(b){var c,d,e=this.options,f=b.pageX,g=b.pageY,h="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(h[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top)),e.grid&&(c=this.originalPageY+Math.round((g-this.originalPageY)/e.grid[1])*e.grid[1],g=this.containment?c-this.offset.click.top>=this.containment[1]&&c-this.offset.click.top<=this.containment[3]?c:c-this.offset.click.top>=this.containment[1]?c-e.grid[1]:c+e.grid[1]:c,d=this.originalPageX+Math.round((f-this.originalPageX)/e.grid[0])*e.grid[0],f=this.containment?d-this.offset.click.left>=this.containment[0]&&d-this.offset.click.left<=this.containment[2]?d:d-this.offset.click.left>=this.containment[0]?d-e.grid[0]:d+e.grid[0]:d)),{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():i?0:h.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():i?0:h.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?b.item[0]:b.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var e=this.counter;this._delay(function(){e===this.counter&&this.refreshPositions(!d)})},_clear:function(a,b){function c(a,b,c){return function(d){c._trigger(a,d,b._uiHash(b))}}this.reverting=!1;var d,e=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(d in this._storedCSS)"auto"!==this._storedCSS[d]&&"static"!==this._storedCSS[d]||(this._storedCSS[d]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!b&&e.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||b||e.push(function(a){this._trigger("update",a,this._uiHash())}),this!==this.currentContainer&&(b||(e.push(function(a){this._trigger("remove",a,this._uiHash())}),e.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.currentContainer)),e.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer)))),d=this.containers.length-1;d>=0;d--)b||e.push(c("deactivate",this,this.containers[d])),this.containers[d].containerCache.over&&(e.push(c("out",this,this.containers[d])),this.containers[d].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,b||this._trigger("beforeStop",a,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!b){for(d=0;d<e.length;d++)e[d].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===a.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}}),a.widget("ui.accordion",{version:"1.12.1",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",header:"> li > :first-child, > :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var b=this.options;this.prevShow=this.prevHide=a(),this._addClass("ui-accordion","ui-widget ui-helper-reset"),this.element.attr("role","tablist"),b.collapsible||!1!==b.active&&null!=b.active||(b.active=0),this._processPanels(),b.active<0&&(b.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():a()}},_createIcons:function(){var b,c,d=this.options.icons;d&&(b=a("<span>"),this._addClass(b,"ui-accordion-header-icon","ui-icon "+d.header),b.prependTo(this.headers),c=this.active.children(".ui-accordion-header-icon"),this._removeClass(c,d.header)._addClass(c,null,d.activeHeader)._addClass(this.headers,"ui-accordion-icons"))},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons"),this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var a;this.element.removeAttr("role"),this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId(),this._destroyIcons(),a=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&a.css("height","")},_setOption:function(a,b){if("active"===a)return void this._activate(b);"event"===a&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(b)),this._super(a,b),"collapsible"!==a||b||!1!==this.options.active||this._activate(0),
"icons"===a&&(this._destroyIcons(),b&&this._createIcons())},_setOptionDisabled:function(a){this._super(a),this.element.attr("aria-disabled",a),this._toggleClass(null,"ui-state-disabled",!!a),this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!a)},_keydown:function(b){if(!b.altKey&&!b.ctrlKey){var c=a.ui.keyCode,d=this.headers.length,e=this.headers.index(b.target),f=!1;switch(b.keyCode){case c.RIGHT:case c.DOWN:f=this.headers[(e+1)%d];break;case c.LEFT:case c.UP:f=this.headers[(e-1+d)%d];break;case c.SPACE:case c.ENTER:this._eventHandler(b);break;case c.HOME:f=this.headers[0];break;case c.END:f=this.headers[d-1]}f&&(a(b.target).attr("tabIndex",-1),a(f).attr("tabIndex",0),a(f).trigger("focus"),b.preventDefault())}},_panelKeyDown:function(b){b.keyCode===a.ui.keyCode.UP&&b.ctrlKey&&a(b.currentTarget).prev().trigger("focus")},refresh:function(){var b=this.options;this._processPanels(),!1===b.active&&!0===b.collapsible||!this.headers.length?(b.active=!1,this.active=a()):!1===b.active?this._activate(0):this.active.length&&!a.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(b.active=!1,this.active=a()):this._activate(Math.max(0,b.active-1)):b.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var a=this.headers,b=this.panels;this.headers=this.element.find(this.options.header),this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default"),this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide(),this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content"),b&&(this._off(a.not(this.headers)),this._off(b.not(this.panels)))},_refresh:function(){var b,c=this.options,d=c.heightStyle,e=this.element.parent();this.active=this._findActive(c.active),this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed"),this._addClass(this.active.next(),"ui-accordion-content-active"),this.active.next().show(),this.headers.attr("role","tab").each(function(){var b=a(this),c=b.uniqueId().attr("id"),d=b.next(),e=d.uniqueId().attr("id");b.attr("aria-controls",e),d.attr("aria-labelledby",c)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(c.event),"fill"===d?(b=e.height(),this.element.siblings(":visible").each(function(){var c=a(this),d=c.css("position");"absolute"!==d&&"fixed"!==d&&(b-=c.outerHeight(!0))}),this.headers.each(function(){b-=a(this).outerHeight(!0)}),this.headers.next().each(function(){a(this).height(Math.max(0,b-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")):"auto"===d&&(b=0,this.headers.next().each(function(){var c=a(this).is(":visible");c||a(this).show(),b=Math.max(b,a(this).css("height","").height()),c||a(this).hide()}).height(b))},_activate:function(b){var c=this._findActive(b)[0];c!==this.active[0]&&(c=c||this.active[0],this._eventHandler({target:c,currentTarget:c,preventDefault:a.noop}))},_findActive:function(b){return"number"==typeof b?this.headers.eq(b):a()},_setupEvents:function(b){var c={keydown:"_keydown"};b&&a.each(b.split(" "),function(a,b){c[b]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,c),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(b){var c,d,e=this.options,f=this.active,g=a(b.currentTarget),h=g[0]===f[0],i=h&&e.collapsible,j=i?a():g.next(),k=f.next(),l={oldHeader:f,oldPanel:k,newHeader:i?a():g,newPanel:j};b.preventDefault(),h&&!e.collapsible||!1===this._trigger("beforeActivate",b,l)||(e.active=!i&&this.headers.index(g),this.active=h?a():g,this._toggle(l),this._removeClass(f,"ui-accordion-header-active","ui-state-active"),e.icons&&(c=f.children(".ui-accordion-header-icon"),this._removeClass(c,null,e.icons.activeHeader)._addClass(c,null,e.icons.header)),h||(this._removeClass(g,"ui-accordion-header-collapsed")._addClass(g,"ui-accordion-header-active","ui-state-active"),e.icons&&(d=g.children(".ui-accordion-header-icon"),this._removeClass(d,null,e.icons.header)._addClass(d,null,e.icons.activeHeader)),this._addClass(g.next(),"ui-accordion-content-active")))},_toggle:function(b){var c=b.newPanel,d=this.prevShow.length?this.prevShow:b.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=c,this.prevHide=d,this.options.animate?this._animate(c,d,b):(d.hide(),c.show(),this._toggleComplete(b)),d.attr({"aria-hidden":"true"}),d.prev().attr({"aria-selected":"false","aria-expanded":"false"}),c.length&&d.length?d.prev().attr({tabIndex:-1,"aria-expanded":"false"}):c.length&&this.headers.filter(function(){return 0===parseInt(a(this).attr("tabIndex"),10)}).attr("tabIndex",-1),c.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(a,b,c){var d,e,f,g=this,h=0,i=a.css("box-sizing"),j=a.length&&(!b.length||a.index()<b.index()),k=this.options.animate||{},l=j&&k.down||k,m=function(){g._toggleComplete(c)};return"number"==typeof l&&(f=l),"string"==typeof l&&(e=l),e=e||l.easing||k.easing,f=f||l.duration||k.duration,b.length?a.length?(d=a.show().outerHeight(),b.animate(this.hideProps,{duration:f,easing:e,step:function(a,b){b.now=Math.round(a)}}),void a.hide().animate(this.showProps,{duration:f,easing:e,complete:m,step:function(a,c){c.now=Math.round(a),"height"!==c.prop?"content-box"===i&&(h+=c.now):"content"!==g.options.heightStyle&&(c.now=Math.round(d-b.outerHeight()-h),h=0)}})):b.animate(this.hideProps,f,e,m):a.animate(this.showProps,f,e,m)},_toggleComplete:function(a){var b=a.oldPanel,c=b.prev();this._removeClass(b,"ui-accordion-content-active"),this._removeClass(c,"ui-accordion-header-active")._addClass(c,"ui-accordion-header-collapsed"),b.length&&(b.parent()[0].className=b.parent()[0].className),this._trigger("activate",null,a)}}),a.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(a){a.preventDefault()},"click .ui-menu-item":function(b){var c=a(b.target),d=a(a.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&c.not(".ui-state-disabled").length&&(this.select(b),b.isPropagationStopped()||(this.mouseHandled=!0),c.has(".ui-menu").length?this.expand(b):!this.element.is(":focus")&&d.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(b){if(!this.previousFilter){var c=a(b.target).closest(".ui-menu-item"),d=a(b.currentTarget);c[0]===d[0]&&(this._removeClass(d.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(b,d))}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(a,b){var c=this.active||this.element.find(this.options.items).eq(0);b||this.focus(a,c)},blur:function(b){this._delay(function(){!a.contains(this.element[0],a.ui.safeActiveElement(this.document[0]))&&this.collapseAll(b)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(a){this._closeOnDocumentClick(a)&&this.collapseAll(a),this.mouseHandled=!1}})},_destroy:function(){var b=this.element.find(".ui-menu-item").removeAttr("role aria-disabled"),c=b.children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),c.children().each(function(){var b=a(this);b.data("ui-menu-submenu-caret")&&b.remove()})},_keydown:function(b){var c,d,e,f,g=!0;switch(b.keyCode){case a.ui.keyCode.PAGE_UP:this.previousPage(b);break;case a.ui.keyCode.PAGE_DOWN:this.nextPage(b);break;case a.ui.keyCode.HOME:this._move("first","first",b);break;case a.ui.keyCode.END:this._move("last","last",b);break;case a.ui.keyCode.UP:this.previous(b);break;case a.ui.keyCode.DOWN:this.next(b);break;case a.ui.keyCode.LEFT:this.collapse(b);break;case a.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(b);break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:this._activate(b);break;case a.ui.keyCode.ESCAPE:this.collapse(b);break;default:g=!1,d=this.previousFilter||"",f=!1,e=b.keyCode>=96&&b.keyCode<=105?(b.keyCode-96).toString():String.fromCharCode(b.keyCode),clearTimeout(this.filterTimer),e===d?f=!0:e=d+e,c=this._filterMenuItems(e),c=f&&-1!==c.index(this.active.next())?this.active.nextAll(".ui-menu-item"):c,c.length||(e=String.fromCharCode(b.keyCode),c=this._filterMenuItems(e)),c.length?(this.focus(b,c),this.previousFilter=e,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}g&&b.preventDefault()},_activate:function(a){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(a):this.select(a))},refresh:function(){var b,c,d,e,f,g=this,h=this.options.icons.submenu,i=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),d=i.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var b=a(this),c=b.prev(),d=a("<span>").data("ui-menu-submenu-caret",!0);g._addClass(d,"ui-menu-icon","ui-icon "+h),c.attr("aria-haspopup","true").prepend(d),b.attr("aria-labelledby",c.attr("id"))}),this._addClass(d,"ui-menu","ui-widget ui-widget-content ui-front"),b=i.add(this.element),c=b.find(this.options.items),c.not(".ui-menu-item").each(function(){var b=a(this);g._isDivider(b)&&g._addClass(b,"ui-menu-divider","ui-widget-content")}),e=c.not(".ui-menu-item, .ui-menu-divider"),f=e.children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(e,"ui-menu-item")._addClass(f,"ui-menu-item-wrapper"),c.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!a.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(a,b){if("icons"===a){var c=this.element.find(".ui-menu-icon");this._removeClass(c,null,this.options.icons.submenu)._addClass(c,null,b.submenu)}this._super(a,b)},_setOptionDisabled:function(a){this._super(a),this.element.attr("aria-disabled",String(a)),this._toggleClass(null,"ui-state-disabled",!!a)},focus:function(a,b){var c,d,e;this.blur(a,a&&"focus"===a.type),this._scrollIntoView(b),this.active=b.first(),d=this.active.children(".ui-menu-item-wrapper"),this._addClass(d,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",d.attr("id")),e=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(e,null,"ui-state-active"),a&&"keydown"===a.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),c=b.children(".ui-menu"),c.length&&a&&/^mouse/.test(a.type)&&this._startOpening(c),this.activeMenu=b.parent(),this._trigger("focus",a,{item:b})},_scrollIntoView:function(b){var c,d,e,f,g,h;this._hasScroll()&&(c=parseFloat(a.css(this.activeMenu[0],"borderTopWidth"))||0,d=parseFloat(a.css(this.activeMenu[0],"paddingTop"))||0,e=b.offset().top-this.activeMenu.offset().top-c-d,f=this.activeMenu.scrollTop(),g=this.activeMenu.height(),h=b.outerHeight(),e<0?this.activeMenu.scrollTop(f+e):e+h>g&&this.activeMenu.scrollTop(f+e-g+h))},blur:function(a,b){b||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",a,{item:this.active}),this.active=null)},_startOpening:function(a){clearTimeout(this.timer),"true"===a.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(a)},this.delay))},_open:function(b){var c=a.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(b.parents(".ui-menu")).hide().attr("aria-hidden","true"),b.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(c)},collapseAll:function(b,c){clearTimeout(this.timer),this.timer=this._delay(function(){var d=c?this.element:a(b&&b.target).closest(this.element.find(".ui-menu"));d.length||(d=this.element),this._close(d),this.blur(b),this._removeClass(d.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=d},this.delay)},_close:function(a){a||(a=this.active?this.active.parent():this.element),a.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(b){return!a(b.target).closest(".ui-menu").length},_isDivider:function(a){return!/[^\-\u2014\u2013\s]/.test(a.text())},collapse:function(a){var b=this.active&&this.active.parent().closest(".ui-menu-item",this.element);b&&b.length&&(this._close(),this.focus(a,b))},expand:function(a){var b=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();b&&b.length&&(this._open(b.parent()),this._delay(function(){this.focus(a,b)}))},next:function(a){this._move("next","first",a)},previous:function(a){this._move("prev","last",a)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(a,b,c){var d;this.active&&(d="first"===a||"last"===a?this.active["first"===a?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[a+"All"](".ui-menu-item").eq(0)),d&&d.length&&this.active||(d=this.activeMenu.find(this.options.items)[b]()),this.focus(c,d)},nextPage:function(b){var c,d,e;if(!this.active)return void this.next(b);this.isLastItem()||(this._hasScroll()?(d=this.active.offset().top,e=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return c=a(this),c.offset().top-d-e<0}),this.focus(b,c)):this.focus(b,this.activeMenu.find(this.options.items)[this.active?"last":"first"]()))},previousPage:function(b){var c,d,e;if(!this.active)return void this.next(b);this.isFirstItem()||(this._hasScroll()?(d=this.active.offset().top,e=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return c=a(this),c.offset().top-d+e>0}),this.focus(b,c)):this.focus(b,this.activeMenu.find(this.options.items).first()))},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(b){this.active=this.active||a(b.target).closest(".ui-menu-item");var c={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(b,!0),this._trigger("select",b,c)},_filterMenuItems:function(b){var c=b.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),d=new RegExp("^"+c,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return d.test(a.trim(a(this).children(".ui-menu-item-wrapper").text()))})}});a.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var b,c,d,e=this.element[0].nodeName.toLowerCase(),f="textarea"===e,g="input"===e;this.isMultiLine=f||!g&&this._isContentEditable(this.element),this.valueMethod=this.element[f||g?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(e){if(this.element.prop("readOnly"))return b=!0,d=!0,void(c=!0);b=!1,d=!1,c=!1;var f=a.ui.keyCode;switch(e.keyCode){case f.PAGE_UP:b=!0,this._move("previousPage",e);break;case f.PAGE_DOWN:b=!0,this._move("nextPage",e);break;case f.UP:b=!0,this._keyEvent("previous",e);break;case f.DOWN:b=!0,this._keyEvent("next",e);break;case f.ENTER:this.menu.active&&(b=!0,e.preventDefault(),this.menu.select(e));break;case f.TAB:this.menu.active&&this.menu.select(e);break;case f.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(e),e.preventDefault());break;default:c=!0,this._searchTimeout(e)}},keypress:function(d){if(b)return b=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||d.preventDefault());if(!c){var e=a.ui.keyCode;switch(d.keyCode){case e.PAGE_UP:this._move("previousPage",d);break;case e.PAGE_DOWN:this._move("nextPage",d);break;case e.UP:this._keyEvent("previous",d);break;case e.DOWN:this._keyEvent("next",d)}}},input:function(a){if(d)return d=!1,void a.preventDefault();this._searchTimeout(a)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(a){if(this.cancelBlur)return void delete this.cancelBlur;clearTimeout(this.searching),this.close(a),this._change(a)}}),this._initSource(),this.menu=a("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(b){b.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,this.element[0]!==a.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")})},menufocus:function(b,c){var d,e;if(this.isNewMenu&&(this.isNewMenu=!1,b.originalEvent&&/^mouse/.test(b.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){a(b.target).trigger(b.originalEvent)});e=c.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",b,{item:e})&&b.originalEvent&&/^key/.test(b.originalEvent.type)&&this._value(e.value),(d=c.item.attr("aria-label")||e.value)&&a.trim(d).length&&(this.liveRegion.children().hide(),a("<div>").text(d).appendTo(this.liveRegion))},menuselect:function(b,c){var d=c.item.data("ui-autocomplete-item"),e=this.previous;this.element[0]!==a.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=e,this._delay(function(){this.previous=e,this.selectedItem=d})),!1!==this._trigger("select",b,{item:d})&&this._value(d.value),this.term=this._value(),this.close(b),this.selectedItem=d}}),this.liveRegion=a("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(a,b){this._super(a,b),"source"===a&&this._initSource(),"appendTo"===a&&this.menu.element.appendTo(this._appendTo()),"disabled"===a&&b&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(b){var c=this.menu.element[0];return b.target===this.element[0]||b.target===c||a.contains(c,b.target)},_closeOnClickOutside:function(a){this._isEventTargetInWidget(a)||this.close()},_appendTo:function(){var b=this.options.appendTo;return b&&(b=b.jquery||b.nodeType?a(b):this.document.find(b).eq(0)),b&&b[0]||(b=this.element.closest(".ui-front, dialog")),b.length||(b=this.document[0].body),b},_initSource:function(){var b,c,d=this;a.isArray(this.options.source)?(b=this.options.source,this.source=function(c,d){d(a.ui.autocomplete.filter(b,c.term))}):"string"==typeof this.options.source?(c=this.options.source,this.source=function(b,e){d.xhr&&d.xhr.abort(),d.xhr=a.ajax({url:c,data:b,dataType:"json",success:function(a){e(a)},error:function(){e([])}})}):this.source=this.options.source},_searchTimeout:function(a){clearTimeout(this.searching),this.searching=this._delay(function(){var b=this.term===this._value(),c=this.menu.element.is(":visible"),d=a.altKey||a.ctrlKey||a.metaKey||a.shiftKey;b&&(!b||c||d)||(this.selectedItem=null,this.search(null,a))},this.options.delay)},search:function(a,b){return a=null!=a?a:this._value(),this.term=this._value(),a.length<this.options.minLength?this.close(b):!1!==this._trigger("search",b)?this._search(a):void 0},_search:function(a){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:a},this._response())},_response:function(){var b=++this.requestIndex;return a.proxy(function(a){b===this.requestIndex&&this.__response(a),--this.pending||this._removeClass("ui-autocomplete-loading")},this)},__response:function(a){a&&(a=this._normalize(a)),this._trigger("response",null,{content:a}),!this.options.disabled&&a&&a.length&&!this.cancelSearch?(this._suggest(a),this._trigger("open")):this._close()},close:function(a){this.cancelSearch=!0,this._close(a)},_close:function(a){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",a))},_change:function(a){this.previous!==this._value()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return"string"==typeof b?{label:b,value:b}:a.extend({},b,{label:b.label||b.value,value:b.value||b.label})})},_suggest:function(b){var c=this.menu.element.empty();this._renderMenu(c,b),this.isNewMenu=!0,this.menu.refresh(),c.show(),this._resizeMenu(),c.position(a.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var d=this;a.each(c,function(a,c){d._renderItemData(b,c)})},_renderItemData:function(a,b){return this._renderItem(a,b).data("ui-autocomplete-item",b)},_renderItem:function(b,c){return a("<li>").append(a("<div>").text(c.label)).appendTo(b)},_move:function(a,b){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(a)||this.menu.isLastItem()&&/^next/.test(a)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[a](b):void this.search(null,b)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(a,b){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(a,b),b.preventDefault())},_isContentEditable:function(a){if(!a.length)return!1;var b=a.prop("contentEditable");return"inherit"===b?this._isContentEditable(a.parent()):"true"===b}}),a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(b,c){var d=new RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}}),a.widget("ui.autocomplete",a.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(a){return a+(a>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(b){var c;this._superApply(arguments),this.options.disabled||this.cancelSearch||(c=b&&b.length?this.options.messages.results(b.length):this.options.messages.noResults,this.liveRegion.children().hide(),a("<div>").text(c).appendTo(this.liveRegion))}});var m=(a.ui.autocomplete,/ui-corner-([a-z]){2,6}/g);a.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var b=this,c=[];a.each(this.options.items,function(d,e){var f,g={};if(e)return"controlgroupLabel"===d?(f=b.element.find(e),f.each(function(){var b=a(this);b.children(".ui-controlgroup-label-contents").length||b.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}),b._addClass(f,null,"ui-widget ui-widget-content ui-state-default"),void(c=c.concat(f.get()))):void(a.fn[d]&&(g=b["_"+d+"Options"]?b["_"+d+"Options"]("middle"):{classes:{}},b.element.find(e).each(function(){var e=a(this),f=e[d]("instance"),h=a.widget.extend({},g);if("button"!==d||!e.parent(".ui-spinner").length){f||(f=e[d]()[d]("instance")),f&&(h.classes=b._resolveClassesValues(h.classes,f)),e[d](h);var i=e[d]("widget");a.data(i[0],"ui-controlgroup-data",f||e[d]("instance")),c.push(i[0])}})))}),this.childWidgets=a(a.uniqueSort(c)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(b){this.childWidgets.each(function(){var c=a(this),d=c.data("ui-controlgroup-data");d&&d[b]&&d[b]()})},_updateCornerClass:function(a,b){var c=this._buildSimpleOptions(b,"label").classes.label;this._removeClass(a,null,"ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all"),this._addClass(a,null,c)},_buildSimpleOptions:function(a,b){var c="vertical"===this.options.direction,d={classes:{}};return d.classes[b]={middle:"",first:"ui-corner-"+(c?"top":"left"),last:"ui-corner-"+(c?"bottom":"right"),only:"ui-corner-all"}[a],d},_spinnerOptions:function(a){var b=this._buildSimpleOptions(a,"ui-spinner");return b.classes["ui-spinner-up"]="",b.classes["ui-spinner-down"]="",b},_buttonOptions:function(a){return this._buildSimpleOptions(a,"ui-button")},_checkboxradioOptions:function(a){return this._buildSimpleOptions(a,"ui-checkboxradio-label")},_selectmenuOptions:function(a){var b="vertical"===this.options.direction;return{width:!!b&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(b?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(b?"top":"left")},last:{"ui-selectmenu-button-open":b?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(b?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[a]}},_resolveClassesValues:function(b,c){var d={};return a.each(b,function(e){var f=c.options.classes[e]||"";f=a.trim(f.replace(m,"")),d[e]=(f+" "+b[e]).replace(/\s+/g," ")}),d},_setOption:function(a,b){if("direction"===a&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(a,b),"disabled"===a)return void this._callChildMethod(b?"disable":"enable");this.refresh()},refresh:function(){var b,c=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),b=this.childWidgets,this.options.onlyVisible&&(b=b.filter(":visible")),b.length&&(a.each(["first","last"],function(a,d){var e=b[d]().data("ui-controlgroup-data");if(e&&c["_"+e.widgetName+"Options"]){var f=c["_"+e.widgetName+"Options"](1===b.length?"only":d);f.classes=c._resolveClassesValues(f.classes,e),e.element[e.widgetName](f)}else c._updateCornerClass(b[d](),d)}),this._callChildMethod("refresh"))}});a.widget("ui.checkboxradio",[a.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var b,c,d=this,e=this._super()||{};return this._readType(),c=this.element.labels(),this.label=a(c[c.length-1]),this.label.length||a.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each(function(){d.originalLabel+=3===this.nodeType?a(this).text():this.outerHTML}),this.originalLabel&&(e.label=this.originalLabel),b=this.element[0].disabled,null!=b&&(e.disabled=b),e},_create:function(){var a=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),a&&(this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this.icon&&this._addClass(this.icon,null,"ui-state-hover")),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var b=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,"input"===b&&/radio|checkbox/.test(this.type)||a.error("Can't create checkboxradio on element.nodeName="+b+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var b,c=this.element[0].name,d="input[name='"+a.ui.escapeSelector(c)+"']";return c?(b=this.form.length?a(this.form[0].elements).filter(d):a(d).filter(function(){return 0===a(this).form().length}),b.not(this.element)):a([])},_toggleClasses:function(){var b=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",b),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",b)._toggleClass(this.icon,null,"ui-icon-blank",!b),"radio"===this.type&&this._getRadioGroup().each(function(){var b=a(this).checkboxradio("instance");b&&b._removeClass(b.label,"ui-checkboxradio-checked","ui-state-active")})},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(a,b){if("label"!==a||b){if(this._super(a,b),"disabled"===a)return this._toggleClass(this.label,null,"ui-state-disabled",b),void(this.element[0].disabled=b);this.refresh()}},_updateIcon:function(b){var c="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=a("<span>"),this.iconSpace=a("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(c+=b?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,b?"ui-icon-blank":"ui-icon-check")):c+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",c),b||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var a=this.label.contents().not(this.element[0]);this.icon&&(a=a.not(this.icon[0])),this.iconSpace&&(a=a.not(this.iconSpace[0])),a.remove(),this.label.append(this.options.label)},refresh:function(){var a=this.element[0].checked,b=this.element[0].disabled;this._updateIcon(a),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",a),null!==this.options.label&&this._updateLabel(),
b!==this.options.disabled&&this._setOptions({disabled:b})}}]);a.ui.checkboxradio;a.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var a,b=this._super()||{};return this.isInput=this.element.is("input"),a=this.element[0].disabled,null!=a&&(b.disabled=a),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(b.label=this.originalLabel),b},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(b){b.keyCode===a.ui.keyCode.SPACE&&(b.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(b,c){var d="iconPosition"!==b,e=d?this.options.iconPosition:c,f="top"===e||"bottom"===e;this.icon?d&&this._removeClass(this.icon,null,this.options.icon):(this.icon=a("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),d&&this._addClass(this.icon,null,c),this._attachIcon(e),f?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=a("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(e))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(a){this.icon[/^(?:end|bottom)/.test(a)?"before":"after"](this.iconSpace)},_attachIcon:function(a){this.element[/^(?:end|bottom)/.test(a)?"append":"prepend"](this.icon)},_setOptions:function(a){var b=void 0===a.showLabel?this.options.showLabel:a.showLabel,c=void 0===a.icon?this.options.icon:a.icon;b||c||(a.showLabel=!0),this._super(a)},_setOption:function(a,b){"icon"===a&&(b?this._updateIcon(a,b):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===a&&this._updateIcon(a,b),"showLabel"===a&&(this._toggleClass("ui-button-icon-only",null,!b),this._updateTooltip()),"label"===a&&(this.isInput?this.element.val(b):(this.element.html(b),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(a,b),"disabled"===a&&(this._toggleClass(null,"ui-state-disabled",b),this.element[0].disabled=b,b&&this.element.blur())},refresh:function(){var a=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");a!==this.options.disabled&&this._setOptions({disabled:a}),this._updateTooltip()}}),!1!==a.uiBackCompat&&(a.widget("ui.button",a.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(a,b){if("text"===a)return void this._super("showLabel",b);"showLabel"===a&&(this.options.text=b),"icon"===a&&(this.options.icons.primary=b),"icons"===a&&(b.primary?(this._super("icon",b.primary),this._super("iconPosition","beginning")):b.secondary&&(this._super("icon",b.secondary),this._super("iconPosition","end"))),this._superApply(arguments)}}),a.fn.button=function(b){return function(){return!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type")?b.apply(this,arguments):(a.ui.checkboxradio||a.error("Checkboxradio widget missing"),0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments))}}(a.fn.button),a.fn.buttonset=function(){return a.ui.controlgroup||a.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))});a.ui.button;a.extend(a.ui,{datepicker:{version:"1.12.1"}});var n;a.extend(d.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return g(this._defaults,a||{}),this},_attachDatepicker:function(b,c){var d,e,f;d=b.nodeName.toLowerCase(),e="div"===d||"span"===d,b.id||(this.uuid+=1,b.id="dp"+this.uuid),f=this._newInst(a(b),e),f.settings=a.extend({},c||{}),"input"===d?this._connectDatepicker(b,f):e&&this._inlineDatepicker(b,f)},_newInst:function(b,c){return{id:b[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:b,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:c,dpDiv:c?e(a("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(b,c){var d=a(b);c.append=a([]),c.trigger=a([]),d.hasClass(this.markerClassName)||(this._attachments(d,c),d.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(c),a.data(b,"datepicker",c),c.settings.disabled&&this._disableDatepicker(b))},_attachments:function(b,c){var d,e,f,g=this._get(c,"appendText"),h=this._get(c,"isRTL");c.append&&c.append.remove(),g&&(c.append=a("<span class='"+this._appendClass+"'>"+g+"</span>"),b[h?"before":"after"](c.append)),b.off("focus",this._showDatepicker),c.trigger&&c.trigger.remove(),d=this._get(c,"showOn"),"focus"!==d&&"both"!==d||b.on("focus",this._showDatepicker),"button"!==d&&"both"!==d||(e=this._get(c,"buttonText"),f=this._get(c,"buttonImage"),c.trigger=a(this._get(c,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:f,alt:e,title:e}):a("<button type='button'></button>").addClass(this._triggerClass).html(f?a("<img/>").attr({src:f,alt:e,title:e}):e)),b[h?"before":"after"](c.trigger),c.trigger.on("click",function(){return a.datepicker._datepickerShowing&&a.datepicker._lastInput===b[0]?a.datepicker._hideDatepicker():a.datepicker._datepickerShowing&&a.datepicker._lastInput!==b[0]?(a.datepicker._hideDatepicker(),a.datepicker._showDatepicker(b[0])):a.datepicker._showDatepicker(b[0]),!1}))},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b,c,d,e,f=new Date(2009,11,20),g=this._get(a,"dateFormat");g.match(/[DM]/)&&(b=function(a){for(c=0,d=0,e=0;e<a.length;e++)a[e].length>c&&(c=a[e].length,d=e);return d},f.setMonth(b(this._get(a,g.match(/MM/)?"monthNames":"monthNamesShort"))),f.setDate(b(this._get(a,g.match(/DD/)?"dayNames":"dayNamesShort"))+20-f.getDay())),a.input.attr("size",this._formatDate(a,f).length)}},_inlineDatepicker:function(b,c){var d=a(b);d.hasClass(this.markerClassName)||(d.addClass(this.markerClassName).append(c.dpDiv),a.data(b,"datepicker",c),this._setDate(c,this._getDefaultDate(c),!0),this._updateDatepicker(c),this._updateAlternate(c),c.settings.disabled&&this._disableDatepicker(b),c.dpDiv.css("display","block"))},_dialogDatepicker:function(b,c,d,e,f){var h,i,j,k,l,m=this._dialogInst;return m||(this.uuid+=1,h="dp"+this.uuid,this._dialogInput=a("<input type='text' id='"+h+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),a("body").append(this._dialogInput),m=this._dialogInst=this._newInst(this._dialogInput,!1),m.settings={},a.data(this._dialogInput[0],"datepicker",m)),g(m.settings,e||{}),c=c&&c.constructor===Date?this._formatDate(m,c):c,this._dialogInput.val(c),this._pos=f?f.length?f:[f.pageX,f.pageY]:null,this._pos||(i=document.documentElement.clientWidth,j=document.documentElement.clientHeight,k=document.documentElement.scrollLeft||document.body.scrollLeft,l=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[i/2-100+k,j/2-150+l]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),m.settings.onSelect=d,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),a.blockUI&&a.blockUI(this.dpDiv),a.data(this._dialogInput[0],"datepicker",m),this},_destroyDatepicker:function(b){var c,d=a(b),e=a.data(b,"datepicker");d.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),a.removeData(b,"datepicker"),"input"===c?(e.append.remove(),e.trigger.remove(),d.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):"div"!==c&&"span"!==c||d.removeClass(this.markerClassName).empty(),n===e&&(n=null))},_enableDatepicker:function(b){var c,d,e=a(b),f=a.data(b,"datepicker");e.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),"input"===c?(b.disabled=!1,f.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==c&&"span"!==c||(d=e.children("."+this._inlineClass),d.children().removeClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=a.map(this._disabledInputs,function(a){return a===b?null:a}))},_disableDatepicker:function(b){var c,d,e=a(b),f=a.data(b,"datepicker");e.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),"input"===c?(b.disabled=!0,f.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==c&&"span"!==c||(d=e.children("."+this._inlineClass),d.children().addClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=a.map(this._disabledInputs,function(a){return a===b?null:a}),this._disabledInputs[this._disabledInputs.length]=b)},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]===a)return!0;return!1},_getInst:function(b){try{return a.data(b,"datepicker")}catch(a){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(b,c,d){var e,f,h,i,j=this._getInst(b);if(2===arguments.length&&"string"==typeof c)return"defaults"===c?a.extend({},a.datepicker._defaults):j?"all"===c?a.extend({},j.settings):this._get(j,c):null;e=c||{},"string"==typeof c&&(e={},e[c]=d),j&&(this._curInst===j&&this._hideDatepicker(),f=this._getDateDatepicker(b,!0),h=this._getMinMaxDate(j,"min"),i=this._getMinMaxDate(j,"max"),g(j.settings,e),null!==h&&void 0!==e.dateFormat&&void 0===e.minDate&&(j.settings.minDate=this._formatDate(j,h)),null!==i&&void 0!==e.dateFormat&&void 0===e.maxDate&&(j.settings.maxDate=this._formatDate(j,i)),"disabled"in e&&(e.disabled?this._disableDatepicker(b):this._enableDatepicker(b)),this._attachments(a(b),j),this._autoSize(j),this._setDate(j,f),this._updateAlternate(j),this._updateDatepicker(j))},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){var b=this._getInst(a);b&&this._updateDatepicker(b)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);return c&&!c.inline&&this._setDateFromField(c,b),c?this._getDate(c):null},_doKeyDown:function(b){var c,d,e,f=a.datepicker._getInst(b.target),g=!0,h=f.dpDiv.is(".ui-datepicker-rtl");if(f._keyEvent=!0,a.datepicker._datepickerShowing)switch(b.keyCode){case 9:a.datepicker._hideDatepicker(),g=!1;break;case 13:return e=a("td."+a.datepicker._dayOverClass+":not(."+a.datepicker._currentClass+")",f.dpDiv),e[0]&&a.datepicker._selectDay(b.target,f.selectedMonth,f.selectedYear,e[0]),c=a.datepicker._get(f,"onSelect"),c?(d=a.datepicker._formatDate(f),c.apply(f.input?f.input[0]:null,[d,f])):a.datepicker._hideDatepicker(),!1;case 27:a.datepicker._hideDatepicker();break;case 33:a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(f,"stepBigMonths"):-a.datepicker._get(f,"stepMonths"),"M");break;case 34:a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(f,"stepBigMonths"):+a.datepicker._get(f,"stepMonths"),"M");break;case 35:(b.ctrlKey||b.metaKey)&&a.datepicker._clearDate(b.target),g=b.ctrlKey||b.metaKey;break;case 36:(b.ctrlKey||b.metaKey)&&a.datepicker._gotoToday(b.target),g=b.ctrlKey||b.metaKey;break;case 37:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,h?1:-1,"D"),g=b.ctrlKey||b.metaKey,b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(f,"stepBigMonths"):-a.datepicker._get(f,"stepMonths"),"M");break;case 38:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,-7,"D"),g=b.ctrlKey||b.metaKey;break;case 39:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,h?-1:1,"D"),g=b.ctrlKey||b.metaKey,b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(f,"stepBigMonths"):+a.datepicker._get(f,"stepMonths"),"M");break;case 40:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,7,"D"),g=b.ctrlKey||b.metaKey;break;default:g=!1}else 36===b.keyCode&&b.ctrlKey?a.datepicker._showDatepicker(this):g=!1;g&&(b.preventDefault(),b.stopPropagation())},_doKeyPress:function(b){var c,d,e=a.datepicker._getInst(b.target);if(a.datepicker._get(e,"constrainInput"))return c=a.datepicker._possibleChars(a.datepicker._get(e,"dateFormat")),d=String.fromCharCode(null==b.charCode?b.keyCode:b.charCode),b.ctrlKey||b.metaKey||d<" "||!c||c.indexOf(d)>-1},_doKeyUp:function(b){var c,d=a.datepicker._getInst(b.target);if(d.input.val()!==d.lastVal)try{c=a.datepicker.parseDate(a.datepicker._get(d,"dateFormat"),d.input?d.input.val():null,a.datepicker._getFormatConfig(d)),c&&(a.datepicker._setDateFromField(d),a.datepicker._updateAlternate(d),a.datepicker._updateDatepicker(d))}catch(a){}return!0},_showDatepicker:function(b){if(b=b.target||b,"input"!==b.nodeName.toLowerCase()&&(b=a("input",b.parentNode)[0]),!a.datepicker._isDisabledDatepicker(b)&&a.datepicker._lastInput!==b){var d,e,f,h,i,j,k;d=a.datepicker._getInst(b),a.datepicker._curInst&&a.datepicker._curInst!==d&&(a.datepicker._curInst.dpDiv.stop(!0,!0),d&&a.datepicker._datepickerShowing&&a.datepicker._hideDatepicker(a.datepicker._curInst.input[0])),e=a.datepicker._get(d,"beforeShow"),f=e?e.apply(b,[b,d]):{},!1!==f&&(g(d.settings,f),d.lastVal=null,a.datepicker._lastInput=b,a.datepicker._setDateFromField(d),a.datepicker._inDialog&&(b.value=""),a.datepicker._pos||(a.datepicker._pos=a.datepicker._findPos(b),a.datepicker._pos[1]+=b.offsetHeight),h=!1,a(b).parents().each(function(){return!(h|="fixed"===a(this).css("position"))}),i={left:a.datepicker._pos[0],top:a.datepicker._pos[1]},a.datepicker._pos=null,d.dpDiv.empty(),d.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),a.datepicker._updateDatepicker(d),i=a.datepicker._checkOffset(d,i,h),d.dpDiv.css({position:a.datepicker._inDialog&&a.blockUI?"static":h?"fixed":"absolute",display:"none",left:i.left+"px",top:i.top+"px"}),d.inline||(j=a.datepicker._get(d,"showAnim"),k=a.datepicker._get(d,"duration"),d.dpDiv.css("z-index",c(a(b))+1),a.datepicker._datepickerShowing=!0,a.effects&&a.effects.effect[j]?d.dpDiv.show(j,a.datepicker._get(d,"showOptions"),k):d.dpDiv[j||"show"](j?k:null),a.datepicker._shouldFocusInput(d)&&d.input.trigger("focus"),a.datepicker._curInst=d))}},_updateDatepicker:function(b){this.maxRows=4,n=b,b.dpDiv.empty().append(this._generateHTML(b)),this._attachHandlers(b);var c,d=this._getNumberOfMonths(b),e=d[1],g=b.dpDiv.find("."+this._dayOverClass+" a");g.length>0&&f.apply(g.get(0)),b.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),e>1&&b.dpDiv.addClass("ui-datepicker-multi-"+e).css("width",17*e+"em"),b.dpDiv[(1!==d[0]||1!==d[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),b.dpDiv[(this._get(b,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),b===a.datepicker._curInst&&a.datepicker._datepickerShowing&&a.datepicker._shouldFocusInput(b)&&b.input.trigger("focus"),b.yearshtml&&(c=b.yearshtml,setTimeout(function(){c===b.yearshtml&&b.yearshtml&&b.dpDiv.find("select.ui-datepicker-year:first").replaceWith(b.yearshtml),c=b.yearshtml=null},0))},_shouldFocusInput:function(a){return a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&!a.input.is(":focus")},_checkOffset:function(b,c,d){var e=b.dpDiv.outerWidth(),f=b.dpDiv.outerHeight(),g=b.input?b.input.outerWidth():0,h=b.input?b.input.outerHeight():0,i=document.documentElement.clientWidth+(d?0:a(document).scrollLeft()),j=document.documentElement.clientHeight+(d?0:a(document).scrollTop());return c.left-=this._get(b,"isRTL")?e-g:0,c.left-=d&&c.left===b.input.offset().left?a(document).scrollLeft():0,c.top-=d&&c.top===b.input.offset().top+h?a(document).scrollTop():0,c.left-=Math.min(c.left,c.left+e>i&&i>e?Math.abs(c.left+e-i):0),c.top-=Math.min(c.top,c.top+f>j&&j>f?Math.abs(f+h):0),c},_findPos:function(b){for(var c,d=this._getInst(b),e=this._get(d,"isRTL");b&&("hidden"===b.type||1!==b.nodeType||a.expr.pseudos.hidden(b));)b=b[e?"previousSibling":"nextSibling"];return c=a(b).offset(),[c.left,c.top]},_hideDatepicker:function(b){var c,d,e,f,g=this._curInst;!g||b&&g!==a.data(b,"datepicker")||this._datepickerShowing&&(c=this._get(g,"showAnim"),d=this._get(g,"duration"),e=function(){a.datepicker._tidyDialog(g)},a.effects&&(a.effects.effect[c]||a.effects[c])?g.dpDiv.hide(c,a.datepicker._get(g,"showOptions"),d,e):g.dpDiv["slideDown"===c?"slideUp":"fadeIn"===c?"fadeOut":"hide"](c?d:null,e),c||e(),this._datepickerShowing=!1,f=this._get(g,"onClose"),f&&f.apply(g.input?g.input[0]:null,[g.input?g.input.val():"",g]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),a.blockUI&&(a.unblockUI(),a("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(b){if(a.datepicker._curInst){var c=a(b.target),d=a.datepicker._getInst(c[0]);(c[0].id===a.datepicker._mainDivId||0!==c.parents("#"+a.datepicker._mainDivId).length||c.hasClass(a.datepicker.markerClassName)||c.closest("."+a.datepicker._triggerClass).length||!a.datepicker._datepickerShowing||a.datepicker._inDialog&&a.blockUI)&&(!c.hasClass(a.datepicker.markerClassName)||a.datepicker._curInst===d)||a.datepicker._hideDatepicker()}},_adjustDate:function(b,c,d){var e=a(b),f=this._getInst(e[0]);this._isDisabledDatepicker(e[0])||(this._adjustInstDate(f,c+("M"===d?this._get(f,"showCurrentAtPos"):0),d),this._updateDatepicker(f))},_gotoToday:function(b){var c,d=a(b),e=this._getInst(d[0]);this._get(e,"gotoCurrent")&&e.currentDay?(e.selectedDay=e.currentDay,e.drawMonth=e.selectedMonth=e.currentMonth,e.drawYear=e.selectedYear=e.currentYear):(c=new Date,e.selectedDay=c.getDate(),e.drawMonth=e.selectedMonth=c.getMonth(),e.drawYear=e.selectedYear=c.getFullYear()),this._notifyChange(e),this._adjustDate(d)},_selectMonthYear:function(b,c,d){var e=a(b),f=this._getInst(e[0]);f["selected"+("M"===d?"Month":"Year")]=f["draw"+("M"===d?"Month":"Year")]=parseInt(c.options[c.selectedIndex].value,10),this._notifyChange(f),this._adjustDate(e)},_selectDay:function(b,c,d,e){var f,g=a(b);a(e).hasClass(this._unselectableClass)||this._isDisabledDatepicker(g[0])||(f=this._getInst(g[0]),f.selectedDay=f.currentDay=a("a",e).html(),f.selectedMonth=f.currentMonth=c,f.selectedYear=f.currentYear=d,this._selectDate(b,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear)))},_clearDate:function(b){var c=a(b);this._selectDate(c,"")},_selectDate:function(b,c){var d,e=a(b),f=this._getInst(e[0]);c=null!=c?c:this._formatDate(f),f.input&&f.input.val(c),this._updateAlternate(f),d=this._get(f,"onSelect"),d?d.apply(f.input?f.input[0]:null,[c,f]):f.input&&f.input.trigger("change"),f.inline?this._updateDatepicker(f):(this._hideDatepicker(),this._lastInput=f.input[0],"object"!=typeof f.input[0]&&f.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(b){var c,d,e,f=this._get(b,"altField");f&&(c=this._get(b,"altFormat")||this._get(b,"dateFormat"),d=this._getDate(b),e=this.formatDate(c,d,this._getFormatConfig(b)),a(f).val(e))},noWeekends:function(a){var b=a.getDay();return[b>0&&b<6,""]},iso8601Week:function(a){var b,c=new Date(a.getTime());return c.setDate(c.getDate()+4-(c.getDay()||7)),b=c.getTime(),c.setMonth(0),c.setDate(1),Math.floor(Math.round((b-c)/864e5)/7)+1},parseDate:function(b,c,d){if(null==b||null==c)throw"Invalid arguments";if(""===(c="object"==typeof c?c.toString():c+""))return null;var e,f,g,h,i=0,j=(d?d.shortYearCutoff:null)||this._defaults.shortYearCutoff,k="string"!=typeof j?j:(new Date).getFullYear()%100+parseInt(j,10),l=(d?d.dayNamesShort:null)||this._defaults.dayNamesShort,m=(d?d.dayNames:null)||this._defaults.dayNames,n=(d?d.monthNamesShort:null)||this._defaults.monthNamesShort,o=(d?d.monthNames:null)||this._defaults.monthNames,p=-1,q=-1,r=-1,s=-1,t=!1,u=function(a){var c=e+1<b.length&&b.charAt(e+1)===a;return c&&e++,c},v=function(a){var b=u(a),d="@"===a?14:"!"===a?20:"y"===a&&b?4:"o"===a?3:2,e="y"===a?d:1,f=new RegExp("^\\d{"+e+","+d+"}"),g=c.substring(i).match(f);if(!g)throw"Missing number at position "+i;return i+=g[0].length,parseInt(g[0],10)},w=function(b,d,e){var f=-1,g=a.map(u(b)?e:d,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)});if(a.each(g,function(a,b){var d=b[1];if(c.substr(i,d.length).toLowerCase()===d.toLowerCase())return f=b[0],i+=d.length,!1}),-1!==f)return f+1;throw"Unknown name at position "+i},x=function(){if(c.charAt(i)!==b.charAt(e))throw"Unexpected literal at position "+i;i++};for(e=0;e<b.length;e++)if(t)"'"!==b.charAt(e)||u("'")?x():t=!1;else switch(b.charAt(e)){case"d":r=v("d");break;case"D":w("D",l,m);break;case"o":s=v("o");break;case"m":q=v("m");break;case"M":q=w("M",n,o);break;case"y":p=v("y");break;case"@":h=new Date(v("@")),p=h.getFullYear(),q=h.getMonth()+1,r=h.getDate();break;case"!":h=new Date((v("!")-this._ticksTo1970)/1e4),p=h.getFullYear(),q=h.getMonth()+1,r=h.getDate();break;case"'":u("'")?x():t=!0;break;default:x()}if(i<c.length&&(g=c.substr(i),!/^\s+/.test(g)))throw"Extra/unparsed characters found in date: "+g;if(-1===p?p=(new Date).getFullYear():p<100&&(p+=(new Date).getFullYear()-(new Date).getFullYear()%100+(p<=k?0:-100)),s>-1)for(q=1,r=s;;){if(f=this._getDaysInMonth(p,q-1),r<=f)break;q++,r-=f}if(h=this._daylightSavingAdjust(new Date(p,q-1,r)),h.getFullYear()!==p||h.getMonth()+1!==q||h.getDate()!==r)throw"Invalid date";return h},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(a,b,c){if(!b)return"";var d,e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,h=(c?c.monthNames:null)||this._defaults.monthNames,i=function(b){var c=d+1<a.length&&a.charAt(d+1)===b;return c&&d++,c},j=function(a,b,c){var d=""+b;if(i(a))for(;d.length<c;)d="0"+d;return d},k=function(a,b,c,d){return i(a)?d[b]:c[b]},l="",m=!1;if(b)for(d=0;d<a.length;d++)if(m)"'"!==a.charAt(d)||i("'")?l+=a.charAt(d):m=!1;else switch(a.charAt(d)){case"d":l+=j("d",b.getDate(),2);break;case"D":l+=k("D",b.getDay(),e,f);break;case"o":l+=j("o",Math.round((new Date(b.getFullYear(),b.getMonth(),b.getDate()).getTime()-new Date(b.getFullYear(),0,0).getTime())/864e5),3);break;case"m":l+=j("m",b.getMonth()+1,2);break;case"M":l+=k("M",b.getMonth(),g,h);break;case"y":l+=i("y")?b.getFullYear():(b.getFullYear()%100<10?"0":"")+b.getFullYear()%100;break;case"@":l+=b.getTime();break;case"!":l+=1e4*b.getTime()+this._ticksTo1970;break;case"'":i("'")?l+="'":m=!0;break;default:l+=a.charAt(d)}return l},_possibleChars:function(a){var b,c="",d=!1,e=function(c){var d=b+1<a.length&&a.charAt(b+1)===c;return d&&b++,d};for(b=0;b<a.length;b++)if(d)"'"!==a.charAt(b)||e("'")?c+=a.charAt(b):d=!1;else switch(a.charAt(b)){case"d":case"m":case"y":case"@":c+="0123456789";break;case"D":case"M":return null;case"'":e("'")?c+="'":d=!0;break;default:c+=a.charAt(b)}return c},_get:function(a,b){return void 0!==a.settings[b]?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!==a.lastVal){var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,e=this._getDefaultDate(a),f=e,g=this._getFormatConfig(a);try{f=this.parseDate(c,d,g)||e}catch(a){d=b?"":d}a.selectedDay=f.getDate(),a.drawMonth=a.selectedMonth=f.getMonth(),a.drawYear=a.selectedYear=f.getFullYear(),a.currentDay=d?f.getDate():0,a.currentMonth=d?f.getMonth():0,a.currentYear=d?f.getFullYear():0,this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(b,c,d){var e=function(a){var b=new Date;return b.setDate(b.getDate()+a),b},f=function(c){try{return a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),c,a.datepicker._getFormatConfig(b))}catch(a){}for(var d=(c.toLowerCase().match(/^c/)?a.datepicker._getDate(b):null)||new Date,e=d.getFullYear(),f=d.getMonth(),g=d.getDate(),h=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,i=h.exec(c);i;){switch(i[2]||"d"){case"d":case"D":g+=parseInt(i[1],10);break;case"w":case"W":g+=7*parseInt(i[1],10);break;case"m":case"M":f+=parseInt(i[1],10),g=Math.min(g,a.datepicker._getDaysInMonth(e,f));break;case"y":case"Y":e+=parseInt(i[1],10),g=Math.min(g,a.datepicker._getDaysInMonth(e,f))}i=h.exec(c)}return new Date(e,f,g)},g=null==c||""===c?d:"string"==typeof c?f(c):"number"==typeof c?isNaN(c)?d:e(c):new Date(c.getTime());return g=g&&"Invalid Date"===g.toString()?d:g,g&&(g.setHours(0),g.setMinutes(0),g.setSeconds(0),g.setMilliseconds(0)),this._daylightSavingAdjust(g)},_daylightSavingAdjust:function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear,g=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=g.getDate(),a.drawMonth=a.selectedMonth=a.currentMonth=g.getMonth(),a.drawYear=a.selectedYear=a.currentYear=g.getFullYear(),e===a.selectedMonth&&f===a.selectedYear||c||this._notifyChange(a),this._adjustInstDate(a),a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){return!a.currentYear||a.input&&""===a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay))},_attachHandlers:function(b){var c=this._get(b,"stepMonths"),d="#"+b.id.replace(/\\\\/g,"\\");b.dpDiv.find("[data-handler]").map(function(){var b={prev:function(){a.datepicker._adjustDate(d,-c,"M")},next:function(){a.datepicker._adjustDate(d,+c,"M")},hide:function(){a.datepicker._hideDatepicker()},today:function(){a.datepicker._gotoToday(d)},selectDay:function(){return a.datepicker._selectDay(d,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return a.datepicker._selectMonthYear(d,this,"M"),!1},selectYear:function(){return a.datepicker._selectMonthYear(d,this,"Y"),!1}};a(this).on(this.getAttribute("data-event"),b[this.getAttribute("data-handler")])})},_generateHTML:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O=new Date,P=this._daylightSavingAdjust(new Date(O.getFullYear(),O.getMonth(),O.getDate())),Q=this._get(a,"isRTL"),R=this._get(a,"showButtonPanel"),S=this._get(a,"hideIfNoPrevNext"),T=this._get(a,"navigationAsDateFormat"),U=this._getNumberOfMonths(a),V=this._get(a,"showCurrentAtPos"),W=this._get(a,"stepMonths"),X=1!==U[0]||1!==U[1],Y=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),Z=this._getMinMaxDate(a,"min"),$=this._getMinMaxDate(a,"max"),_=a.drawMonth-V,aa=a.drawYear;if(_<0&&(_+=12,aa--),$)for(b=this._daylightSavingAdjust(new Date($.getFullYear(),$.getMonth()-U[0]*U[1]+1,$.getDate())),b=Z&&b<Z?Z:b;this._daylightSavingAdjust(new Date(aa,_,1))>b;)--_<0&&(_=11,aa--);for(a.drawMonth=_,a.drawYear=aa,c=this._get(a,"prevText"),c=T?this.formatDate(c,this._daylightSavingAdjust(new Date(aa,_-W,1)),this._getFormatConfig(a)):c,d=this._canAdjustMonth(a,-1,aa,_)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+c+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"e":"w")+"'>"+c+"</span></a>":S?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+c+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"e":"w")+"'>"+c+"</span></a>",e=this._get(a,"nextText"),e=T?this.formatDate(e,this._daylightSavingAdjust(new Date(aa,_+W,1)),this._getFormatConfig(a)):e,f=this._canAdjustMonth(a,1,aa,_)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+e+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"w":"e")+"'>"+e+"</span></a>":S?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+e+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"w":"e")+"'>"+e+"</span></a>",g=this._get(a,"currentText"),h=this._get(a,"gotoCurrent")&&a.currentDay?Y:P,g=T?this.formatDate(g,h,this._getFormatConfig(a)):g,i=a.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(a,"closeText")+"</button>",j=R?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Q?i:"")+(this._isInRange(a,h)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+g+"</button>":"")+(Q?"":i)+"</div>":"",k=parseInt(this._get(a,"firstDay"),10),k=isNaN(k)?0:k,l=this._get(a,"showWeek"),m=this._get(a,"dayNames"),n=this._get(a,"dayNamesMin"),o=this._get(a,"monthNames"),p=this._get(a,"monthNamesShort"),q=this._get(a,"beforeShowDay"),r=this._get(a,"showOtherMonths"),s=this._get(a,"selectOtherMonths"),t=this._getDefaultDate(a),u="",w=0;w<U[0];w++){for(x="",this.maxRows=4,y=0;y<U[1];y++){if(z=this._daylightSavingAdjust(new Date(aa,_,a.selectedDay)),A=" ui-corner-all",B="",X){if(B+="<div class='ui-datepicker-group",U[1]>1)switch(y){case 0:B+=" ui-datepicker-group-first",A=" ui-corner-"+(Q?"right":"left");break;case U[1]-1:B+=" ui-datepicker-group-last",A=" ui-corner-"+(Q?"left":"right");break;default:B+=" ui-datepicker-group-middle",A=""}B+="'>"}for(B+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+A+"'>"+(/all|left/.test(A)&&0===w?Q?f:d:"")+(/all|right/.test(A)&&0===w?Q?d:f:"")+this._generateMonthYearHeader(a,_,aa,Z,$,w>0||y>0,o,p)+"</div><table class='ui-datepicker-calendar'><thead><tr>",
C=l?"<th class='ui-datepicker-week-col'>"+this._get(a,"weekHeader")+"</th>":"",v=0;v<7;v++)D=(v+k)%7,C+="<th scope='col'"+((v+k+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+m[D]+"'>"+n[D]+"</span></th>";for(B+=C+"</tr></thead><tbody>",E=this._getDaysInMonth(aa,_),aa===a.selectedYear&&_===a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,E)),F=(this._getFirstDayOfMonth(aa,_)-k+7)%7,G=Math.ceil((F+E)/7),H=X&&this.maxRows>G?this.maxRows:G,this.maxRows=H,I=this._daylightSavingAdjust(new Date(aa,_,1-F)),J=0;J<H;J++){for(B+="<tr>",K=l?"<td class='ui-datepicker-week-col'>"+this._get(a,"calculateWeek")(I)+"</td>":"",v=0;v<7;v++)L=q?q.apply(a.input?a.input[0]:null,[I]):[!0,""],M=I.getMonth()!==_,N=M&&!s||!L[0]||Z&&I<Z||$&&I>$,K+="<td class='"+((v+k+6)%7>=5?" ui-datepicker-week-end":"")+(M?" ui-datepicker-other-month":"")+(I.getTime()===z.getTime()&&_===a.selectedMonth&&a._keyEvent||t.getTime()===I.getTime()&&t.getTime()===z.getTime()?" "+this._dayOverClass:"")+(N?" "+this._unselectableClass+" ui-state-disabled":"")+(M&&!r?"":" "+L[1]+(I.getTime()===Y.getTime()?" "+this._currentClass:"")+(I.getTime()===P.getTime()?" ui-datepicker-today":""))+"'"+(M&&!r||!L[2]?"":" title='"+L[2].replace(/'/g,"&#39;")+"'")+(N?"":" data-handler='selectDay' data-event='click' data-month='"+I.getMonth()+"' data-year='"+I.getFullYear()+"'")+">"+(M&&!r?"&#xa0;":N?"<span class='ui-state-default'>"+I.getDate()+"</span>":"<a class='ui-state-default"+(I.getTime()===P.getTime()?" ui-state-highlight":"")+(I.getTime()===Y.getTime()?" ui-state-active":"")+(M?" ui-priority-secondary":"")+"' href='#'>"+I.getDate()+"</a>")+"</td>",I.setDate(I.getDate()+1),I=this._daylightSavingAdjust(I);B+=K+"</tr>"}_++,_>11&&(_=0,aa++),B+="</tbody></table>"+(X?"</div>"+(U[0]>0&&y===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=B}u+=x}return u+=j,a._keyEvent=!1,u},_generateMonthYearHeader:function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o,p,q=this._get(a,"changeMonth"),r=this._get(a,"changeYear"),s=this._get(a,"showMonthAfterYear"),t="<div class='ui-datepicker-title'>",u="";if(f||!q)u+="<span class='ui-datepicker-month'>"+g[b]+"</span>";else{for(i=d&&d.getFullYear()===c,j=e&&e.getFullYear()===c,u+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",k=0;k<12;k++)(!i||k>=d.getMonth())&&(!j||k<=e.getMonth())&&(u+="<option value='"+k+"'"+(k===b?" selected='selected'":"")+">"+h[k]+"</option>");u+="</select>"}if(s||(t+=u+(!f&&q&&r?"":"&#xa0;")),!a.yearshtml)if(a.yearshtml="",f||!r)t+="<span class='ui-datepicker-year'>"+c+"</span>";else{for(l=this._get(a,"yearRange").split(":"),m=(new Date).getFullYear(),n=function(a){var b=a.match(/c[+\-].*/)?c+parseInt(a.substring(1),10):a.match(/[+\-].*/)?m+parseInt(a,10):parseInt(a,10);return isNaN(b)?m:b},o=n(l[0]),p=Math.max(o,n(l[1]||"")),o=d?Math.max(o,d.getFullYear()):o,p=e?Math.min(p,e.getFullYear()):p,a.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";o<=p;o++)a.yearshtml+="<option value='"+o+"'"+(o===c?" selected='selected'":"")+">"+o+"</option>";a.yearshtml+="</select>",t+=a.yearshtml,a.yearshtml=null}return t+=this._get(a,"yearSuffix"),s&&(t+=(!f&&q&&r?"":"&#xa0;")+u),t+="</div>"},_adjustInstDate:function(a,b,c){var d=a.selectedYear+("Y"===c?b:0),e=a.selectedMonth+("M"===c?b:0),f=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+("D"===c?b:0),g=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,f)));a.selectedDay=g.getDate(),a.drawMonth=a.selectedMonth=g.getMonth(),a.drawYear=a.selectedYear=g.getFullYear(),"M"!==c&&"Y"!==c||this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),e=c&&b<c?c:b;return d&&e>d?d:e},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){var b=this._get(a,"numberOfMonths");return null==b?[1,1]:"number"==typeof b?[1,b]:b},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return new Date(a,b,1).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a),f=this._daylightSavingAdjust(new Date(c,d+(b<0?b:e[0]*e[1]),1));return b<0&&f.setDate(this._getDaysInMonth(f.getFullYear(),f.getMonth())),this._isInRange(a,f)},_isInRange:function(a,b){var c,d,e=this._getMinMaxDate(a,"min"),f=this._getMinMaxDate(a,"max"),g=null,h=null,i=this._get(a,"yearRange");return i&&(c=i.split(":"),d=(new Date).getFullYear(),g=parseInt(c[0],10),h=parseInt(c[1],10),c[0].match(/[+\-].*/)&&(g+=d),c[1].match(/[+\-].*/)&&(h+=d)),(!e||b.getTime()>=e.getTime())&&(!f||b.getTime()<=f.getTime())&&(!g||b.getFullYear()>=g)&&(!h||b.getFullYear()<=h)},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);var e=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),e,this._getFormatConfig(a))}}),a.fn.datepicker=function(b){if(!this.length)return this;a.datepicker.initialized||(a(document).on("mousedown",a.datepicker._checkExternalClick),a.datepicker.initialized=!0),0===a("#"+a.datepicker._mainDivId).length&&a("body").append(a.datepicker.dpDiv);var c=Array.prototype.slice.call(arguments,1);return"string"!=typeof b||"isDisabled"!==b&&"getDate"!==b&&"widget"!==b?"option"===b&&2===arguments.length&&"string"==typeof arguments[1]?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c)):this.each(function(){"string"==typeof b?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this].concat(c)):a.datepicker._attachDatepicker(this,b)}):a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c))},a.datepicker=new d,a.datepicker.initialized=!1,a.datepicker.uuid=(new Date).getTime(),a.datepicker.version="1.12.1";a.datepicker;a.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(b){var c=a(this).css(b).offset().top;c<0&&a(this).css("top",b.top-c)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&a.fn.draggable&&this._makeDraggable(),this.options.resizable&&a.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var b=this.options.appendTo;return b&&(b.jquery||b.nodeType)?a(b):this.document.find(b||"body").eq(0)},_destroy:function(){var a,b=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),a=b.parent.children().eq(b.index),a.length&&a[0]!==this.element[0]?a.before(this.element):b.parent.append(this.element)},widget:function(){return this.uiDialog},disable:a.noop,enable:a.noop,close:function(b){var c=this;this._isOpen&&!1!==this._trigger("beforeClose",b)&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||a.ui.safeBlur(a.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,function(){c._trigger("close",b)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(b,c){var d=!1,e=this.uiDialog.siblings(".ui-front:visible").map(function(){return+a(this).css("z-index")}).get(),f=Math.max.apply(null,e);return f>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",f+1),d=!0),d&&!c&&this._trigger("focus",b),d},open:function(){var b=this;if(this._isOpen)return void(this._moveToTop()&&this._focusTabbable());this._isOpen=!0,this.opener=a(a.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){b._focusTabbable(),b._trigger("focus")}),this._makeFocusTarget(),this._trigger("open")},_focusTabbable:function(){var a=this._focusedElement;a||(a=this.element.find("[autofocus]")),a.length||(a=this.element.find(":tabbable")),a.length||(a=this.uiDialogButtonPane.find(":tabbable")),a.length||(a=this.uiDialogTitlebarClose.filter(":tabbable")),a.length||(a=this.uiDialog),a.eq(0).trigger("focus")},_keepFocus:function(b){function c(){var b=a.ui.safeActiveElement(this.document[0]);this.uiDialog[0]===b||a.contains(this.uiDialog[0],b)||this._focusTabbable()}b.preventDefault(),c.call(this),this._delay(c)},_createWrapper:function(){this.uiDialog=a("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(b){if(this.options.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===a.ui.keyCode.ESCAPE)return b.preventDefault(),void this.close(b);if(b.keyCode===a.ui.keyCode.TAB&&!b.isDefaultPrevented()){var c=this.uiDialog.find(":tabbable"),d=c.filter(":first"),e=c.filter(":last");b.target!==e[0]&&b.target!==this.uiDialog[0]||b.shiftKey?b.target!==d[0]&&b.target!==this.uiDialog[0]||!b.shiftKey||(this._delay(function(){e.trigger("focus")}),b.preventDefault()):(this._delay(function(){d.trigger("focus")}),b.preventDefault())}},mousedown:function(a){this._moveToTop(a)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var b;this.uiDialogTitlebar=a("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(b){a(b.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=a("<button type='button'></button>").button({label:a("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(a){a.preventDefault(),this.close(a)}}),b=a("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(b,"ui-dialog-title"),this._title(b),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":b.attr("id")})},_title:function(a){this.options.title?a.text(this.options.title):a.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=a("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=a("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var b=this,c=this.options.buttons;if(this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),a.isEmptyObject(c)||a.isArray(c)&&!c.length)return void this._removeClass(this.uiDialog,"ui-dialog-buttons");a.each(c,function(c,d){var e,f;d=a.isFunction(d)?{click:d,text:c}:d,d=a.extend({type:"button"},d),e=d.click,f={icon:d.icon,iconPosition:d.iconPosition,showLabel:d.showLabel,icons:d.icons,text:d.text},delete d.click,delete d.icon,delete d.iconPosition,delete d.showLabel,delete d.icons,"boolean"==typeof d.text&&delete d.text,a("<button></button>",d).button(f).appendTo(b.uiButtonSet).on("click",function(){e.apply(b.element[0],arguments)})}),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)},_makeDraggable:function(){function b(a){return{position:a.position,offset:a.offset}}var c=this,d=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(d,e){c._addClass(a(this),"ui-dialog-dragging"),c._blockFrames(),c._trigger("dragStart",d,b(e))},drag:function(a,d){c._trigger("drag",a,b(d))},stop:function(e,f){var g=f.offset.left-c.document.scrollLeft(),h=f.offset.top-c.document.scrollTop();d.position={my:"left top",at:"left"+(g>=0?"+":"")+g+" top"+(h>=0?"+":"")+h,of:c.window},c._removeClass(a(this),"ui-dialog-dragging"),c._unblockFrames(),c._trigger("dragStop",e,b(f))}})},_makeResizable:function(){function b(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}var c=this,d=this.options,e=d.resizable,f=this.uiDialog.css("position"),g="string"==typeof e?e:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:d.maxWidth,maxHeight:d.maxHeight,minWidth:d.minWidth,minHeight:this._minHeight(),handles:g,start:function(d,e){c._addClass(a(this),"ui-dialog-resizing"),c._blockFrames(),c._trigger("resizeStart",d,b(e))},resize:function(a,d){c._trigger("resize",a,b(d))},stop:function(e,f){var g=c.uiDialog.offset(),h=g.left-c.document.scrollLeft(),i=g.top-c.document.scrollTop();d.height=c.uiDialog.height(),d.width=c.uiDialog.width(),d.position={my:"left top",at:"left"+(h>=0?"+":"")+h+" top"+(i>=0?"+":"")+i,of:c.window},c._removeClass(a(this),"ui-dialog-resizing"),c._unblockFrames(),c._trigger("resizeStop",e,b(f))}}).css("position",f)},_trackFocus:function(){this._on(this.widget(),{focusin:function(b){this._makeFocusTarget(),this._focusedElement=a(b.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var b=this._trackingInstances(),c=a.inArray(this,b);-1!==c&&b.splice(c,1)},_trackingInstances:function(){var a=this.document.data("ui-dialog-instances");return a||(a=[],this.document.data("ui-dialog-instances",a)),a},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(){var a=this.uiDialog.is(":visible");a||this.uiDialog.show(),this.uiDialog.position(this.options.position),a||this.uiDialog.hide()},_setOptions:function(b){var c=this,d=!1,e={};a.each(b,function(a,b){c._setOption(a,b),a in c.sizeRelatedOptions&&(d=!0),a in c.resizableRelatedOptions&&(e[a]=b)}),d&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",e)},_setOption:function(b,c){var d,e,f=this.uiDialog;"disabled"!==b&&(this._super(b,c),"appendTo"===b&&this.uiDialog.appendTo(this._appendTo()),"buttons"===b&&this._createButtons(),"closeText"===b&&this.uiDialogTitlebarClose.button({label:a("<a>").text(""+this.options.closeText).html()}),"draggable"===b&&(d=f.is(":data(ui-draggable)"),d&&!c&&f.draggable("destroy"),!d&&c&&this._makeDraggable()),"position"===b&&this._position(),"resizable"===b&&(e=f.is(":data(ui-resizable)"),e&&!c&&f.resizable("destroy"),e&&"string"==typeof c&&f.resizable("option","handles",c),e||!1===c||this._makeResizable()),"title"===b&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var a,b,c,d=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),d.minWidth>d.width&&(d.width=d.minWidth),a=this.uiDialog.css({height:"auto",width:d.width}).outerHeight(),b=Math.max(0,d.minHeight-a),c="number"==typeof d.maxHeight?Math.max(0,d.maxHeight-a):"none","auto"===d.height?this.element.css({minHeight:b,maxHeight:c,height:"auto"}):this.element.height(Math.max(0,d.height-a)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var b=a(this);return a("<div>").css({position:"absolute",width:b.outerWidth(),height:b.outerHeight()}).appendTo(b.parent()).offset(b.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(b){return!!a(b.target).closest(".ui-dialog").length||!!a(b.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var b=!0;this._delay(function(){b=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(a){b||this._allowInteraction(a)||(a.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=a("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var a=this.document.data("ui-dialog-overlays")-1;a?this.document.data("ui-dialog-overlays",a):(this._off(this.document,"focusin"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null}}}),!1!==a.uiBackCompat&&a.widget("ui.dialog",a.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(a,b){"dialogClass"===a&&this.uiDialog.removeClass(this.options.dialogClass).addClass(b),this._superApply(arguments)}});a.ui.dialog,a.widget("ui.progressbar",{version:"1.12.1",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.attr({role:"progressbar","aria-valuemin":this.min}),this._addClass("ui-progressbar","ui-widget ui-widget-content"),this.valueDiv=a("<div>").appendTo(this.element),this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header"),this._refreshValue()},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow"),this.valueDiv.remove()},value:function(a){if(void 0===a)return this.options.value;this.options.value=this._constrainedValue(a),this._refreshValue()},_constrainedValue:function(a){return void 0===a&&(a=this.options.value),this.indeterminate=!1===a,"number"!=typeof a&&(a=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,a))},_setOptions:function(a){var b=a.value;delete a.value,this._super(a),this.options.value=this._constrainedValue(b),this._refreshValue()},_setOption:function(a,b){"max"===a&&(b=Math.max(this.min,b)),this._super(a,b)},_setOptionDisabled:function(a){this._super(a),this.element.attr("aria-disabled",a),this._toggleClass(null,"ui-state-disabled",!!a)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var b=this.options.value,c=this._percentage();this.valueDiv.toggle(this.indeterminate||b>this.min).width(c.toFixed(0)+"%"),this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,b===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=a("<div>").appendTo(this.valueDiv),this._addClass(this.overlayDiv,"ui-progressbar-overlay"))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":b}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==b&&(this.oldValue=b,this._trigger("change")),b===this.options.max&&this._trigger("complete")}}),a.widget("ui.selectmenu",[a.ui.formResetMixin,{version:"1.12.1",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){var b=this.element.uniqueId().attr("id");this.ids={element:b,button:b+"-button",menu:b+"-menu"},this._drawButton(),this._drawMenu(),this._bindFormResetHandler(),this._rendered=!1,this.menuItems=a()},_drawButton:function(){var b,c=this,d=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button),this._on(this.labels,{click:function(a){this.button.focus(),a.preventDefault()}}),this.element.hide(),this.button=a("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element),this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget"),b=a("<span>").appendTo(this.button),this._addClass(b,"ui-selectmenu-icon","ui-icon "+this.options.icons.button),this.buttonItem=this._renderButtonItem(d).appendTo(this.button),!1!==this.options.width&&this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){c._rendered||c._refreshMenu()})},_drawMenu:function(){var b=this;this.menu=a("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=a("<div>").append(this.menu),this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front"),this.menuWrap.appendTo(this._appendTo()),this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(a,c){a.preventDefault(),b._setSelection(),b._select(c.item.data("ui-selectmenu-item"),a)},focus:function(a,c){var d=c.item.data("ui-selectmenu-item");null!=b.focusIndex&&d.index!==b.focusIndex&&(b._trigger("focus",a,{item:d}),b.isOpen||b._select(d,a)),b.focusIndex=d.index,b.button.attr("aria-activedescendant",b.menuItems.eq(d.index).attr("id"))}}).menu("instance"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{})),null===this.options.width&&this._resizeButton()},_refreshMenu:function(){var a,b=this.element.find("option");this.menu.empty(),this._parseOptions(b),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper"),this._rendered=!0,b.length&&(a=this._getSelectedItem(),this.menuInstance.focus(null,a),this._setAria(a.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(a){this.options.disabled||(this._rendered?(this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.menuItems.length&&(this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",a)))},_position:function(){this.menuWrap.position(a.extend({of:this.button},this.options.position))},close:function(a){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",a))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(b){var c=a("<span>");return this._setText(c,b.label),this._addClass(c,"ui-selectmenu-text"),c},_renderMenu:function(b,c){var d=this,e="";a.each(c,function(c,f){var g;f.optgroup!==e&&(g=a("<li>",{text:f.optgroup}),d._addClass(g,"ui-selectmenu-optgroup","ui-menu-divider"+(f.element.parent("optgroup").prop("disabled")?" ui-state-disabled":"")),g.appendTo(b),e=f.optgroup),d._renderItemData(b,f)})},_renderItemData:function(a,b){return this._renderItem(a,b).data("ui-selectmenu-item",b)},_renderItem:function(b,c){var d=a("<li>"),e=a("<div>",{title:c.element.attr("title")});return c.disabled&&this._addClass(d,null,"ui-state-disabled"),this._setText(e,c.label),d.append(e).appendTo(b)},_setText:function(a,b){b?a.text(b):a.html("&#160;")},_move:function(a,b){var c,d,e=".ui-menu-item";this.isOpen?c=this.menuItems.eq(this.focusIndex).parent("li"):(c=this.menuItems.eq(this.element[0].selectedIndex).parent("li"),e+=":not(.ui-state-disabled)"),d="first"===a||"last"===a?c["first"===a?"prevAll":"nextAll"](e).eq(-1):c[a+"All"](e).eq(0),d.length&&this.menuInstance.focus(b,d)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(a){this[this.isOpen?"close":"open"](a)},_setSelection:function(){var a;this.range&&(window.getSelection?(a=window.getSelection(),a.removeAllRanges(),a.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(b){this.isOpen&&(a(b.target).closest(".ui-selectmenu-menu, #"+a.ui.escapeSelector(this.ids.button)).length||this.close(b))}},_buttonEvents:{mousedown:function(){var a;window.getSelection?(a=window.getSelection(),a.rangeCount&&(this.range=a.getRangeAt(0))):this.range=document.selection.createRange()},click:function(a){this._setSelection(),this._toggle(a)},keydown:function(b){var c=!0;switch(b.keyCode){case a.ui.keyCode.TAB:case a.ui.keyCode.ESCAPE:this.close(b),c=!1;break;case a.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(b);break;case a.ui.keyCode.UP:b.altKey?this._toggle(b):this._move("prev",b);break;case a.ui.keyCode.DOWN:b.altKey?this._toggle(b):this._move("next",b);break;case a.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(b):this._toggle(b);break;case a.ui.keyCode.LEFT:this._move("prev",b);break;case a.ui.keyCode.RIGHT:this._move("next",b);break;case a.ui.keyCode.HOME:case a.ui.keyCode.PAGE_UP:this._move("first",b);break;case a.ui.keyCode.END:case a.ui.keyCode.PAGE_DOWN:this._move("last",b);break;default:this.menu.trigger(b),c=!1}c&&b.preventDefault()}},_selectFocusedItem:function(a){var b=this.menuItems.eq(this.focusIndex).parent("li");b.hasClass("ui-state-disabled")||this._select(b.data("ui-selectmenu-item"),a)},_select:function(a,b){var c=this.element[0].selectedIndex;this.element[0].selectedIndex=a.index,this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(a)),this._setAria(a),this._trigger("select",b,{item:a}),a.index!==c&&this._trigger("change",b,{item:a}),this.close(b)},_setAria:function(a){var b=this.menuItems.eq(a.index).attr("id");this.button.attr({"aria-labelledby":b,"aria-activedescendant":b}),this.menu.attr("aria-activedescendant",b)},_setOption:function(a,b){if("icons"===a){var c=this.button.find("span.ui-icon");this._removeClass(c,null,this.options.icons.button)._addClass(c,null,b.button)}this._super(a,b),"appendTo"===a&&this.menuWrap.appendTo(this._appendTo()),"width"===a&&this._resizeButton()},_setOptionDisabled:function(a){this._super(a),this.menuInstance.option("disabled",a),this.button.attr("aria-disabled",a),this._toggleClass(this.button,null,"ui-state-disabled",a),this.element.prop("disabled",a),a?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)},_appendTo:function(){var b=this.options.appendTo;return b&&(b=b.jquery||b.nodeType?a(b):this.document.find(b).eq(0)),b&&b[0]||(b=this.element.closest(".ui-front, dialog")),b.length||(b=this.document[0].body),b},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen),this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var a=this.options.width;if(!1===a)return void this.button.css("width","");null===a&&(a=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(a)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){var a=this._super();return a.disabled=this.element.prop("disabled"),a},_parseOptions:function(b){var c=this,d=[];b.each(function(b,e){d.push(c._parseOption(a(e),b))}),this.items=d},_parseOption:function(a,b){var c=a.parent("optgroup");return{element:a,index:b,value:a.val(),label:a.text(),optgroup:c.attr("label")||"",disabled:c.prop("disabled")||a.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler(),this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.labels.attr("for",this.ids.element)}}]),a.widget("ui.slider",a.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var b,c,d=this.options,e=this.element.find(".ui-slider-handle"),f=[];for(c=d.values&&d.values.length||1,e.length>c&&(e.slice(c).remove(),e=e.slice(0,c)),b=e.length;b<c;b++)f.push("<span tabindex='0'></span>");this.handles=e.add(a(f.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(b){a(this).data("ui-slider-handle-index",b).attr("tabIndex",0)})},_createRange:function(){var b=this.options;b.range?(!0===b.range&&(b.values?b.values.length&&2!==b.values.length?b.values=[b.values[0],b.values[0]]:a.isArray(b.values)&&(b.values=b.values.slice(0)):b.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=a("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),"min"!==b.range&&"max"!==b.range||this._addClass(this.range,"ui-slider-range-"+b.range)):(this.range&&this.range.remove(),this.range=null)},
_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(b){var c,d,e,f,g,h,i,j=this,k=this.options;return!k.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),c={x:b.pageX,y:b.pageY},d=this._normValueFromMouse(c),e=this._valueMax()-this._valueMin()+1,this.handles.each(function(b){var c=Math.abs(d-j.values(b));(e>c||e===c&&(b===j._lastChangedValue||j.values(b)===k.min))&&(e=c,f=a(this),g=b)}),!1!==this._start(b,g)&&(this._mouseSliding=!0,this._handleIndex=g,this._addClass(f,null,"ui-state-active"),f.trigger("focus"),h=f.offset(),i=!a(b.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=i?{left:0,top:0}:{left:b.pageX-h.left-f.width()/2,top:b.pageY-h.top-f.height()/2-(parseInt(f.css("borderTopWidth"),10)||0)-(parseInt(f.css("borderBottomWidth"),10)||0)+(parseInt(f.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(b,g,d),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(a){var b={x:a.pageX,y:a.pageY},c=this._normValueFromMouse(b);return this._slide(a,this._handleIndex,c),!1},_mouseStop:function(a){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(a,this._handleIndex),this._change(a,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){var b,c,d,e,f;return"horizontal"===this.orientation?(b=this.elementSize.width,c=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,c=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),d=c/b,d>1&&(d=1),d<0&&(d=0),"vertical"===this.orientation&&(d=1-d),e=this._valueMax()-this._valueMin(),f=this._valueMin()+d*e,this._trimAlignValue(f)},_uiHash:function(a,b,c){var d={handle:this.handles[a],handleIndex:a,value:void 0!==b?b:this.value()};return this._hasMultipleValues()&&(d.value=void 0!==b?b:this.values(a),d.values=c||this.values()),d},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(a,b){return this._trigger("start",a,this._uiHash(b))},_slide:function(a,b,c){var d,e=this.value(),f=this.values();this._hasMultipleValues()&&(d=this.values(b?0:1),e=this.values(b),2===this.options.values.length&&!0===this.options.range&&(c=0===b?Math.min(d,c):Math.max(d,c)),f[b]=c),c!==e&&!1!==this._trigger("slide",a,this._uiHash(b,c,f))&&(this._hasMultipleValues()?this.values(b,c):this.value(c))},_stop:function(a,b){this._trigger("stop",a,this._uiHash(b))},_change:function(a,b){this._keySliding||this._mouseSliding||(this._lastChangedValue=b,this._trigger("change",a,this._uiHash(b)))},value:function(a){return arguments.length?(this.options.value=this._trimAlignValue(a),this._refreshValue(),void this._change(null,0)):this._value()},values:function(b,c){var d,e,f;if(arguments.length>1)return this.options.values[b]=this._trimAlignValue(c),this._refreshValue(),void this._change(null,b);if(!arguments.length)return this._values();if(!a.isArray(arguments[0]))return this._hasMultipleValues()?this._values(b):this.value();for(d=this.options.values,e=arguments[0],f=0;f<d.length;f+=1)d[f]=this._trimAlignValue(e[f]),this._change(null,f);this._refreshValue()},_setOption:function(b,c){var d,e=0;switch("range"===b&&!0===this.options.range&&("min"===c?(this.options.value=this._values(0),this.options.values=null):"max"===c&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),a.isArray(this.options.values)&&(e=this.options.values.length),this._super(b,c),b){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(c),this.handles.css("horizontal"===c?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),d=e-1;d>=0;d--)this._change(null,d);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(a){this._super(a),this._toggleClass(null,"ui-state-disabled",!!a)},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var b,c,d;if(arguments.length)return b=this.options.values[a],b=this._trimAlignValue(b);if(this._hasMultipleValues()){for(c=this.options.values.slice(),d=0;d<c.length;d+=1)c[d]=this._trimAlignValue(c[d]);return c}return[]},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=this.options.step>0?this.options.step:1,c=(a-this._valueMin())%b,d=a-c;return 2*Math.abs(c)>=b&&(d+=c>0?b:-b),parseFloat(d.toFixed(5))},_calculateNewMax:function(){var a=this.options.max,b=this._valueMin(),c=this.options.step;a=Math.round((a-b)/c)*c+b,a>this.options.max&&(a-=c),this.max=parseFloat(a.toFixed(this._precision()))},_precision:function(){var a=this._precisionOf(this.options.step);return null!==this.options.min&&(a=Math.max(a,this._precisionOf(this.options.min))),a},_precisionOf:function(a){var b=a.toString(),c=b.indexOf(".");return-1===c?0:b.length-c-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(a){"vertical"===a&&this.range.css({width:"",left:""}),"horizontal"===a&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var b,c,d,e,f,g=this.options.range,h=this.options,i=this,j=!this._animateOff&&h.animate,k={};this._hasMultipleValues()?this.handles.each(function(d){c=(i.values(d)-i._valueMin())/(i._valueMax()-i._valueMin())*100,k["horizontal"===i.orientation?"left":"bottom"]=c+"%",a(this).stop(1,1)[j?"animate":"css"](k,h.animate),!0===i.options.range&&("horizontal"===i.orientation?(0===d&&i.range.stop(1,1)[j?"animate":"css"]({left:c+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({width:c-b+"%"},{queue:!1,duration:h.animate})):(0===d&&i.range.stop(1,1)[j?"animate":"css"]({bottom:c+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({height:c-b+"%"},{queue:!1,duration:h.animate}))),b=c}):(d=this.value(),e=this._valueMin(),f=this._valueMax(),c=f!==e?(d-e)/(f-e)*100:0,k["horizontal"===this.orientation?"left":"bottom"]=c+"%",this.handle.stop(1,1)[j?"animate":"css"](k,h.animate),"min"===g&&"horizontal"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({width:c+"%"},h.animate),"max"===g&&"horizontal"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({width:100-c+"%"},h.animate),"min"===g&&"vertical"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({height:c+"%"},h.animate),"max"===g&&"vertical"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({height:100-c+"%"},h.animate))},_handleEvents:{keydown:function(b){var c,d,e,f=a(b.target).data("ui-slider-handle-index");switch(b.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(b.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(a(b.target),null,"ui-state-active"),!1===this._start(b,f)))return}switch(e=this.options.step,c=d=this._hasMultipleValues()?this.values(f):this.value(),b.keyCode){case a.ui.keyCode.HOME:d=this._valueMin();break;case a.ui.keyCode.END:d=this._valueMax();break;case a.ui.keyCode.PAGE_UP:d=this._trimAlignValue(c+(this._valueMax()-this._valueMin())/this.numPages);break;case a.ui.keyCode.PAGE_DOWN:d=this._trimAlignValue(c-(this._valueMax()-this._valueMin())/this.numPages);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(c===this._valueMax())return;d=this._trimAlignValue(c+e);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(c===this._valueMin())return;d=this._trimAlignValue(c-e)}this._slide(b,f,d)},keyup:function(b){var c=a(b.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(b,c),this._change(b,c),this._removeClass(a(b.target),null,"ui-state-active"))}}});a.widget("ui.spinner",{version:"1.12.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var b=this._super(),c=this.element;return a.each(["min","max","step"],function(a,d){var e=c.attr(d);null!=e&&e.length&&(b[d]=e)}),b},_events:{keydown:function(a){this._start(a)&&this._keydown(a)&&a.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(a){if(this.cancelBlur)return void delete this.cancelBlur;this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",a)},mousewheel:function(a,b){if(b){if(!this.spinning&&!this._start(a))return!1;this._spin((b>0?1:-1)*this.options.step,a),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(a)},100),a.preventDefault()}},"mousedown .ui-spinner-button":function(b){function c(){this.element[0]===a.ui.safeActiveElement(this.document[0])||(this.element.trigger("focus"),this.previous=d,this._delay(function(){this.previous=d}))}var d;d=this.element[0]===a.ui.safeActiveElement(this.document[0])?this.previous:this.element.val(),b.preventDefault(),c.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,c.call(this)}),!1!==this._start(b)&&this._repeat(null,a(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(b){if(a(b.currentTarget).hasClass("ui-state-active"))return!1!==this._start(b)&&void this._repeat(null,a(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b)},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function(){this._enhance(),this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content"),this._addClass("ui-spinner-input"),this.element.attr("role","spinbutton"),this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",!0).button({classes:{"ui-button":""}}),this._removeClass(this.buttons,"ui-corner-all"),this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up"),this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down"),this.buttons.first().button({icon:this.options.icons.up,showLabel:!1}),this.buttons.last().button({icon:this.options.icons.down,showLabel:!1}),this.buttons.height()>Math.ceil(.5*this.uiSpinner.height())&&this.uiSpinner.height()>0&&this.uiSpinner.height(this.uiSpinner.height())},_keydown:function(b){var c=this.options,d=a.ui.keyCode;switch(b.keyCode){case d.UP:return this._repeat(null,1,b),!0;case d.DOWN:return this._repeat(null,-1,b),!0;case d.PAGE_UP:return this._repeat(null,c.page,b),!0;case d.PAGE_DOWN:return this._repeat(null,-c.page,b),!0}return!1},_start:function(a){return!(!this.spinning&&!1===this._trigger("start",a))&&(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(a,b,c){a=a||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,b,c)},a),this._spin(b*this.options.step,c)},_spin:function(a,b){var c=this.value()||0;this.counter||(this.counter=1),c=this._adjustValue(c+a*this._increment(this.counter)),this.spinning&&!1===this._trigger("spin",b,{value:c})||(this._value(c),this.counter++)},_increment:function(b){var c=this.options.incremental;return c?a.isFunction(c)?c(b):Math.floor(b*b*b/5e4-b*b/500+17*b/200+1):1},_precision:function(){var a=this._precisionOf(this.options.step);return null!==this.options.min&&(a=Math.max(a,this._precisionOf(this.options.min))),a},_precisionOf:function(a){var b=a.toString(),c=b.indexOf(".");return-1===c?0:b.length-c-1},_adjustValue:function(a){var b,c,d=this.options;return b=null!==d.min?d.min:0,c=a-b,c=Math.round(c/d.step)*d.step,a=b+c,a=parseFloat(a.toFixed(this._precision())),null!==d.max&&a>d.max?d.max:null!==d.min&&a<d.min?d.min:a},_stop:function(a){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",a))},_setOption:function(a,b){var c,d,e;if("culture"===a||"numberFormat"===a)return c=this._parse(this.element.val()),this.options[a]=b,void this.element.val(this._format(c));"max"!==a&&"min"!==a&&"step"!==a||"string"==typeof b&&(b=this._parse(b)),"icons"===a&&(d=this.buttons.first().find(".ui-icon"),this._removeClass(d,null,this.options.icons.up),this._addClass(d,null,b.up),e=this.buttons.last().find(".ui-icon"),this._removeClass(e,null,this.options.icons.down),this._addClass(e,null,b.down)),this._super(a,b)},_setOptionDisabled:function(a){this._super(a),this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!a),this.element.prop("disabled",!!a),this.buttons.button(a?"disable":"enable")},_setOptions:h(function(a){this._super(a)}),_parse:function(a){return"string"==typeof a&&""!==a&&(a=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(a,10,this.options.culture):+a),""===a||isNaN(a)?null:a},_format:function(a){return""===a?"":window.Globalize&&this.options.numberFormat?Globalize.format(a,this.options.numberFormat,this.options.culture):a},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var a=this.value();return null!==a&&a===this._adjustValue(a)},_value:function(a,b){var c;""!==a&&null!==(c=this._parse(a))&&(b||(c=this._adjustValue(c)),a=this._format(c)),this.element.val(a),this._refresh()},_destroy:function(){this.element.prop("disabled",!1).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:h(function(a){this._stepUp(a)}),_stepUp:function(a){this._start()&&(this._spin((a||1)*this.options.step),this._stop())},stepDown:h(function(a){this._stepDown(a)}),_stepDown:function(a){this._start()&&(this._spin((a||1)*-this.options.step),this._stop())},pageUp:h(function(a){this._stepUp((a||1)*this.options.page)}),pageDown:h(function(a){this._stepDown((a||1)*this.options.page)}),value:function(a){if(!arguments.length)return this._parse(this.element.val());h(this._value).call(this,a)},widget:function(){return this.uiSpinner}}),!1!==a.uiBackCompat&&a.widget("ui.spinner",a.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a></a><a></a>"}});a.ui.spinner;a.widget("ui.tabs",{version:"1.12.1",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var a=/#.*$/;return function(b){var c,d;c=b.href.replace(a,""),d=location.href.replace(a,"");try{c=decodeURIComponent(c)}catch(a){}try{d=decodeURIComponent(d)}catch(a){}return b.hash.length>1&&c===d}}(),_create:function(){var b=this,c=this.options;this.running=!1,this._addClass("ui-tabs","ui-widget ui-widget-content"),this._toggleClass("ui-tabs-collapsible",null,c.collapsible),this._processTabs(),c.active=this._initialActive(),a.isArray(c.disabled)&&(c.disabled=a.unique(c.disabled.concat(a.map(this.tabs.filter(".ui-state-disabled"),function(a){return b.tabs.index(a)}))).sort()),!1!==this.options.active&&this.anchors.length?this.active=this._findActive(c.active):this.active=a(),this._refresh(),this.active.length&&this.load(c.active)},_initialActive:function(){var b=this.options.active,c=this.options.collapsible,d=location.hash.substring(1);return null===b&&(d&&this.tabs.each(function(c,e){if(a(e).attr("aria-controls")===d)return b=c,!1}),null===b&&(b=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null!==b&&-1!==b||(b=!!this.tabs.length&&0)),!1!==b&&-1===(b=this.tabs.index(this.tabs.eq(b)))&&(b=!c&&0),!c&&!1===b&&this.anchors.length&&(b=0),b},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):a()}},_tabKeydown:function(b){var c=a(a.ui.safeActiveElement(this.document[0])).closest("li"),d=this.tabs.index(c),e=!0;if(!this._handlePageNav(b)){switch(b.keyCode){case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:d++;break;case a.ui.keyCode.UP:case a.ui.keyCode.LEFT:e=!1,d--;break;case a.ui.keyCode.END:d=this.anchors.length-1;break;case a.ui.keyCode.HOME:d=0;break;case a.ui.keyCode.SPACE:return b.preventDefault(),clearTimeout(this.activating),void this._activate(d);case a.ui.keyCode.ENTER:return b.preventDefault(),clearTimeout(this.activating),void this._activate(d!==this.options.active&&d);default:return}b.preventDefault(),clearTimeout(this.activating),d=this._focusNextTab(d,e),b.ctrlKey||b.metaKey||(c.attr("aria-selected","false"),this.tabs.eq(d).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",d)},this.delay))}},_panelKeydown:function(b){this._handlePageNav(b)||b.ctrlKey&&b.keyCode===a.ui.keyCode.UP&&(b.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(b){return b.altKey&&b.keyCode===a.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):b.altKey&&b.keyCode===a.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(b,c){function d(){return b>e&&(b=0),b<0&&(b=e),b}for(var e=this.tabs.length-1;-1!==a.inArray(d(),this.options.disabled);)b=c?b+1:b-1;return b},_focusNextTab:function(a,b){return a=this._findNextTab(a,b),this.tabs.eq(a).trigger("focus"),a},_setOption:function(a,b){if("active"===a)return void this._activate(b);this._super(a,b),"collapsible"===a&&(this._toggleClass("ui-tabs-collapsible",null,b),b||!1!==this.options.active||this._activate(0)),"event"===a&&this._setupEvents(b),"heightStyle"===a&&this._setupHeightStyle(b)},_sanitizeSelector:function(a){return a?a.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var b=this.options,c=this.tablist.children(":has(a[href])");b.disabled=a.map(c.filter(".ui-state-disabled"),function(a){return c.index(a)}),this._processTabs(),!1!==b.active&&this.anchors.length?this.active.length&&!a.contains(this.tablist[0],this.active[0])?this.tabs.length===b.disabled.length?(b.active=!1,this.active=a()):this._activate(this._findNextTab(Math.max(0,b.active-1),!1)):b.active=this.tabs.index(this.active):(b.active=!1,this.active=a()),this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var b=this,c=this.tabs,d=this.anchors,e=this.panels;this.tablist=this._getList().attr("role","tablist"),this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header"),this.tablist.on("mousedown"+this.eventNamespace,"> li",function(b){a(this).is(".ui-state-disabled")&&b.preventDefault()}).on("focus"+this.eventNamespace,".ui-tabs-anchor",function(){a(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1}),this._addClass(this.tabs,"ui-tabs-tab","ui-state-default"),this.anchors=this.tabs.map(function(){return a("a",this)[0]}).attr({role:"presentation",tabIndex:-1}),this._addClass(this.anchors,"ui-tabs-anchor"),this.panels=a(),this.anchors.each(function(c,d){var e,f,g,h=a(d).uniqueId().attr("id"),i=a(d).closest("li"),j=i.attr("aria-controls");b._isLocal(d)?(e=d.hash,g=e.substring(1),f=b.element.find(b._sanitizeSelector(e))):(g=i.attr("aria-controls")||a({}).uniqueId()[0].id,e="#"+g,f=b.element.find(e),f.length||(f=b._createPanel(g),f.insertAfter(b.panels[c-1]||b.tablist)),f.attr("aria-live","polite")),f.length&&(b.panels=b.panels.add(f)),j&&i.data("ui-tabs-aria-controls",j),i.attr({"aria-controls":g,"aria-labelledby":h}),f.attr("aria-labelledby",h)}),this.panels.attr("role","tabpanel"),this._addClass(this.panels,"ui-tabs-panel","ui-widget-content"),c&&(this._off(c.not(this.tabs)),this._off(d.not(this.anchors)),this._off(e.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(b){return a("<div>").attr("id",b).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(b){var c,d,e;for(a.isArray(b)&&(b.length?b.length===this.anchors.length&&(b=!0):b=!1),e=0;d=this.tabs[e];e++)c=a(d),!0===b||-1!==a.inArray(e,b)?(c.attr("aria-disabled","true"),this._addClass(c,null,"ui-state-disabled")):(c.removeAttr("aria-disabled"),this._removeClass(c,null,"ui-state-disabled"));this.options.disabled=b,this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!0===b)},_setupEvents:function(b){var c={};b&&a.each(b.split(" "),function(a,b){c[b]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(a){a.preventDefault()}}),this._on(this.anchors,c),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(b){var c,d=this.element.parent();"fill"===b?(c=d.height(),c-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var b=a(this),d=b.css("position");"absolute"!==d&&"fixed"!==d&&(c-=b.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){c-=a(this).outerHeight(!0)}),this.panels.each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")):"auto"===b&&(c=0,this.panels.each(function(){c=Math.max(c,a(this).height("").height())}).height(c))},_eventHandler:function(b){var c=this.options,d=this.active,e=a(b.currentTarget),f=e.closest("li"),g=f[0]===d[0],h=g&&c.collapsible,i=h?a():this._getPanelForTab(f),j=d.length?this._getPanelForTab(d):a(),k={oldTab:d,oldPanel:j,newTab:h?a():f,newPanel:i};b.preventDefault(),f.hasClass("ui-state-disabled")||f.hasClass("ui-tabs-loading")||this.running||g&&!c.collapsible||!1===this._trigger("beforeActivate",b,k)||(c.active=!h&&this.tabs.index(f),this.active=g?a():f,this.xhr&&this.xhr.abort(),j.length||i.length||a.error("jQuery UI Tabs: Mismatching fragment identifier."),i.length&&this.load(this.tabs.index(f),b),this._toggle(b,k))},_toggle:function(b,c){function d(){f.running=!1,f._trigger("activate",b,c)}function e(){f._addClass(c.newTab.closest("li"),"ui-tabs-active","ui-state-active"),g.length&&f.options.show?f._show(g,f.options.show,d):(g.show(),d())}var f=this,g=c.newPanel,h=c.oldPanel;this.running=!0,h.length&&this.options.hide?this._hide(h,this.options.hide,function(){f._removeClass(c.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),e()}):(this._removeClass(c.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),h.hide(),e()),h.attr("aria-hidden","true"),c.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),g.length&&h.length?c.oldTab.attr("tabIndex",-1):g.length&&this.tabs.filter(function(){return 0===a(this).attr("tabIndex")}).attr("tabIndex",-1),g.attr("aria-hidden","false"),c.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(b){var c,d=this._findActive(b);d[0]!==this.active[0]&&(d.length||(d=this.active),c=d.find(".ui-tabs-anchor")[0],this._eventHandler({target:c,currentTarget:c,preventDefault:a.noop}))},_findActive:function(b){return!1===b?a():this.tabs.eq(b)},_getIndex:function(b){return"string"==typeof b&&(b=this.anchors.index(this.anchors.filter("[href$='"+a.ui.escapeSelector(b)+"']"))),b},_destroy:function(){this.xhr&&this.xhr.abort(),this.tablist.removeAttr("role").off(this.eventNamespace),this.anchors.removeAttr("role tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){a.data(this,"ui-tabs-destroy")?a(this).remove():a(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")}),this.tabs.each(function(){var b=a(this),c=b.data("ui-tabs-aria-controls");c?b.attr("aria-controls",c).removeData("ui-tabs-aria-controls"):b.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(b){var c=this.options.disabled;!1!==c&&(void 0===b?c=!1:(b=this._getIndex(b),c=a.isArray(c)?a.map(c,function(a){return a!==b?a:null}):a.map(this.tabs,function(a,c){return c!==b?c:null})),this._setOptionDisabled(c))},disable:function(b){var c=this.options.disabled;if(!0!==c){if(void 0===b)c=!0;else{if(b=this._getIndex(b),-1!==a.inArray(b,c))return;c=a.isArray(c)?a.merge([b],c).sort():[b]}this._setOptionDisabled(c)}},load:function(b,c){b=this._getIndex(b);var d=this,e=this.tabs.eq(b),f=e.find(".ui-tabs-anchor"),g=this._getPanelForTab(e),h={tab:e,panel:g},i=function(a,b){"abort"===b&&d.panels.stop(!1,!0),d._removeClass(e,"ui-tabs-loading"),g.removeAttr("aria-busy"),a===d.xhr&&delete d.xhr};this._isLocal(f[0])||(this.xhr=a.ajax(this._ajaxSettings(f,c,h)),this.xhr&&"canceled"!==this.xhr.statusText&&(this._addClass(e,"ui-tabs-loading"),g.attr("aria-busy","true"),this.xhr.done(function(a,b,e){setTimeout(function(){g.html(a),d._trigger("load",c,h),i(e,b)},1)}).fail(function(a,b){setTimeout(function(){i(a,b)},1)})))},_ajaxSettings:function(b,c,d){var e=this;return{url:b.attr("href").replace(/#.*$/,""),beforeSend:function(b,f){return e._trigger("beforeLoad",c,a.extend({jqXHR:b,ajaxSettings:f},d))}}},_getPanelForTab:function(b){var c=a(b).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+c))}}),!1!==a.uiBackCompat&&a.widget("ui.tabs",a.ui.tabs,{_processTabs:function(){this._superApply(arguments),this._addClass(this.tabs,"ui-tab")}});a.ui.tabs;a.widget("ui.tooltip",{version:"1.12.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var b=a(this).attr("title")||"";return a("<a>").text(b).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(b,c){var d=(b.attr("aria-describedby")||"").split(/\s+/);d.push(c),b.data("ui-tooltip-id",c).attr("aria-describedby",a.trim(d.join(" ")))},_removeDescribedBy:function(b){var c=b.data("ui-tooltip-id"),d=(b.attr("aria-describedby")||"").split(/\s+/),e=a.inArray(c,d);-1!==e&&d.splice(e,1),b.removeData("ui-tooltip-id"),d=a.trim(d.join(" ")),d?b.attr("aria-describedby",d):b.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.liveRegion=a("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this.disabledTitles=a([])},_setOption:function(b,c){var d=this;this._super(b,c),"content"===b&&a.each(this.tooltips,function(a,b){d._updateContent(b.element)})},_setOptionDisabled:function(a){this[a?"_disable":"_enable"]()},_disable:function(){var b=this;a.each(this.tooltips,function(c,d){var e=a.Event("blur");e.target=e.currentTarget=d.element[0],b.close(e,!0)}),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var b=a(this);if(b.is("[title]"))return b.data("ui-tooltip-title",b.attr("title")).removeAttr("title")}))},_enable:function(){this.disabledTitles.each(function(){var b=a(this);b.data("ui-tooltip-title")&&b.attr("title",b.data("ui-tooltip-title"))}),this.disabledTitles=a([])},open:function(b){var c=this,d=a(b?b.target:this.element).closest(this.options.items);d.length&&!d.data("ui-tooltip-id")&&(d.attr("title")&&d.data("ui-tooltip-title",d.attr("title")),d.data("ui-tooltip-open",!0),b&&"mouseover"===b.type&&d.parents().each(function(){var b,d=a(this);d.data("ui-tooltip-open")&&(b=a.Event("blur"),b.target=b.currentTarget=this,c.close(b,!0)),d.attr("title")&&(d.uniqueId(),c.parents[this.id]={element:this,title:d.attr("title")},d.attr("title",""))}),this._registerCloseHandlers(b,d),this._updateContent(d,b))},_updateContent:function(a,b){var c,d=this.options.content,e=this,f=b?b.type:null;if("string"==typeof d||d.nodeType||d.jquery)return this._open(b,a,d);(c=d.call(a[0],function(c){e._delay(function(){a.data("ui-tooltip-open")&&(b&&(b.type=f),this._open(b,a,c))})}))&&this._open(b,a,c)},_open:function(b,c,d){function e(a){j.of=a,g.is(":hidden")||g.position(j)}var f,g,h,i,j=a.extend({},this.options.position);if(d){if(f=this._find(c))return void f.tooltip.find(".ui-tooltip-content").html(d);c.is("[title]")&&(b&&"mouseover"===b.type?c.attr("title",""):c.removeAttr("title")),f=this._tooltip(c),g=f.tooltip,this._addDescribedBy(c,g.attr("id")),g.find(".ui-tooltip-content").html(d),this.liveRegion.children().hide(),i=a("<div>").html(g.find(".ui-tooltip-content").html()),i.removeAttr("name").find("[name]").removeAttr("name"),i.removeAttr("id").find("[id]").removeAttr("id"),i.appendTo(this.liveRegion),this.options.track&&b&&/^mouse/.test(b.type)?(this._on(this.document,{mousemove:e}),e(b)):g.position(a.extend({of:c},this.options.position)),g.hide(),this._show(g,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(h=this.delayedShow=setInterval(function(){g.is(":visible")&&(e(j.of),clearInterval(h))},a.fx.interval)),this._trigger("open",b,{tooltip:g})}},_registerCloseHandlers:function(b,c){var d={keyup:function(b){if(b.keyCode===a.ui.keyCode.ESCAPE){var d=a.Event(b);d.currentTarget=c[0],this.close(d,!0)}}};c[0]!==this.element[0]&&(d.remove=function(){this._removeTooltip(this._find(c).tooltip)}),b&&"mouseover"!==b.type||(d.mouseleave="close"),b&&"focusin"!==b.type||(d.focusout="close"),this._on(!0,c,d)},close:function(b){var c,d=this,e=a(b?b.currentTarget:this.element),f=this._find(e);if(!f)return void e.removeData("ui-tooltip-open");c=f.tooltip,f.closing||(clearInterval(this.delayedShow),e.data("ui-tooltip-title")&&!e.attr("title")&&e.attr("title",e.data("ui-tooltip-title")),this._removeDescribedBy(e),f.hiding=!0,c.stop(!0),this._hide(c,this.options.hide,function(){d._removeTooltip(a(this))}),e.removeData("ui-tooltip-open"),this._off(e,"mouseleave focusout keyup"),e[0]!==this.element[0]&&this._off(e,"remove"),this._off(this.document,"mousemove"),
b&&"mouseleave"===b.type&&a.each(this.parents,function(b,c){a(c.element).attr("title",c.title),delete d.parents[b]}),f.closing=!0,this._trigger("close",b,{tooltip:c}),f.hiding||(f.closing=!1))},_tooltip:function(b){var c=a("<div>").attr("role","tooltip"),d=a("<div>").appendTo(c),e=c.uniqueId().attr("id");return this._addClass(d,"ui-tooltip-content"),this._addClass(c,"ui-tooltip","ui-widget ui-widget-content"),c.appendTo(this._appendTo(b)),this.tooltips[e]={element:b,tooltip:c}},_find:function(a){var b=a.data("ui-tooltip-id");return b?this.tooltips[b]:null},_removeTooltip:function(a){a.remove(),delete this.tooltips[a.attr("id")]},_appendTo:function(a){var b=a.closest(".ui-front, dialog");return b.length||(b=this.document[0].body),b},_destroy:function(){var b=this;a.each(this.tooltips,function(c,d){var e=a.Event("blur"),f=d.element;e.target=e.currentTarget=f[0],b.close(e,!0),a("#"+c).remove(),f.data("ui-tooltip-title")&&(f.attr("title")||f.attr("title",f.data("ui-tooltip-title")),f.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}}),!1!==a.uiBackCompat&&a.widget("ui.tooltip",a.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var a=this._superApply(arguments);return this.options.tooltipClass&&a.tooltip.addClass(this.options.tooltipClass),a}});var o=(a.ui.tooltip,"ui-effects-"),p="ui-effects-style",q="ui-effects-animated",r=a;a.effects={effect:{}},function(a,b){function c(a,b,c){var d=l[b.type]||{};return null==a?c||!b.def?null:b.def:(a=d.floor?~~a:parseFloat(a),isNaN(a)?b.def:d.mod?(a+d.mod)%d.mod:0>a?0:d.max<a?d.max:a)}function d(b){var c=j(),d=c._rgba=[];return b=b.toLowerCase(),o(i,function(a,e){var f,g=e.re.exec(b),h=g&&e.parse(g),i=e.space||"rgba";if(h)return f=c[i](h),c[k[i].cache]=f[k[i].cache],d=c._rgba=f._rgba,!1}),d.length?("0,0,0,0"===d.join()&&a.extend(d,f.transparent),c):f[b]}function e(a,b,c){return c=(c+1)%1,6*c<1?a+(b-a)*c*6:2*c<1?b:3*c<2?a+(b-a)*(2/3-c)*6:a}var f,g="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",h=/^([\-+])=\s*(\d+\.?\d*)/,i=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],j=a.Color=function(b,c,d,e){return new a.Color.fn.parse(b,c,d,e)},k={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},l={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},m=j.support={},n=a("<p>")[0],o=a.each;n.style.cssText="background-color:rgba(1,1,1,.5)",m.rgba=n.style.backgroundColor.indexOf("rgba")>-1,o(k,function(a,b){b.cache="_"+a,b.props.alpha={idx:3,type:"percent",def:1}}),j.fn=a.extend(j.prototype,{parse:function(e,g,h,i){if(e===b)return this._rgba=[null,null,null,null],this;(e.jquery||e.nodeType)&&(e=a(e).css(g),g=b);var l=this,m=a.type(e),n=this._rgba=[];return g!==b&&(e=[e,g,h,i],m="array"),"string"===m?this.parse(d(e)||f._default):"array"===m?(o(k.rgba.props,function(a,b){n[b.idx]=c(e[b.idx],b)}),this):"object"===m?(e instanceof j?o(k,function(a,b){e[b.cache]&&(l[b.cache]=e[b.cache].slice())}):o(k,function(b,d){var f=d.cache;o(d.props,function(a,b){if(!l[f]&&d.to){if("alpha"===a||null==e[a])return;l[f]=d.to(l._rgba)}l[f][b.idx]=c(e[a],b,!0)}),l[f]&&a.inArray(null,l[f].slice(0,3))<0&&(l[f][3]=1,d.from&&(l._rgba=d.from(l[f])))}),this):void 0},is:function(a){var b=j(a),c=!0,d=this;return o(k,function(a,e){var f,g=b[e.cache];return g&&(f=d[e.cache]||e.to&&e.to(d._rgba)||[],o(e.props,function(a,b){if(null!=g[b.idx])return c=g[b.idx]===f[b.idx]})),c}),c},_space:function(){var a=[],b=this;return o(k,function(c,d){b[d.cache]&&a.push(c)}),a.pop()},transition:function(a,b){var d=j(a),e=d._space(),f=k[e],g=0===this.alpha()?j("transparent"):this,h=g[f.cache]||f.to(g._rgba),i=h.slice();return d=d[f.cache],o(f.props,function(a,e){var f=e.idx,g=h[f],j=d[f],k=l[e.type]||{};null!==j&&(null===g?i[f]=j:(k.mod&&(j-g>k.mod/2?g+=k.mod:g-j>k.mod/2&&(g-=k.mod)),i[f]=c((j-g)*b+g,e)))}),this[e](i)},blend:function(b){if(1===this._rgba[3])return this;var c=this._rgba.slice(),d=c.pop(),e=j(b)._rgba;return j(a.map(c,function(a,b){return(1-d)*e[b]+d*a}))},toRgbaString:function(){var b="rgba(",c=a.map(this._rgba,function(a,b){return null==a?b>2?1:0:a});return 1===c[3]&&(c.pop(),b="rgb("),b+c.join()+")"},toHslaString:function(){var b="hsla(",c=a.map(this.hsla(),function(a,b){return null==a&&(a=b>2?1:0),b&&b<3&&(a=Math.round(100*a)+"%"),a});return 1===c[3]&&(c.pop(),b="hsl("),b+c.join()+")"},toHexString:function(b){var c=this._rgba.slice(),d=c.pop();return b&&c.push(~~(255*d)),"#"+a.map(c,function(a){return a=(a||0).toString(16),1===a.length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),j.fn.parse.prototype=j.fn,k.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b,c,d=a[0]/255,e=a[1]/255,f=a[2]/255,g=a[3],h=Math.max(d,e,f),i=Math.min(d,e,f),j=h-i,k=h+i,l=.5*k;return b=i===h?0:d===h?60*(e-f)/j+360:e===h?60*(f-d)/j+120:60*(d-e)/j+240,c=0===j?0:l<=.5?j/k:j/(2-k),[Math.round(b)%360,c,l,null==g?1:g]},k.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/360,c=a[1],d=a[2],f=a[3],g=d<=.5?d*(1+c):d+c-d*c,h=2*d-g;return[Math.round(255*e(h,g,b+1/3)),Math.round(255*e(h,g,b)),Math.round(255*e(h,g,b-1/3)),f]},o(k,function(d,e){var f=e.props,g=e.cache,i=e.to,k=e.from;j.fn[d]=function(d){if(i&&!this[g]&&(this[g]=i(this._rgba)),d===b)return this[g].slice();var e,h=a.type(d),l="array"===h||"object"===h?d:arguments,m=this[g].slice();return o(f,function(a,b){var d=l["object"===h?a:b.idx];null==d&&(d=m[b.idx]),m[b.idx]=c(d,b)}),k?(e=j(k(m)),e[g]=m,e):j(m)},o(f,function(b,c){j.fn[b]||(j.fn[b]=function(e){var f,g=a.type(e),i="alpha"===b?this._hsla?"hsla":"rgba":d,j=this[i](),k=j[c.idx];return"undefined"===g?k:("function"===g&&(e=e.call(this,k),g=a.type(e)),null==e&&c.empty?this:("string"===g&&(f=h.exec(e))&&(e=k+parseFloat(f[2])*("+"===f[1]?1:-1)),j[c.idx]=e,this[i](j)))})})}),j.hook=function(b){var c=b.split(" ");o(c,function(b,c){a.cssHooks[c]={set:function(b,e){var f,g,h="";if("transparent"!==e&&("string"!==a.type(e)||(f=d(e)))){if(e=j(f||e),!m.rgba&&1!==e._rgba[3]){for(g="backgroundColor"===c?b.parentNode:b;(""===h||"transparent"===h)&&g&&g.style;)try{h=a.css(g,"backgroundColor"),g=g.parentNode}catch(a){}e=e.blend(h&&"transparent"!==h?h:"_default")}e=e.toRgbaString()}try{b.style[c]=e}catch(a){}}},a.fx.step[c]=function(b){b.colorInit||(b.start=j(b.elem,c),b.end=j(b.end),b.colorInit=!0),a.cssHooks[c].set(b.elem,b.start.transition(b.end,b.pos))}})},j.hook(g),a.cssHooks.borderColor={expand:function(a){var b={};return o(["Top","Right","Bottom","Left"],function(c,d){b["border"+d+"Color"]=a}),b}},f=a.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(r),function(){function b(b){var c,d,e=b.ownerDocument.defaultView?b.ownerDocument.defaultView.getComputedStyle(b,null):b.currentStyle,f={};if(e&&e.length&&e[0]&&e[e[0]])for(d=e.length;d--;)c=e[d],"string"==typeof e[c]&&(f[a.camelCase(c)]=e[c]);else for(c in e)"string"==typeof e[c]&&(f[c]=e[c]);return f}function c(b,c){var d,f,g={};for(d in c)f=c[d],b[d]!==f&&(e[d]||!a.fx.step[d]&&isNaN(parseFloat(f))||(g[d]=f));return g}var d=["add","remove","toggle"],e={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(b,c){a.fx.step[c]=function(a){("none"!==a.end&&!a.setAttr||1===a.pos&&!a.setAttr)&&(r.style(a.elem,c,a.end),a.setAttr=!0)}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a.effects.animateClass=function(e,f,g,h){var i=a.speed(f,g,h);return this.queue(function(){var f,g=a(this),h=g.attr("class")||"",j=i.children?g.find("*").addBack():g;j=j.map(function(){return{el:a(this),start:b(this)}}),f=function(){a.each(d,function(a,b){e[b]&&g[b+"Class"](e[b])})},f(),j=j.map(function(){return this.end=b(this.el[0]),this.diff=c(this.start,this.end),this}),g.attr("class",h),j=j.map(function(){var b=this,c=a.Deferred(),d=a.extend({},i,{queue:!1,complete:function(){c.resolve(b)}});return this.el.animate(this.diff,d),c.promise()}),a.when.apply(a,j.get()).done(function(){f(),a.each(arguments,function(){var b=this.el;a.each(this.diff,function(a){b.css(a,"")})}),i.complete.call(g[0])})})},a.fn.extend({addClass:function(b){return function(c,d,e,f){return d?a.effects.animateClass.call(this,{add:c},d,e,f):b.apply(this,arguments)}}(a.fn.addClass),removeClass:function(b){return function(c,d,e,f){return arguments.length>1?a.effects.animateClass.call(this,{remove:c},d,e,f):b.apply(this,arguments)}}(a.fn.removeClass),toggleClass:function(b){return function(c,d,e,f,g){return"boolean"==typeof d||void 0===d?e?a.effects.animateClass.call(this,d?{add:c}:{remove:c},e,f,g):b.apply(this,arguments):a.effects.animateClass.call(this,{toggle:c},d,e,f)}}(a.fn.toggleClass),switchClass:function(b,c,d,e,f){return a.effects.animateClass.call(this,{add:c,remove:b},d,e,f)}})}(),function(){function b(b,c,d,e){return a.isPlainObject(b)&&(c=b,b=b.effect),b={effect:b},null==c&&(c={}),a.isFunction(c)&&(e=c,d=null,c={}),("number"==typeof c||a.fx.speeds[c])&&(e=d,d=c,c={}),a.isFunction(d)&&(e=d,d=null),c&&a.extend(b,c),d=d||c.duration,b.duration=a.fx.off?0:"number"==typeof d?d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default,b.complete=e||c.complete,b}function c(b){return!(b&&"number"!=typeof b&&!a.fx.speeds[b])||("string"==typeof b&&!a.effects.effect[b]||(!!a.isFunction(b)||"object"==typeof b&&!b.effect))}function d(a,b){var c=b.outerWidth(),d=b.outerHeight(),e=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/,f=e.exec(a)||["",0,c,d,0];return{top:parseFloat(f[1])||0,right:"auto"===f[2]?c:parseFloat(f[2]),bottom:"auto"===f[3]?d:parseFloat(f[3]),left:parseFloat(f[4])||0}}a.expr&&a.expr.pseudos&&a.expr.pseudos.animated&&(a.expr.pseudos.animated=function(b){return function(c){return!!a(c).data(q)||b(c)}}(a.expr.pseudos.animated)),!1!==a.uiBackCompat&&a.extend(a.effects,{save:function(a,b){for(var c=0,d=b.length;c<d;c++)null!==b[c]&&a.data(o+b[c],a[0].style[b[c]])},restore:function(a,b){for(var c,d=0,e=b.length;d<e;d++)null!==b[d]&&(c=a.data(o+b[d]),a.css(b[d],c))},setMode:function(a,b){return"toggle"===b&&(b=a.is(":hidden")?"show":"hide"),b},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),float:b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e={width:b.width(),height:b.height()},f=document.activeElement;try{f.id}catch(a){f=document.body}return b.wrap(d),(b[0]===f||a.contains(b[0],f))&&a(f).trigger("focus"),d=b.parent(),"static"===b.css("position")?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d),isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),b.css(e),d.css(c).show()},removeWrapper:function(b){var c=document.activeElement;return b.parent().is(".ui-effects-wrapper")&&(b.parent().replaceWith(b),(b[0]===c||a.contains(b[0],c))&&a(c).trigger("focus")),b}}),a.extend(a.effects,{version:"1.12.1",define:function(b,c,d){return d||(d=c,c="effect"),a.effects.effect[b]=d,a.effects.effect[b].mode=c,d},scaledDimensions:function(a,b,c){if(0===b)return{height:0,width:0,outerHeight:0,outerWidth:0};var d="horizontal"!==c?(b||100)/100:1,e="vertical"!==c?(b||100)/100:1;return{height:a.height()*e,width:a.width()*d,outerHeight:a.outerHeight()*e,outerWidth:a.outerWidth()*d}},clipToBox:function(a){return{width:a.clip.right-a.clip.left,height:a.clip.bottom-a.clip.top,left:a.clip.left,top:a.clip.top}},unshift:function(a,b,c){var d=a.queue();b>1&&d.splice.apply(d,[1,0].concat(d.splice(b,c))),a.dequeue()},saveStyle:function(a){a.data(p,a[0].style.cssText)},restoreStyle:function(a){a[0].style.cssText=a.data(p)||"",a.removeData(p)},mode:function(a,b){var c=a.is(":hidden");return"toggle"===b&&(b=c?"show":"hide"),(c?"hide"===b:"show"===b)&&(b="none"),b},getBaseline:function(a,b){var c,d;switch(a[0]){case"top":c=0;break;case"middle":c=.5;break;case"bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case"left":d=0;break;case"center":d=.5;break;case"right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createPlaceholder:function(b){var c,d=b.css("position"),e=b.position();return b.css({marginTop:b.css("marginTop"),marginBottom:b.css("marginBottom"),marginLeft:b.css("marginLeft"),marginRight:b.css("marginRight")}).outerWidth(b.outerWidth()).outerHeight(b.outerHeight()),/^(static|relative)/.test(d)&&(d="absolute",c=a("<"+b[0].nodeName+">").insertAfter(b).css({display:/^(inline|ruby)/.test(b.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:b.css("marginTop"),marginBottom:b.css("marginBottom"),marginLeft:b.css("marginLeft"),marginRight:b.css("marginRight"),float:b.css("float")}).outerWidth(b.outerWidth()).outerHeight(b.outerHeight()).addClass("ui-effects-placeholder"),b.data(o+"placeholder",c)),b.css({position:d,left:e.left,top:e.top}),c},removePlaceholder:function(a){var b=o+"placeholder",c=a.data(b);c&&(c.remove(),a.removeData(b))},cleanUp:function(b){a.effects.restoreStyle(b),a.effects.removePlaceholder(b)},setTransition:function(b,c,d,e){return e=e||{},a.each(c,function(a,c){var f=b.cssUnit(c);f[0]>0&&(e[c]=f[0]*d+f[1])}),e}}),a.fn.extend({effect:function(){function c(b){function c(){h.removeData(q),a.effects.cleanUp(h),"hide"===d.mode&&h.hide(),g()}function g(){a.isFunction(i)&&i.call(h[0]),a.isFunction(b)&&b()}var h=a(this);d.mode=k.shift(),!1===a.uiBackCompat||f?"none"===d.mode?(h[j](),g()):e.call(h[0],d,c):(h.is(":hidden")?"hide"===j:"show"===j)?(h[j](),g()):e.call(h[0],d,g)}var d=b.apply(this,arguments),e=a.effects.effect[d.effect],f=e.mode,g=d.queue,h=g||"fx",i=d.complete,j=d.mode,k=[],l=function(b){var c=a(this),d=a.effects.mode(c,j)||f;c.data(q,!0),k.push(d),f&&("show"===d||d===f&&"hide"===d)&&c.show(),f&&"none"===d||a.effects.saveStyle(c),a.isFunction(b)&&b()};return a.fx.off||!e?j?this[j](d.duration,i):this.each(function(){i&&i.call(this)}):!1===g?this.each(l).each(c):this.queue(h,l).queue(h,c)},show:function(a){return function(d){if(c(d))return a.apply(this,arguments);var e=b.apply(this,arguments);return e.mode="show",this.effect.call(this,e)}}(a.fn.show),hide:function(a){return function(d){if(c(d))return a.apply(this,arguments);var e=b.apply(this,arguments);return e.mode="hide",this.effect.call(this,e)}}(a.fn.hide),toggle:function(a){return function(d){if(c(d)||"boolean"==typeof d)return a.apply(this,arguments);var e=b.apply(this,arguments);return e.mode="toggle",this.effect.call(this,e)}}(a.fn.toggle),cssUnit:function(b){var c=this.css(b),d=[];return a.each(["em","px","%","pt"],function(a,b){c.indexOf(b)>0&&(d=[parseFloat(c),b])}),d},cssClip:function(a){return a?this.css("clip","rect("+a.top+"px "+a.right+"px "+a.bottom+"px "+a.left+"px)"):d(this.css("clip"),this)},transfer:function(b,c){var d=a(this),e=a(b.to),f="fixed"===e.css("position"),g=a("body"),h=f?g.scrollTop():0,i=f?g.scrollLeft():0,j=e.offset(),k={top:j.top-h,left:j.left-i,height:e.innerHeight(),width:e.innerWidth()},l=d.offset(),m=a("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(b.className).css({top:l.top-h,left:l.left-i,height:d.innerHeight(),width:d.innerWidth(),position:f?"fixed":"absolute"}).animate(k,b.duration,b.easing,function(){m.remove(),a.isFunction(c)&&c()})}}),a.fx.step.clip=function(b){b.clipInit||(b.start=a(b.elem).cssClip(),"string"==typeof b.end&&(b.end=d(b.end,b.elem)),b.clipInit=!0),a(b.elem).cssClip({top:b.pos*(b.end.top-b.start.top)+b.start.top,right:b.pos*(b.end.right-b.start.right)+b.start.right,bottom:b.pos*(b.end.bottom-b.start.bottom)+b.start.bottom,left:b.pos*(b.end.left-b.start.left)+b.start.left})}}(),function(){var b={};a.each(["Quad","Cubic","Quart","Quint","Expo"],function(a,c){b[c]=function(b){return Math.pow(b,a+2)}}),a.extend(b,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var b,c=4;a<((b=Math.pow(2,--c))-1)/11;);return 1/Math.pow(4,3-c)-7.5625*Math.pow((3*b-2)/22-a,2)}}),a.each(b,function(b,c){a.easing["easeIn"+b]=c,a.easing["easeOut"+b]=function(a){return 1-c(1-a)},a.easing["easeInOut"+b]=function(a){return a<.5?c(2*a)/2:1-c(-2*a+2)/2}})}();a.effects,a.effects.define("blind","hide",function(b,c){var d={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},e=a(this),f=b.direction||"up",g=e.cssClip(),h={clip:a.extend({},g)},i=a.effects.createPlaceholder(e);h.clip[d[f][0]]=h.clip[d[f][1]],"show"===b.mode&&(e.cssClip(h.clip),i&&i.css(a.effects.clipToBox(h)),h.clip=g),i&&i.animate(a.effects.clipToBox(h),b.duration,b.easing),e.animate(h,{queue:!1,duration:b.duration,easing:b.easing,complete:c})}),a.effects.define("bounce",function(b,c){var d,e,f,g=a(this),h=b.mode,i="hide"===h,j="show"===h,k=b.direction||"up",l=b.distance,m=b.times||5,n=2*m+(j||i?1:0),o=b.duration/n,p=b.easing,q="up"===k||"down"===k?"top":"left",r="up"===k||"left"===k,s=0,t=g.queue().length;for(a.effects.createPlaceholder(g),f=g.css(q),l||(l=g["top"===q?"outerHeight":"outerWidth"]()/3),j&&(e={opacity:1},e[q]=f,g.css("opacity",0).css(q,r?2*-l:2*l).animate(e,o,p)),i&&(l/=Math.pow(2,m-1)),e={},e[q]=f;s<m;s++)d={},d[q]=(r?"-=":"+=")+l,g.animate(d,o,p).animate(e,o,p),l=i?2*l:l/2;i&&(d={opacity:0},d[q]=(r?"-=":"+=")+l,g.animate(d,o,p)),g.queue(c),a.effects.unshift(g,t,n+1)}),a.effects.define("clip","hide",function(b,c){var d,e={},f=a(this),g=b.direction||"vertical",h="both"===g,i=h||"horizontal"===g,j=h||"vertical"===g;d=f.cssClip(),e.clip={top:j?(d.bottom-d.top)/2:d.top,right:i?(d.right-d.left)/2:d.right,bottom:j?(d.bottom-d.top)/2:d.bottom,left:i?(d.right-d.left)/2:d.left},a.effects.createPlaceholder(f),"show"===b.mode&&(f.cssClip(e.clip),e.clip=d),f.animate(e,{queue:!1,duration:b.duration,easing:b.easing,complete:c})}),a.effects.define("drop","hide",function(b,c){var d,e=a(this),f=b.mode,g="show"===f,h=b.direction||"left",i="up"===h||"down"===h?"top":"left",j="up"===h||"left"===h?"-=":"+=",k="+="===j?"-=":"+=",l={opacity:0};a.effects.createPlaceholder(e),d=b.distance||e["top"===i?"outerHeight":"outerWidth"](!0)/2,l[i]=j+d,g&&(e.css(l),l[i]=k+d,l.opacity=1),e.animate(l,{queue:!1,duration:b.duration,easing:b.easing,complete:c})}),a.effects.define("explode","hide",function(b,c){function d(){t.push(this),t.length===l*m&&e()}function e(){n.css({visibility:"visible"}),a(t).remove(),c()}var f,g,h,i,j,k,l=b.pieces?Math.round(Math.sqrt(b.pieces)):3,m=l,n=a(this),o=b.mode,p="show"===o,q=n.show().css("visibility","hidden").offset(),r=Math.ceil(n.outerWidth()/m),s=Math.ceil(n.outerHeight()/l),t=[];for(f=0;f<l;f++)for(i=q.top+f*s,k=f-(l-1)/2,g=0;g<m;g++)h=q.left+g*r,j=g-(m-1)/2,n.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-g*r,top:-f*s}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:r,height:s,left:h+(p?j*r:0),top:i+(p?k*s:0),opacity:p?0:1}).animate({left:h+(p?0:j*r),top:i+(p?0:k*s),opacity:p?1:0},b.duration||500,b.easing,d)}),a.effects.define("fade","toggle",function(b,c){var d="show"===b.mode;a(this).css("opacity",d?0:1).animate({opacity:d?1:0},{queue:!1,duration:b.duration,easing:b.easing,complete:c})}),a.effects.define("fold","hide",function(b,c){var d=a(this),e=b.mode,f="show"===e,g="hide"===e,h=b.size||15,i=/([0-9]+)%/.exec(h),j=!!b.horizFirst,k=j?["right","bottom"]:["bottom","right"],l=b.duration/2,m=a.effects.createPlaceholder(d),n=d.cssClip(),o={clip:a.extend({},n)},p={clip:a.extend({},n)},q=[n[k[0]],n[k[1]]],r=d.queue().length;i&&(h=parseInt(i[1],10)/100*q[g?0:1]),o.clip[k[0]]=h,p.clip[k[0]]=h,p.clip[k[1]]=0,f&&(d.cssClip(p.clip),m&&m.css(a.effects.clipToBox(p)),p.clip=n),d.queue(function(c){m&&m.animate(a.effects.clipToBox(o),l,b.easing).animate(a.effects.clipToBox(p),l,b.easing),c()}).animate(o,l,b.easing).animate(p,l,b.easing).queue(c),a.effects.unshift(d,r,4)}),a.effects.define("highlight","show",function(b,c){var d=a(this),e={backgroundColor:d.css("backgroundColor")};"hide"===b.mode&&(e.opacity=0),a.effects.saveStyle(d),d.css({backgroundImage:"none",backgroundColor:b.color||"#ffff99"}).animate(e,{queue:!1,duration:b.duration,easing:b.easing,complete:c})}),a.effects.define("size",function(b,c){var d,e,f,g=a(this),h=["fontSize"],i=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],j=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],k=b.mode,l="effect"!==k,m=b.scale||"both",n=b.origin||["middle","center"],o=g.css("position"),p=g.position(),q=a.effects.scaledDimensions(g),r=b.from||q,s=b.to||a.effects.scaledDimensions(g,0);a.effects.createPlaceholder(g),"show"===k&&(f=r,r=s,s=f),e={from:{y:r.height/q.height,x:r.width/q.width},to:{y:s.height/q.height,x:s.width/q.width}},"box"!==m&&"both"!==m||(e.from.y!==e.to.y&&(r=a.effects.setTransition(g,i,e.from.y,r),s=a.effects.setTransition(g,i,e.to.y,s)),e.from.x!==e.to.x&&(r=a.effects.setTransition(g,j,e.from.x,r),s=a.effects.setTransition(g,j,e.to.x,s))),"content"!==m&&"both"!==m||e.from.y!==e.to.y&&(r=a.effects.setTransition(g,h,e.from.y,r),s=a.effects.setTransition(g,h,e.to.y,s)),n&&(d=a.effects.getBaseline(n,q),r.top=(q.outerHeight-r.outerHeight)*d.y+p.top,r.left=(q.outerWidth-r.outerWidth)*d.x+p.left,s.top=(q.outerHeight-s.outerHeight)*d.y+p.top,s.left=(q.outerWidth-s.outerWidth)*d.x+p.left),g.css(r),"content"!==m&&"both"!==m||(i=i.concat(["marginTop","marginBottom"]).concat(h),j=j.concat(["marginLeft","marginRight"]),g.find("*[width]").each(function(){var c=a(this),d=a.effects.scaledDimensions(c),f={height:d.height*e.from.y,width:d.width*e.from.x,outerHeight:d.outerHeight*e.from.y,outerWidth:d.outerWidth*e.from.x},g={height:d.height*e.to.y,width:d.width*e.to.x,outerHeight:d.height*e.to.y,outerWidth:d.width*e.to.x};e.from.y!==e.to.y&&(f=a.effects.setTransition(c,i,e.from.y,f),g=a.effects.setTransition(c,i,e.to.y,g)),e.from.x!==e.to.x&&(f=a.effects.setTransition(c,j,e.from.x,f),g=a.effects.setTransition(c,j,e.to.x,g)),l&&a.effects.saveStyle(c),c.css(f),c.animate(g,b.duration,b.easing,function(){l&&a.effects.restoreStyle(c)})})),g.animate(s,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){var b=g.offset();0===s.opacity&&g.css("opacity",r.opacity),l||(g.css("position","static"===o?"relative":o).offset(b),a.effects.saveStyle(g)),c()}})}),a.effects.define("scale",function(b,c){var d=a(this),e=b.mode,f=parseInt(b.percent,10)||(0===parseInt(b.percent,10)?0:"effect"!==e?0:100),g=a.extend(!0,{from:a.effects.scaledDimensions(d),to:a.effects.scaledDimensions(d,f,b.direction||"both"),origin:b.origin||["middle","center"]},b);b.fade&&(g.from.opacity=1,g.to.opacity=0),a.effects.effect.size.call(this,g,c)}),a.effects.define("puff","hide",function(b,c){var d=a.extend(!0,{},b,{fade:!0,percent:parseInt(b.percent,10)||150});a.effects.effect.scale.call(this,d,c)}),a.effects.define("pulsate","show",function(b,c){var d=a(this),e=b.mode,f="show"===e,g="hide"===e,h=f||g,i=2*(b.times||5)+(h?1:0),j=b.duration/i,k=0,l=1,m=d.queue().length;for(!f&&d.is(":visible")||(d.css("opacity",0).show(),k=1);l<i;l++)d.animate({opacity:k},j,b.easing),k=1-k;d.animate({opacity:k},j,b.easing),d.queue(c),a.effects.unshift(d,m,i+1)}),a.effects.define("shake",function(b,c){var d=1,e=a(this),f=b.direction||"left",g=b.distance||20,h=b.times||3,i=2*h+1,j=Math.round(b.duration/i),k="up"===f||"down"===f?"top":"left",l="up"===f||"left"===f,m={},n={},o={},p=e.queue().length;for(a.effects.createPlaceholder(e),m[k]=(l?"-=":"+=")+g,n[k]=(l?"+=":"-=")+2*g,o[k]=(l?"-=":"+=")+2*g,e.animate(m,j,b.easing);d<h;d++)e.animate(n,j,b.easing).animate(o,j,b.easing);e.animate(n,j,b.easing).animate(m,j/2,b.easing).queue(c),a.effects.unshift(e,p,i+1)}),a.effects.define("slide","show",function(b,c){var d,e,f=a(this),g={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},h=b.mode,i=b.direction||"left",j="up"===i||"down"===i?"top":"left",k="up"===i||"left"===i,l=b.distance||f["top"===j?"outerHeight":"outerWidth"](!0),m={};a.effects.createPlaceholder(f),d=f.cssClip(),e=f.position()[j],m[j]=(k?-1:1)*l+e,m.clip=f.cssClip(),m.clip[g[i][1]]=m.clip[g[i][0]],"show"===h&&(f.cssClip(m.clip),f.css(j,m[j]),m.clip=d,m[j]=e),f.animate(m,{queue:!1,duration:b.duration,easing:b.easing,complete:c})});!1!==a.uiBackCompat&&a.effects.define("transfer",function(b,c){a(this).transfer(b,c)})})},{}],256:[function(b,c,d){!function(a,b){"use strict";"object"==typeof c&&"object"==typeof c.exports?c.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(b,c){"use strict";function d(a,b,c){c=c||ja;var d,e,f=c.createElement("script");if(f.text=a,b)for(d in xa)(e=b[d]||b.getAttribute&&b.getAttribute(d))&&f.setAttribute(d,e);c.head.appendChild(f).parentNode.removeChild(f)}function e(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?pa[qa.call(a)]||"object":typeof a}function f(a){var b=!!a&&"length"in a&&a.length,c=e(a);return!va(a)&&!wa(a)&&("array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a)}function g(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()}function h(a,b,c){return va(b)?za.grep(a,function(a,d){return!!b.call(a,d,a)!==c}):b.nodeType?za.grep(a,function(a){return a===b!==c}):"string"!=typeof b?za.grep(a,function(a){return oa.call(b,a)>-1!==c}):za.filter(b,a,c)}function i(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function j(a){var b={};return za.each(a.match(Ka)||[],function(a,c){b[c]=!0}),b}function k(a){return a}function l(a){throw a}function m(a,b,c,d){var e;try{a&&va(e=a.promise)?e.call(a).done(b).fail(c):a&&va(e=a.then)?e.call(a,b,c):b.apply(void 0,[a].slice(d))}catch(a){c.apply(void 0,[a])}}function n(){ja.removeEventListener("DOMContentLoaded",n),b.removeEventListener("load",n),za.ready()}function o(a,b){return b.toUpperCase()}function p(a){return a.replace(Oa,"ms-").replace(Pa,o)}function q(){this.expando=za.expando+q.uid++}function r(a){return"true"===a||"false"!==a&&("null"===a?null:a===+a+""?+a:Ta.test(a)?JSON.parse(a):a)}function s(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(Ua,"-$&").toLowerCase(),"string"==typeof(c=a.getAttribute(d))){try{c=r(c)}catch(a){}Sa.set(a,b,c)}else c=void 0;return c}function t(a,b,c,d){var e,f,g=20,h=d?function(){return d.cur()}:function(){return za.css(a,b,"")},i=h(),j=c&&c[3]||(za.cssNumber[b]?"":"px"),k=a.nodeType&&(za.cssNumber[b]||"px"!==j&&+i)&&Wa.exec(za.css(a,b));if(k&&k[3]!==j){for(i/=2,j=j||k[3],k=+i||1;g--;)za.style(a,b,k+j),(1-f)*(1-(f=h()/i||.5))<=0&&(g=0),k/=f;k*=2,za.style(a,b,k+j),c=c||[]}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}function u(a){var b,c=a.ownerDocument,d=a.nodeName,e=bb[d];return e||(b=c.body.appendChild(c.createElement(d)),e=za.css(b,"display"),b.parentNode.removeChild(b),"none"===e&&(e="block"),bb[d]=e,e)}function v(a,b){for(var c,d,e=[],f=0,g=a.length;f<g;f++)d=a[f],d.style&&(c=d.style.display,b?("none"===c&&(e[f]=Ra.get(d,"display")||null,e[f]||(d.style.display="")),""===d.style.display&&_a(d)&&(e[f]=u(d))):"none"!==c&&(e[f]="none",Ra.set(d,"display",c)));for(f=0;f<g;f++)null!=e[f]&&(a[f].style.display=e[f]);return a}function w(a,b){var c;return c=void 0!==a.getElementsByTagName?a.getElementsByTagName(b||"*"):void 0!==a.querySelectorAll?a.querySelectorAll(b||"*"):[],void 0===b||b&&g(a,b)?za.merge([a],c):c}function x(a,b){for(var c=0,d=a.length;c<d;c++)Ra.set(a[c],"globalEval",!b||Ra.get(b[c],"globalEval"))}function y(a,b,c,d,f){for(var g,h,i,j,k,l,m=b.createDocumentFragment(),n=[],o=0,p=a.length;o<p;o++)if((g=a[o])||0===g)if("object"===e(g))za.merge(n,g.nodeType?[g]:g);else if(gb.test(g)){for(h=h||m.appendChild(b.createElement("div")),i=(db.exec(g)||["",""])[1].toLowerCase(),j=fb[i]||fb._default,h.innerHTML=j[1]+za.htmlPrefilter(g)+j[2],l=j[0];l--;)h=h.lastChild;za.merge(n,h.childNodes),h=m.firstChild,h.textContent=""}else n.push(b.createTextNode(g));for(m.textContent="",o=0;g=n[o++];)if(d&&za.inArray(g,d)>-1)f&&f.push(g);else if(k=Za(g),h=w(m.appendChild(g),"script"),k&&x(h),c)for(l=0;g=h[l++];)eb.test(g.type||"")&&c.push(g);return m}function z(){return!0}function A(){return!1}function B(a,b){return a===C()==("focus"===b)}function C(){try{return ja.activeElement}catch(a){}}function D(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)D(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),!1===e)e=A;else if(!e)return a;return 1===f&&(g=e,e=function(a){return za().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=za.guid++)),a.each(function(){za.event.add(this,b,e,d,c)})}function E(a,b,c){if(!c)return void(void 0===Ra.get(a,b)&&za.event.add(a,b,z));Ra.set(a,b,!1),za.event.add(a,b,{namespace:!1,handler:function(a){var d,e,f=Ra.get(this,b);if(1&a.isTrigger&&this[b]){if(f.length)(za.event.special[b]||{}).delegateType&&a.stopPropagation();else if(f=la.call(arguments),Ra.set(this,b,f),d=c(this,b),this[b](),e=Ra.get(this,b),f!==e||d?Ra.set(this,b,!1):e={},f!==e)return a.stopImmediatePropagation(),a.preventDefault(),e.value}else f.length&&(Ra.set(this,b,{value:za.event.trigger(za.extend(f[0],za.Event.prototype),f.slice(1),this)}),a.stopImmediatePropagation())}})}function F(a,b){return g(a,"table")&&g(11!==b.nodeType?b:b.firstChild,"tr")?za(a).children("tbody")[0]||a:a}function G(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function H(a){return"true/"===(a.type||"").slice(0,5)?a.type=a.type.slice(5):a.removeAttribute("type"),a}function I(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(Ra.hasData(a)&&(f=Ra.access(a),g=Ra.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;c<d;c++)za.event.add(b,e,j[e][c])}Sa.hasData(a)&&(h=Sa.access(a),i=za.extend({},h),Sa.set(b,i))}}function J(a,b){var c=b.nodeName.toLowerCase();"input"===c&&cb.test(a.type)?b.checked=a.checked:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}function K(a,b,c,e){b=ma.apply([],b);var f,g,h,i,j,k,l=0,m=a.length,n=m-1,o=b[0],p=va(o);if(p||m>1&&"string"==typeof o&&!ua.checkClone&&mb.test(o))return a.each(function(d){var f=a.eq(d);p&&(b[0]=o.call(this,d,f.html())),K(f,b,c,e)});if(m&&(f=y(b,a[0].ownerDocument,!1,a,e),
g=f.firstChild,1===f.childNodes.length&&(f=g),g||e)){for(h=za.map(w(f,"script"),G),i=h.length;l<m;l++)j=f,l!==n&&(j=za.clone(j,!0,!0),i&&za.merge(h,w(j,"script"))),c.call(a[l],j,l);if(i)for(k=h[h.length-1].ownerDocument,za.map(h,H),l=0;l<i;l++)j=h[l],eb.test(j.type||"")&&!Ra.access(j,"globalEval")&&za.contains(k,j)&&(j.src&&"module"!==(j.type||"").toLowerCase()?za._evalUrl&&!j.noModule&&za._evalUrl(j.src,{nonce:j.nonce||j.getAttribute("nonce")}):d(j.textContent.replace(nb,""),j,k))}return a}function L(a,b,c){for(var d,e=b?za.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||za.cleanData(w(d)),d.parentNode&&(c&&Za(d)&&x(w(d,"script")),d.parentNode.removeChild(d));return a}function M(a,b,c){var d,e,f,g,h=a.style;return c=c||pb(a),c&&(g=c.getPropertyValue(b)||c[b],""!==g||Za(a)||(g=za.style(a,b)),!ua.pixelBoxStyles()&&ob.test(g)&&qb.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function N(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}function O(a){for(var b=a[0].toUpperCase()+a.slice(1),c=rb.length;c--;)if((a=rb[c]+b)in sb)return a}function P(a){var b=za.cssProps[a]||tb[a];return b||(a in sb?a:tb[a]=O(a)||a)}function Q(a,b,c){var d=Wa.exec(b);return d?Math.max(0,d[2]-(c||0))+(d[3]||"px"):b}function R(a,b,c,d,e,f){var g="width"===b?1:0,h=0,i=0;if(c===(d?"border":"content"))return 0;for(;g<4;g+=2)"margin"===c&&(i+=za.css(a,c+Xa[g],!0,e)),d?("content"===c&&(i-=za.css(a,"padding"+Xa[g],!0,e)),"margin"!==c&&(i-=za.css(a,"border"+Xa[g]+"Width",!0,e))):(i+=za.css(a,"padding"+Xa[g],!0,e),"padding"!==c?i+=za.css(a,"border"+Xa[g]+"Width",!0,e):h+=za.css(a,"border"+Xa[g]+"Width",!0,e));return!d&&f>=0&&(i+=Math.max(0,Math.ceil(a["offset"+b[0].toUpperCase()+b.slice(1)]-f-i-h-.5))||0),i}function S(a,b,c){var d=pb(a),e=!ua.boxSizingReliable()||c,f=e&&"border-box"===za.css(a,"boxSizing",!1,d),g=f,h=M(a,b,d),i="offset"+b[0].toUpperCase()+b.slice(1);if(ob.test(h)){if(!c)return h;h="auto"}return(!ua.boxSizingReliable()&&f||"auto"===h||!parseFloat(h)&&"inline"===za.css(a,"display",!1,d))&&a.getClientRects().length&&(f="border-box"===za.css(a,"boxSizing",!1,d),(g=i in a)&&(h=a[i])),(h=parseFloat(h)||0)+R(a,b,c||(f?"border":"content"),g,d,h)+"px"}function T(a,b,c,d,e){return new T.prototype.init(a,b,c,d,e)}function U(){zb&&(!1===ja.hidden&&b.requestAnimationFrame?b.requestAnimationFrame(U):b.setTimeout(U,za.fx.interval),za.fx.tick())}function V(){return b.setTimeout(function(){yb=void 0}),yb=Date.now()}function W(a,b){var c,d=0,e={height:a};for(b=b?1:0;d<4;d+=2-b)c=Xa[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function X(a,b,c){for(var d,e=($.tweeners[b]||[]).concat($.tweeners["*"]),f=0,g=e.length;f<g;f++)if(d=e[f].call(c,b,a))return d}function Y(a,b,c){var d,e,f,g,h,i,j,k,l="width"in b||"height"in b,m=this,n={},o=a.style,p=a.nodeType&&_a(a),q=Ra.get(a,"fxshow");c.queue||(g=za._queueHooks(a,"fx"),null==g.unqueued&&(g.unqueued=0,h=g.empty.fire,g.empty.fire=function(){g.unqueued||h()}),g.unqueued++,m.always(function(){m.always(function(){g.unqueued--,za.queue(a,"fx").length||g.empty.fire()})}));for(d in b)if(e=b[d],Ab.test(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}n[d]=q&&q[d]||za.style(a,d)}if((i=!za.isEmptyObject(b))||!za.isEmptyObject(n)){l&&1===a.nodeType&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=q&&q.display,null==j&&(j=Ra.get(a,"display")),k=za.css(a,"display"),"none"===k&&(j?k=j:(v([a],!0),j=a.style.display||j,k=za.css(a,"display"),v([a]))),("inline"===k||"inline-block"===k&&null!=j)&&"none"===za.css(a,"float")&&(i||(m.done(function(){o.display=j}),null==j&&(k=o.display,j="none"===k?"":k)),o.display="inline-block")),c.overflow&&(o.overflow="hidden",m.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]})),i=!1;for(d in n)i||(q?"hidden"in q&&(p=q.hidden):q=Ra.access(a,"fxshow",{display:j}),f&&(q.hidden=!p),p&&v([a],!0),m.done(function(){p||v([a]),Ra.remove(a,"fxshow");for(d in n)za.style(a,d,n[d])})),i=X(p?q[d]:0,d,m),d in q||(q[d]=i.start,p&&(i.end=i.start,i.start=0))}}function Z(a,b){var c,d,e,f,g;for(c in a)if(d=p(c),e=b[d],f=a[c],Array.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),(g=za.cssHooks[d])&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function $(a,b,c){var d,e,f=0,g=$.prefilters.length,h=za.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=yb||V(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;g<i;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),f<1&&i?c:(i||h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:za.extend({},b),opts:za.extend(!0,{specialEasing:{},easing:za.easing._default},c),originalProperties:b,originalOptions:c,startTime:yb||V(),duration:c.duration,tweens:[],createTween:function(b,c){var d=za.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;c<d;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for(Z(k,j.opts.specialEasing);f<g;f++)if(d=$.prefilters[f].call(j,a,k,j.opts))return va(d.stop)&&(za._queueHooks(j.elem,j.opts.queue).stop=d.stop.bind(d)),d;return za.map(k,X,j),va(j.opts.start)&&j.opts.start.call(a,j),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always),za.fx.timer(za.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j}function _(a){return(a.match(Ka)||[]).join(" ")}function aa(a){return a.getAttribute&&a.getAttribute("class")||""}function ba(a){return Array.isArray(a)?a:"string"==typeof a?a.match(Ka)||[]:[]}function ca(a,b,c,d){var f;if(Array.isArray(b))za.each(b,function(b,e){c||Mb.test(a)?d(a,e):ca(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==e(b))d(a,b);else for(f in b)ca(a+"["+f+"]",b[f],c,d)}function da(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(Ka)||[];if(va(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function ea(a,b,c,d){function e(h){var i;return f[h]=!0,za.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===Yb;return e(b.dataTypes[0])||!f["*"]&&e("*")}function fa(a,b){var c,d,e=za.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&za.extend(!0,a,d),a}function ga(a,b,c){for(var d,e,f,g,h=a.contents,i=a.dataTypes;"*"===i[0];)i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}if(f)return f!==i[0]&&i.unshift(f),c[f]}function ha(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(!(g=j[i+" "+f]||j["* "+f]))for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){!0===g?g=j[e]:!0!==j[e]&&(f=h[0],k.unshift(h[1]));break}if(!0!==g)if(g&&a.throws)b=g(b);else try{b=g(b)}catch(a){return{state:"parsererror",error:g?a:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}var ia=[],ja=b.document,ka=Object.getPrototypeOf,la=ia.slice,ma=ia.concat,na=ia.push,oa=ia.indexOf,pa={},qa=pa.toString,ra=pa.hasOwnProperty,sa=ra.toString,ta=sa.call(Object),ua={},va=function(a){return"function"==typeof a&&"number"!=typeof a.nodeType},wa=function(a){return null!=a&&a===a.window},xa={type:!0,src:!0,nonce:!0,noModule:!0},ya="3.4.1",za=function(a,b){return new za.fn.init(a,b)},Aa=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;za.fn=za.prototype={jquery:ya,constructor:za,length:0,toArray:function(){return la.call(this)},get:function(a){return null==a?la.call(this):a<0?this[a+this.length]:this[a]},pushStack:function(a){var b=za.merge(this.constructor(),a);return b.prevObject=this,b},each:function(a){return za.each(this,a)},map:function(a){return this.pushStack(za.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(la.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(a<0?b:0);return this.pushStack(c>=0&&c<b?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:na,sort:ia.sort,splice:ia.splice},za.extend=za.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||va(g)||(g={}),h===i&&(g=this,h--);h<i;h++)if(null!=(a=arguments[h]))for(b in a)d=a[b],"__proto__"!==b&&g!==d&&(j&&d&&(za.isPlainObject(d)||(e=Array.isArray(d)))?(c=g[b],f=e&&!Array.isArray(c)?[]:e||za.isPlainObject(c)?c:{},e=!1,g[b]=za.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},za.extend({expando:"jQuery"+(ya+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isPlainObject:function(a){var b,c;return!(!a||"[object Object]"!==qa.call(a))&&(!(b=ka(a))||"function"==typeof(c=ra.call(b,"constructor")&&b.constructor)&&sa.call(c)===ta)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},globalEval:function(a,b){d(a,{nonce:b&&b.nonce})},each:function(a,b){var c,d=0;if(f(a))for(c=a.length;d<c&&!1!==b.call(a[d],d,a[d]);d++);else for(d in a)if(!1===b.call(a[d],d,a[d]))break;return a},trim:function(a){return null==a?"":(a+"").replace(Aa,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(f(Object(a))?za.merge(c,"string"==typeof a?[a]:a):na.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:oa.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;d<c;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d=[],e=0,f=a.length,g=!c;e<f;e++)!b(a[e],e)!==g&&d.push(a[e]);return d},map:function(a,b,c){var d,e,g=0,h=[];if(f(a))for(d=a.length;g<d;g++)null!=(e=b(a[g],g,c))&&h.push(e);else for(g in a)null!=(e=b(a[g],g,c))&&h.push(e);return ma.apply([],h)},guid:1,support:ua}),"function"==typeof Symbol&&(za.fn[Symbol.iterator]=ia[Symbol.iterator]),za.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){pa["[object "+b+"]"]=b.toLowerCase()});var Ba=function(a){function b(a,b,c,d){var e,f,g,h,i,j,k,m=b&&b.ownerDocument,o=b?b.nodeType:9;if(c=c||[],"string"!=typeof a||!a||1!==o&&9!==o&&11!==o)return c;if(!d&&((b?b.ownerDocument||b:P)!==H&&G(b),b=b||H,J)){if(11!==o&&(i=ta.exec(a)))if(e=i[1]){if(9===o){if(!(g=b.getElementById(e)))return c;if(g.id===e)return c.push(g),c}else if(m&&(g=m.getElementById(e))&&N(b,g)&&g.id===e)return c.push(g),c}else{if(i[2])return _.apply(c,b.getElementsByTagName(a)),c;if((e=i[3])&&w.getElementsByClassName&&b.getElementsByClassName)return _.apply(c,b.getElementsByClassName(e)),c}if(w.qsa&&!V[a+" "]&&(!K||!K.test(a))&&(1!==o||"object"!==b.nodeName.toLowerCase())){if(k=a,m=b,1===o&&la.test(a)){for((h=b.getAttribute("id"))?h=h.replace(xa,ya):b.setAttribute("id",h=O),j=A(a),f=j.length;f--;)j[f]="#"+h+" "+n(j[f]);k=j.join(","),m=ua.test(a)&&l(b.parentNode)||b}try{return _.apply(c,m.querySelectorAll(k)),c}catch(b){V(a,!0)}finally{h===O&&b.removeAttribute("id")}}}return C(a.replace(ia,"$1"),b,c,d)}function c(){function a(c,d){return b.push(c+" ")>x.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a}function d(a){return a[O]=!0,a}function e(a){var b=H.createElement("fieldset");try{return!!a(b)}catch(a){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function f(a,b){for(var c=a.split("|"),d=c.length;d--;)x.attrHandle[c[d]]=b}function g(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&a.sourceIndex-b.sourceIndex;if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function h(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function i(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function j(a){return function(b){return"form"in b?b.parentNode&&!1===b.disabled?"label"in b?"label"in b.parentNode?b.parentNode.disabled===a:b.disabled===a:b.isDisabled===a||b.isDisabled!==!a&&Aa(b)===a:b.disabled===a:"label"in b&&b.disabled===a}}function k(a){return d(function(b){return b=+b,d(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function l(a){return a&&void 0!==a.getElementsByTagName&&a}function m(){}function n(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function o(a,b,c){var d=b.dir,e=b.next,f=e||d,g=c&&"parentNode"===f,h=R++;return b.first?function(b,c,e){for(;b=b[d];)if(1===b.nodeType||g)return a(b,c,e);return!1}:function(b,c,i){var j,k,l,m=[Q,h];if(i){for(;b=b[d];)if((1===b.nodeType||g)&&a(b,c,i))return!0}else for(;b=b[d];)if(1===b.nodeType||g)if(l=b[O]||(b[O]={}),k=l[b.uniqueID]||(l[b.uniqueID]={}),e&&e===b.nodeName.toLowerCase())b=b[d]||b;else{if((j=k[f])&&j[0]===Q&&j[1]===h)return m[2]=j[2];if(k[f]=m,m[2]=a(b,c,i))return!0}return!1}}function p(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function q(a,c,d){for(var e=0,f=c.length;e<f;e++)b(a,c[e],d);return d}function r(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;h<i;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function s(a,b,c,e,f,g){return e&&!e[O]&&(e=s(e)),f&&!f[O]&&(f=s(f,g)),d(function(d,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=d||q(b||"*",h.nodeType?[h]:h,[]),s=!a||!d&&b?p:r(p,m,a,h,i),t=c?f||(d?a:o||e)?[]:g:s;if(c&&c(s,t,h,i),e)for(j=r(t,n),e(j,[],h,i),k=j.length;k--;)(l=j[k])&&(t[n[k]]=!(s[n[k]]=l));if(d){if(f||a){if(f){for(j=[],k=t.length;k--;)(l=t[k])&&j.push(s[k]=l);f(null,t=[],j,i)}for(k=t.length;k--;)(l=t[k])&&(j=f?ba(d,l):m[k])>-1&&(d[j]=!(g[j]=l))}}else t=r(t===g?t.splice(o,t.length):t),f?f(null,g,t,i):_.apply(g,t)})}function t(a){for(var b,c,d,e=a.length,f=x.relative[a[0].type],g=f||x.relative[" "],h=f?1:0,i=o(function(a){return a===b},g,!0),j=o(function(a){return ba(b,a)>-1},g,!0),k=[function(a,c,d){var e=!f&&(d||c!==D)||((b=c).nodeType?i(a,c,d):j(a,c,d));return b=null,e}];h<e;h++)if(c=x.relative[a[h].type])k=[o(p(k),c)];else{if(c=x.filter[a[h].type].apply(null,a[h].matches),c[O]){for(d=++h;d<e&&!x.relative[a[d].type];d++);return s(h>1&&p(k),h>1&&n(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(ia,"$1"),c,h<d&&t(a.slice(h,d)),d<e&&t(a=a.slice(d)),d<e&&n(a))}k.push(c)}return p(k)}function u(a,c){var e=c.length>0,f=a.length>0,g=function(d,g,h,i,j){var k,l,m,n=0,o="0",p=d&&[],q=[],s=D,t=d||f&&x.find.TAG("*",j),u=Q+=null==s?1:Math.random()||.1,v=t.length;for(j&&(D=g===H||g||j);o!==v&&null!=(k=t[o]);o++){if(f&&k){for(l=0,g||k.ownerDocument===H||(G(k),h=!J);m=a[l++];)if(m(k,g||H,h)){i.push(k);break}j&&(Q=u)}e&&((k=!m&&k)&&n--,d&&p.push(k))}if(n+=o,e&&o!==n){for(l=0;m=c[l++];)m(p,q,g,h);if(d){if(n>0)for(;o--;)p[o]||q[o]||(q[o]=Z.call(i));q=r(q)}_.apply(i,q),j&&!d&&q.length>0&&n+c.length>1&&b.uniqueSort(i)}return j&&(Q=u,D=s),p};return e?d(g):g}var v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O="sizzle"+1*new Date,P=a.document,Q=0,R=0,S=c(),T=c(),U=c(),V=c(),W=function(a,b){return a===b&&(F=!0),0},X={}.hasOwnProperty,Y=[],Z=Y.pop,$=Y.push,_=Y.push,aa=Y.slice,ba=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},ca="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",da="[\\x20\\t\\r\\n\\f]",ea="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",fa="\\["+da+"*("+ea+")(?:"+da+"*([*^$|!~]?=)"+da+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ea+"))|)"+da+"*\\]",ga=":("+ea+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+fa+")*)|.*)\\)|)",ha=new RegExp(da+"+","g"),ia=new RegExp("^"+da+"+|((?:^|[^\\\\])(?:\\\\.)*)"+da+"+$","g"),ja=new RegExp("^"+da+"*,"+da+"*"),ka=new RegExp("^"+da+"*([>+~]|"+da+")"+da+"*"),la=new RegExp(da+"|>"),ma=new RegExp(ga),na=new RegExp("^"+ea+"$"),oa={ID:new RegExp("^#("+ea+")"),CLASS:new RegExp("^\\.("+ea+")"),TAG:new RegExp("^("+ea+"|[*])"),ATTR:new RegExp("^"+fa),PSEUDO:new RegExp("^"+ga),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+da+"*(even|odd|(([+-]|)(\\d*)n|)"+da+"*(?:([+-]|)"+da+"*(\\d+)|))"+da+"*\\)|)","i"),bool:new RegExp("^(?:"+ca+")$","i"),needsContext:new RegExp("^"+da+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+da+"*((?:-\\d)?\\d*)"+da+"*\\)|)(?=[^-]|$)","i")},pa=/HTML$/i,qa=/^(?:input|select|textarea|button)$/i,ra=/^h\d$/i,sa=/^[^{]+\{\s*\[native \w/,ta=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ua=/[+~]/,va=new RegExp("\\\\([\\da-f]{1,6}"+da+"?|("+da+")|.)","ig"),wa=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},xa=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ya=function(a,b){return b?"\0"===a?"":a.slice(0,-1)+"\\"+a.charCodeAt(a.length-1).toString(16)+" ":"\\"+a},za=function(){G()},Aa=o(function(a){return!0===a.disabled&&"fieldset"===a.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{_.apply(Y=aa.call(P.childNodes),P.childNodes),Y[P.childNodes.length].nodeType}catch(a){_={apply:Y.length?function(a,b){$.apply(a,aa.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}w=b.support={},z=b.isXML=function(a){var b=a.namespaceURI,c=(a.ownerDocument||a).documentElement;return!pa.test(b||c&&c.nodeName||"HTML")},G=b.setDocument=function(a){var b,c,d=a?a.ownerDocument||a:P;return d!==H&&9===d.nodeType&&d.documentElement?(H=d,I=H.documentElement,J=!z(H),P!==H&&(c=H.defaultView)&&c.top!==c&&(c.addEventListener?c.addEventListener("unload",za,!1):c.attachEvent&&c.attachEvent("onunload",za)),w.attributes=e(function(a){return a.className="i",!a.getAttribute("className")}),w.getElementsByTagName=e(function(a){return a.appendChild(H.createComment("")),!a.getElementsByTagName("*").length}),w.getElementsByClassName=sa.test(H.getElementsByClassName),w.getById=e(function(a){return I.appendChild(a).id=O,!H.getElementsByName||!H.getElementsByName(O).length}),w.getById?(x.filter.ID=function(a){var b=a.replace(va,wa);return function(a){return a.getAttribute("id")===b}},x.find.ID=function(a,b){if(void 0!==b.getElementById&&J){var c=b.getElementById(a);return c?[c]:[]}}):(x.filter.ID=function(a){var b=a.replace(va,wa);return function(a){var c=void 0!==a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}},x.find.ID=function(a,b){if(void 0!==b.getElementById&&J){var c,d,e,f=b.getElementById(a);if(f){if((c=f.getAttributeNode("id"))&&c.value===a)return[f];for(e=b.getElementsByName(a),d=0;f=e[d++];)if((c=f.getAttributeNode("id"))&&c.value===a)return[f]}return[]}}),x.find.TAG=w.getElementsByTagName?function(a,b){return void 0!==b.getElementsByTagName?b.getElementsByTagName(a):w.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},x.find.CLASS=w.getElementsByClassName&&function(a,b){if(void 0!==b.getElementsByClassName&&J)return b.getElementsByClassName(a)},L=[],K=[],(w.qsa=sa.test(H.querySelectorAll))&&(e(function(a){I.appendChild(a).innerHTML="<a id='"+O+"'></a><select id='"+O+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&K.push("[*^$]="+da+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||K.push("\\["+da+"*(?:value|"+ca+")"),a.querySelectorAll("[id~="+O+"-]").length||K.push("~="),a.querySelectorAll(":checked").length||K.push(":checked"),a.querySelectorAll("a#"+O+"+*").length||K.push(".#.+[+~]")}),e(function(a){a.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var b=H.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&K.push("name"+da+"*[*^$|!~]?="),2!==a.querySelectorAll(":enabled").length&&K.push(":enabled",":disabled"),I.appendChild(a).disabled=!0,2!==a.querySelectorAll(":disabled").length&&K.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),K.push(",.*:")})),(w.matchesSelector=sa.test(M=I.matches||I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&e(function(a){w.disconnectedMatch=M.call(a,"*"),M.call(a,"[s!='']:x"),L.push("!=",ga)}),K=K.length&&new RegExp(K.join("|")),L=L.length&&new RegExp(L.join("|")),b=sa.test(I.compareDocumentPosition),N=b||sa.test(I.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},W=b?function(a,b){if(a===b)return F=!0,0;var c=!a.compareDocumentPosition-!b.compareDocumentPosition;return c||(c=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&c||!w.sortDetached&&b.compareDocumentPosition(a)===c?a===H||a.ownerDocument===P&&N(P,a)?-1:b===H||b.ownerDocument===P&&N(P,b)?1:E?ba(E,a)-ba(E,b):0:4&c?-1:1)}:function(a,b){if(a===b)return F=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,h=[a],i=[b];if(!e||!f)return a===H?-1:b===H?1:e?-1:f?1:E?ba(E,a)-ba(E,b):0;if(e===f)return g(a,b);for(c=a;c=c.parentNode;)h.unshift(c);for(c=b;c=c.parentNode;)i.unshift(c);for(;h[d]===i[d];)d++;return d?g(h[d],i[d]):h[d]===P?-1:i[d]===P?1:0},H):H},b.matches=function(a,c){return b(a,null,null,c)},b.matchesSelector=function(a,c){if((a.ownerDocument||a)!==H&&G(a),w.matchesSelector&&J&&!V[c+" "]&&(!L||!L.test(c))&&(!K||!K.test(c)))try{var d=M.call(a,c);if(d||w.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(a){V(c,!0)}return b(c,H,null,[a]).length>0},b.contains=function(a,b){return(a.ownerDocument||a)!==H&&G(a),N(a,b)},b.attr=function(a,b){(a.ownerDocument||a)!==H&&G(a);var c=x.attrHandle[b.toLowerCase()],d=c&&X.call(x.attrHandle,b.toLowerCase())?c(a,b,!J):void 0;return void 0!==d?d:w.attributes||!J?a.getAttribute(b):(d=a.getAttributeNode(b))&&d.specified?d.value:null},b.escape=function(a){return(a+"").replace(xa,ya)},b.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},b.uniqueSort=function(a){var b,c=[],d=0,e=0;if(F=!w.detectDuplicates,E=!w.sortStable&&a.slice(0),a.sort(W),F){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return E=null,a},y=b.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=y(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d++];)c+=y(b);return c},x=b.selectors={cacheLength:50,createPseudo:d,match:oa,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(va,wa),a[3]=(a[3]||a[4]||a[5]||"").replace(va,wa),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return oa.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&ma.test(c)&&(b=A(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(va,wa).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=S[a+" "];return b||(b=new RegExp("(^|"+da+")"+a+"("+da+"|$)"))&&S(a,function(a){return b.test("string"==typeof a.className&&a.className||void 0!==a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,c,d){return function(e){var f=b.attr(e,a);return null==f?"!="===c:!c||(f+="","="===c?f===d:"!="===c?f!==d:"^="===c?d&&0===f.indexOf(d):"*="===c?d&&f.indexOf(d)>-1:"$="===c?d&&f.slice(-d.length)===d:"~="===c?(" "+f.replace(ha," ")+" ").indexOf(d)>-1:"|="===c&&(f===d||f.slice(0,d.length+1)===d+"-"))}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){for(;p;){for(m=b;m=m[p];)if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(m=q,l=m[O]||(m[O]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===Q&&j[1],t=n&&j[2],m=n&&q.childNodes[n];m=++n&&m&&m[p]||(t=n=0)||o.pop();)if(1===m.nodeType&&++t&&m===b){k[a]=[Q,n,t];break}}else if(s&&(m=b,l=m[O]||(m[O]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===Q&&j[1],t=n),!1===t)for(;(m=++n&&m&&m[p]||(t=n=0)||o.pop())&&((h?m.nodeName.toLowerCase()!==r:1!==m.nodeType)||!++t||(s&&(l=m[O]||(m[O]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[Q,t]),m!==b)););return(t-=e)===d||t%d==0&&t/d>=0}}},PSEUDO:function(a,c){var e,f=x.pseudos[a]||x.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return f[O]?f(c):f.length>1?(e=[a,a,"",c],x.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){for(var d,e=f(a,c),g=e.length;g--;)d=ba(a,e[g]),a[d]=!(b[d]=e[g])}):function(a){return f(a,0,e)}):f}},pseudos:{not:d(function(a){var b=[],c=[],e=B(a.replace(ia,"$1"));return e[O]?d(function(a,b,c,d){for(var f,g=e(a,null,d,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,d,f){return b[0]=a,e(b,null,f,c),b[0]=null,!c.pop()}}),has:d(function(a){return function(c){return b(a,c).length>0}}),contains:d(function(a){return a=a.replace(va,wa),function(b){return(b.textContent||y(b)).indexOf(a)>-1}}),lang:d(function(a){return na.test(a||"")||b.error("unsupported lang: "+a),a=a.replace(va,wa).toLowerCase(),function(b){var c;do{if(c=J?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return(c=c.toLowerCase())===a||0===c.indexOf(a+"-")}while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===I},focus:function(a){return a===H.activeElement&&(!H.hasFocus||H.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:j(!1),disabled:j(!0),checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!x.pseudos.empty(a)},header:function(a){return ra.test(a.nodeName)},input:function(a){return qa.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:k(function(){return[0]}),last:k(function(a,b){return[b-1]}),eq:k(function(a,b,c){return[c<0?c+b:c]}),even:k(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:k(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:k(function(a,b,c){for(var d=c<0?c+b:c>b?b:c;--d>=0;)a.push(d);return a}),gt:k(function(a,b,c){for(var d=c<0?c+b:c;++d<b;)a.push(d);return a})}},x.pseudos.nth=x.pseudos.eq;for(v in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[v]=h(v);for(v in{submit:!0,reset:!0})x.pseudos[v]=i(v);return m.prototype=x.filters=x.pseudos,x.setFilters=new m,A=b.tokenize=function(a,c){var d,e,f,g,h,i,j,k=T[a+" "];if(k)return c?0:k.slice(0);for(h=a,i=[],j=x.preFilter;h;){d&&!(e=ja.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=ka.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(ia," ")}),h=h.slice(d.length));for(g in x.filter)!(e=oa[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return c?h.length:h?b.error(a):T(a,i).slice(0)},B=b.compile=function(a,b){var c,d=[],e=[],f=U[a+" "];if(!f){for(b||(b=A(a)),c=b.length;c--;)f=t(b[c]),f[O]?d.push(f):e.push(f);f=U(a,u(e,d)),f.selector=a}return f},C=b.select=function(a,b,c,d){var e,f,g,h,i,j="function"==typeof a&&a,k=!d&&A(a=j.selector||a);if(c=c||[],1===k.length){if(f=k[0]=k[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&9===b.nodeType&&J&&x.relative[f[1].type]){if(!(b=(x.find.ID(g.matches[0].replace(va,wa),b)||[])[0]))return c;j&&(b=b.parentNode),a=a.slice(f.shift().value.length)}for(e=oa.needsContext.test(a)?0:f.length;e--&&(g=f[e],!x.relative[h=g.type]);)if((i=x.find[h])&&(d=i(g.matches[0].replace(va,wa),ua.test(f[0].type)&&l(b.parentNode)||b))){if(f.splice(e,1),!(a=d.length&&n(f)))return _.apply(c,d),c;break}}return(j||B(a,k))(d,b,!J,c,!b||ua.test(a)&&l(b.parentNode)||b),c},w.sortStable=O.split("").sort(W).join("")===O,w.detectDuplicates=!!F,G(),w.sortDetached=e(function(a){return 1&a.compareDocumentPosition(H.createElement("fieldset"))}),e(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||f("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),w.attributes&&e(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||f("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue}),e(function(a){return null==a.getAttribute("disabled")})||f(ca,function(a,b,c){var d;if(!c)return!0===a[b]?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),b}(b);za.find=Ba,za.expr=Ba.selectors,za.expr[":"]=za.expr.pseudos,za.uniqueSort=za.unique=Ba.uniqueSort,za.text=Ba.getText,za.isXMLDoc=Ba.isXML,za.contains=Ba.contains,za.escapeSelector=Ba.escape;var Ca=function(a,b,c){for(var d=[],e=void 0!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(e&&za(a).is(c))break;d.push(a)}return d},Da=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},Ea=za.expr.match.needsContext,Fa=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;za.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?za.find.matchesSelector(d,a)?[d]:[]:za.find.matches(a,za.grep(b,function(a){return 1===a.nodeType}))},za.fn.extend({find:function(a){var b,c,d=this.length,e=this;if("string"!=typeof a)return this.pushStack(za(a).filter(function(){for(b=0;b<d;b++)if(za.contains(e[b],this))return!0}));for(c=this.pushStack([]),b=0;b<d;b++)za.find(a,e[b],c);return d>1?za.uniqueSort(c):c},filter:function(a){return this.pushStack(h(this,a||[],!1))},not:function(a){return this.pushStack(h(this,a||[],!0))},is:function(a){return!!h(this,"string"==typeof a&&Ea.test(a)?za(a):a||[],!1).length}});var Ga,Ha=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(za.fn.init=function(a,b,c){var d,e;if(!a)return this;if(c=c||Ga,"string"==typeof a){if(!(d="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:Ha.exec(a))||!d[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(d[1]){if(b=b instanceof za?b[0]:b,za.merge(this,za.parseHTML(d[1],b&&b.nodeType?b.ownerDocument||b:ja,!0)),Fa.test(d[1])&&za.isPlainObject(b))for(d in b)va(this[d])?this[d](b[d]):this.attr(d,b[d]);return this}return e=ja.getElementById(d[2]),e&&(this[0]=e,this.length=1),this}return a.nodeType?(this[0]=a,this.length=1,
this):va(a)?void 0!==c.ready?c.ready(a):a(za):za.makeArray(a,this)}).prototype=za.fn,Ga=za(ja);var Ia=/^(?:parents|prev(?:Until|All))/,Ja={children:!0,contents:!0,next:!0,prev:!0};za.fn.extend({has:function(a){var b=za(a,this),c=b.length;return this.filter(function(){for(var a=0;a<c;a++)if(za.contains(this,b[a]))return!0})},closest:function(a,b){var c,d=0,e=this.length,f=[],g="string"!=typeof a&&za(a);if(!Ea.test(a))for(;d<e;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&za.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?za.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?oa.call(za(a),this[0]):oa.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(za.uniqueSort(za.merge(this.get(),za(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),za.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return Ca(a,"parentNode")},parentsUntil:function(a,b,c){return Ca(a,"parentNode",c)},next:function(a){return i(a,"nextSibling")},prev:function(a){return i(a,"previousSibling")},nextAll:function(a){return Ca(a,"nextSibling")},prevAll:function(a){return Ca(a,"previousSibling")},nextUntil:function(a,b,c){return Ca(a,"nextSibling",c)},prevUntil:function(a,b,c){return Ca(a,"previousSibling",c)},siblings:function(a){return Da((a.parentNode||{}).firstChild,a)},children:function(a){return Da(a.firstChild)},contents:function(a){return void 0!==a.contentDocument?a.contentDocument:(g(a,"template")&&(a=a.content||a),za.merge([],a.childNodes))}},function(a,b){za.fn[a]=function(c,d){var e=za.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=za.filter(d,e)),this.length>1&&(Ja[a]||za.uniqueSort(e),Ia.test(a)&&e.reverse()),this.pushStack(e)}});var Ka=/[^\x20\t\r\n\f]+/g;za.Callbacks=function(a){a="string"==typeof a?j(a):za.extend({},a);var b,c,d,f,g=[],h=[],i=-1,k=function(){for(f=f||a.once,d=b=!0;h.length;i=-1)for(c=h.shift();++i<g.length;)!1===g[i].apply(c[0],c[1])&&a.stopOnFalse&&(i=g.length,c=!1);a.memory||(c=!1),b=!1,f&&(g=c?[]:"")},l={add:function(){return g&&(c&&!b&&(i=g.length-1,h.push(c)),function b(c){za.each(c,function(c,d){va(d)?a.unique&&l.has(d)||g.push(d):d&&d.length&&"string"!==e(d)&&b(d)})}(arguments),c&&!b&&k()),this},remove:function(){return za.each(arguments,function(a,b){for(var c;(c=za.inArray(b,g,c))>-1;)g.splice(c,1),c<=i&&i--}),this},has:function(a){return a?za.inArray(a,g)>-1:g.length>0},empty:function(){return g&&(g=[]),this},disable:function(){return f=h=[],g=c="",this},disabled:function(){return!g},lock:function(){return f=h=[],c||b||(g=c=""),this},locked:function(){return!!f},fireWith:function(a,c){return f||(c=c||[],c=[a,c.slice?c.slice():c],h.push(c),b||k()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!d}};return l},za.extend({Deferred:function(a){var c=[["notify","progress",za.Callbacks("memory"),za.Callbacks("memory"),2],["resolve","done",za.Callbacks("once memory"),za.Callbacks("once memory"),0,"resolved"],["reject","fail",za.Callbacks("once memory"),za.Callbacks("once memory"),1,"rejected"]],d="pending",e={state:function(){return d},always:function(){return f.done(arguments).fail(arguments),this},catch:function(a){return e.then(null,a)},pipe:function(){var a=arguments;return za.Deferred(function(b){za.each(c,function(c,d){var e=va(a[d[4]])&&a[d[4]];f[d[1]](function(){var a=e&&e.apply(this,arguments);a&&va(a.promise)?a.promise().progress(b.notify).done(b.resolve).fail(b.reject):b[d[0]+"With"](this,e?[a]:arguments)})}),a=null}).promise()},then:function(a,d,e){function f(a,c,d,e){return function(){var h=this,i=arguments,j=function(){var b,j;if(!(a<g)){if((b=d.apply(h,i))===c.promise())throw new TypeError("Thenable self-resolution");j=b&&("object"==typeof b||"function"==typeof b)&&b.then,va(j)?e?j.call(b,f(g,c,k,e),f(g,c,l,e)):(g++,j.call(b,f(g,c,k,e),f(g,c,l,e),f(g,c,k,c.notifyWith))):(d!==k&&(h=void 0,i=[b]),(e||c.resolveWith)(h,i))}},m=e?j:function(){try{j()}catch(b){za.Deferred.exceptionHook&&za.Deferred.exceptionHook(b,m.stackTrace),a+1>=g&&(d!==l&&(h=void 0,i=[b]),c.rejectWith(h,i))}};a?m():(za.Deferred.getStackHook&&(m.stackTrace=za.Deferred.getStackHook()),b.setTimeout(m))}}var g=0;return za.Deferred(function(b){c[0][3].add(f(0,b,va(e)?e:k,b.notifyWith)),c[1][3].add(f(0,b,va(a)?a:k)),c[2][3].add(f(0,b,va(d)?d:l))}).promise()},promise:function(a){return null!=a?za.extend(a,e):e}},f={};return za.each(c,function(a,b){var g=b[2],h=b[5];e[b[1]]=g.add,h&&g.add(function(){d=h},c[3-a][2].disable,c[3-a][3].disable,c[0][2].lock,c[0][3].lock),g.add(b[3].fire),f[b[0]]=function(){return f[b[0]+"With"](this===f?void 0:this,arguments),this},f[b[0]+"With"]=g.fireWith}),e.promise(f),a&&a.call(f,f),f},when:function(a){var b=arguments.length,c=b,d=Array(c),e=la.call(arguments),f=za.Deferred(),g=function(a){return function(c){d[a]=this,e[a]=arguments.length>1?la.call(arguments):c,--b||f.resolveWith(d,e)}};if(b<=1&&(m(a,f.done(g(c)).resolve,f.reject,!b),"pending"===f.state()||va(e[c]&&e[c].then)))return f.then();for(;c--;)m(e[c],g(c),f.reject);return f.promise()}});var La=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;za.Deferred.exceptionHook=function(a,c){b.console&&b.console.warn&&a&&La.test(a.name)&&b.console.warn("jQuery.Deferred exception: "+a.message,a.stack,c)},za.readyException=function(a){b.setTimeout(function(){throw a})};var Ma=za.Deferred();za.fn.ready=function(a){return Ma.then(a).catch(function(a){za.readyException(a)}),this},za.extend({isReady:!1,readyWait:1,ready:function(a){(!0===a?--za.readyWait:za.isReady)||(za.isReady=!0,!0!==a&&--za.readyWait>0||Ma.resolveWith(ja,[za]))}}),za.ready.then=Ma.then,"complete"===ja.readyState||"loading"!==ja.readyState&&!ja.documentElement.doScroll?b.setTimeout(za.ready):(ja.addEventListener("DOMContentLoaded",n),b.addEventListener("load",n));var Na=function(a,b,c,d,f,g,h){var i=0,j=a.length,k=null==c;if("object"===e(c)){f=!0;for(i in c)Na(a,b,i,c[i],!0,g,h)}else if(void 0!==d&&(f=!0,va(d)||(h=!0),k&&(h?(b.call(a,d),b=null):(k=b,b=function(a,b,c){return k.call(za(a),c)})),b))for(;i<j;i++)b(a[i],c,h?d:d.call(a[i],i,b(a[i],c)));return f?a:k?b.call(a):j?b(a[0],c):g},Oa=/^-ms-/,Pa=/-([a-z])/g,Qa=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};q.uid=1,q.prototype={cache:function(a){var b=a[this.expando];return b||(b={},Qa(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0}))),b},set:function(a,b,c){var d,e=this.cache(a);if("string"==typeof b)e[p(b)]=c;else for(d in b)e[p(d)]=b[d];return e},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][p(b)]},access:function(a,b,c){return void 0===b||b&&"string"==typeof b&&void 0===c?this.get(a,b):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d=a[this.expando];if(void 0!==d){if(void 0!==b){Array.isArray(b)?b=b.map(p):(b=p(b),b=b in d?[b]:b.match(Ka)||[]),c=b.length;for(;c--;)delete d[b[c]]}(void 0===b||za.isEmptyObject(d))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var b=a[this.expando];return void 0!==b&&!za.isEmptyObject(b)}};var Ra=new q,Sa=new q,Ta=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ua=/[A-Z]/g;za.extend({hasData:function(a){return Sa.hasData(a)||Ra.hasData(a)},data:function(a,b,c){return Sa.access(a,b,c)},removeData:function(a,b){Sa.remove(a,b)},_data:function(a,b,c){return Ra.access(a,b,c)},_removeData:function(a,b){Ra.remove(a,b)}}),za.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=Sa.get(f),1===f.nodeType&&!Ra.get(f,"hasDataAttrs"))){for(c=g.length;c--;)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=p(d.slice(5)),s(f,d,e[d])));Ra.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){Sa.set(this,a)}):Na(this,function(b){var c;if(f&&void 0===b){if(void 0!==(c=Sa.get(f,a)))return c;if(void 0!==(c=s(f,a)))return c}else this.each(function(){Sa.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){Sa.remove(this,a)})}}),za.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=Ra.get(a,b),c&&(!d||Array.isArray(c)?d=Ra.access(a,b,za.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=za.queue(a,b),d=c.length,e=c.shift(),f=za._queueHooks(a,b),g=function(){za.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return Ra.get(a,c)||Ra.access(a,c,{empty:za.Callbacks("once memory").add(function(){Ra.remove(a,[b+"queue",c])})})}}),za.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?za.queue(this[0],a):void 0===b?this:this.each(function(){var c=za.queue(this,a,b);za._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&za.dequeue(this,a)})},dequeue:function(a){return this.each(function(){za.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=za.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)(c=Ra.get(f[g],a+"queueHooks"))&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Va=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Wa=new RegExp("^(?:([+-])=|)("+Va+")([a-z%]*)$","i"),Xa=["Top","Right","Bottom","Left"],Ya=ja.documentElement,Za=function(a){return za.contains(a.ownerDocument,a)},$a={composed:!0};Ya.getRootNode&&(Za=function(a){return za.contains(a.ownerDocument,a)||a.getRootNode($a)===a.ownerDocument});var _a=function(a,b){return a=b||a,"none"===a.style.display||""===a.style.display&&Za(a)&&"none"===za.css(a,"display")},ab=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e},bb={};za.fn.extend({show:function(){return v(this,!0)},hide:function(){return v(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){_a(this)?za(this).show():za(this).hide()})}});var cb=/^(?:checkbox|radio)$/i,db=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,eb=/^$|^module$|\/(?:java|ecma)script/i,fb={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};fb.optgroup=fb.option,fb.tbody=fb.tfoot=fb.colgroup=fb.caption=fb.thead,fb.th=fb.td;var gb=/<|&#?\w+;/;!function(){var a=ja.createDocumentFragment(),b=a.appendChild(ja.createElement("div")),c=ja.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),ua.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",ua.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var hb=/^key/,ib=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,jb=/^([^.]*)(?:\.(.+)|)/;za.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=Ra.get(a);if(q)for(c.handler&&(f=c,c=f.handler,e=f.selector),e&&za.find.matchesSelector(Ya,e),c.guid||(c.guid=za.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return void 0!==za&&za.event.triggered!==b.type?za.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(Ka)||[""],j=b.length;j--;)h=jb.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n&&(l=za.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=za.event.special[n]||{},k=za.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&za.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,l.setup&&!1!==l.setup.call(a,d,o,g)||a.addEventListener&&a.addEventListener(n,g)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),za.event.global[n]=!0)},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=Ra.hasData(a)&&Ra.get(a);if(q&&(i=q.events)){for(b=(b||"").match(Ka)||[""],j=b.length;j--;)if(h=jb.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=za.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;f--;)k=m[f],!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&!1!==l.teardown.call(a,o,q.handle)||za.removeEvent(a,n,q.handle),delete i[n])}else for(n in i)za.event.remove(a,n+b[j],c,d,!0);za.isEmptyObject(i)&&Ra.remove(a,"handle events")}},dispatch:function(a){var b,c,d,e,f,g,h=za.event.fix(a),i=new Array(arguments.length),j=(Ra.get(this,"events")||{})[h.type]||[],k=za.event.special[h.type]||{};for(i[0]=h,b=1;b<arguments.length;b++)i[b]=arguments[b];if(h.delegateTarget=this,!k.preDispatch||!1!==k.preDispatch.call(this,h)){for(g=za.event.handlers.call(this,h,j),b=0;(e=g[b++])&&!h.isPropagationStopped();)for(h.currentTarget=e.elem,c=0;(f=e.handlers[c++])&&!h.isImmediatePropagationStopped();)h.rnamespace&&!1!==f.namespace&&!h.rnamespace.test(f.namespace)||(h.handleObj=f,h.data=f.data,void 0!==(d=((za.event.special[f.origType]||{}).handle||f.handler).apply(e.elem,i))&&!1===(h.result=d)&&(h.preventDefault(),h.stopPropagation()));return k.postDispatch&&k.postDispatch.call(this,h),h.result}},handlers:function(a,b){var c,d,e,f,g,h=[],i=b.delegateCount,j=a.target;if(i&&j.nodeType&&!("click"===a.type&&a.button>=1))for(;j!==this;j=j.parentNode||this)if(1===j.nodeType&&("click"!==a.type||!0!==j.disabled)){for(f=[],g={},c=0;c<i;c++)d=b[c],e=d.selector+" ",void 0===g[e]&&(g[e]=d.needsContext?za(e,this).index(j)>-1:za.find(e,this,null,[j]).length),g[e]&&f.push(d);f.length&&h.push({elem:j,handlers:f})}return j=this,i<b.length&&h.push({elem:j,handlers:b.slice(i)}),h},addProp:function(a,b){Object.defineProperty(za.Event.prototype,a,{enumerable:!0,configurable:!0,get:va(b)?function(){if(this.originalEvent)return b(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[a]},set:function(b){Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:b})}})},fix:function(a){return a[za.expando]?a:new za.Event(a)},special:{load:{noBubble:!0},click:{setup:function(a){var b=this||a;return cb.test(b.type)&&b.click&&g(b,"input")&&E(b,"click",z),!1},trigger:function(a){var b=this||a;return cb.test(b.type)&&b.click&&g(b,"input")&&E(b,"click"),!0},_default:function(a){var b=a.target;return cb.test(b.type)&&b.click&&g(b,"input")&&Ra.get(b,"click")||g(b,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}},za.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)},za.Event=function(a,b){if(!(this instanceof za.Event))return new za.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===a.returnValue?z:A,this.target=a.target&&3===a.target.nodeType?a.target.parentNode:a.target,this.currentTarget=a.currentTarget,this.relatedTarget=a.relatedTarget):this.type=a,b&&za.extend(this,b),this.timeStamp=a&&a.timeStamp||Date.now(),this[za.expando]=!0},za.Event.prototype={constructor:za.Event,isDefaultPrevented:A,isPropagationStopped:A,isImmediatePropagationStopped:A,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=z,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=z,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=z,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},za.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(a){var b=a.button;return null==a.which&&hb.test(a.type)?null!=a.charCode?a.charCode:a.keyCode:!a.which&&void 0!==b&&ib.test(a.type)?1&b?1:2&b?3:4&b?2:0:a.which}},za.event.addProp),za.each({focus:"focusin",blur:"focusout"},function(a,b){za.event.special[a]={setup:function(){return E(this,a,B),!1},trigger:function(){return E(this,a),!0},delegateType:b}}),za.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){za.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||za.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),za.fn.extend({on:function(a,b,c,d){return D(this,a,b,c,d)},one:function(a,b,c,d){return D(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,za(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return!1!==b&&"function"!=typeof b||(c=b,b=void 0),!1===c&&(c=A),this.each(function(){za.event.remove(this,a,c,b)})}});var kb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,lb=/<script|<style|<link/i,mb=/checked\s*(?:[^=]|=\s*.checked.)/i,nb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;za.extend({htmlPrefilter:function(a){return a.replace(kb,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=Za(a);if(!(ua.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||za.isXMLDoc(a)))for(g=w(h),f=w(a),d=0,e=f.length;d<e;d++)J(f[d],g[d]);if(b)if(c)for(f=f||w(a),g=g||w(h),d=0,e=f.length;d<e;d++)I(f[d],g[d]);else I(a,h);return g=w(h,"script"),g.length>0&&x(g,!i&&w(a,"script")),h},cleanData:function(a){for(var b,c,d,e=za.event.special,f=0;void 0!==(c=a[f]);f++)if(Qa(c)){if(b=c[Ra.expando]){if(b.events)for(d in b.events)e[d]?za.event.remove(c,d):za.removeEvent(c,d,b.handle);c[Ra.expando]=void 0}c[Sa.expando]&&(c[Sa.expando]=void 0)}}}),za.fn.extend({detach:function(a){return L(this,a,!0)},remove:function(a){return L(this,a)},text:function(a){return Na(this,function(a){return void 0===a?za.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=a)})},null,a,arguments.length)},append:function(){return K(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){F(this,a).appendChild(a)}})},prepend:function(){return K(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=F(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return K(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return K(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(za.cleanData(w(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null!=a&&a,b=null==b?a:b,this.map(function(){return za.clone(this,a,b)})},html:function(a){return Na(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!lb.test(a)&&!fb[(db.exec(a)||["",""])[1].toLowerCase()]){a=za.htmlPrefilter(a);try{for(;c<d;c++)b=this[c]||{},1===b.nodeType&&(za.cleanData(w(b,!1)),b.innerHTML=a);b=0}catch(a){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return K(this,arguments,function(b){var c=this.parentNode;za.inArray(this,a)<0&&(za.cleanData(w(this)),c&&c.replaceChild(b,this))},a)}}),za.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){za.fn[a]=function(a){for(var c,d=[],e=za(a),f=e.length-1,g=0;g<=f;g++)c=g===f?this:this.clone(!0),za(e[g])[b](c),na.apply(d,c.get());return this.pushStack(d)}});var ob=new RegExp("^("+Va+")(?!px)[a-z%]+$","i"),pb=function(a){var c=a.ownerDocument.defaultView;return c&&c.opener||(c=b),c.getComputedStyle(a)},qb=new RegExp(Xa.join("|"),"i");!function(){function a(){if(j){i.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",j.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Ya.appendChild(i).appendChild(j);var a=b.getComputedStyle(j);d="1%"!==a.top,h=12===c(a.marginLeft),j.style.right="60%",g=36===c(a.right),e=36===c(a.width),j.style.position="absolute",f=12===c(j.offsetWidth/3),Ya.removeChild(i),j=null}}function c(a){return Math.round(parseFloat(a))}var d,e,f,g,h,i=ja.createElement("div"),j=ja.createElement("div");j.style&&(j.style.backgroundClip="content-box",j.cloneNode(!0).style.backgroundClip="",ua.clearCloneStyle="content-box"===j.style.backgroundClip,za.extend(ua,{boxSizingReliable:function(){return a(),e},pixelBoxStyles:function(){return a(),g},pixelPosition:function(){return a(),d},reliableMarginLeft:function(){return a(),h},scrollboxSize:function(){return a(),f}}))}();var rb=["Webkit","Moz","ms"],sb=ja.createElement("div").style,tb={},ub=/^(none|table(?!-c[ea]).+)/,vb=/^--/,wb={position:"absolute",visibility:"hidden",display:"block"},xb={letterSpacing:"0",fontWeight:"400"};za.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=M(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=p(b),i=vb.test(b),j=a.style;if(i||(b=P(h)),g=za.cssHooks[b]||za.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:j[b];f=typeof c,"string"===f&&(e=Wa.exec(c))&&e[1]&&(c=t(a,b,e),f="number"),null!=c&&c===c&&("number"!==f||i||(c+=e&&e[3]||(za.cssNumber[h]?"":"px")),ua.clearCloneStyle||""!==c||0!==b.indexOf("background")||(j[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i?j.setProperty(b,c):j[b]=c))}},css:function(a,b,c,d){var e,f,g,h=p(b);return vb.test(b)||(b=P(h)),g=za.cssHooks[b]||za.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=M(a,b,d)),"normal"===e&&b in xb&&(e=xb[b]),""===c||c?(f=parseFloat(e),!0===c||isFinite(f)?f||0:e):e}}),za.each(["height","width"],function(a,b){za.cssHooks[b]={get:function(a,c,d){if(c)return!ub.test(za.css(a,"display"))||a.getClientRects().length&&a.getBoundingClientRect().width?S(a,b,d):ab(a,wb,function(){return S(a,b,d)})},set:function(a,c,d){var e,f=pb(a),g=!ua.scrollboxSize()&&"absolute"===f.position,h=g||d,i=h&&"border-box"===za.css(a,"boxSizing",!1,f),j=d?R(a,b,d,i,f):0;return i&&g&&(j-=Math.ceil(a["offset"+b[0].toUpperCase()+b.slice(1)]-parseFloat(f[b])-R(a,b,"border",!1,f)-.5)),j&&(e=Wa.exec(c))&&"px"!==(e[3]||"px")&&(a.style[b]=c,c=za.css(a,b)),Q(a,c,j)}}}),za.cssHooks.marginLeft=N(ua.reliableMarginLeft,function(a,b){if(b)return(parseFloat(M(a,"marginLeft"))||a.getBoundingClientRect().left-ab(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px"}),za.each({margin:"",padding:"",border:"Width"},function(a,b){za.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];d<4;d++)e[a+Xa[d]+b]=f[d]||f[d-2]||f[0];return e}},"margin"!==a&&(za.cssHooks[a+b].set=Q)}),za.fn.extend({css:function(a,b){return Na(this,function(a,b,c){var d,e,f={},g=0;if(Array.isArray(b)){for(d=pb(a),e=b.length;g<e;g++)f[b[g]]=za.css(a,b[g],!1,d);return f}return void 0!==c?za.style(a,b,c):za.css(a,b)},a,b,arguments.length>1)}}),za.Tween=T,T.prototype={constructor:T,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||za.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(za.cssNumber[c]?"":"px")},cur:function(){var a=T.propHooks[this.prop];return a&&a.get?a.get(this):T.propHooks._default.get(this)},run:function(a){var b,c=T.propHooks[this.prop];return this.options.duration?this.pos=b=za.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):T.propHooks._default.set(this),this}},T.prototype.init.prototype=T.prototype,T.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=za.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){za.fx.step[a.prop]?za.fx.step[a.prop](a):1!==a.elem.nodeType||!za.cssHooks[a.prop]&&null==a.elem.style[P(a.prop)]?a.elem[a.prop]=a.now:za.style(a.elem,a.prop,a.now+a.unit)}}},T.propHooks.scrollTop=T.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},za.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},za.fx=T.prototype.init,za.fx.step={};var yb,zb,Ab=/^(?:toggle|show|hide)$/,Bb=/queueHooks$/;za.Animation=za.extend($,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return t(c.elem,a,Wa.exec(b),c),c}]},tweener:function(a,b){va(a)?(b=a,a=["*"]):a=a.match(Ka);for(var c,d=0,e=a.length;d<e;d++)c=a[d],$.tweeners[c]=$.tweeners[c]||[],$.tweeners[c].unshift(b)},prefilters:[Y],prefilter:function(a,b){b?$.prefilters.unshift(a):$.prefilters.push(a)}}),za.speed=function(a,b,c){var d=a&&"object"==typeof a?za.extend({},a):{complete:c||!c&&b||va(a)&&a,duration:a,easing:c&&b||b&&!va(b)&&b};return za.fx.off?d.duration=0:"number"!=typeof d.duration&&(d.duration in za.fx.speeds?d.duration=za.fx.speeds[d.duration]:d.duration=za.fx.speeds._default),null!=d.queue&&!0!==d.queue||(d.queue="fx"),d.old=d.complete,d.complete=function(){va(d.old)&&d.old.call(this),d.queue&&za.dequeue(this,d.queue)},d},za.fn.extend({fadeTo:function(a,b,c,d){return this.filter(_a).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=za.isEmptyObject(a),f=za.speed(b,c,d),g=function(){var b=$(this,za.extend({},a),f);(e||Ra.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||!1===f.queue?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&!1!==a&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=za.timers,g=Ra.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&Bb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||za.dequeue(this,a)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var b,c=Ra.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=za.timers,g=d?d.length:0;for(c.finish=!0,za.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;b<g;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),za.each(["toggle","show","hide"],function(a,b){var c=za.fn[b];za.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(W(b,!0),a,d,e)}}),za.each({slideDown:W("show"),slideUp:W("hide"),slideToggle:W("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){za.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),za.timers=[],za.fx.tick=function(){var a,b=0,c=za.timers;for(yb=Date.now();b<c.length;b++)(a=c[b])()||c[b]!==a||c.splice(b--,1);c.length||za.fx.stop(),yb=void 0},za.fx.timer=function(a){za.timers.push(a),za.fx.start()},za.fx.interval=13,za.fx.start=function(){zb||(zb=!0,U())},za.fx.stop=function(){zb=null},za.fx.speeds={slow:600,fast:200,_default:400},za.fn.delay=function(a,c){return a=za.fx?za.fx.speeds[a]||a:a,c=c||"fx",this.queue(c,function(c,d){var e=b.setTimeout(c,a);d.stop=function(){b.clearTimeout(e)}})},function(){var a=ja.createElement("input"),b=ja.createElement("select"),c=b.appendChild(ja.createElement("option"));a.type="checkbox",ua.checkOn=""!==a.value,ua.optSelected=c.selected,a=ja.createElement("input"),a.value="t",a.type="radio",ua.radioValue="t"===a.value}();var Cb,Db=za.expr.attrHandle;za.fn.extend({attr:function(a,b){return Na(this,za.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){za.removeAttr(this,a)})}}),za.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return void 0===a.getAttribute?za.prop(a,b,c):(1===f&&za.isXMLDoc(a)||(e=za.attrHooks[b.toLowerCase()]||(za.expr.match.bool.test(b)?Cb:void 0)),void 0!==c?null===c?void za.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=za.find.attr(a,b),null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!ua.radioValue&&"radio"===b&&g(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d=0,e=b&&b.match(Ka);if(e&&1===a.nodeType)for(;c=e[d++];)a.removeAttribute(c)}}),Cb={set:function(a,b,c){return!1===b?za.removeAttr(a,c):a.setAttribute(c,c),c}},za.each(za.expr.match.bool.source.match(/\w+/g),function(a,b){var c=Db[b]||za.find.attr;Db[b]=function(a,b,d){var e,f,g=b.toLowerCase();return d||(f=Db[g],Db[g]=e,e=null!=c(a,b,d)?g:null,Db[g]=f),e}});var Eb=/^(?:input|select|textarea|button)$/i,Fb=/^(?:a|area)$/i;za.fn.extend({prop:function(a,b){return Na(this,za.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[za.propFix[a]||a]})}}),za.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&za.isXMLDoc(a)||(b=za.propFix[b]||b,e=za.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=za.find.attr(a,"tabindex");return b?parseInt(b,10):Eb.test(a.nodeName)||Fb.test(a.nodeName)&&a.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),ua.optSelected||(za.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),za.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){za.propFix[this.toLowerCase()]=this}),za.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(va(a))return this.each(function(b){za(this).addClass(a.call(this,b,aa(this)))});if(b=ba(a),b.length)for(;c=this[i++];)if(e=aa(c),d=1===c.nodeType&&" "+_(e)+" "){for(g=0;f=b[g++];)d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=_(d),e!==h&&c.setAttribute("class",h)}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(va(a))return this.each(function(b){za(this).removeClass(a.call(this,b,aa(this)))});if(!arguments.length)return this.attr("class","");if(b=ba(a),b.length)for(;c=this[i++];)if(e=aa(c),d=1===c.nodeType&&" "+_(e)+" "){for(g=0;f=b[g++];)for(;d.indexOf(" "+f+" ")>-1;)d=d.replace(" "+f+" "," ");h=_(d),e!==h&&c.setAttribute("class",h)}return this},toggleClass:function(a,b){var c=typeof a,d="string"===c||Array.isArray(a);return"boolean"==typeof b&&d?b?this.addClass(a):this.removeClass(a):va(a)?this.each(function(c){
za(this).toggleClass(a.call(this,c,aa(this),b),b)}):this.each(function(){var b,e,f,g;if(d)for(e=0,f=za(this),g=ba(a);b=g[e++];)f.hasClass(b)?f.removeClass(b):f.addClass(b);else void 0!==a&&"boolean"!==c||(b=aa(this),b&&Ra.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||!1===a?"":Ra.get(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;for(b=" "+a+" ";c=this[d++];)if(1===c.nodeType&&(" "+_(aa(c))+" ").indexOf(b)>-1)return!0;return!1}});var Gb=/\r/g;za.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=va(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,za(this).val()):a,null==e?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=za.map(e,function(a){return null==a?"":a+""})),(b=za.valHooks[this.type]||za.valHooks[this.nodeName.toLowerCase()])&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return(b=za.valHooks[e.type]||za.valHooks[e.nodeName.toLowerCase()])&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(Gb,""):null==c?"":c)}}}),za.extend({valHooks:{option:{get:function(a){var b=za.find.attr(a,"value");return null!=b?b:_(za.text(a))}},select:{get:function(a){var b,c,d,e=a.options,f=a.selectedIndex,h="select-one"===a.type,i=h?null:[],j=h?f+1:e.length;for(d=f<0?j:h?f:0;d<j;d++)if(c=e[d],(c.selected||d===f)&&!c.disabled&&(!c.parentNode.disabled||!g(c.parentNode,"optgroup"))){if(b=za(c).val(),h)return b;i.push(b)}return i},set:function(a,b){for(var c,d,e=a.options,f=za.makeArray(b),g=e.length;g--;)d=e[g],(d.selected=za.inArray(za.valHooks.option.get(d),f)>-1)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),za.each(["radio","checkbox"],function(){za.valHooks[this]={set:function(a,b){if(Array.isArray(b))return a.checked=za.inArray(za(a).val(),b)>-1}},ua.checkOn||(za.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})}),ua.focusin="onfocusin"in b;var Hb=/^(?:focusinfocus|focusoutblur)$/,Ib=function(a){a.stopPropagation()};za.extend(za.event,{trigger:function(a,c,d,e){var f,g,h,i,j,k,l,m,n=[d||ja],o=ra.call(a,"type")?a.type:a,p=ra.call(a,"namespace")?a.namespace.split("."):[];if(g=m=h=d=d||ja,3!==d.nodeType&&8!==d.nodeType&&!Hb.test(o+za.event.triggered)&&(o.indexOf(".")>-1&&(p=o.split("."),o=p.shift(),p.sort()),j=o.indexOf(":")<0&&"on"+o,a=a[za.expando]?a:new za.Event(o,"object"==typeof a&&a),a.isTrigger=e?2:3,a.namespace=p.join("."),a.rnamespace=a.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,a.result=void 0,a.target||(a.target=d),c=null==c?[a]:za.makeArray(c,[a]),l=za.event.special[o]||{},e||!l.trigger||!1!==l.trigger.apply(d,c))){if(!e&&!l.noBubble&&!wa(d)){for(i=l.delegateType||o,Hb.test(i+o)||(g=g.parentNode);g;g=g.parentNode)n.push(g),h=g;h===(d.ownerDocument||ja)&&n.push(h.defaultView||h.parentWindow||b)}for(f=0;(g=n[f++])&&!a.isPropagationStopped();)m=g,a.type=f>1?i:l.bindType||o,k=(Ra.get(g,"events")||{})[a.type]&&Ra.get(g,"handle"),k&&k.apply(g,c),(k=j&&g[j])&&k.apply&&Qa(g)&&(a.result=k.apply(g,c),!1===a.result&&a.preventDefault());return a.type=o,e||a.isDefaultPrevented()||l._default&&!1!==l._default.apply(n.pop(),c)||!Qa(d)||j&&va(d[o])&&!wa(d)&&(h=d[j],h&&(d[j]=null),za.event.triggered=o,a.isPropagationStopped()&&m.addEventListener(o,Ib),d[o](),a.isPropagationStopped()&&m.removeEventListener(o,Ib),za.event.triggered=void 0,h&&(d[j]=h)),a.result}},simulate:function(a,b,c){var d=za.extend(new za.Event,c,{type:a,isSimulated:!0});za.event.trigger(d,null,b)}}),za.fn.extend({trigger:function(a,b){return this.each(function(){za.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return za.event.trigger(a,b,c,!0)}}),ua.focusin||za.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){za.event.simulate(b,a.target,za.event.fix(a))};za.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=Ra.access(d,b);e||d.addEventListener(a,c,!0),Ra.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=Ra.access(d,b)-1;e?Ra.access(d,b,e):(d.removeEventListener(a,c,!0),Ra.remove(d,b))}}});var Jb=b.location,Kb=Date.now(),Lb=/\?/;za.parseXML=function(a){var c;if(!a||"string"!=typeof a)return null;try{c=(new b.DOMParser).parseFromString(a,"text/xml")}catch(a){c=void 0}return c&&!c.getElementsByTagName("parsererror").length||za.error("Invalid XML: "+a),c};var Mb=/\[\]$/,Nb=/\r?\n/g,Ob=/^(?:submit|button|image|reset|file)$/i,Pb=/^(?:input|select|textarea|keygen)/i;za.param=function(a,b){var c,d=[],e=function(a,b){var c=va(b)?b():b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(null==c?"":c)};if(null==a)return"";if(Array.isArray(a)||a.jquery&&!za.isPlainObject(a))za.each(a,function(){e(this.name,this.value)});else for(c in a)ca(c,a[c],b,e);return d.join("&")},za.fn.extend({serialize:function(){return za.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=za.prop(this,"elements");return a?za.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!za(this).is(":disabled")&&Pb.test(this.nodeName)&&!Ob.test(a)&&(this.checked||!cb.test(a))}).map(function(a,b){var c=za(this).val();return null==c?null:Array.isArray(c)?za.map(c,function(a){return{name:b.name,value:a.replace(Nb,"\r\n")}}):{name:b.name,value:c.replace(Nb,"\r\n")}}).get()}});var Qb=/%20/g,Rb=/#.*$/,Sb=/([?&])_=[^&]*/,Tb=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ub=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Vb=/^(?:GET|HEAD)$/,Wb=/^\/\//,Xb={},Yb={},Zb="*/".concat("*"),$b=ja.createElement("a");$b.href=Jb.href,za.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Jb.href,type:"GET",isLocal:Ub.test(Jb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Zb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":za.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?fa(fa(a,za.ajaxSettings),b):fa(za.ajaxSettings,a)},ajaxPrefilter:da(Xb),ajaxTransport:da(Yb),ajax:function(a,c){function d(a,c,d,h){var j,m,n,u,v,w=c;k||(k=!0,i&&b.clearTimeout(i),e=void 0,g=h||"",x.readyState=a>0?4:0,j=a>=200&&a<300||304===a,d&&(u=ga(o,x,d)),u=ha(o,u,x,j),j?(o.ifModified&&(v=x.getResponseHeader("Last-Modified"),v&&(za.lastModified[f]=v),(v=x.getResponseHeader("etag"))&&(za.etag[f]=v)),204===a||"HEAD"===o.type?w="nocontent":304===a?w="notmodified":(w=u.state,m=u.data,n=u.error,j=!n)):(n=w,!a&&w||(w="error",a<0&&(a=0))),x.status=a,x.statusText=(c||w)+"",j?r.resolveWith(p,[m,w,x]):r.rejectWith(p,[x,w,n]),x.statusCode(t),t=void 0,l&&q.trigger(j?"ajaxSuccess":"ajaxError",[x,o,j?m:n]),s.fireWith(p,[x,w]),l&&(q.trigger("ajaxComplete",[x,o]),--za.active||za.event.trigger("ajaxStop")))}"object"==typeof a&&(c=a,a=void 0),c=c||{};var e,f,g,h,i,j,k,l,m,n,o=za.ajaxSetup({},c),p=o.context||o,q=o.context&&(p.nodeType||p.jquery)?za(p):za.event,r=za.Deferred(),s=za.Callbacks("once memory"),t=o.statusCode||{},u={},v={},w="canceled",x={readyState:0,getResponseHeader:function(a){var b;if(k){if(!h)for(h={};b=Tb.exec(g);)h[b[1].toLowerCase()+" "]=(h[b[1].toLowerCase()+" "]||[]).concat(b[2]);b=h[a.toLowerCase()+" "]}return null==b?null:b.join(", ")},getAllResponseHeaders:function(){return k?g:null},setRequestHeader:function(a,b){return null==k&&(a=v[a.toLowerCase()]=v[a.toLowerCase()]||a,u[a]=b),this},overrideMimeType:function(a){return null==k&&(o.mimeType=a),this},statusCode:function(a){var b;if(a)if(k)x.always(a[x.status]);else for(b in a)t[b]=[t[b],a[b]];return this},abort:function(a){var b=a||w;return e&&e.abort(b),d(0,b),this}};if(r.promise(x),o.url=((a||o.url||Jb.href)+"").replace(Wb,Jb.protocol+"//"),o.type=c.method||c.type||o.method||o.type,o.dataTypes=(o.dataType||"*").toLowerCase().match(Ka)||[""],null==o.crossDomain){j=ja.createElement("a");try{j.href=o.url,j.href=j.href,o.crossDomain=$b.protocol+"//"+$b.host!=j.protocol+"//"+j.host}catch(a){o.crossDomain=!0}}if(o.data&&o.processData&&"string"!=typeof o.data&&(o.data=za.param(o.data,o.traditional)),ea(Xb,o,c,x),k)return x;l=za.event&&o.global,l&&0==za.active++&&za.event.trigger("ajaxStart"),o.type=o.type.toUpperCase(),o.hasContent=!Vb.test(o.type),f=o.url.replace(Rb,""),o.hasContent?o.data&&o.processData&&0===(o.contentType||"").indexOf("application/x-www-form-urlencoded")&&(o.data=o.data.replace(Qb,"+")):(n=o.url.slice(f.length),o.data&&(o.processData||"string"==typeof o.data)&&(f+=(Lb.test(f)?"&":"?")+o.data,delete o.data),!1===o.cache&&(f=f.replace(Sb,"$1"),n=(Lb.test(f)?"&":"?")+"_="+Kb+++n),o.url=f+n),o.ifModified&&(za.lastModified[f]&&x.setRequestHeader("If-Modified-Since",za.lastModified[f]),za.etag[f]&&x.setRequestHeader("If-None-Match",za.etag[f])),(o.data&&o.hasContent&&!1!==o.contentType||c.contentType)&&x.setRequestHeader("Content-Type",o.contentType),x.setRequestHeader("Accept",o.dataTypes[0]&&o.accepts[o.dataTypes[0]]?o.accepts[o.dataTypes[0]]+("*"!==o.dataTypes[0]?", "+Zb+"; q=0.01":""):o.accepts["*"]);for(m in o.headers)x.setRequestHeader(m,o.headers[m]);if(o.beforeSend&&(!1===o.beforeSend.call(p,x,o)||k))return x.abort();if(w="abort",s.add(o.complete),x.done(o.success),x.fail(o.error),e=ea(Yb,o,c,x)){if(x.readyState=1,l&&q.trigger("ajaxSend",[x,o]),k)return x;o.async&&o.timeout>0&&(i=b.setTimeout(function(){x.abort("timeout")},o.timeout));try{k=!1,e.send(u,d)}catch(a){if(k)throw a;d(-1,a)}}else d(-1,"No Transport");return x},getJSON:function(a,b,c){return za.get(a,b,c,"json")},getScript:function(a,b){return za.get(a,void 0,b,"script")}}),za.each(["get","post"],function(a,b){za[b]=function(a,c,d,e){return va(c)&&(e=e||d,d=c,c=void 0),za.ajax(za.extend({url:a,type:b,dataType:e,data:c,success:d},za.isPlainObject(a)&&a))}}),za._evalUrl=function(a,b){return za.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(a){za.globalEval(a,b)}})},za.fn.extend({wrapAll:function(a){var b;return this[0]&&(va(a)&&(a=a.call(this[0])),b=za(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this)),this},wrapInner:function(a){return va(a)?this.each(function(b){za(this).wrapInner(a.call(this,b))}):this.each(function(){var b=za(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=va(a);return this.each(function(c){za(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(a){return this.parent(a).not("body").each(function(){za(this).replaceWith(this.childNodes)}),this}}),za.expr.pseudos.hidden=function(a){return!za.expr.pseudos.visible(a)},za.expr.pseudos.visible=function(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)},za.ajaxSettings.xhr=function(){try{return new b.XMLHttpRequest}catch(a){}};var _b={0:200,1223:204},ac=za.ajaxSettings.xhr();ua.cors=!!ac&&"withCredentials"in ac,ua.ajax=ac=!!ac,za.ajaxTransport(function(a){var c,d;if(ua.cors||ac&&!a.crossDomain)return{send:function(e,f){var g,h=a.xhr();if(h.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(g in a.xhrFields)h[g]=a.xhrFields[g];a.mimeType&&h.overrideMimeType&&h.overrideMimeType(a.mimeType),a.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");for(g in e)h.setRequestHeader(g,e[g]);c=function(a){return function(){c&&(c=d=h.onload=h.onerror=h.onabort=h.ontimeout=h.onreadystatechange=null,"abort"===a?h.abort():"error"===a?"number"!=typeof h.status?f(0,"error"):f(h.status,h.statusText):f(_b[h.status]||h.status,h.statusText,"text"!==(h.responseType||"text")||"string"!=typeof h.responseText?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=c(),d=h.onerror=h.ontimeout=c("error"),void 0!==h.onabort?h.onabort=d:h.onreadystatechange=function(){4===h.readyState&&b.setTimeout(function(){c&&d()})},c=c("abort");try{h.send(a.hasContent&&a.data||null)}catch(a){if(c)throw a}},abort:function(){c&&c()}}}),za.ajaxPrefilter(function(a){a.crossDomain&&(a.contents.script=!1)}),za.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return za.globalEval(a),a}}}),za.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),za.ajaxTransport("script",function(a){if(a.crossDomain||a.scriptAttrs){var b,c;return{send:function(d,e){b=za("<script>").attr(a.scriptAttrs||{}).prop({charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),ja.head.appendChild(b[0])},abort:function(){c&&c()}}}});var bc=[],cc=/(=)\?(?=&|$)|\?\?/;za.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=bc.pop()||za.expando+"_"+Kb++;return this[a]=!0,a}}),za.ajaxPrefilter("json jsonp",function(a,c,d){var e,f,g,h=!1!==a.jsonp&&(cc.test(a.url)?"url":"string"==typeof a.data&&0===(a.contentType||"").indexOf("application/x-www-form-urlencoded")&&cc.test(a.data)&&"data");if(h||"jsonp"===a.dataTypes[0])return e=a.jsonpCallback=va(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,h?a[h]=a[h].replace(cc,"$1"+e):!1!==a.jsonp&&(a.url+=(Lb.test(a.url)?"&":"?")+a.jsonp+"="+e),a.converters["script json"]=function(){return g||za.error(e+" was not called"),g[0]},a.dataTypes[0]="json",f=b[e],b[e]=function(){g=arguments},d.always(function(){void 0===f?za(b).removeProp(e):b[e]=f,a[e]&&(a.jsonpCallback=c.jsonpCallback,bc.push(e)),g&&va(f)&&f(g[0]),g=f=void 0}),"script"}),ua.createHTMLDocument=function(){var a=ja.implementation.createHTMLDocument("").body;return a.innerHTML="<form></form><form></form>",2===a.childNodes.length}(),za.parseHTML=function(a,b,c){if("string"!=typeof a)return[];"boolean"==typeof b&&(c=b,b=!1);var d,e,f;return b||(ua.createHTMLDocument?(b=ja.implementation.createHTMLDocument(""),d=b.createElement("base"),d.href=ja.location.href,b.head.appendChild(d)):b=ja),e=Fa.exec(a),f=!c&&[],e?[b.createElement(e[1])]:(e=y([a],b,f),f&&f.length&&za(f).remove(),za.merge([],e.childNodes))},za.fn.load=function(a,b,c){var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=_(a.slice(h)),a=a.slice(0,h)),va(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&za.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?za("<div>").append(za.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},za.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){za.fn[b]=function(a){return this.on(b,a)}}),za.expr.pseudos.animated=function(a){return za.grep(za.timers,function(b){return a===b.elem}).length},za.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=za.css(a,"position"),l=za(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=za.css(a,"top"),i=za.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),va(b)&&(b=b.call(a,c,za.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},za.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){za.offset.setOffset(this,a,b)});var b,c,d=this[0];if(d)return d.getClientRects().length?(b=d.getBoundingClientRect(),c=d.ownerDocument.defaultView,{top:b.top+c.pageYOffset,left:b.left+c.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var a,b,c,d=this[0],e={top:0,left:0};if("fixed"===za.css(d,"position"))b=d.getBoundingClientRect();else{for(b=this.offset(),c=d.ownerDocument,a=d.offsetParent||c.documentElement;a&&(a===c.body||a===c.documentElement)&&"static"===za.css(a,"position");)a=a.parentNode;a&&a!==d&&1===a.nodeType&&(e=za(a).offset(),e.top+=za.css(a,"borderTopWidth",!0),e.left+=za.css(a,"borderLeftWidth",!0))}return{top:b.top-e.top-za.css(d,"marginTop",!0),left:b.left-e.left-za.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent;a&&"static"===za.css(a,"position");)a=a.offsetParent;return a||Ya})}}),za.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;za.fn[a]=function(d){return Na(this,function(a,d,e){var f;if(wa(a)?f=a:9===a.nodeType&&(f=a.defaultView),void 0===e)return f?f[b]:a[d];f?f.scrollTo(c?f.pageXOffset:e,c?e:f.pageYOffset):a[d]=e},a,d,arguments.length)}}),za.each(["top","left"],function(a,b){za.cssHooks[b]=N(ua.pixelPosition,function(a,c){if(c)return c=M(a,b),ob.test(c)?za(a).position()[b]+"px":c})}),za.each({Height:"height",Width:"width"},function(a,b){za.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){za.fn[d]=function(e,f){var g=arguments.length&&(c||"boolean"!=typeof e),h=c||(!0===e||!0===f?"margin":"border");return Na(this,function(b,c,e){var f;return wa(b)?0===d.indexOf("outer")?b["inner"+a]:b.document.documentElement["client"+a]:9===b.nodeType?(f=b.documentElement,Math.max(b.body["scroll"+a],f["scroll"+a],b.body["offset"+a],f["offset"+a],f["client"+a])):void 0===e?za.css(b,c,h):za.style(b,c,e,h)},b,g?e:void 0,g)}})}),za.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(a,b){za.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),za.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),za.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}}),za.proxy=function(a,b){var c,d,e;if("string"==typeof b&&(c=a[b],b=a,a=c),va(a))return d=la.call(arguments,2),e=function(){return a.apply(b||this,d.concat(la.call(arguments)))},e.guid=a.guid=a.guid||za.guid++,e},za.holdReady=function(a){a?za.readyWait++:za.ready(!0)},za.isArray=Array.isArray,za.parseJSON=JSON.parse,za.nodeName=g,za.isFunction=va,za.isWindow=wa,za.camelCase=p,za.type=e,za.now=Date.now,za.isNumeric=function(a){var b=za.type(a);return("number"===b||"string"===b)&&!isNaN(a-parseFloat(a))},"function"==typeof a&&a.amd&&a("jquery",[],function(){return za});var dc=b.jQuery,ec=b.$;return za.noConflict=function(a){return b.$===za&&(b.$=ec),a&&b.jQuery===za&&(b.jQuery=dc),za},c||(b.jQuery=b.$=za),za})},{}],257:[function(a,b,c){(function(a){function c(a){for(var b=Object.keys(e),c=0,d=b.length;c<d;c++){var f=b[c];if(e[f]===a)return f}return a&&"0x"+a.toString(16)}function d(){this.tState=q,this.value=void 0,this.string=void 0,this.unicode=void 0,this.negative=void 0,this.magnatude=void 0,this.position=void 0,this.exponent=void 0,this.negativeExponent=void 0,this.key=void 0,this.mode=void 0,this.stack=[],this.state=P,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new a(2),3:new a(3),4:new a(4)}}var e={},f=e.LEFT_BRACE=1,g=e.RIGHT_BRACE=2,h=e.LEFT_BRACKET=3,i=e.RIGHT_BRACKET=4,j=e.COLON=5,k=e.COMMA=6,l=e.TRUE=7,m=e.FALSE=8,n=e.NULL=9,o=e.STRING=10,p=e.NUMBER=11,q=e.START=17,r=e.TRUE1=33,s=e.TRUE2=34,t=e.TRUE3=35,u=e.FALSE1=49,v=e.FALSE2=50,w=e.FALSE3=51,x=e.FALSE4=52,y=e.NULL1=65,z=e.NULL3=66,A=e.NULL2=67,B=e.NUMBER1=81,C=e.NUMBER2=82,D=e.NUMBER3=83,E=e.NUMBER4=84,F=e.NUMBER5=85,G=e.NUMBER6=86,H=e.NUMBER7=87,I=e.NUMBER8=88,J=e.STRING1=97,K=e.STRING2=98,L=e.STRING3=99,M=e.STRING4=100,N=e.STRING5=101,O=e.STRING6=102,P=e.VALUE=113,Q=e.KEY=114,R=e.OBJECT=129,S=e.ARRAY=130,T=d.prototype;T.charError=function(a,b){this.onError(new Error("Unexpected "+JSON.stringify(String.fromCharCode(a[b]))+" at position "+b+" in state "+c(this.tState)))},T.onError=function(a){throw a},T.write=function(b){"string"==typeof b&&(b=new a(b));for(var c,d=0,e=b.length;d<e;d++)if(this.tState===q)c=b[d],123===c?this.onToken(f,"{"):125===c?this.onToken(g,"}"):91===c?this.onToken(h,"["):93===c?this.onToken(i,"]"):58===c?this.onToken(j,":"):44===c?this.onToken(k,","):116===c?this.tState=r:102===c?this.tState=u:110===c?this.tState=y:34===c?(this.string="",this.tState=J):45===c?(this.negative=!0,this.tState=B):48===c?(this.magnatude=0,this.tState=C):c>48&&c<64?(this.magnatude=c-48,this.tState=D):32===c||9===c||10===c||13===c||this.charError(b,d);else if(this.tState===J)if(c=b[d],this.bytes_remaining>0){for(var P=0;P<this.bytes_remaining;P++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+P]=b[P];this.string+=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,d=d+P-1}else if(0===this.bytes_remaining&&c>=128)if(c>=194&&c<=223&&(this.bytes_in_sequence=2),c>=224&&c<=239&&(this.bytes_in_sequence=3),c>=240&&c<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+d>b.length){for(var Q=0;Q<=b.length-1-d;Q++)this.temp_buffs[this.bytes_in_sequence][Q]=b[d+Q];this.bytes_remaining=d+this.bytes_in_sequence-b.length,d=b.length-1}else this.string+=b.slice(d,d+this.bytes_in_sequence).toString(),d=d+this.bytes_in_sequence-1;else 34===c?(this.tState=q,this.onToken(o,this.string),this.string=void 0):92===c?this.tState=K:c>=32?this.string+=String.fromCharCode(c):this.charError(b,d);else this.tState===K?(c=b[d],34===c?(this.string+='"',this.tState=J):92===c?(this.string+="\\",this.tState=J):47===c?(this.string+="/",this.tState=J):98===c?(this.string+="\b",this.tState=J):102===c?(this.string+="\f",this.tState=J):110===c?(this.string+="\n",this.tState=J):114===c?(this.string+="\r",this.tState=J):116===c?(this.string+="\t",this.tState=J):117===c?(this.unicode="",this.tState=L):this.charError(b,d)):this.tState===L||this.tState===M||this.tState===N||this.tState===O?(c=b[d],c>=48&&c<64||c>64&&c<=70||c>96&&c<=102?(this.unicode+=String.fromCharCode(c),this.tState++===O&&(this.string+=String.fromCharCode(parseInt(this.unicode,16)),this.unicode=void 0,this.tState=J)):this.charError(b,d)):this.tState===B?(c=b[d],48===c?(this.magnatude=0,this.tState=C):c>48&&c<64?(this.magnatude=c-48,this.tState=D):this.charError(b,d)):this.tState===C?(c=b[d],46===c?(this.position=.1,this.tState=E):101===c||69===c?(this.exponent=0,this.tState=G):(this.tState=q,this.onToken(p,0),this.magnatude=void 0,this.negative=void 0,d--)):this.tState===D?(c=b[d],46===c?(this.position=.1,this.tState=E):101===c||69===c?(this.exponent=0,this.tState=G):c>=48&&c<64?this.magnatude=10*this.magnatude+c-48:(this.tState=q,this.negative&&(this.magnatude=-this.magnatude,this.negative=void 0),this.onToken(p,this.magnatude),this.magnatude=void 0,d--)):this.tState===E?(c=b[d],c>=48&&c<64?(this.magnatude+=this.position*(c-48),this.position/=10,this.tState=F):this.charError(b,d)):this.tState===F?(c=b[d],c>=48&&c<64?(this.magnatude+=this.position*(c-48),this.position/=10):101===c||69===c?(this.exponent=0,this.tState=G):(this.tState=q,this.negative&&(this.magnatude=-this.magnatude,this.negative=void 0),this.onToken(p,this.negative?-this.magnatude:this.magnatude),this.magnatude=void 0,this.position=void 0,d--)):this.tState===G?(c=b[d],43===c||45===c?(45===c&&(this.negativeExponent=!0),this.tState=H):c>=48&&c<64?(this.exponent=10*this.exponent+(c-48),this.tState=I):this.charError(b,d)):this.tState===H?(c=b[d],c>=48&&c<64?(this.exponent=10*this.exponent+(c-48),this.tState=I):this.charError(b,d)):this.tState===I?(c=b[d],c>=48&&c<64?this.exponent=10*this.exponent+(c-48):(this.negativeExponent&&(this.exponent=-this.exponent,this.negativeExponent=void 0),this.magnatude*=Math.pow(10,this.exponent),this.exponent=void 0,this.negative&&(this.magnatude=-this.magnatude,this.negative=void 0),this.tState=q,this.onToken(p,this.magnatude),this.magnatude=void 0,d--)):this.tState===r?114===b[d]?this.tState=s:this.charError(b,d):this.tState===s?117===b[d]?this.tState=t:this.charError(b,d):this.tState===t?101===b[d]?(this.tState=q,this.onToken(l,!0)):this.charError(b,d):this.tState===u?97===b[d]?this.tState=v:this.charError(b,d):this.tState===v?108===b[d]?this.tState=w:this.charError(b,d):this.tState===w?115===b[d]?this.tState=x:this.charError(b,d):this.tState===x?101===b[d]?(this.tState=q,this.onToken(m,!1)):this.charError(b,d):this.tState===y?117===b[d]?this.tState=z:this.charError(b,d):this.tState===z?108===b[d]?this.tState=A:this.charError(b,d):this.tState===A&&(108===b[d]?(this.tState=q,this.onToken(n,null)):this.charError(b,d))},T.onToken=function(a,b){},T.parseError=function(a,b){this.onError(new Error("Unexpected "+c(a)+(b?"("+JSON.stringify(b)+")":"")+" in state "+c(this.state)))},T.onError=function(a){throw a},T.push=function(){this.stack.push({value:this.value,key:this.key,mode:this.mode})},T.pop=function(){var a=this.value,b=this.stack.pop();this.value=b.value,this.key=b.key,this.mode=b.mode,this.emit(a),this.mode||(this.state=P)},T.emit=function(a){this.mode&&(this.state=k),this.onValue(a)},T.onValue=function(a){},T.onToken=function(a,b){this.state===P?a===o||a===p||a===l||a===m||a===n?(this.value&&(this.value[this.key]=b),this.emit(b)):a===f?(this.push(),this.value?this.value=this.value[this.key]={}:this.value={},this.key=void 0,this.state=Q,this.mode=R):a===h?(this.push(),this.value?this.value=this.value[this.key]=[]:this.value=[],this.key=0,this.mode=S,this.state=P):a===g?this.mode===R?this.pop():this.parseError(a,b):a===i&&this.mode===S?this.pop():this.parseError(a,b):this.state===Q?a===o?(this.key=b,this.state=j):a===g?this.pop():this.parseError(a,b):this.state===j?a===j?this.state=P:this.parseError(a,b):this.state===k?a===k?this.mode===S?(this.key++,this.state=P):this.mode===R&&(this.state=Q):a===i&&this.mode===S||a===g&&this.mode===R?this.pop():this.parseError(a,b):this.parseError(a,b)},b.exports=d}).call(this,a("buffer").Buffer)},{buffer:266}],258:[function(b,c,d){!function(e,f){"function"==typeof b&&"object"==typeof d&&"object"==typeof c?c.exports=f():"function"==typeof a&&a.amd?a(function(){return f()}):e.pluralize=f()}(this,function(){function a(a){return"string"==typeof a?new RegExp("^"+a+"$","i"):a}function b(a,b){return a===b?b:a===a.toUpperCase()?b.toUpperCase():a[0]===a[0].toUpperCase()?b.charAt(0).toUpperCase()+b.substr(1).toLowerCase():b.toLowerCase()}function c(a,b){return a.replace(/\$(\d{1,2})/g,function(a,c){return b[c]||""})}function d(a,d){return a.replace(d[0],function(e,f){var g=c(d[1],arguments);return""===e?b(a[f-1],g):b(e,g)})}function e(a,b,c){if(!a.length||k.hasOwnProperty(a))return b;for(var e=c.length;e--;){var f=c[e];if(f[0].test(b))return d(b,f)}return b}function f(a,c,d){return function(f){var g=f.toLowerCase();return c.hasOwnProperty(g)?b(f,g):a.hasOwnProperty(g)?b(f,a[g]):e(g,f,d)}}function g(a,b,c,d){return function(d){var f=d.toLowerCase();return!!b.hasOwnProperty(f)||!a.hasOwnProperty(f)&&e(f,f,c)===f}}function h(a,b,c){var d=1===b?h.singular(a):h.plural(a);return(c?b+" ":"")+d}var i=[],j=[],k={},l={},m={};return h.plural=f(m,l,i),h.isPlural=g(m,l,i),h.singular=f(l,m,j),h.isSingular=g(l,m,j),h.addPluralRule=function(b,c){i.push([a(b),c])},h.addSingularRule=function(b,c){j.push([a(b),c])},h.addUncountableRule=function(a){if("string"==typeof a)return void(k[a.toLowerCase()]=!0);h.addPluralRule(a,"$0"),h.addSingularRule(a,"$0")},h.addIrregularRule=function(a,b){b=b.toLowerCase(),a=a.toLowerCase(),m[a]=b,l[b]=a},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["was","were"],["has","have"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["looey","looies"],["thief","thieves"],["groove","grooves"],["pickaxe","pickaxes"],["whiskey","whiskies"]].forEach(function(a){return h.addIrregularRule(a[0],a[1])}),[[/s?$/i,"s"],[/[^\u0000-\u007F]$/i,"$0"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|tlas|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[emjzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|octop|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/(m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach(function(a){return h.addPluralRule(a[0],a[1])}),[[/s$/i,""],[/(ss)$/i,"$1"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/ies$/i,"y"],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,"$1ie"],[/\b(mon|smil)ies$/i,"$1ey"],[/(m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|tlas|gas|(?:her|at|gr)o|ris)(?:es)?$/i,"$1"],[/(analy|ba|diagno|parenthe|progno|synop|the|empha|cri)(?:sis|ses)$/i,"$1sis"],[/(movie|twelve|abuse|e[mn]u)s$/i,"$1"],[/(test)(?:is|es)$/i,"$1is"],[/(alumn|syllab|octop|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach(function(a){return h.addSingularRule(a[0],a[1])}),["adulthood","advice","agenda","aid","alcohol","ammo","anime","athletics","audio","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","cod","commerce","cooperation","corps","debris","diabetes","digestion","elk","energy","equipment","excretion","expertise","flounder","fun","gallows","garbage","graffiti","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","mail","media","mews","moose","music","manga","news","pike","plankton","pliers","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","species","staff","swine","tennis","traffic","transporation","trout","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/[^aeiou]ese$/i,/deer$/i,/fish$/i,/measles$/i,/o[iu]s$/i,/pox$/i,/sheep$/i].forEach(h.addUncountableRule),h})},{}],259:[function(b,c,d){(function(b){!function(b,e){"object"==typeof d&&void 0!==c?c.exports=e():"function"==typeof a&&a.amd?a(e):b.Popper=e()}(this,function(){"use strict";function a(a){var b=!1;return function(){b||(b=!0,
window.Promise.resolve().then(function(){b=!1,a()}))}}function c(a){var b=!1;return function(){b||(b=!0,setTimeout(function(){b=!1,a()},la))}}function d(a){var b={};return a&&"[object Function]"===b.toString.call(a)}function e(a,b){if(1!==a.nodeType)return[];var c=a.ownerDocument.defaultView,d=c.getComputedStyle(a,null);return b?d[b]:d}function f(a){return"HTML"===a.nodeName?a:a.parentNode||a.host}function g(a){if(!a)return document.body;switch(a.nodeName){case"HTML":case"BODY":return a.ownerDocument.body;case"#document":return a.body}var b=e(a),c=b.overflow,d=b.overflowX;return/(auto|scroll|overlay)/.test(c+b.overflowY+d)?a:g(f(a))}function h(a){return 11===a?pa:10===a?qa:pa||qa}function i(a){if(!a)return document.documentElement;for(var b=h(10)?document.body:null,c=a.offsetParent||null;c===b&&a.nextElementSibling;)c=(a=a.nextElementSibling).offsetParent;var d=c&&c.nodeName;return d&&"BODY"!==d&&"HTML"!==d?-1!==["TH","TD","TABLE"].indexOf(c.nodeName)&&"static"===e(c,"position")?i(c):c:a?a.ownerDocument.documentElement:document.documentElement}function j(a){var b=a.nodeName;return"BODY"!==b&&("HTML"===b||i(a.firstElementChild)===a)}function k(a){return null!==a.parentNode?k(a.parentNode):a}function l(a,b){if(!(a&&a.nodeType&&b&&b.nodeType))return document.documentElement;var c=a.compareDocumentPosition(b)&Node.DOCUMENT_POSITION_FOLLOWING,d=c?a:b,e=c?b:a,f=document.createRange();f.setStart(d,0),f.setEnd(e,0);var g=f.commonAncestorContainer;if(a!==g&&b!==g||d.contains(e))return j(g)?g:i(g);var h=k(a);return h.host?l(h.host,b):l(a,k(b).host)}function m(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top",c="top"===b?"scrollTop":"scrollLeft",d=a.nodeName;if("BODY"===d||"HTML"===d){var e=a.ownerDocument.documentElement;return(a.ownerDocument.scrollingElement||e)[c]}return a[c]}function n(a,b){var c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d=m(b,"top"),e=m(b,"left"),f=c?-1:1;return a.top+=d*f,a.bottom+=d*f,a.left+=e*f,a.right+=e*f,a}function o(a,b){var c="x"===b?"Left":"Top",d="Left"===c?"Right":"Bottom";return parseFloat(a["border"+c+"Width"],10)+parseFloat(a["border"+d+"Width"],10)}function p(a,b,c,d){return Math.max(b["offset"+a],b["scroll"+a],c["client"+a],c["offset"+a],c["scroll"+a],h(10)?parseInt(c["offset"+a])+parseInt(d["margin"+("Height"===a?"Top":"Left")])+parseInt(d["margin"+("Height"===a?"Bottom":"Right")]):0)}function q(a){var b=a.body,c=a.documentElement,d=h(10)&&getComputedStyle(c);return{height:p("Height",b,c,d),width:p("Width",b,c,d)}}function r(a){return ua({},a,{right:a.left+a.width,bottom:a.top+a.height})}function s(a){var b={};try{if(h(10)){b=a.getBoundingClientRect();var c=m(a,"top"),d=m(a,"left");b.top+=c,b.left+=d,b.bottom+=c,b.right+=d}else b=a.getBoundingClientRect()}catch(a){}var f={left:b.left,top:b.top,width:b.right-b.left,height:b.bottom-b.top},g="HTML"===a.nodeName?q(a.ownerDocument):{},i=g.width||a.clientWidth||f.right-f.left,j=g.height||a.clientHeight||f.bottom-f.top,k=a.offsetWidth-i,l=a.offsetHeight-j;if(k||l){var n=e(a);k-=o(n,"x"),l-=o(n,"y"),f.width-=k,f.height-=l}return r(f)}function t(a,b){var c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d=h(10),f="HTML"===b.nodeName,i=s(a),j=s(b),k=g(a),l=e(b),m=parseFloat(l.borderTopWidth,10),o=parseFloat(l.borderLeftWidth,10);c&&f&&(j.top=Math.max(j.top,0),j.left=Math.max(j.left,0));var p=r({top:i.top-j.top-m,left:i.left-j.left-o,width:i.width,height:i.height});if(p.marginTop=0,p.marginLeft=0,!d&&f){var q=parseFloat(l.marginTop,10),t=parseFloat(l.marginLeft,10);p.top-=m-q,p.bottom-=m-q,p.left-=o-t,p.right-=o-t,p.marginTop=q,p.marginLeft=t}return(d&&!c?b.contains(k):b===k&&"BODY"!==k.nodeName)&&(p=n(p,b)),p}function u(a){var b=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=a.ownerDocument.documentElement,d=t(a,c),e=Math.max(c.clientWidth,window.innerWidth||0),f=Math.max(c.clientHeight,window.innerHeight||0),g=b?0:m(c),h=b?0:m(c,"left");return r({top:g-d.top+d.marginTop,left:h-d.left+d.marginLeft,width:e,height:f})}function v(a){var b=a.nodeName;if("BODY"===b||"HTML"===b)return!1;if("fixed"===e(a,"position"))return!0;var c=f(a);return!!c&&v(c)}function w(a){if(!a||!a.parentElement||h())return document.documentElement;for(var b=a.parentElement;b&&"none"===e(b,"transform");)b=b.parentElement;return b||document.documentElement}function x(a,b,c,d){var e=arguments.length>4&&void 0!==arguments[4]&&arguments[4],h={top:0,left:0},i=e?w(a):l(a,b);if("viewport"===d)h=u(i,e);else{var j=void 0;"scrollParent"===d?(j=g(f(b)),"BODY"===j.nodeName&&(j=a.ownerDocument.documentElement)):j="window"===d?a.ownerDocument.documentElement:d;var k=t(j,i,e);if("HTML"!==j.nodeName||v(i))h=k;else{var m=q(a.ownerDocument),n=m.height,o=m.width;h.top+=k.top-k.marginTop,h.bottom=n+k.top,h.left+=k.left-k.marginLeft,h.right=o+k.left}}c=c||0;var p="number"==typeof c;return h.left+=p?c:c.left||0,h.top+=p?c:c.top||0,h.right-=p?c:c.right||0,h.bottom-=p?c:c.bottom||0,h}function y(a){return a.width*a.height}function z(a,b,c,d,e){var f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===a.indexOf("auto"))return a;var g=x(c,d,f,e),h={top:{width:g.width,height:b.top-g.top},right:{width:g.right-b.right,height:g.height},bottom:{width:g.width,height:g.bottom-b.bottom},left:{width:b.left-g.left,height:g.height}},i=Object.keys(h).map(function(a){return ua({key:a},h[a],{area:y(h[a])})}).sort(function(a,b){return b.area-a.area}),j=i.filter(function(a){var b=a.width,d=a.height;return b>=c.clientWidth&&d>=c.clientHeight}),k=j.length>0?j[0].key:i[0].key,l=a.split("-")[1];return k+(l?"-"+l:"")}function A(a,b,c){var d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return t(c,d?w(b):l(b,c),d)}function B(a){var b=a.ownerDocument.defaultView,c=b.getComputedStyle(a),d=parseFloat(c.marginTop||0)+parseFloat(c.marginBottom||0),e=parseFloat(c.marginLeft||0)+parseFloat(c.marginRight||0);return{width:a.offsetWidth+e,height:a.offsetHeight+d}}function C(a){var b={left:"right",right:"left",bottom:"top",top:"bottom"};return a.replace(/left|right|bottom|top/g,function(a){return b[a]})}function D(a,b,c){c=c.split("-")[0];var d=B(a),e={width:d.width,height:d.height},f=-1!==["right","left"].indexOf(c),g=f?"top":"left",h=f?"left":"top",i=f?"height":"width",j=f?"width":"height";return e[g]=b[g]+b[i]/2-d[i]/2,e[h]=c===h?b[h]-d[j]:b[C(h)],e}function E(a,b){return Array.prototype.find?a.find(b):a.filter(b)[0]}function F(a,b,c){if(Array.prototype.findIndex)return a.findIndex(function(a){return a[b]===c});var d=E(a,function(a){return a[b]===c});return a.indexOf(d)}function G(a,b,c){return(void 0===c?a:a.slice(0,F(a,"name",c))).forEach(function(a){a.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var c=a.function||a.fn;a.enabled&&d(c)&&(b.offsets.popper=r(b.offsets.popper),b.offsets.reference=r(b.offsets.reference),b=c(b,a))}),b}function H(){if(!this.state.isDestroyed){var a={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};a.offsets.reference=A(this.state,this.popper,this.reference,this.options.positionFixed),a.placement=z(this.options.placement,a.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),a.originalPlacement=a.placement,a.positionFixed=this.options.positionFixed,a.offsets.popper=D(this.popper,a.offsets.reference,a.placement),a.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",a=G(this.modifiers,a),this.state.isCreated?this.options.onUpdate(a):(this.state.isCreated=!0,this.options.onCreate(a))}}function I(a,b){return a.some(function(a){var c=a.name;return a.enabled&&c===b})}function J(a){for(var b=[!1,"ms","Webkit","Moz","O"],c=a.charAt(0).toUpperCase()+a.slice(1),d=0;d<b.length;d++){var e=b[d],f=e?""+e+c:a;if(void 0!==document.body.style[f])return f}return null}function K(){return this.state.isDestroyed=!0,I(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[J("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function L(a){var b=a.ownerDocument;return b?b.defaultView:window}function M(a,b,c,d){var e="BODY"===a.nodeName,f=e?a.ownerDocument.defaultView:a;f.addEventListener(b,c,{passive:!0}),e||M(g(f.parentNode),b,c,d),d.push(f)}function N(a,b,c,d){c.updateBound=d,L(a).addEventListener("resize",c.updateBound,{passive:!0});var e=g(a);return M(e,"scroll",c.updateBound,c.scrollParents),c.scrollElement=e,c.eventsEnabled=!0,c}function O(){this.state.eventsEnabled||(this.state=N(this.reference,this.options,this.state,this.scheduleUpdate))}function P(a,b){return L(a).removeEventListener("resize",b.updateBound),b.scrollParents.forEach(function(a){a.removeEventListener("scroll",b.updateBound)}),b.updateBound=null,b.scrollParents=[],b.scrollElement=null,b.eventsEnabled=!1,b}function Q(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=P(this.reference,this.state))}function R(a){return""!==a&&!isNaN(parseFloat(a))&&isFinite(a)}function S(a,b){Object.keys(b).forEach(function(c){var d="";-1!==["width","height","top","right","bottom","left"].indexOf(c)&&R(b[c])&&(d="px"),a.style[c]=b[c]+d})}function T(a,b){Object.keys(b).forEach(function(c){!1!==b[c]?a.setAttribute(c,b[c]):a.removeAttribute(c)})}function U(a){return S(a.instance.popper,a.styles),T(a.instance.popper,a.attributes),a.arrowElement&&Object.keys(a.arrowStyles).length&&S(a.arrowElement,a.arrowStyles),a}function V(a,b,c,d,e){var f=A(e,b,a,c.positionFixed),g=z(c.placement,f,b,a,c.modifiers.flip.boundariesElement,c.modifiers.flip.padding);return b.setAttribute("x-placement",g),S(b,{position:c.positionFixed?"fixed":"absolute"}),c}function W(a,b){var c=a.offsets,d=c.popper,e=c.reference,f=Math.round,g=Math.floor,h=function(a){return a},i=f(e.width),j=f(d.width),k=-1!==["left","right"].indexOf(a.placement),l=-1!==a.placement.indexOf("-"),m=i%2==j%2,n=i%2==1&&j%2==1,o=b?k||l||m?f:g:h,p=b?f:h;return{left:o(n&&!l&&b?d.left-1:d.left),top:p(d.top),bottom:p(d.bottom),right:o(d.right)}}function X(a,b){var c=b.x,d=b.y,e=a.offsets.popper,f=E(a.instance.modifiers,function(a){return"applyStyle"===a.name}).gpuAcceleration;void 0!==f&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var g=void 0!==f?f:b.gpuAcceleration,h=i(a.instance.popper),j=s(h),k={position:e.position},l=W(a,window.devicePixelRatio<2||!va),m="bottom"===c?"top":"bottom",n="right"===d?"left":"right",o=J("transform"),p=void 0,q=void 0;if(q="bottom"===m?"HTML"===h.nodeName?-h.clientHeight+l.bottom:-j.height+l.bottom:l.top,p="right"===n?"HTML"===h.nodeName?-h.clientWidth+l.right:-j.width+l.right:l.left,g&&o)k[o]="translate3d("+p+"px, "+q+"px, 0)",k[m]=0,k[n]=0,k.willChange="transform";else{var r="bottom"===m?-1:1,t="right"===n?-1:1;k[m]=q*r,k[n]=p*t,k.willChange=m+", "+n}var u={"x-placement":a.placement};return a.attributes=ua({},u,a.attributes),a.styles=ua({},k,a.styles),a.arrowStyles=ua({},a.offsets.arrow,a.arrowStyles),a}function Y(a,b,c){var d=E(a,function(a){return a.name===b}),e=!!d&&a.some(function(a){return a.name===c&&a.enabled&&a.order<d.order});if(!e){var f="`"+b+"`",g="`"+c+"`";console.warn(g+" modifier is required by "+f+" modifier in order to work, be sure to include it before "+f+"!")}return e}function Z(a,b){var c;if(!Y(a.instance.modifiers,"arrow","keepTogether"))return a;var d=b.element;if("string"==typeof d){if(!(d=a.instance.popper.querySelector(d)))return a}else if(!a.instance.popper.contains(d))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),a;var f=a.placement.split("-")[0],g=a.offsets,h=g.popper,i=g.reference,j=-1!==["left","right"].indexOf(f),k=j?"height":"width",l=j?"Top":"Left",m=l.toLowerCase(),n=j?"left":"top",o=j?"bottom":"right",p=B(d)[k];i[o]-p<h[m]&&(a.offsets.popper[m]-=h[m]-(i[o]-p)),i[m]+p>h[o]&&(a.offsets.popper[m]+=i[m]+p-h[o]),a.offsets.popper=r(a.offsets.popper);var q=i[m]+i[k]/2-p/2,s=e(a.instance.popper),t=parseFloat(s["margin"+l],10),u=parseFloat(s["border"+l+"Width"],10),v=q-a.offsets.popper[m]-t-u;return v=Math.max(Math.min(h[k]-p,v),0),a.arrowElement=d,a.offsets.arrow=(c={},ta(c,m,Math.round(v)),ta(c,n,""),c),a}function $(a){return"end"===a?"start":"start"===a?"end":a}function _(a){var b=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=xa.indexOf(a),d=xa.slice(c+1).concat(xa.slice(0,c));return b?d.reverse():d}function aa(a,b){if(I(a.instance.modifiers,"inner"))return a;if(a.flipped&&a.placement===a.originalPlacement)return a;var c=x(a.instance.popper,a.instance.reference,b.padding,b.boundariesElement,a.positionFixed),d=a.placement.split("-")[0],e=C(d),f=a.placement.split("-")[1]||"",g=[];switch(b.behavior){case ya.FLIP:g=[d,e];break;case ya.CLOCKWISE:g=_(d);break;case ya.COUNTERCLOCKWISE:g=_(d,!0);break;default:g=b.behavior}return g.forEach(function(h,i){if(d!==h||g.length===i+1)return a;d=a.placement.split("-")[0],e=C(d);var j=a.offsets.popper,k=a.offsets.reference,l=Math.floor,m="left"===d&&l(j.right)>l(k.left)||"right"===d&&l(j.left)<l(k.right)||"top"===d&&l(j.bottom)>l(k.top)||"bottom"===d&&l(j.top)<l(k.bottom),n=l(j.left)<l(c.left),o=l(j.right)>l(c.right),p=l(j.top)<l(c.top),q=l(j.bottom)>l(c.bottom),r="left"===d&&n||"right"===d&&o||"top"===d&&p||"bottom"===d&&q,s=-1!==["top","bottom"].indexOf(d),t=!!b.flipVariations&&(s&&"start"===f&&n||s&&"end"===f&&o||!s&&"start"===f&&p||!s&&"end"===f&&q),u=!!b.flipVariationsByContent&&(s&&"start"===f&&o||s&&"end"===f&&n||!s&&"start"===f&&q||!s&&"end"===f&&p),v=t||u;(m||r||v)&&(a.flipped=!0,(m||r)&&(d=g[i+1]),v&&(f=$(f)),a.placement=d+(f?"-"+f:""),a.offsets.popper=ua({},a.offsets.popper,D(a.instance.popper,a.offsets.reference,a.placement)),a=G(a.instance.modifiers,a,"flip"))}),a}function ba(a){var b=a.offsets,c=b.popper,d=b.reference,e=a.placement.split("-")[0],f=Math.floor,g=-1!==["top","bottom"].indexOf(e),h=g?"right":"bottom",i=g?"left":"top",j=g?"width":"height";return c[h]<f(d[i])&&(a.offsets.popper[i]=f(d[i])-c[j]),c[i]>f(d[h])&&(a.offsets.popper[i]=f(d[h])),a}function ca(a,b,c,d){var e=a.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),f=+e[1],g=e[2];if(!f)return a;if(0===g.indexOf("%")){var h=void 0;switch(g){case"%p":h=c;break;case"%":case"%r":default:h=d}return r(h)[b]/100*f}if("vh"===g||"vw"===g){return("vh"===g?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*f}return f}function da(a,b,c,d){var e=[0,0],f=-1!==["right","left"].indexOf(d),g=a.split(/(\+|\-)/).map(function(a){return a.trim()}),h=g.indexOf(E(g,function(a){return-1!==a.search(/,|\s/)}));g[h]&&-1===g[h].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var i=/\s*,\s*|\s+/,j=-1!==h?[g.slice(0,h).concat([g[h].split(i)[0]]),[g[h].split(i)[1]].concat(g.slice(h+1))]:[g];return j=j.map(function(a,d){var e=(1===d?!f:f)?"height":"width",g=!1;return a.reduce(function(a,b){return""===a[a.length-1]&&-1!==["+","-"].indexOf(b)?(a[a.length-1]=b,g=!0,a):g?(a[a.length-1]+=b,g=!1,a):a.concat(b)},[]).map(function(a){return ca(a,e,b,c)})}),j.forEach(function(a,b){a.forEach(function(c,d){R(c)&&(e[b]+=c*("-"===a[d-1]?-1:1))})}),e}function ea(a,b){var c=b.offset,d=a.placement,e=a.offsets,f=e.popper,g=e.reference,h=d.split("-")[0],i=void 0;return i=R(+c)?[+c,0]:da(c,f,g,h),"left"===h?(f.top+=i[0],f.left-=i[1]):"right"===h?(f.top+=i[0],f.left+=i[1]):"top"===h?(f.left+=i[0],f.top-=i[1]):"bottom"===h&&(f.left+=i[0],f.top+=i[1]),a.popper=f,a}function fa(a,b){var c=b.boundariesElement||i(a.instance.popper);a.instance.reference===c&&(c=i(c));var d=J("transform"),e=a.instance.popper.style,f=e.top,g=e.left,h=e[d];e.top="",e.left="",e[d]="";var j=x(a.instance.popper,a.instance.reference,b.padding,c,a.positionFixed);e.top=f,e.left=g,e[d]=h,b.boundaries=j;var k=b.priority,l=a.offsets.popper,m={primary:function(a){var c=l[a];return l[a]<j[a]&&!b.escapeWithReference&&(c=Math.max(l[a],j[a])),ta({},a,c)},secondary:function(a){var c="right"===a?"left":"top",d=l[c];return l[a]>j[a]&&!b.escapeWithReference&&(d=Math.min(l[c],j[a]-("right"===a?l.width:l.height))),ta({},c,d)}};return k.forEach(function(a){var b=-1!==["left","top"].indexOf(a)?"primary":"secondary";l=ua({},l,m[b](a))}),a.offsets.popper=l,a}function ga(a){var b=a.placement,c=b.split("-")[0],d=b.split("-")[1];if(d){var e=a.offsets,f=e.reference,g=e.popper,h=-1!==["bottom","top"].indexOf(c),i=h?"left":"top",j=h?"width":"height",k={start:ta({},i,f[i]),end:ta({},i,f[i]+f[j]-g[j])};a.offsets.popper=ua({},g,k[d])}return a}function ha(a){if(!Y(a.instance.modifiers,"hide","preventOverflow"))return a;var b=a.offsets.reference,c=E(a.instance.modifiers,function(a){return"preventOverflow"===a.name}).boundaries;if(b.bottom<c.top||b.left>c.right||b.top>c.bottom||b.right<c.left){if(!0===a.hide)return a;a.hide=!0,a.attributes["x-out-of-boundaries"]=""}else{if(!1===a.hide)return a;a.hide=!1,a.attributes["x-out-of-boundaries"]=!1}return a}function ia(a){var b=a.placement,c=b.split("-")[0],d=a.offsets,e=d.popper,f=d.reference,g=-1!==["left","right"].indexOf(c),h=-1===["top","left"].indexOf(c);return e[g?"left":"top"]=f[c]-(h?e[g?"width":"height"]:0),a.placement=C(b),a.offsets.popper=r(e),a}for(var ja="undefined"!=typeof window&&"undefined"!=typeof document,ka=["Edge","Trident","Firefox"],la=0,ma=0;ma<ka.length;ma+=1)if(ja&&navigator.userAgent.indexOf(ka[ma])>=0){la=1;break}var na=ja&&window.Promise,oa=na?a:c,pa=ja&&!(!window.MSInputMethodContext||!document.documentMode),qa=ja&&/MSIE 10/.test(navigator.userAgent),ra=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},sa=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),ta=function(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a},ua=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},va=ja&&/Firefox/i.test(navigator.userAgent),wa=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],xa=wa.slice(3),ya={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"},za={shift:{order:100,enabled:!0,fn:ga},offset:{order:200,enabled:!0,fn:ea,offset:0},preventOverflow:{order:300,enabled:!0,fn:fa,priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:ba},arrow:{order:500,enabled:!0,fn:Z,element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:aa,behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:ia},hide:{order:800,enabled:!0,fn:ha},computeStyle:{order:850,enabled:!0,fn:X,gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:U,onLoad:V,gpuAcceleration:void 0}},Aa={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:za},Ba=function(){function a(b,c){var e=this,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ra(this,a),this.scheduleUpdate=function(){return requestAnimationFrame(e.update)},this.update=oa(this.update.bind(this)),this.options=ua({},a.Defaults,f),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=b&&b.jquery?b[0]:b,this.popper=c&&c.jquery?c[0]:c,this.options.modifiers={},Object.keys(ua({},a.Defaults.modifiers,f.modifiers)).forEach(function(b){e.options.modifiers[b]=ua({},a.Defaults.modifiers[b]||{},f.modifiers?f.modifiers[b]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(a){return ua({name:a},e.options.modifiers[a])}).sort(function(a,b){return a.order-b.order}),this.modifiers.forEach(function(a){a.enabled&&d(a.onLoad)&&a.onLoad(e.reference,e.popper,e.options,a,e.state)}),this.update();var g=this.options.eventsEnabled;g&&this.enableEventListeners(),this.state.eventsEnabled=g}return sa(a,[{key:"update",value:function(){return H.call(this)}},{key:"destroy",value:function(){return K.call(this)}},{key:"enableEventListeners",value:function(){return O.call(this)}},{key:"disableEventListeners",value:function(){return Q.call(this)}}]),a}();return Ba.Utils=("undefined"!=typeof window?window:b).PopperUtils,Ba.placements=wa,Ba.Defaults=Aa,Ba})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],260:[function(a,b,c){(function(d){function e(a,b,c){function e(){for(;j.length&&!l.paused;){var a=j.shift();if(null===a)return l.emit("end");l.emit("data",a)}}function g(){l.writable=!1,b.call(l),!l.readable&&l.autoDestroy&&l.destroy()}a=a||function(a){this.queue(a)},b=b||function(){this.queue(null)};var h=!1,i=!1,j=[],k=!1,l=new f;return l.readable=l.writable=!0,l.paused=!1,l.autoDestroy=!(c&&!1===c.autoDestroy),l.write=function(b){return a.call(this,b),!l.paused},l.queue=l.push=function(a){return k?l:(null===a&&(k=!0),j.push(a),e(),l)},l.on("end",function(){l.readable=!1,!l.writable&&l.autoDestroy&&d.nextTick(function(){l.destroy()})}),l.end=function(a){if(!h)return h=!0,arguments.length&&l.write(a),g(),l},l.destroy=function(){if(!i)return i=!0,h=!0,j.length=0,l.writable=l.readable=!1,l.emit("close"),l},l.pause=function(){if(!l.paused)return l.paused=!0,l},l.resume=function(){return l.paused&&(l.paused=!1,l.emit("resume")),e(),l.paused||l.emit("drain"),l},l}var f=a("stream");c=b.exports=e,e.through=e}).call(this,a("_process"))},{_process:275,stream:294}],261:[function(b,c,d){!function(e,f){"function"==typeof a&&a.amd?a("bloodhound",["jquery"],function(a){return e.Bloodhound=f(a)}):"object"==typeof d?c.exports=f(b("jquery")):e.Bloodhound=f(jQuery)}(this,function(a){var b=function(){"use strict";return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(a){return!a||/^\s*$/.test(a)},escapeRegExChars:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(a){return"string"==typeof a},isNumber:function(a){return"number"==typeof a},isArray:a.isArray,isFunction:a.isFunction,isObject:a.isPlainObject,isUndefined:function(a){return void 0===a},isElement:function(a){return!(!a||1!==a.nodeType)},isJQuery:function(b){return b instanceof a},toStr:function(a){return b.isUndefined(a)||null===a?"":a+""},bind:a.proxy,each:function(b,c){function d(a,b){return c(b,a)}a.each(b,d)},map:a.map,filter:a.grep,every:function(b,c){var d=!0;return b?(a.each(b,function(a,e){if(!(d=c.call(null,e,a,b)))return!1}),!!d):d},some:function(b,c){var d=!1;return b?(a.each(b,function(a,e){if(d=c.call(null,e,a,b))return!1}),!!d):d},mixin:a.extend,identity:function(a){return a},clone:function(b){return a.extend(!0,{},b)},getIdGenerator:function(){var a=0;return function(){return a++}},templatify:function(b){function c(){return String(b)}return a.isFunction(b)?b:c},defer:function(a){setTimeout(a,0)},debounce:function(a,b,c){var d,e;return function(){var f,g,h=this,i=arguments;return f=function(){d=null,c||(e=a.apply(h,i))},g=c&&!d,clearTimeout(d),d=setTimeout(f,b),g&&(e=a.apply(h,i)),e}},throttle:function(a,b){var c,d,e,f,g,h;return g=0,h=function(){g=new Date,e=null,f=a.apply(c,d)},function(){var i=new Date,j=b-(i-g);return c=this,d=arguments,j<=0?(clearTimeout(e),e=null,g=i,f=a.apply(c,d)):e||(e=setTimeout(h,j)),f}},stringify:function(a){return b.isString(a)?a:JSON.stringify(a)},noop:function(){}}}(),c="0.11.1",d=function(){"use strict";function a(a){return a=b.toStr(a),a?a.split(/\s+/):[]}function c(a){return a=b.toStr(a),a?a.split(/\W+/):[]}function d(a){return function(c){return c=b.isArray(c)?c:[].slice.call(arguments,0),function(d){var e=[];return b.each(c,function(c){e=e.concat(a(b.toStr(d[c])))}),e}}}return{nonword:c,whitespace:a,obj:{nonword:d(c),whitespace:d(a)}}}(),e=function(){"use strict";function c(c){this.maxSize=b.isNumber(c)?c:100,this.reset(),this.maxSize<=0&&(this.set=this.get=a.noop)}function d(){this.head=this.tail=null}function e(a,b){this.key=a,this.val=b,this.prev=this.next=null}return b.mixin(c.prototype,{set:function(a,b){var c,d=this.list.tail;this.size>=this.maxSize&&(this.list.remove(d),delete this.hash[d.key],this.size--),(c=this.hash[a])?(c.val=b,this.list.moveToFront(c)):(c=new e(a,b),this.list.add(c),this.hash[a]=c,this.size++)},get:function(a){var b=this.hash[a];if(b)return this.list.moveToFront(b),b.val},reset:function(){this.size=0,this.hash={},this.list=new d}}),b.mixin(d.prototype,{add:function(a){this.head&&(a.next=this.head,this.head.prev=a),this.head=a,this.tail=this.tail||a},remove:function(a){a.prev?a.prev.next=a.next:this.head=a.next,a.next?a.next.prev=a.prev:this.tail=a.prev},moveToFront:function(a){this.remove(a),this.add(a)}}),c}(),f=function(){"use strict";function c(a,c){this.prefix=["__",a,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+b.escapeRegExChars(this.prefix)),this.ls=c||h,!this.ls&&this._noop()}function d(){return(new Date).getTime()}function e(a){return JSON.stringify(b.isUndefined(a)?null:a)}function f(b){return a.parseJSON(b)}function g(a){var b,c,d=[],e=h.length;for(b=0;b<e;b++)(c=h.key(b)).match(a)&&d.push(c.replace(a,""));return d}var h;try{h=window.localStorage,h.setItem("~~~","!"),h.removeItem("~~~")}catch(a){h=null}return b.mixin(c.prototype,{_prefix:function(a){return this.prefix+a},_ttlKey:function(a){return this._prefix(a)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=b.noop},_safeSet:function(a,b){try{this.ls.setItem(a,b)}catch(a){"QuotaExceededError"===a.name&&(this.clear(),this._noop())}},get:function(a){return this.isExpired(a)&&this.remove(a),f(this.ls.getItem(this._prefix(a)))},set:function(a,c,f){return b.isNumber(f)?this._safeSet(this._ttlKey(a),e(d()+f)):this.ls.removeItem(this._ttlKey(a)),this._safeSet(this._prefix(a),e(c))},remove:function(a){return this.ls.removeItem(this._ttlKey(a)),this.ls.removeItem(this._prefix(a)),this},clear:function(){var a,b=g(this.keyMatcher);for(a=b.length;a--;)this.remove(b[a]);return this},isExpired:function(a){var c=f(this.ls.getItem(this._ttlKey(a)));return!!(b.isNumber(c)&&d()>c)}}),c}(),g=function(){"use strict";function c(a){a=a||{},this.cancelled=!1,this.lastReq=null,this._send=a.transport,this._get=a.limiter?a.limiter(this._get):this._get,this._cache=!1===a.cache?new e(0):h}var d=0,f={},g=6,h=new e(10);return c.setMaxPendingRequests=function(a){g=a},c.resetCache=function(){h.reset()},b.mixin(c.prototype,{_fingerprint:function(b){return b=b||{},b.url+b.type+a.param(b.data||{})},_get:function(a,b){function c(a){b(null,a),k._cache.set(i,a)}function e(){b(!0)}function h(){d--,delete f[i],k.onDeckRequestArgs&&(k._get.apply(k,k.onDeckRequestArgs),k.onDeckRequestArgs=null)}var i,j,k=this;i=this._fingerprint(a),this.cancelled||i!==this.lastReq||((j=f[i])?j.done(c).fail(e):d<g?(d++,f[i]=this._send(a).done(c).fail(e).always(h)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(c,d){var e,f;d=d||a.noop,c=b.isString(c)?{url:c}:c||{},f=this._fingerprint(c),this.cancelled=!1,this.lastReq=f,(e=this._cache.get(f))?d(null,e):this._get(c,d)},cancel:function(){this.cancelled=!0}}),c}(),h=window.SearchIndex=function(){"use strict";function c(c){c=c||{},c.datumTokenizer&&c.queryTokenizer||a.error("datumTokenizer and queryTokenizer are both required"),this.identify=c.identify||b.stringify,this.datumTokenizer=c.datumTokenizer,this.queryTokenizer=c.queryTokenizer,this.reset()}function d(a){return a=b.filter(a,function(a){return!!a}),a=b.map(a,function(a){return a.toLowerCase()})}function e(){var a={};return a[i]=[],a[h]={},a}function f(a){for(var b={},c=[],d=0,e=a.length;d<e;d++)b[a[d]]||(b[a[d]]=!0,c.push(a[d]));return c}function g(a,b){var c=0,d=0,e=[];a=a.sort(),b=b.sort();for(var f=a.length,g=b.length;c<f&&d<g;)a[c]<b[d]?c++:a[c]>b[d]?d++:(e.push(a[c]),c++,d++);return e}var h="c",i="i";return b.mixin(c.prototype,{bootstrap:function(a){this.datums=a.datums,this.trie=a.trie},add:function(a){var c=this;a=b.isArray(a)?a:[a],b.each(a,function(a){var f,g;c.datums[f=c.identify(a)]=a,g=d(c.datumTokenizer(a)),b.each(g,function(a){var b,d,g;for(b=c.trie,d=a.split("");g=d.shift();)b=b[h][g]||(b[h][g]=e()),b[i].push(f)})})},get:function(a){var c=this;return b.map(a,function(a){return c.datums[a]})},search:function(a){var c,e,j=this;return c=d(this.queryTokenizer(a)),b.each(c,function(a){var b,c,d,f;if(e&&0===e.length)return!1;for(b=j.trie,c=a.split("");b&&(d=c.shift());)b=b[h][d];if(!b||0!==c.length)return e=[],!1;f=b[i].slice(0),e=e?g(e,f):f}),e?b.map(f(e),function(a){return j.datums[a]}):[]},all:function(){var a=[];for(var b in this.datums)a.push(this.datums[b]);return a},reset:function(){this.datums={},this.trie=e()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),c}(),i=function(){"use strict";function a(a){this.url=a.url,this.ttl=a.ttl,this.cache=a.cache,this.prepare=a.prepare,this.transform=a.transform,this.transport=a.transport,this.thumbprint=a.thumbprint,this.storage=new f(a.cacheKey)}var c;return c={data:"data",protocol:"protocol",thumbprint:"thumbprint"},b.mixin(a.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},store:function(a){this.cache&&(this.storage.set(c.data,a,this.ttl),this.storage.set(c.protocol,location.protocol,this.ttl),this.storage.set(c.thumbprint,this.thumbprint,this.ttl))},fromCache:function(){var a,b={};return this.cache?(b.data=this.storage.get(c.data),b.protocol=this.storage.get(c.protocol),b.thumbprint=this.storage.get(c.thumbprint),a=b.thumbprint!==this.thumbprint||b.protocol!==location.protocol,b.data&&!a?b.data:null):null},fromNetwork:function(a){function b(){a(!0)}function c(b){a(null,e.transform(b))}var d,e=this;a&&(d=this.prepare(this._settings()),this.transport(d).fail(b).done(c))},clear:function(){return this.storage.clear(),this}}),a}(),j=function(){"use strict";function a(a){this.url=a.url,this.prepare=a.prepare,this.transform=a.transform,this.transport=new g({cache:a.cache,limiter:a.limiter,transport:a.transport})}return b.mixin(a.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},get:function(a,b){function c(a,c){b(a?[]:e.transform(c))}var d,e=this;if(b)return a=a||"",d=this.prepare(a,this._settings()),this.transport.get(d,c)},cancelLastRequest:function(){this.transport.cancel()}}),a}(),k=function(){"use strict";function d(d){var e;return d?(e={url:null,ttl:864e5,cache:!0,cacheKey:null,thumbprint:"",prepare:b.identity,transform:b.identity,transport:null},d=b.isString(d)?{url:d}:d,d=b.mixin(e,d),!d.url&&a.error("prefetch requires url to be set"),d.transform=d.filter||d.transform,d.cacheKey=d.cacheKey||d.url,d.thumbprint=c+d.thumbprint,d.transport=d.transport?h(d.transport):a.ajax,d):null}function e(c){var d;if(c)return d={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:b.identity,transport:null},c=b.isString(c)?{url:c}:c,c=b.mixin(d,c),!c.url&&a.error("remote requires url to be set"),c.transform=c.filter||c.transform,c.prepare=f(c),c.limiter=g(c),c.transport=c.transport?h(c.transport):a.ajax,delete c.replace,delete c.wildcard,delete c.rateLimitBy,delete c.rateLimitWait,c}function f(a){function b(a,b){return b.url=f(b.url,a),b}function c(a,b){return b.url=b.url.replace(g,encodeURIComponent(a)),b}function d(a,b){return b}var e,f,g;return e=a.prepare,f=a.replace,
g=a.wildcard,e||(e=f?b:a.wildcard?c:d)}function g(a){function c(a){return function(c){return b.debounce(c,a)}}function d(a){return function(c){return b.throttle(c,a)}}var e,f,g;return e=a.limiter,f=a.rateLimitBy,g=a.rateLimitWait,e||(e=/^throttle$/i.test(f)?d(g):c(g)),e}function h(c){return function(d){function e(a){b.defer(function(){g.resolve(a)})}function f(a){b.defer(function(){g.reject(a)})}var g=a.Deferred();return c(d,e,f),g}}return function(c){var f,g;return f={initialize:!0,identify:b.stringify,datumTokenizer:null,queryTokenizer:null,sufficient:5,sorter:null,local:[],prefetch:null,remote:null},c=b.mixin(f,c||{}),!c.datumTokenizer&&a.error("datumTokenizer is required"),!c.queryTokenizer&&a.error("queryTokenizer is required"),g=c.sorter,c.sorter=g?function(a){return a.sort(g)}:b.identity,c.local=b.isFunction(c.local)?c.local():c.local,c.prefetch=d(c.prefetch),c.remote=e(c.remote),c}}();return function(){"use strict";function c(a){a=k(a),this.sorter=a.sorter,this.identify=a.identify,this.sufficient=a.sufficient,this.local=a.local,this.remote=a.remote?new j(a.remote):null,this.prefetch=a.prefetch?new i(a.prefetch):null,this.index=new h({identify:this.identify,datumTokenizer:a.datumTokenizer,queryTokenizer:a.queryTokenizer}),!1!==a.initialize&&this.initialize()}var e;return e=window&&window.Bloodhound,c.noConflict=function(){return window&&(window.Bloodhound=e),c},c.tokenizers=d,b.mixin(c.prototype,{__ttAdapter:function(){function a(a,b,d){return c.search(a,b,d)}function b(a,b){return c.search(a,b)}var c=this;return this.remote?a:b},_loadPrefetch:function(){function b(a,b){if(a)return c.reject();e.add(b),e.prefetch.store(e.index.serialize()),c.resolve()}var c,d,e=this;return c=a.Deferred(),this.prefetch?(d=this.prefetch.fromCache())?(this.index.bootstrap(d),c.resolve()):this.prefetch.fromNetwork(b):c.resolve(),c.promise()},_initialize:function(){function a(){b.add(b.local)}var b=this;return this.clear(),(this.initPromise=this._loadPrefetch()).done(a),this.initPromise},initialize:function(a){return!this.initPromise||a?this._initialize():this.initPromise},add:function(a){return this.index.add(a),this},get:function(a){return a=b.isArray(a)?a:[].slice.call(arguments),this.index.get(a)},search:function(a,c,d){function e(a){var c=[];b.each(a,function(a){!b.some(f,function(b){return g.identify(a)===g.identify(b)})&&c.push(a)}),d&&d(c)}var f,g=this;return f=this.sorter(this.index.search(a)),c(this.remote?f.slice():f),this.remote&&f.length<this.sufficient?this.remote.get(a,e):this.remote&&this.remote.cancelLastRequest(),this},all:function(){return this.index.all()},clear:function(){return this.index.reset(),this},clearPrefetchCache:function(){return this.prefetch&&this.prefetch.clear(),this},clearRemoteCache:function(){return g.resetCache(),this},ttAdapter:function(){return this.__ttAdapter()}}),c}()}),function(e,f){"function"==typeof a&&a.amd?a("typeahead.js",["jquery"],function(a){return f(a)}):"object"==typeof d?c.exports=f(b("jquery")):f(jQuery)}(0,function(a){var b=function(){"use strict";return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(a){return!a||/^\s*$/.test(a)},escapeRegExChars:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(a){return"string"==typeof a},isNumber:function(a){return"number"==typeof a},isArray:a.isArray,isFunction:a.isFunction,isObject:a.isPlainObject,isUndefined:function(a){return void 0===a},isElement:function(a){return!(!a||1!==a.nodeType)},isJQuery:function(b){return b instanceof a},toStr:function(a){return b.isUndefined(a)||null===a?"":a+""},bind:a.proxy,each:function(b,c){function d(a,b){return c(b,a)}a.each(b,d)},map:a.map,filter:a.grep,every:function(b,c){var d=!0;return b?(a.each(b,function(a,e){if(!(d=c.call(null,e,a,b)))return!1}),!!d):d},some:function(b,c){var d=!1;return b?(a.each(b,function(a,e){if(d=c.call(null,e,a,b))return!1}),!!d):d},mixin:a.extend,identity:function(a){return a},clone:function(b){return a.extend(!0,{},b)},getIdGenerator:function(){var a=0;return function(){return a++}},templatify:function(b){function c(){return String(b)}return a.isFunction(b)?b:c},defer:function(a){setTimeout(a,0)},debounce:function(a,b,c){var d,e;return function(){var f,g,h=this,i=arguments;return f=function(){d=null,c||(e=a.apply(h,i))},g=c&&!d,clearTimeout(d),d=setTimeout(f,b),g&&(e=a.apply(h,i)),e}},throttle:function(a,b){var c,d,e,f,g,h;return g=0,h=function(){g=new Date,e=null,f=a.apply(c,d)},function(){var i=new Date,j=b-(i-g);return c=this,d=arguments,j<=0?(clearTimeout(e),e=null,g=i,f=a.apply(c,d)):e||(e=setTimeout(h,j)),f}},stringify:function(a){return b.isString(a)?a:JSON.stringify(a)},noop:function(){}}}(),c=function(){"use strict";function a(a){var g,h;return h=b.mixin({},f,a),g={css:e(),classes:h,html:c(h),selectors:d(h)},{css:g.css,html:g.html,classes:g.classes,selectors:g.selectors,mixin:function(a){b.mixin(a,g)}}}function c(a){return{wrapper:'<span class="'+a.wrapper+'"></span>',menu:'<div class="'+a.menu+'"></div>'}}function d(a){var c={};return b.each(a,function(a,b){c[b]="."+a}),c}function e(){var a={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return b.isMsie()&&b.mixin(a.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),a}var f={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return a}(),d=function(){"use strict";function c(b){b&&b.el||a.error("EventBus initialized without el"),this.$el=a(b.el)}var d,e;return d="typeahead:",e={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},b.mixin(c.prototype,{_trigger:function(b,c){var e;return e=a.Event(d+b),(c=c||[]).unshift(e),this.$el.trigger.apply(this.$el,c),e},before:function(a){var b,c;return b=[].slice.call(arguments,1),c=this._trigger("before"+a,b),c.isDefaultPrevented()},trigger:function(a){var b;this._trigger(a,[].slice.call(arguments,1)),(b=e[a])&&this._trigger(b,[].slice.call(arguments,1))}}),c}(),e=function(){"use strict";function a(a,b,c,d){var e;if(!c)return this;for(b=b.split(i),c=d?h(c,d):c,this._callbacks=this._callbacks||{};e=b.shift();)this._callbacks[e]=this._callbacks[e]||{sync:[],async:[]},this._callbacks[e][a].push(c);return this}function b(b,c,d){return a.call(this,"async",b,c,d)}function c(b,c,d){return a.call(this,"sync",b,c,d)}function d(a){var b;if(!this._callbacks)return this;for(a=a.split(i);b=a.shift();)delete this._callbacks[b];return this}function e(a){var b,c,d,e,g;if(!this._callbacks)return this;for(a=a.split(i),d=[].slice.call(arguments,1);(b=a.shift())&&(c=this._callbacks[b]);)e=f(c.sync,this,[b].concat(d)),g=f(c.async,this,[b].concat(d)),e()&&j(g);return this}function f(a,b,c){function d(){for(var d,e=0,f=a.length;!d&&e<f;e+=1)d=!1===a[e].apply(b,c);return!d}return d}function g(){return window.setImmediate?function(a){setImmediate(function(){a()})}:function(a){setTimeout(function(){a()},0)}}function h(a,b){return a.bind?a.bind(b):function(){a.apply(b,[].slice.call(arguments,0))}}var i=/\s+/,j=g();return{onSync:c,onAsync:b,off:d,trigger:e}}(),f=function(a){"use strict";function c(a,c,d){for(var e,f=[],g=0,h=a.length;g<h;g++)f.push(b.escapeRegExChars(a[g]));return e=d?"\\b("+f.join("|")+")\\b":"("+f.join("|")+")",c?new RegExp(e):new RegExp(e,"i")}var d={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(e){function f(b){var c,d,f;return(c=h.exec(b.data))&&(f=a.createElement(e.tagName),e.className&&(f.className=e.className),d=b.splitText(c.index),d.splitText(c[0].length),f.appendChild(d.cloneNode(!0)),b.parentNode.replaceChild(f,d)),!!c}function g(a,b){for(var c,d=3,e=0;e<a.childNodes.length;e++)c=a.childNodes[e],c.nodeType===d?e+=b(c)?1:0:g(c,b)}var h;e=b.mixin({},d,e),e.node&&e.pattern&&(e.pattern=b.isArray(e.pattern)?e.pattern:[e.pattern],h=c(e.pattern,e.caseSensitive,e.wordsOnly),g(e.node,f))}}(window.document),g=function(){"use strict";function c(c,e){c=c||{},c.input||a.error("input is missing"),e.mixin(this),this.$hint=a(c.hint),this.$input=a(c.input),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=d(this.$input),this._checkLanguageDirection(),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=b.noop)}function d(b){return a('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:b.css("font-family"),fontSize:b.css("font-size"),fontStyle:b.css("font-style"),fontVariant:b.css("font-variant"),fontWeight:b.css("font-weight"),wordSpacing:b.css("word-spacing"),letterSpacing:b.css("letter-spacing"),textIndent:b.css("text-indent"),textRendering:b.css("text-rendering"),textTransform:b.css("text-transform")}).insertAfter(b)}function f(a,b){return c.normalizeQuery(a)===c.normalizeQuery(b)}function g(a){return a.altKey||a.ctrlKey||a.metaKey||a.shiftKey}var h;return h={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},c.normalizeQuery=function(a){return b.toStr(a).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},b.mixin(c.prototype,e,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function(a){var b=h[a.which||a.keyCode];this._managePreventDefault(b,a),b&&this._shouldTrigger(b,a)&&this.trigger(b+"Keyed",a)},_onInput:function(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function(a,b){var c;switch(a){case"up":case"down":c=!g(b);break;default:c=!1}c&&b.preventDefault()},_shouldTrigger:function(a,b){var c;switch(a){case"tab":c=!g(b);break;default:c=!0}return c},_checkLanguageDirection:function(){var a=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==a&&(this.dir=a,this.$hint.attr("dir",a),this.trigger("langDirChanged",a))},_setQuery:function(a,b){var c,d;c=f(a,this.query),d=!!c&&this.query.length!==a.length,this.query=a,b||c?!b&&d&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},bind:function(){var a,c,d,e,f=this;return a=b.bind(this._onBlur,this),c=b.bind(this._onFocus,this),d=b.bind(this._onKeydown,this),e=b.bind(this._onInput,this),this.$input.on("blur.tt",a).on("focus.tt",c).on("keydown.tt",d),!b.isMsie()||b.isMsie()>9?this.$input.on("input.tt",e):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(a){h[a.which||a.keyCode]||b.defer(b.bind(f._onInput,f,a))}),this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},getQuery:function(){return this.query||""},setQuery:function(a,b){this.setInputValue(a),this._setQuery(a,b)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(a){this.$input.val(a),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},getHint:function(){return this.$hint.val()},setHint:function(a){this.$hint.val(a)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var a,b,c,d;a=this.getInputValue(),b=this.getHint(),c=a!==b&&0===b.indexOf(a),!(d=""!==a&&c&&!this.hasOverflow())&&this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var a=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=a},isCursorAtEnd:function(){var a,c,d;return a=this.$input.val().length,c=this.$input[0].selectionStart,b.isNumber(c)?c===a:!document.selection||(d=document.selection.createRange(),d.moveStart("character",-a),a===d.text.length)},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=a("<div>")}}),c}(),h=function(){"use strict";function c(c,e){c=c||{},c.templates=c.templates||{},c.templates.notFound=c.templates.notFound||c.templates.empty,c.source||a.error("missing source"),c.node||a.error("missing node"),c.name&&!h(c.name)&&a.error("invalid dataset name: "+c.name),e.mixin(this),this.highlight=!!c.highlight,this.name=c.name||j(),this.limit=c.limit||5,this.displayFn=d(c.display||c.displayKey),this.templates=g(c.templates,this.displayFn),this.source=c.source.__ttAdapter?c.source.__ttAdapter():c.source,this.async=b.isUndefined(c.async)?this.source.length>2:!!c.async,this._resetLastSuggestion(),this.$el=a(c.node).addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}function d(a){function c(b){return b[a]}return a=a||b.stringify,b.isFunction(a)?a:c}function g(c,d){function e(b){return a("<div>").text(d(b))}return{notFound:c.notFound&&b.templatify(c.notFound),pending:c.pending&&b.templatify(c.pending),header:c.header&&b.templatify(c.header),footer:c.footer&&b.templatify(c.footer),suggestion:c.suggestion||e}}function h(a){return/^[_a-zA-Z0-9-]+$/.test(a)}var i,j;return i={val:"tt-selectable-display",obj:"tt-selectable-object"},j=b.getIdGenerator(),c.extractData=function(b){var c=a(b);return c.data(i.obj)?{val:c.data(i.val)||"",obj:c.data(i.obj)||null}:null},b.mixin(c.prototype,e,{_overwrite:function(a,b){b=b||[],b.length?this._renderSuggestions(a,b):this.async&&this.templates.pending?this._renderPending(a):!this.async&&this.templates.notFound?this._renderNotFound(a):this._empty(),this.trigger("rendered",this.name,b,!1)},_append:function(a,b){b=b||[],b.length&&this.$lastSuggestion.length?this._appendSuggestions(a,b):b.length?this._renderSuggestions(a,b):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(a),this.trigger("rendered",this.name,b,!0)},_renderSuggestions:function(a,b){var c;c=this._getSuggestionsFragment(a,b),this.$lastSuggestion=c.children().last(),this.$el.html(c).prepend(this._getHeader(a,b)).append(this._getFooter(a,b))},_appendSuggestions:function(a,b){var c,d;c=this._getSuggestionsFragment(a,b),d=c.children().last(),this.$lastSuggestion.after(c),this.$lastSuggestion=d},_renderPending:function(a){var b=this.templates.pending;this._resetLastSuggestion(),b&&this.$el.html(b({query:a,dataset:this.name}))},_renderNotFound:function(a){var b=this.templates.notFound;this._resetLastSuggestion(),b&&this.$el.html(b({query:a,dataset:this.name}))},_empty:function(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function(c,d){var e,g=this;return e=document.createDocumentFragment(),b.each(d,function(b){var d,f;f=g._injectQuery(c,b),d=a(g.templates.suggestion(f)).data(i.obj,b).data(i.val,g.displayFn(b)).addClass(g.classes.suggestion+" "+g.classes.selectable),e.appendChild(d[0])}),this.highlight&&f({className:this.classes.highlight,node:e,pattern:c}),a(e)},_getFooter:function(a,b){return this.templates.footer?this.templates.footer({query:a,suggestions:b,dataset:this.name}):null},_getHeader:function(a,b){return this.templates.header?this.templates.header({query:a,suggestions:b,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=a()},_injectQuery:function(a,c){return b.isObject(c)?b.mixin({_query:a},c):c},update:function(b){function c(a){g||(g=!0,a=(a||[]).slice(0,e.limit),h=a.length,e._overwrite(b,a),h<e.limit&&e.async&&e.trigger("asyncRequested",b))}function d(c){c=c||[],!f&&h<e.limit&&(e.cancel=a.noop,h+=c.length,e._append(b,c.slice(0,e.limit-h)),e.async&&e.trigger("asyncReceived",b))}var e=this,f=!1,g=!1,h=0;this.cancel(),this.cancel=function(){f=!0,e.cancel=a.noop,e.async&&e.trigger("asyncCanceled",b)},this.source(b,c,d),!g&&c([])},cancel:a.noop,clear:function(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=a("<div>")}}),c}(),i=function(){"use strict";function c(c,d){function e(b){var c=f.$node.find(b.node).first();return b.node=c.length?c:a("<div>").appendTo(f.$node),new h(b,d)}var f=this;c=c||{},c.node||a.error("node is required"),d.mixin(this),this.$node=a(c.node),this.query=null,this.datasets=b.map(c.datasets,e)}return b.mixin(c.prototype,e,{_onSelectableClick:function(b){this.trigger("selectableClicked",a(b.currentTarget))},_onRendered:function(a,b,c,d){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",b,c,d)},_onCleared:function(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){function a(a){return a.isEmpty()}return b.every(this.datasets,a)},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var a=this.getActiveSelectable();a&&a.removeClass(this.classes.cursor)},_ensureVisible:function(a){var b,c,d,e;b=a.position().top,c=b+a.outerHeight(!0),d=this.$node.scrollTop(),e=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),b<0?this.$node.scrollTop(d+b):e<c&&this.$node.scrollTop(d+(c-e))},bind:function(){var a,c=this;return a=b.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,a),b.each(this.datasets,function(a){a.onSync("asyncRequested",c._propagate,c).onSync("asyncCanceled",c._propagate,c).onSync("asyncReceived",c._propagate,c).onSync("rendered",c._onRendered,c).onSync("cleared",c._onCleared,c)}),this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){this.$node.addClass(this.classes.open)},close:function(){this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function(a){this.$node.attr("dir",a)},selectableRelativeToCursor:function(a){var b,c,d,e;return c=this.getActiveSelectable(),b=this._getSelectables(),d=c?b.index(c):-1,e=d+a,e=(e+1)%(b.length+1)-1,e=e<-1?b.length-1:e,-1===e?null:b.eq(e)},setCursor:function(a){this._removeCursor(),(a=a&&a.first())&&(a.addClass(this.classes.cursor),this._ensureVisible(a))},getSelectableData:function(a){return a&&a.length?h.extractData(a):null},getActiveSelectable:function(){var a=this._getSelectables().filter(this.selectors.cursor).first();return a.length?a:null},getTopSelectable:function(){var a=this._getSelectables().first();return a.length?a:null},update:function(a){function c(b){b.update(a)}var d=a!==this.query;return d&&(this.query=a,b.each(this.datasets,c)),d},empty:function(){function a(a){a.clear()}b.each(this.datasets,a),this.query=null,this.$node.addClass(this.classes.empty)},destroy:function(){function c(a){a.destroy()}this.$node.off(".tt"),this.$node=a("<div>"),b.each(this.datasets,c)}}),c}(),j=function(){"use strict";function a(){i.apply(this,[].slice.call(arguments,0))}var c=i.prototype;return b.mixin(a.prototype,i.prototype,{open:function(){return!this._allDatasetsEmpty()&&this._show(),c.open.apply(this,[].slice.call(arguments,0))},close:function(){return this._hide(),c.close.apply(this,[].slice.call(arguments,0))},_onRendered:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),c._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),c._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(a){return this.$node.css("ltr"===a?this.css.ltr:this.css.rtl),c.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function(){this.$node.hide()},_show:function(){this.$node.css("display","block")}}),a}(),k=function(){"use strict";function c(c,e){var f,g,h,i,j,k,l,m,n,o,p;c=c||{},c.input||a.error("missing input"),c.menu||a.error("missing menu"),c.eventBus||a.error("missing event bus"),e.mixin(this),this.eventBus=c.eventBus,this.minLength=b.isNumber(c.minLength)?c.minLength:1,this.input=c.input,this.menu=c.menu,this.enabled=!0,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),f=d(this,"activate","open","_onFocused"),g=d(this,"deactivate","_onBlurred"),h=d(this,"isActive","isOpen","_onEnterKeyed"),i=d(this,"isActive","isOpen","_onTabKeyed"),j=d(this,"isActive","_onEscKeyed"),k=d(this,"isActive","open","_onUpKeyed"),l=d(this,"isActive","open","_onDownKeyed"),m=d(this,"isActive","isOpen","_onLeftKeyed"),n=d(this,"isActive","isOpen","_onRightKeyed"),o=d(this,"_openIfActive","_onQueryChanged"),p=d(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",f,this).onSync("blurred",g,this).onSync("enterKeyed",h,this).onSync("tabKeyed",i,this).onSync("escKeyed",j,this).onSync("upKeyed",k,this).onSync("downKeyed",l,this).onSync("leftKeyed",m,this).onSync("rightKeyed",n,this).onSync("queryChanged",o,this).onSync("whitespaceChanged",p,this).onSync("langDirChanged",this._onLangDirChanged,this)}function d(a){var c=[].slice.call(arguments,1);return function(){var d=[].slice.call(arguments);b.each(c,function(b){return a[b].apply(a,d)})}}return b.mixin(c.prototype,{_hacks:function(){var c,d;c=this.input.$input||a("<div>"),d=this.menu.$node||a("<div>"),c.on("blur.tt",function(a){var e,f,g;e=document.activeElement,f=d.is(e),g=d.has(e).length>0,b.isMsie()&&(f||g)&&(a.preventDefault(),a.stopImmediatePropagation(),b.defer(function(){c.focus()}))}),d.on("mousedown.tt",function(a){a.preventDefault()})},_onSelectableClicked:function(a,b){this.select(b)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(a,b,c,d){this._updateHint(),this.eventBus.trigger("render",c,d,b)},_onAsyncRequested:function(a,b,c){this.eventBus.trigger("asyncrequest",c,b)},_onAsyncCanceled:function(a,b,c){this.eventBus.trigger("asynccancel",c,b)},_onAsyncReceived:function(a,b,c){this.eventBus.trigger("asyncreceive",c,b)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(a,b){var c;(c=this.menu.getActiveSelectable())&&this.select(c)&&b.preventDefault()},_onTabKeyed:function(a,b){var c;(c=this.menu.getActiveSelectable())?this.select(c)&&b.preventDefault():(c=this.menu.getTopSelectable())&&this.autocomplete(c)&&b.preventDefault()},_onEscKeyed:function(){this.close()},_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onRightKeyed:function(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onQueryChanged:function(a,b){this._minLengthMet(b)?this.menu.update(b):this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(a,b){this.dir!==b&&(this.dir=b,this.menu.setLanguageDirection(b))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(a){return a=b.isString(a)?a:this.input.getQuery()||"",a.length>=this.minLength},_updateHint:function(){var a,c,d,e,f,h,i;a=this.menu.getTopSelectable(),c=this.menu.getSelectableData(a),d=this.input.getInputValue(),!c||b.isBlankString(d)||this.input.hasOverflow()?this.input.clearHint():(e=g.normalizeQuery(d),f=b.escapeRegExChars(e),h=new RegExp("^(?:"+f+")(.+$)","i"),(i=h.exec(c.val))&&this.input.setHint(d+i[1]))},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){return!!this.isActive()||!(!this.isEnabled()||this.eventBus.before("active"))&&(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function(){return!this.isActive()||!this.eventBus.before("idle")&&(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0)},isOpen:function(){return this.menu.isOpen()},open:function(){return this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function(){return this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function(a){this.input.setQuery(b.toStr(a))},getVal:function(){return this.input.getQuery()},select:function(a){var b=this.menu.getSelectableData(a);return!(!b||this.eventBus.before("select",b.obj))&&(this.input.setQuery(b.val,!0),this.eventBus.trigger("select",b.obj),this.close(),!0)},autocomplete:function(a){var b,c;return b=this.input.getQuery(),c=this.menu.getSelectableData(a),!(!(c&&b!==c.val)||this.eventBus.before("autocomplete",c.obj))&&(this.input.setQuery(c.val),this.eventBus.trigger("autocomplete",c.obj),!0)},moveCursor:function(a){var b,c,d,e;return b=this.input.getQuery(),c=this.menu.selectableRelativeToCursor(a),d=this.menu.getSelectableData(c),e=d?d.obj:null,!(this._minLengthMet()&&this.menu.update(b))&&!this.eventBus.before("cursorchange",e)&&(this.menu.setCursor(c),d?this.input.setInputValue(d.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",e),!0)},destroy:function(){this.input.destroy(),this.menu.destroy()}}),c}();!function(){"use strict";function e(b,c){b.each(function(){var b,d=a(this);(b=d.data(p.typeahead))&&c(b,d)})}function f(a,b){return a.clone().addClass(b.classes.hint).removeData().css(b.css.hint).css(l(a)).prop("readonly",!0).removeAttr("id name placeholder required").attr({autocomplete:"off",spellcheck:"false",tabindex:-1})}function h(a,b){a.data(p.attrs,{dir:a.attr("dir"),autocomplete:a.attr("autocomplete"),spellcheck:a.attr("spellcheck"),style:a.attr("style")}),a.addClass(b.classes.input).attr({autocomplete:"off",spellcheck:!1});try{!a.attr("dir")&&a.attr("dir","auto")}catch(a){}return a}function l(a){return{backgroundAttachment:a.css("background-attachment"),backgroundClip:a.css("background-clip"),backgroundColor:a.css("background-color"),backgroundImage:a.css("background-image"),backgroundOrigin:a.css("background-origin"),backgroundPosition:a.css("background-position"),backgroundRepeat:a.css("background-repeat"),backgroundSize:a.css("background-size")}}function m(a){var c,d;c=a.data(p.www),d=a.parent().filter(c.selectors.wrapper),b.each(a.data(p.attrs),function(c,d){b.isUndefined(c)?a.removeAttr(d):a.attr(d,c)}),a.removeData(p.typeahead).removeData(p.www).removeData(p.attr).removeClass(c.classes.input),d.length&&(a.detach().insertAfter(d),d.remove())}function n(c){var d,e;return d=b.isJQuery(c)||b.isElement(c),e=d?a(c).first():[],e.length?e:null}var o,p,q;o=a.fn.typeahead,p={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},q={initialize:function(e,l){function m(){var c,m,q,r,s,t,u,v,w,x,y;b.each(l,function(a){a.highlight=!!e.highlight}),c=a(this),m=a(o.html.wrapper),q=n(e.hint),r=n(e.menu),s=!1!==e.hint&&!q,t=!1!==e.menu&&!r,s&&(q=f(c,o)),t&&(r=a(o.html.menu).css(o.css.menu)),q&&q.val(""),c=h(c,o),(s||t)&&(m.css(o.css.wrapper),c.css(s?o.css.input:o.css.inputWithNoHint),c.wrap(m).parent().prepend(s?q:null).append(t?r:null)),y=t?j:i,u=new d({el:c}),v=new g({hint:q,input:c},o),w=new y({node:r,datasets:l},o),x=new k({input:v,menu:w,eventBus:u,minLength:e.minLength},o),c.data(p.www,o),c.data(p.typeahead,x)}var o;return l=b.isArray(l)?l:[].slice.call(arguments,1),e=e||{},o=c(e.classNames),this.each(m)},isEnabled:function(){var a;return e(this.first(),function(b){a=b.isEnabled()}),a},enable:function(){return e(this,function(a){a.enable()}),this},disable:function(){return e(this,function(a){a.disable()}),this},isActive:function(){var a;return e(this.first(),function(b){a=b.isActive()}),a},activate:function(){return e(this,function(a){a.activate()}),this},deactivate:function(){return e(this,function(a){a.deactivate()}),this},isOpen:function(){var a;return e(this.first(),function(b){a=b.isOpen()}),a},open:function(){return e(this,function(a){a.open()}),this},close:function(){return e(this,function(a){a.close()}),this},select:function(b){var c=!1,d=a(b);return e(this.first(),function(a){c=a.select(d)}),c},autocomplete:function(b){var c=!1,d=a(b);return e(this.first(),function(a){c=a.autocomplete(d)}),c},moveCursor:function(a){var b=!1;return e(this.first(),function(c){b=c.moveCursor(a)}),b},val:function(a){var b;return arguments.length?(e(this,function(b){b.setVal(a)}),this):(e(this.first(),function(a){b=a.getVal()}),b)},destroy:function(){return e(this,function(a,b){m(b),a.destroy()}),this}},a.fn.typeahead=function(a){return q[a]?q[a].apply(this,[].slice.call(arguments,1)):q.initialize.apply(this,arguments)},a.fn.typeahead.noConflict=function(){return a.fn.typeahead=o,this}}()})},{jquery:256}],262:[function(b,c,d){(function(b){!function(){var e="object"==typeof self&&self.self===self&&self||"object"==typeof b&&b.global===b&&b||this||{},f=e._,g=Array.prototype,h=Object.prototype,i="undefined"!=typeof Symbol?Symbol.prototype:null,j=g.push,k=g.slice,l=h.toString,m=h.hasOwnProperty,n=Array.isArray,o=Object.keys,p=Object.create,q=function(){},r=function(a){return a instanceof r?a:this instanceof r?void(this._wrapped=a):new r(a)};void 0===d||d.nodeType?e._=r:(void 0!==c&&!c.nodeType&&c.exports&&(d=c.exports=r),d._=r),r.VERSION="1.9.1";var s,t=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}},u=function(a,b,c){return r.iteratee!==s?r.iteratee(a,b):null==a?r.identity:r.isFunction(a)?t(a,b,c):r.isObject(a)&&!r.isArray(a)?r.matcher(a):r.property(a)};r.iteratee=s=function(a,b){return u(a,b,1/0)};var v=function(a,b){return b=null==b?a.length-1:+b,function(){for(var c=Math.max(arguments.length-b,0),d=Array(c),e=0;e<c;e++)d[e]=arguments[e+b];switch(b){case 0:return a.call(this,d);case 1:return a.call(this,arguments[0],d);case 2:return a.call(this,arguments[0],arguments[1],d)}var f=Array(b+1);for(e=0;e<b;e++)f[e]=arguments[e];return f[b]=d,a.apply(this,f)}},w=function(a){if(!r.isObject(a))return{};if(p)return p(a);q.prototype=a;var b=new q;return q.prototype=null,b},x=function(a){return function(b){return null==b?void 0:b[a]}},y=function(a,b){return null!=a&&m.call(a,b)},z=function(a,b){for(var c=b.length,d=0;d<c;d++){if(null==a)return;a=a[b[d]]}return c?a:void 0},A=Math.pow(2,53)-1,B=x("length"),C=function(a){var b=B(a);return"number"==typeof b&&b>=0&&b<=A};r.each=r.forEach=function(a,b,c){b=t(b,c);var d,e;if(C(a))for(d=0,e=a.length;d<e;d++)b(a[d],d,a);else{var f=r.keys(a);for(d=0,e=f.length;d<e;d++)b(a[f[d]],f[d],a)}return a},r.map=r.collect=function(a,b,c){b=u(b,c);for(var d=!C(a)&&r.keys(a),e=(d||a).length,f=Array(e),g=0;g<e;g++){var h=d?d[g]:g;f[g]=b(a[h],h,a)}return f};var D=function(a){var b=function(b,c,d,e){var f=!C(b)&&r.keys(b),g=(f||b).length,h=a>0?0:g-1;for(e||(d=b[f?f[h]:h],h+=a);h>=0&&h<g;h+=a){var i=f?f[h]:h;d=c(d,b[i],i,b)}return d};return function(a,c,d,e){var f=arguments.length>=3;return b(a,t(c,e,4),d,f)}};r.reduce=r.foldl=r.inject=D(1),r.reduceRight=r.foldr=D(-1),
r.find=r.detect=function(a,b,c){var d=C(a)?r.findIndex:r.findKey,e=d(a,b,c);if(void 0!==e&&-1!==e)return a[e]},r.filter=r.select=function(a,b,c){var d=[];return b=u(b,c),r.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d},r.reject=function(a,b,c){return r.filter(a,r.negate(u(b)),c)},r.every=r.all=function(a,b,c){b=u(b,c);for(var d=!C(a)&&r.keys(a),e=(d||a).length,f=0;f<e;f++){var g=d?d[f]:f;if(!b(a[g],g,a))return!1}return!0},r.some=r.any=function(a,b,c){b=u(b,c);for(var d=!C(a)&&r.keys(a),e=(d||a).length,f=0;f<e;f++){var g=d?d[f]:f;if(b(a[g],g,a))return!0}return!1},r.contains=r.includes=r.include=function(a,b,c,d){return C(a)||(a=r.values(a)),("number"!=typeof c||d)&&(c=0),r.indexOf(a,b,c)>=0},r.invoke=v(function(a,b,c){var d,e;return r.isFunction(b)?e=b:r.isArray(b)&&(d=b.slice(0,-1),b=b[b.length-1]),r.map(a,function(a){var f=e;if(!f){if(d&&d.length&&(a=z(a,d)),null==a)return;f=a[b]}return null==f?f:f.apply(a,c)})}),r.pluck=function(a,b){return r.map(a,r.property(b))},r.where=function(a,b){return r.filter(a,r.matcher(b))},r.findWhere=function(a,b){return r.find(a,r.matcher(b))},r.max=function(a,b,c){var d,e,f=-1/0,g=-1/0;if(null==b||"number"==typeof b&&"object"!=typeof a[0]&&null!=a){a=C(a)?a:r.values(a);for(var h=0,i=a.length;h<i;h++)null!=(d=a[h])&&d>f&&(f=d)}else b=u(b,c),r.each(a,function(a,c,d){((e=b(a,c,d))>g||e===-1/0&&f===-1/0)&&(f=a,g=e)});return f},r.min=function(a,b,c){var d,e,f=1/0,g=1/0;if(null==b||"number"==typeof b&&"object"!=typeof a[0]&&null!=a){a=C(a)?a:r.values(a);for(var h=0,i=a.length;h<i;h++)null!=(d=a[h])&&d<f&&(f=d)}else b=u(b,c),r.each(a,function(a,c,d){((e=b(a,c,d))<g||e===1/0&&f===1/0)&&(f=a,g=e)});return f},r.shuffle=function(a){return r.sample(a,1/0)},r.sample=function(a,b,c){if(null==b||c)return C(a)||(a=r.values(a)),a[r.random(a.length-1)];var d=C(a)?r.clone(a):r.values(a),e=B(d);b=Math.max(Math.min(b,e),0);for(var f=e-1,g=0;g<b;g++){var h=r.random(g,f),i=d[g];d[g]=d[h],d[h]=i}return d.slice(0,b)},r.sortBy=function(a,b,c){var d=0;return b=u(b,c),r.pluck(r.map(a,function(a,c,e){return{value:a,index:d++,criteria:b(a,c,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(c<d||void 0===d)return-1}return a.index-b.index}),"value")};var E=function(a,b){return function(c,d,e){var f=b?[[],[]]:{};return d=u(d,e),r.each(c,function(b,e){var g=d(b,e,c);a(f,b,g)}),f}};r.groupBy=E(function(a,b,c){y(a,c)?a[c].push(b):a[c]=[b]}),r.indexBy=E(function(a,b,c){a[c]=b}),r.countBy=E(function(a,b,c){y(a,c)?a[c]++:a[c]=1});var F=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;r.toArray=function(a){return a?r.isArray(a)?k.call(a):r.isString(a)?a.match(F):C(a)?r.map(a,r.identity):r.values(a):[]},r.size=function(a){return null==a?0:C(a)?a.length:r.keys(a).length},r.partition=E(function(a,b,c){a[c?0:1].push(b)},!0),r.first=r.head=r.take=function(a,b,c){return null==a||a.length<1?null==b?void 0:[]:null==b||c?a[0]:r.initial(a,a.length-b)},r.initial=function(a,b,c){return k.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))},r.last=function(a,b,c){return null==a||a.length<1?null==b?void 0:[]:null==b||c?a[a.length-1]:r.rest(a,Math.max(0,a.length-b))},r.rest=r.tail=r.drop=function(a,b,c){return k.call(a,null==b||c?1:b)},r.compact=function(a){return r.filter(a,Boolean)};var G=function(a,b,c,d){d=d||[];for(var e=d.length,f=0,g=B(a);f<g;f++){var h=a[f];if(C(h)&&(r.isArray(h)||r.isArguments(h)))if(b)for(var i=0,j=h.length;i<j;)d[e++]=h[i++];else G(h,b,c,d),e=d.length;else c||(d[e++]=h)}return d};r.flatten=function(a,b){return G(a,b,!1)},r.without=v(function(a,b){return r.difference(a,b)}),r.uniq=r.unique=function(a,b,c,d){r.isBoolean(b)||(d=c,c=b,b=!1),null!=c&&(c=u(c,d));for(var e=[],f=[],g=0,h=B(a);g<h;g++){var i=a[g],j=c?c(i,g,a):i;b&&!c?(g&&f===j||e.push(i),f=j):c?r.contains(f,j)||(f.push(j),e.push(i)):r.contains(e,i)||e.push(i)}return e},r.union=v(function(a){return r.uniq(G(a,!0,!0))}),r.intersection=function(a){for(var b=[],c=arguments.length,d=0,e=B(a);d<e;d++){var f=a[d];if(!r.contains(b,f)){var g;for(g=1;g<c&&r.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b},r.difference=v(function(a,b){return b=G(b,!0,!0),r.filter(a,function(a){return!r.contains(b,a)})}),r.unzip=function(a){for(var b=a&&r.max(a,B).length||0,c=Array(b),d=0;d<b;d++)c[d]=r.pluck(a,d);return c},r.zip=v(r.unzip),r.object=function(a,b){for(var c={},d=0,e=B(a);d<e;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c};var H=function(a){return function(b,c,d){c=u(c,d);for(var e=B(b),f=a>0?0:e-1;f>=0&&f<e;f+=a)if(c(b[f],f,b))return f;return-1}};r.findIndex=H(1),r.findLastIndex=H(-1),r.sortedIndex=function(a,b,c,d){c=u(c,d,1);for(var e=c(b),f=0,g=B(a);f<g;){var h=Math.floor((f+g)/2);c(a[h])<e?f=h+1:g=h}return f};var I=function(a,b,c){return function(d,e,f){var g=0,h=B(d);if("number"==typeof f)a>0?g=f>=0?f:Math.max(f+h,g):h=f>=0?Math.min(f+1,h):f+h+1;else if(c&&f&&h)return f=c(d,e),d[f]===e?f:-1;if(e!==e)return f=b(k.call(d,g,h),r.isNaN),f>=0?f+g:-1;for(f=a>0?g:h-1;f>=0&&f<h;f+=a)if(d[f]===e)return f;return-1}};r.indexOf=I(1,r.findIndex,r.sortedIndex),r.lastIndexOf=I(-1,r.findLastIndex),r.range=function(a,b,c){null==b&&(b=a||0,a=0),c||(c=b<a?-1:1);for(var d=Math.max(Math.ceil((b-a)/c),0),e=Array(d),f=0;f<d;f++,a+=c)e[f]=a;return e},r.chunk=function(a,b){if(null==b||b<1)return[];for(var c=[],d=0,e=a.length;d<e;)c.push(k.call(a,d,d+=b));return c};var J=function(a,b,c,d,e){if(!(d instanceof b))return a.apply(c,e);var f=w(a.prototype),g=a.apply(f,e);return r.isObject(g)?g:f};r.bind=v(function(a,b,c){if(!r.isFunction(a))throw new TypeError("Bind must be called on a function");var d=v(function(e){return J(a,d,b,this,c.concat(e))});return d}),r.partial=v(function(a,b){var c=r.partial.placeholder,d=function(){for(var e=0,f=b.length,g=Array(f),h=0;h<f;h++)g[h]=b[h]===c?arguments[e++]:b[h];for(;e<arguments.length;)g.push(arguments[e++]);return J(a,d,this,this,g)};return d}),r.partial.placeholder=r,r.bindAll=v(function(a,b){b=G(b,!1,!1);var c=b.length;if(c<1)throw new Error("bindAll must be passed function names");for(;c--;){var d=b[c];a[d]=r.bind(a[d],a)}}),r.memoize=function(a,b){var c=function(d){var e=c.cache,f=""+(b?b.apply(this,arguments):d);return y(e,f)||(e[f]=a.apply(this,arguments)),e[f]};return c.cache={},c},r.delay=v(function(a,b,c){return setTimeout(function(){return a.apply(null,c)},b)}),r.defer=r.partial(r.delay,r,1),r.throttle=function(a,b,c){var d,e,f,g,h=0;c||(c={});var i=function(){h=!1===c.leading?0:r.now(),d=null,g=a.apply(e,f),d||(e=f=null)},j=function(){var j=r.now();h||!1!==c.leading||(h=j);var k=b-(j-h);return e=this,f=arguments,k<=0||k>b?(d&&(clearTimeout(d),d=null),h=j,g=a.apply(e,f),d||(e=f=null)):d||!1===c.trailing||(d=setTimeout(i,k)),g};return j.cancel=function(){clearTimeout(d),h=0,d=e=f=null},j},r.debounce=function(a,b,c){var d,e,f=function(b,c){d=null,c&&(e=a.apply(b,c))},g=v(function(g){if(d&&clearTimeout(d),c){var h=!d;d=setTimeout(f,b),h&&(e=a.apply(this,g))}else d=r.delay(f,b,this,g);return e});return g.cancel=function(){clearTimeout(d),d=null},g},r.wrap=function(a,b){return r.partial(b,a)},r.negate=function(a){return function(){return!a.apply(this,arguments)}},r.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}},r.after=function(a,b){return function(){if(--a<1)return b.apply(this,arguments)}},r.before=function(a,b){var c;return function(){return--a>0&&(c=b.apply(this,arguments)),a<=1&&(b=null),c}},r.once=r.partial(r.before,2),r.restArguments=v;var K=!{toString:null}.propertyIsEnumerable("toString"),L=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],M=function(a,b){var c=L.length,d=a.constructor,e=r.isFunction(d)&&d.prototype||h,f="constructor";for(y(a,f)&&!r.contains(b,f)&&b.push(f);c--;)(f=L[c])in a&&a[f]!==e[f]&&!r.contains(b,f)&&b.push(f)};r.keys=function(a){if(!r.isObject(a))return[];if(o)return o(a);var b=[];for(var c in a)y(a,c)&&b.push(c);return K&&M(a,b),b},r.allKeys=function(a){if(!r.isObject(a))return[];var b=[];for(var c in a)b.push(c);return K&&M(a,b),b},r.values=function(a){for(var b=r.keys(a),c=b.length,d=Array(c),e=0;e<c;e++)d[e]=a[b[e]];return d},r.mapObject=function(a,b,c){b=u(b,c);for(var d=r.keys(a),e=d.length,f={},g=0;g<e;g++){var h=d[g];f[h]=b(a[h],h,a)}return f},r.pairs=function(a){for(var b=r.keys(a),c=b.length,d=Array(c),e=0;e<c;e++)d[e]=[b[e],a[b[e]]];return d},r.invert=function(a){for(var b={},c=r.keys(a),d=0,e=c.length;d<e;d++)b[a[c[d]]]=c[d];return b},r.functions=r.methods=function(a){var b=[];for(var c in a)r.isFunction(a[c])&&b.push(c);return b.sort()};var N=function(a,b){return function(c){var d=arguments.length;if(b&&(c=Object(c)),d<2||null==c)return c;for(var e=1;e<d;e++)for(var f=arguments[e],g=a(f),h=g.length,i=0;i<h;i++){var j=g[i];b&&void 0!==c[j]||(c[j]=f[j])}return c}};r.extend=N(r.allKeys),r.extendOwn=r.assign=N(r.keys),r.findKey=function(a,b,c){b=u(b,c);for(var d,e=r.keys(a),f=0,g=e.length;f<g;f++)if(d=e[f],b(a[d],d,a))return d};var O=function(a,b,c){return b in c};r.pick=v(function(a,b){var c={},d=b[0];if(null==a)return c;r.isFunction(d)?(b.length>1&&(d=t(d,b[1])),b=r.allKeys(a)):(d=O,b=G(b,!1,!1),a=Object(a));for(var e=0,f=b.length;e<f;e++){var g=b[e],h=a[g];d(h,g,a)&&(c[g]=h)}return c}),r.omit=v(function(a,b){var c,d=b[0];return r.isFunction(d)?(d=r.negate(d),b.length>1&&(c=b[1])):(b=r.map(G(b,!1,!1),String),d=function(a,c){return!r.contains(b,c)}),r.pick(a,d,c)}),r.defaults=N(r.allKeys,!0),r.create=function(a,b){var c=w(a);return b&&r.extendOwn(c,b),c},r.clone=function(a){return r.isObject(a)?r.isArray(a)?a.slice():r.extend({},a):a},r.tap=function(a,b){return b(a),a},r.isMatch=function(a,b){var c=r.keys(b),d=c.length;if(null==a)return!d;for(var e=Object(a),f=0;f<d;f++){var g=c[f];if(b[g]!==e[g]||!(g in e))return!1}return!0};var P,Q;P=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return!1;if(a!==a)return b!==b;var e=typeof a;return("function"===e||"object"===e||"object"==typeof b)&&Q(a,b,c,d)},Q=function(a,b,c,d){a instanceof r&&(a=a._wrapped),b instanceof r&&(b=b._wrapped);var e=l.call(a);if(e!==l.call(b))return!1;switch(e){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!=+a?+b!=+b:0==+a?1/+a==1/b:+a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object Symbol]":return i.valueOf.call(a)===i.valueOf.call(b)}var f="[object Array]"===e;if(!f){if("object"!=typeof a||"object"!=typeof b)return!1;var g=a.constructor,h=b.constructor;if(g!==h&&!(r.isFunction(g)&&g instanceof g&&r.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1}c=c||[],d=d||[];for(var j=c.length;j--;)if(c[j]===a)return d[j]===b;if(c.push(a),d.push(b),f){if((j=a.length)!==b.length)return!1;for(;j--;)if(!P(a[j],b[j],c,d))return!1}else{var k,m=r.keys(a);if(j=m.length,r.keys(b).length!==j)return!1;for(;j--;)if(k=m[j],!y(b,k)||!P(a[k],b[k],c,d))return!1}return c.pop(),d.pop(),!0},r.isEqual=function(a,b){return P(a,b)},r.isEmpty=function(a){return null==a||(C(a)&&(r.isArray(a)||r.isString(a)||r.isArguments(a))?0===a.length:0===r.keys(a).length)},r.isElement=function(a){return!(!a||1!==a.nodeType)},r.isArray=n||function(a){return"[object Array]"===l.call(a)},r.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},r.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(a){r["is"+a]=function(b){return l.call(b)==="[object "+a+"]"}}),r.isArguments(arguments)||(r.isArguments=function(a){return y(a,"callee")});var R=e.document&&e.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof R&&(r.isFunction=function(a){return"function"==typeof a||!1}),r.isFinite=function(a){return!r.isSymbol(a)&&isFinite(a)&&!isNaN(parseFloat(a))},r.isNaN=function(a){return r.isNumber(a)&&isNaN(a)},r.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"===l.call(a)},r.isNull=function(a){return null===a},r.isUndefined=function(a){return void 0===a},r.has=function(a,b){if(!r.isArray(b))return y(a,b);for(var c=b.length,d=0;d<c;d++){var e=b[d];if(null==a||!m.call(a,e))return!1;a=a[e]}return!!c},r.noConflict=function(){return e._=f,this},r.identity=function(a){return a},r.constant=function(a){return function(){return a}},r.noop=function(){},r.property=function(a){return r.isArray(a)?function(b){return z(b,a)}:x(a)},r.propertyOf=function(a){return null==a?function(){}:function(b){return r.isArray(b)?z(a,b):a[b]}},r.matcher=r.matches=function(a){return a=r.extendOwn({},a),function(b){return r.isMatch(b,a)}},r.times=function(a,b,c){var d=Array(Math.max(0,a));b=t(b,c,1);for(var e=0;e<a;e++)d[e]=b(e);return d},r.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},r.now=Date.now||function(){return(new Date).getTime()};var S={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},T=r.invert(S),U=function(a){var b=function(b){return a[b]},c="(?:"+r.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}};r.escape=U(S),r.unescape=U(T),r.result=function(a,b,c){r.isArray(b)||(b=[b]);var d=b.length;if(!d)return r.isFunction(c)?c.call(a):c;for(var e=0;e<d;e++){var f=null==a?void 0:a[b[e]];void 0===f&&(f=c,e=d),a=r.isFunction(f)?f.call(a):f}return a};var V=0;r.uniqueId=function(a){var b=++V+"";return a?a+b:b},r.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var W=/(.)^/,X={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Y=/\\|'|\r|\n|\u2028|\u2029/g,Z=function(a){return"\\"+X[a]};r.template=function(a,b,c){!b&&c&&(b=c),b=r.defaults({},b,r.templateSettings);var d=RegExp([(b.escape||W).source,(b.interpolate||W).source,(b.evaluate||W).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){return f+=a.slice(e,h).replace(Y,Z),e=h+b.length,c?f+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?f+="'+\n((__t=("+d+"))==null?'':__t)+\n'":g&&(f+="';\n"+g+"\n__p+='"),b}),f+="';\n",b.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";var g;try{g=new Function(b.variable||"obj","_",f)}catch(a){throw a.source=f,a}var h=function(a){return g.call(this,a,r)},i=b.variable||"obj";return h.source="function("+i+"){\n"+f+"}",h},r.chain=function(a){var b=r(a);return b._chain=!0,b};var $=function(a,b){return a._chain?r(b).chain():b};r.mixin=function(a){return r.each(r.functions(a),function(b){var c=r[b]=a[b];r.prototype[b]=function(){var a=[this._wrapped];return j.apply(a,arguments),$(this,c.apply(r,a))}}),r},r.mixin(r),r.each(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=g[a];r.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!==a&&"splice"!==a||0!==c.length||delete c[0],$(this,c)}}),r.each(["concat","join","slice"],function(a){var b=g[a];r.prototype[a]=function(){return $(this,b.apply(this._wrapped,arguments))}}),r.prototype.value=function(){return this._wrapped},r.prototype.valueOf=r.prototype.toJSON=r.prototype.value,r.prototype.toString=function(){return String(this._wrapped)},"function"==typeof a&&a.amd&&a("underscore",[],function(){return r})}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],263:[function(a,b,c){},{}],264:[function(a,b,c){"use strict";function d(a){var b=a.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===a[b-2]?2:"="===a[b-1]?1:0}function e(a){return 3*a.length/4-d(a)}function f(a){var b,c,e,f,g,h=a.length;f=d(a),g=new l(3*h/4-f),c=f>0?h-4:h;var i=0;for(b=0;b<c;b+=4)e=k[a.charCodeAt(b)]<<18|k[a.charCodeAt(b+1)]<<12|k[a.charCodeAt(b+2)]<<6|k[a.charCodeAt(b+3)],g[i++]=e>>16&255,g[i++]=e>>8&255,g[i++]=255&e;return 2===f?(e=k[a.charCodeAt(b)]<<2|k[a.charCodeAt(b+1)]>>4,g[i++]=255&e):1===f&&(e=k[a.charCodeAt(b)]<<10|k[a.charCodeAt(b+1)]<<4|k[a.charCodeAt(b+2)]>>2,g[i++]=e>>8&255,g[i++]=255&e),g}function g(a){return j[a>>18&63]+j[a>>12&63]+j[a>>6&63]+j[63&a]}function h(a,b,c){for(var d,e=[],f=b;f<c;f+=3)d=(a[f]<<16)+(a[f+1]<<8)+a[f+2],e.push(g(d));return e.join("")}function i(a){for(var b,c=a.length,d=c%3,e="",f=[],g=16383,i=0,k=c-d;i<k;i+=g)f.push(h(a,i,i+g>k?k:i+g));return 1===d?(b=a[c-1],e+=j[b>>2],e+=j[b<<4&63],e+="=="):2===d&&(b=(a[c-2]<<8)+a[c-1],e+=j[b>>10],e+=j[b>>4&63],e+=j[b<<2&63],e+="="),f.push(e),f.join("")}c.byteLength=e,c.toByteArray=f,c.fromByteArray=i;for(var j=[],k=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,o=m.length;n<o;++n)j[n]=m[n],k[m.charCodeAt(n)]=n;k["-".charCodeAt(0)]=62,k["_".charCodeAt(0)]=63},{}],265:[function(a,b,c){arguments[4][263][0].apply(c,arguments)},{dup:263}],266:[function(a,b,c){"use strict";function d(){try{var a=new Uint8Array(1);return a.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===a.foo()}catch(a){return!1}}function e(a){if(a>Z)throw new RangeError("Invalid typed array length");var b=new Uint8Array(a);return b.__proto__=f.prototype,b}function f(a,b,c){if("number"==typeof a){if("string"==typeof b)throw new Error("If encoding is specified then the first argument must be a string");return j(a)}return g(a,b,c)}function g(a,b,c){if("number"==typeof a)throw new TypeError('"value" argument must not be a number');return U(a)?m(a,b,c):"string"==typeof a?k(a,b):n(a)}function h(a){if("number"!=typeof a)throw new TypeError('"size" argument must be a number');if(a<0)throw new RangeError('"size" argument must not be negative')}function i(a,b,c){return h(a),a<=0?e(a):void 0!==b?"string"==typeof c?e(a).fill(b,c):e(a).fill(b):e(a)}function j(a){return h(a),e(a<0?0:0|o(a))}function k(a,b){if("string"==typeof b&&""!==b||(b="utf8"),!f.isEncoding(b))throw new TypeError('"encoding" must be a valid string encoding');var c=0|q(a,b),d=e(c),g=d.write(a,b);return g!==c&&(d=d.slice(0,g)),d}function l(a){for(var b=a.length<0?0:0|o(a.length),c=e(b),d=0;d<b;d+=1)c[d]=255&a[d];return c}function m(a,b,c){if(b<0||a.byteLength<b)throw new RangeError("'offset' is out of bounds");if(a.byteLength<b+(c||0))throw new RangeError("'length' is out of bounds");var d;return d=void 0===b&&void 0===c?new Uint8Array(a):void 0===c?new Uint8Array(a,b):new Uint8Array(a,b,c),d.__proto__=f.prototype,d}function n(a){if(f.isBuffer(a)){var b=0|o(a.length),c=e(b);return 0===c.length?c:(a.copy(c,0,0,b),c)}if(a){if(V(a)||"length"in a)return"number"!=typeof a.length||W(a.length)?e(0):l(a);if("Buffer"===a.type&&Array.isArray(a.data))return l(a.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function o(a){if(a>=Z)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Z.toString(16)+" bytes");return 0|a}function p(a){return+a!=a&&(a=0),f.alloc(+a)}function q(a,b){if(f.isBuffer(a))return a.length;if(V(a)||U(a))return a.byteLength;"string"!=typeof a&&(a=""+a);var c=a.length;if(0===c)return 0;for(var d=!1;;)switch(b){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":case void 0:return P(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return S(a).length;default:if(d)return P(a).length;b=(""+b).toLowerCase(),d=!0}}function r(a,b,c){var d=!1;if((void 0===b||b<0)&&(b=0),b>this.length)return"";if((void 0===c||c>this.length)&&(c=this.length),c<=0)return"";if(c>>>=0,b>>>=0,c<=b)return"";for(a||(a="utf8");;)switch(a){case"hex":return G(this,b,c);case"utf8":case"utf-8":return C(this,b,c);case"ascii":return E(this,b,c);case"latin1":case"binary":return F(this,b,c);case"base64":return B(this,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,b,c);default:if(d)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),d=!0}}function s(a,b,c){var d=a[b];a[b]=a[c],a[c]=d}function t(a,b,c,d,e){if(0===a.length)return-1;if("string"==typeof c?(d=c,c=0):c>2147483647?c=2147483647:c<-2147483648&&(c=-2147483648),c=+c,W(c)&&(c=e?0:a.length-1),c<0&&(c=a.length+c),c>=a.length){if(e)return-1;c=a.length-1}else if(c<0){if(!e)return-1;c=0}if("string"==typeof b&&(b=f.from(b,d)),f.isBuffer(b))return 0===b.length?-1:u(a,b,c,d,e);if("number"==typeof b)return b&=255,"function"==typeof Uint8Array.prototype.indexOf?e?Uint8Array.prototype.indexOf.call(a,b,c):Uint8Array.prototype.lastIndexOf.call(a,b,c):u(a,[b],c,d,e);throw new TypeError("val must be string, number or Buffer")}function u(a,b,c,d,e){function f(a,b){return 1===g?a[b]:a.readUInt16BE(b*g)}var g=1,h=a.length,i=b.length;if(void 0!==d&&("ucs2"===(d=String(d).toLowerCase())||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(a.length<2||b.length<2)return-1;g=2,h/=2,i/=2,c/=2}var j;if(e){var k=-1;for(j=c;j<h;j++)if(f(a,j)===f(b,-1===k?0:j-k)){if(-1===k&&(k=j),j-k+1===i)return k*g}else-1!==k&&(j-=j-k),k=-1}else for(c+i>h&&(c=h-i),j=c;j>=0;j--){for(var l=!0,m=0;m<i;m++)if(f(a,j+m)!==f(b,m)){l=!1;break}if(l)return j}return-1}function v(a,b,c,d){c=Number(c)||0;var e=a.length-c;d?(d=Number(d))>e&&(d=e):d=e;var f=b.length;if(f%2!=0)throw new TypeError("Invalid hex string");d>f/2&&(d=f/2);for(var g=0;g<d;++g){var h=parseInt(b.substr(2*g,2),16);if(W(h))return g;a[c+g]=h}return g}function w(a,b,c,d){return T(P(b,a.length-c),a,c,d)}function x(a,b,c,d){return T(Q(b),a,c,d)}function y(a,b,c,d){return x(a,b,c,d)}function z(a,b,c,d){return T(S(b),a,c,d)}function A(a,b,c,d){return T(R(b,a.length-c),a,c,d)}function B(a,b,c){return 0===b&&c===a.length?X.fromByteArray(a):X.fromByteArray(a.slice(b,c))}function C(a,b,c){c=Math.min(a.length,c);for(var d=[],e=b;e<c;){var f=a[e],g=null,h=f>239?4:f>223?3:f>191?2:1;if(e+h<=c){var i,j,k,l;switch(h){case 1:f<128&&(g=f);break;case 2:i=a[e+1],128==(192&i)&&(l=(31&f)<<6|63&i)>127&&(g=l);break;case 3:i=a[e+1],j=a[e+2],128==(192&i)&&128==(192&j)&&(l=(15&f)<<12|(63&i)<<6|63&j)>2047&&(l<55296||l>57343)&&(g=l);break;case 4:i=a[e+1],j=a[e+2],k=a[e+3],128==(192&i)&&128==(192&j)&&128==(192&k)&&(l=(15&f)<<18|(63&i)<<12|(63&j)<<6|63&k)>65535&&l<1114112&&(g=l)}}null===g?(g=65533,h=1):g>65535&&(g-=65536,d.push(g>>>10&1023|55296),g=56320|1023&g),d.push(g),e+=h}return D(d)}function D(a){var b=a.length;if(b<=$)return String.fromCharCode.apply(String,a);for(var c="",d=0;d<b;)c+=String.fromCharCode.apply(String,a.slice(d,d+=$));return c}function E(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;e<c;++e)d+=String.fromCharCode(127&a[e]);return d}function F(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;e<c;++e)d+=String.fromCharCode(a[e]);return d}function G(a,b,c){var d=a.length;(!b||b<0)&&(b=0),(!c||c<0||c>d)&&(c=d);for(var e="",f=b;f<c;++f)e+=O(a[f]);return e}function H(a,b,c){for(var d=a.slice(b,c),e="",f=0;f<d.length;f+=2)e+=String.fromCharCode(d[f]+256*d[f+1]);return e}function I(a,b,c){if(a%1!=0||a<0)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length")}function J(a,b,c,d,e,g){if(!f.isBuffer(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(b>e||b<g)throw new RangeError('"value" argument is out of bounds');if(c+d>a.length)throw new RangeError("Index out of range")}function K(a,b,c,d,e,f){if(c+d>a.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("Index out of range")}function L(a,b,c,d,e){return b=+b,c>>>=0,e||K(a,b,c,4,3.4028234663852886e38,-3.4028234663852886e38),Y.write(a,b,c,d,23,4),c+4}function M(a,b,c,d,e){return b=+b,c>>>=0,e||K(a,b,c,8,1.7976931348623157e308,-1.7976931348623157e308),Y.write(a,b,c,d,52,8),c+8}function N(a){if(a=a.trim().replace(_,""),a.length<2)return"";for(;a.length%4!=0;)a+="=";return a}function O(a){return a<16?"0"+a.toString(16):a.toString(16)}function P(a,b){b=b||1/0;for(var c,d=a.length,e=null,f=[],g=0;g<d;++g){if((c=a.charCodeAt(g))>55295&&c<57344){if(!e){if(c>56319){(b-=3)>-1&&f.push(239,191,189);continue}if(g+1===d){(b-=3)>-1&&f.push(239,191,189);continue}e=c;continue}if(c<56320){(b-=3)>-1&&f.push(239,191,189),e=c;continue}c=65536+(e-55296<<10|c-56320)}else e&&(b-=3)>-1&&f.push(239,191,189);if(e=null,c<128){if((b-=1)<0)break;f.push(c)}else if(c<2048){if((b-=2)<0)break;f.push(c>>6|192,63&c|128)}else if(c<65536){if((b-=3)<0)break;f.push(c>>12|224,c>>6&63|128,63&c|128)}else{if(!(c<1114112))throw new Error("Invalid code point");if((b-=4)<0)break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}}return f}function Q(a){for(var b=[],c=0;c<a.length;++c)b.push(255&a.charCodeAt(c));return b}function R(a,b){for(var c,d,e,f=[],g=0;g<a.length&&!((b-=2)<0);++g)c=a.charCodeAt(g),d=c>>8,e=c%256,f.push(e),f.push(d);return f}function S(a){return X.toByteArray(N(a))}function T(a,b,c,d){for(var e=0;e<d&&!(e+c>=b.length||e>=a.length);++e)b[e+c]=a[e];return e}function U(a){return a instanceof ArrayBuffer||null!=a&&null!=a.constructor&&"ArrayBuffer"===a.constructor.name&&"number"==typeof a.byteLength}function V(a){return"function"==typeof ArrayBuffer.isView&&ArrayBuffer.isView(a)}function W(a){return a!==a}var X=a("base64-js"),Y=a("ieee754");c.Buffer=f,c.SlowBuffer=p,c.INSPECT_MAX_BYTES=50;var Z=2147483647;c.kMaxLength=Z,f.TYPED_ARRAY_SUPPORT=d(),f.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),"undefined"!=typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),f.poolSize=8192,f.from=function(a,b,c){return g(a,b,c)},f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,f.alloc=function(a,b,c){return i(a,b,c)},f.allocUnsafe=function(a){return j(a)},f.allocUnsafeSlow=function(a){return j(a)},f.isBuffer=function(a){return null!=a&&!0===a._isBuffer},f.compare=function(a,b){if(!f.isBuffer(a)||!f.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var c=a.length,d=b.length,e=0,g=Math.min(c,d);e<g;++e)if(a[e]!==b[e]){c=a[e],d=b[e];break}return c<d?-1:d<c?1:0},f.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(a,b){if(!Array.isArray(a))throw new TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return f.alloc(0);var c;if(void 0===b)for(b=0,c=0;c<a.length;++c)b+=a[c].length;var d=f.allocUnsafe(b),e=0;for(c=0;c<a.length;++c){var g=a[c];if(!f.isBuffer(g))throw new TypeError('"list" argument must be an Array of Buffers');g.copy(d,e),e+=g.length}return d},f.byteLength=q,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var a=this.length;if(a%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var b=0;b<a;b+=2)s(this,b,b+1);return this},f.prototype.swap32=function(){var a=this.length;if(a%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var b=0;b<a;b+=4)s(this,b,b+3),s(this,b+1,b+2);return this},f.prototype.swap64=function(){var a=this.length;if(a%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var b=0;b<a;b+=8)s(this,b,b+7),s(this,b+1,b+6),s(this,b+2,b+5),s(this,b+3,b+4);return this},f.prototype.toString=function(){var a=this.length;return 0===a?"":0===arguments.length?C(this,0,a):r.apply(this,arguments)},f.prototype.equals=function(a){if(!f.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a||0===f.compare(this,a)},f.prototype.inspect=function(){var a="",b=c.INSPECT_MAX_BYTES;return this.length>0&&(a=this.toString("hex",0,b).match(/.{2}/g).join(" "),this.length>b&&(a+=" ... ")),"<Buffer "+a+">"},f.prototype.compare=function(a,b,c,d,e){if(!f.isBuffer(a))throw new TypeError("Argument must be a Buffer");if(void 0===b&&(b=0),void 0===c&&(c=a?a.length:0),void 0===d&&(d=0),void 0===e&&(e=this.length),b<0||c>a.length||d<0||e>this.length)throw new RangeError("out of range index");if(d>=e&&b>=c)return 0;if(d>=e)return-1;if(b>=c)return 1;if(b>>>=0,c>>>=0,d>>>=0,e>>>=0,this===a)return 0;for(var g=e-d,h=c-b,i=Math.min(g,h),j=this.slice(d,e),k=a.slice(b,c),l=0;l<i;++l)if(j[l]!==k[l]){g=j[l],h=k[l];break}return g<h?-1:h<g?1:0},f.prototype.includes=function(a,b,c){return-1!==this.indexOf(a,b,c)},f.prototype.indexOf=function(a,b,c){return t(this,a,b,c,!0)},f.prototype.lastIndexOf=function(a,b,c){return t(this,a,b,c,!1)},f.prototype.write=function(a,b,c,d){if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"==typeof b)d=b,c=this.length,b=0;else{if(!isFinite(b))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");b>>>=0,isFinite(c)?(c>>>=0,void 0===d&&(d="utf8")):(d=c,c=void 0)}var e=this.length-b;if((void 0===c||c>e)&&(c=e),a.length>0&&(c<0||b<0)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");d||(d="utf8");for(var f=!1;;)switch(d){case"hex":return v(this,a,b,c);case"utf8":case"utf-8":return w(this,a,b,c);case"ascii":return x(this,a,b,c);case"latin1":case"binary":return y(this,a,b,c);case"base64":return z(this,a,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,a,b,c);default:if(f)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),f=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $=4096;f.prototype.slice=function(a,b){var c=this.length;a=~~a,b=void 0===b?c:~~b,a<0?(a+=c)<0&&(a=0):a>c&&(a=c),b<0?(b+=c)<0&&(b=0):b>c&&(b=c),b<a&&(b=a);var d=this.subarray(a,b);return d.__proto__=f.prototype,d},f.prototype.readUIntLE=function(a,b,c){a>>>=0,b>>>=0,c||I(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return d},f.prototype.readUIntBE=function(a,b,c){a>>>=0,b>>>=0,c||I(a,b,this.length);for(var d=this[a+--b],e=1;b>0&&(e*=256);)d+=this[a+--b]*e;return d},f.prototype.readUInt8=function(a,b){return a>>>=0,b||I(a,1,this.length),this[a]},f.prototype.readUInt16LE=function(a,b){return a>>>=0,b||I(a,2,this.length),this[a]|this[a+1]<<8},f.prototype.readUInt16BE=function(a,b){return a>>>=0,b||I(a,2,this.length),this[a]<<8|this[a+1]},f.prototype.readUInt32LE=function(a,b){return a>>>=0,b||I(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},f.prototype.readUInt32BE=function(a,b){return a>>>=0,b||I(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},f.prototype.readIntLE=function(a,b,c){a>>>=0,b>>>=0,c||I(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return e*=128,d>=e&&(d-=Math.pow(2,8*b)),d},f.prototype.readIntBE=function(a,b,c){a>>>=0,b>>>=0,c||I(a,b,this.length);for(var d=b,e=1,f=this[a+--d];d>0&&(e*=256);)f+=this[a+--d]*e;return e*=128,f>=e&&(f-=Math.pow(2,8*b)),f},f.prototype.readInt8=function(a,b){return a>>>=0,b||I(a,1,this.length),128&this[a]?-1*(255-this[a]+1):this[a]},f.prototype.readInt16LE=function(a,b){a>>>=0,b||I(a,2,this.length);var c=this[a]|this[a+1]<<8;return 32768&c?4294901760|c:c},f.prototype.readInt16BE=function(a,b){a>>>=0,b||I(a,2,this.length);var c=this[a+1]|this[a]<<8;return 32768&c?4294901760|c:c},f.prototype.readInt32LE=function(a,b){return a>>>=0,b||I(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},f.prototype.readInt32BE=function(a,b){return a>>>=0,b||I(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},f.prototype.readFloatLE=function(a,b){return a>>>=0,b||I(a,4,this.length),Y.read(this,a,!0,23,4)},f.prototype.readFloatBE=function(a,b){return a>>>=0,b||I(a,4,this.length),Y.read(this,a,!1,23,4)},f.prototype.readDoubleLE=function(a,b){return a>>>=0,b||I(a,8,this.length),Y.read(this,a,!0,52,8)},f.prototype.readDoubleBE=function(a,b){return a>>>=0,
b||I(a,8,this.length),Y.read(this,a,!1,52,8)},f.prototype.writeUIntLE=function(a,b,c,d){if(a=+a,b>>>=0,c>>>=0,!d){J(this,a,b,c,Math.pow(2,8*c)-1,0)}var e=1,f=0;for(this[b]=255&a;++f<c&&(e*=256);)this[b+f]=a/e&255;return b+c},f.prototype.writeUIntBE=function(a,b,c,d){if(a=+a,b>>>=0,c>>>=0,!d){J(this,a,b,c,Math.pow(2,8*c)-1,0)}var e=c-1,f=1;for(this[b+e]=255&a;--e>=0&&(f*=256);)this[b+e]=a/f&255;return b+c},f.prototype.writeUInt8=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,1,255,0),this[b]=255&a,b+1},f.prototype.writeUInt16LE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,2,65535,0),this[b]=255&a,this[b+1]=a>>>8,b+2},f.prototype.writeUInt16BE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,2,65535,0),this[b]=a>>>8,this[b+1]=255&a,b+2},f.prototype.writeUInt32LE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,4,4294967295,0),this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=255&a,b+4},f.prototype.writeUInt32BE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,4,4294967295,0),this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a,b+4},f.prototype.writeIntLE=function(a,b,c,d){if(a=+a,b>>>=0,!d){var e=Math.pow(2,8*c-1);J(this,a,b,c,e-1,-e)}var f=0,g=1,h=0;for(this[b]=255&a;++f<c&&(g*=256);)a<0&&0===h&&0!==this[b+f-1]&&(h=1),this[b+f]=(a/g>>0)-h&255;return b+c},f.prototype.writeIntBE=function(a,b,c,d){if(a=+a,b>>>=0,!d){var e=Math.pow(2,8*c-1);J(this,a,b,c,e-1,-e)}var f=c-1,g=1,h=0;for(this[b+f]=255&a;--f>=0&&(g*=256);)a<0&&0===h&&0!==this[b+f+1]&&(h=1),this[b+f]=(a/g>>0)-h&255;return b+c},f.prototype.writeInt8=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,1,127,-128),a<0&&(a=255+a+1),this[b]=255&a,b+1},f.prototype.writeInt16LE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,2,32767,-32768),this[b]=255&a,this[b+1]=a>>>8,b+2},f.prototype.writeInt16BE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,2,32767,-32768),this[b]=a>>>8,this[b+1]=255&a,b+2},f.prototype.writeInt32LE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,4,2147483647,-2147483648),this[b]=255&a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24,b+4},f.prototype.writeInt32BE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a,b+4},f.prototype.writeFloatLE=function(a,b,c){return L(this,a,b,!0,c)},f.prototype.writeFloatBE=function(a,b,c){return L(this,a,b,!1,c)},f.prototype.writeDoubleLE=function(a,b,c){return M(this,a,b,!0,c)},f.prototype.writeDoubleBE=function(a,b,c){return M(this,a,b,!1,c)},f.prototype.copy=function(a,b,c,d){if(c||(c=0),d||0===d||(d=this.length),b>=a.length&&(b=a.length),b||(b=0),d>0&&d<c&&(d=c),d===c)return 0;if(0===a.length||0===this.length)return 0;if(b<0)throw new RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw new RangeError("sourceStart out of bounds");if(d<0)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),a.length-b<d-c&&(d=a.length-b+c);var e,f=d-c;if(this===a&&c<b&&b<d)for(e=f-1;e>=0;--e)a[e+b]=this[e+c];else if(f<1e3)for(e=0;e<f;++e)a[e+b]=this[e+c];else Uint8Array.prototype.set.call(a,this.subarray(c,c+f),b);return f},f.prototype.fill=function(a,b,c,d){if("string"==typeof a){if("string"==typeof b?(d=b,b=0,c=this.length):"string"==typeof c&&(d=c,c=this.length),1===a.length){var e=a.charCodeAt(0);e<256&&(a=e)}if(void 0!==d&&"string"!=typeof d)throw new TypeError("encoding must be a string");if("string"==typeof d&&!f.isEncoding(d))throw new TypeError("Unknown encoding: "+d)}else"number"==typeof a&&(a&=255);if(b<0||this.length<b||this.length<c)throw new RangeError("Out of range index");if(c<=b)return this;b>>>=0,c=void 0===c?this.length:c>>>0,a||(a=0);var g;if("number"==typeof a)for(g=b;g<c;++g)this[g]=a;else{var h=f.isBuffer(a)?a:new f(a,d),i=h.length;for(g=0;g<c-b;++g)this[g+b]=h[g%i]}return this};var _=/[^+\/0-9A-Za-z-_]/g},{"base64-js":264,ieee754:270}],267:[function(a,b,c){b.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{}],268:[function(a,b,c){(function(a){function b(a){return Array.isArray?Array.isArray(a):"[object Array]"===q(a)}function d(a){return"boolean"==typeof a}function e(a){return null===a}function f(a){return null==a}function g(a){return"number"==typeof a}function h(a){return"string"==typeof a}function i(a){return"symbol"==typeof a}function j(a){return void 0===a}function k(a){return"[object RegExp]"===q(a)}function l(a){return"object"==typeof a&&null!==a}function m(a){return"[object Date]"===q(a)}function n(a){return"[object Error]"===q(a)||a instanceof Error}function o(a){return"function"==typeof a}function p(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||void 0===a}function q(a){return Object.prototype.toString.call(a)}c.isArray=b,c.isBoolean=d,c.isNull=e,c.isNullOrUndefined=f,c.isNumber=g,c.isString=h,c.isSymbol=i,c.isUndefined=j,c.isRegExp=k,c.isObject=l,c.isDate=m,c.isError=n,c.isFunction=o,c.isPrimitive=p,c.isBuffer=a.isBuffer}).call(this,{isBuffer:a("../../is-buffer/index.js")})},{"../../is-buffer/index.js":272}],269:[function(a,b,c){function d(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function e(a){return"function"==typeof a}function f(a){return"number"==typeof a}function g(a){return"object"==typeof a&&null!==a}function h(a){return void 0===a}b.exports=d,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._maxListeners=void 0,d.defaultMaxListeners=10,d.prototype.setMaxListeners=function(a){if(!f(a)||a<0||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},d.prototype.emit=function(a){var b,c,d,f,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||g(this._events.error)&&!this._events.error.length)){if((b=arguments[1])instanceof Error)throw b;var k=new Error('Uncaught, unspecified "error" event. ('+b+")");throw k.context=b,k}if(c=this._events[a],h(c))return!1;if(e(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:f=Array.prototype.slice.call(arguments,1),c.apply(this,f)}else if(g(c))for(f=Array.prototype.slice.call(arguments,1),j=c.slice(),d=j.length,i=0;i<d;i++)j[i].apply(this,f);return!0},d.prototype.addListener=function(a,b){var c;if(!e(b))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,e(b.listener)?b.listener:b),this._events[a]?g(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,g(this._events[a])&&!this._events[a].warned&&(c=h(this._maxListeners)?d.defaultMaxListeners:this._maxListeners)&&c>0&&this._events[a].length>c&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace()),this},d.prototype.on=d.prototype.addListener,d.prototype.once=function(a,b){function c(){this.removeListener(a,c),d||(d=!0,b.apply(this,arguments))}if(!e(b))throw TypeError("listener must be a function");var d=!1;return c.listener=b,this.on(a,c),this},d.prototype.removeListener=function(a,b){var c,d,f,h;if(!e(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],f=c.length,d=-1,c===b||e(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(g(c)){for(h=f;h-- >0;)if(c[h]===b||c[h].listener&&c[h].listener===b){d=h;break}if(d<0)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(d,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},d.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],e(c))this.removeListener(a,c);else if(c)for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},d.prototype.listeners=function(a){return this._events&&this._events[a]?e(this._events[a])?[this._events[a]]:this._events[a].slice():[]},d.prototype.listenerCount=function(a){if(this._events){var b=this._events[a];if(e(b))return 1;if(b)return b.length}return 0},d.listenerCount=function(a,b){return a.listenerCount(b)}},{}],270:[function(a,b,c){c.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?NaN:1/0*(n?-1:1);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},c.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?0:f-1,o=d?1:-1,p=b<0||0===b&&1/b<0?1:0;for(b=Math.abs(b),isNaN(b)||b===1/0?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),b+=g+l>=1?m/i:m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}},{}],271:[function(a,b,c){"function"==typeof Object.create?b.exports=function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:b.exports=function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],272:[function(a,b,c){function d(a){return!!a.constructor&&"function"==typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)}function e(a){return"function"==typeof a.readFloatLE&&"function"==typeof a.slice&&d(a.slice(0,0))}b.exports=function(a){return null!=a&&(d(a)||e(a)||!!a._isBuffer)}},{}],273:[function(a,b,c){var d={}.toString;b.exports=Array.isArray||function(a){return"[object Array]"==d.call(a)}},{}],274:[function(a,b,c){(function(a){"use strict";function c(b,c,d,e){if("function"!=typeof b)throw new TypeError('"callback" argument must be a function');var f,g,h=arguments.length;switch(h){case 0:case 1:return a.nextTick(b);case 2:return a.nextTick(function(){b.call(null,c)});case 3:return a.nextTick(function(){b.call(null,c,d)});case 4:return a.nextTick(function(){b.call(null,c,d,e)});default:for(f=new Array(h-1),g=0;g<f.length;)f[g++]=arguments[g];return a.nextTick(function(){b.apply(null,f)})}}!a.version||0===a.version.indexOf("v0.")||0===a.version.indexOf("v1.")&&0!==a.version.indexOf("v1.8.")?b.exports=c:b.exports=a.nextTick}).call(this,a("_process"))},{_process:275}],275:[function(a,b,c){function d(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function f(a){if(l===setTimeout)return setTimeout(a,0);if((l===d||!l)&&setTimeout)return l=setTimeout,setTimeout(a,0);try{return l(a,0)}catch(b){try{return l.call(null,a,0)}catch(b){return l.call(this,a,0)}}}function g(a){if(m===clearTimeout)return clearTimeout(a);if((m===e||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(a);try{return m(a)}catch(b){try{return m.call(null,a)}catch(b){return m.call(this,a)}}}function h(){q&&o&&(q=!1,o.length?p=o.concat(p):r=-1,p.length&&i())}function i(){if(!q){var a=f(h);q=!0;for(var b=p.length;b;){for(o=p,p=[];++r<b;)o&&o[r].run();r=-1,b=p.length}o=null,q=!1,g(a)}}function j(a,b){this.fun=a,this.array=b}function k(){}var l,m,n=b.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:d}catch(a){l=d}try{m="function"==typeof clearTimeout?clearTimeout:e}catch(a){m=e}}();var o,p=[],q=!1,r=-1;n.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];p.push(new j(a,b)),1!==p.length||q||f(i)},j.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=k,n.addListener=k,n.once=k,n.off=k,n.removeListener=k,n.removeAllListeners=k,n.emit=k,n.prependListener=k,n.prependOnceListener=k,n.listeners=function(a){return[]},n.binding=function(a){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(a){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],276:[function(b,c,d){(function(b){!function(e){function f(a){throw new RangeError(I[a])}function g(a,b){for(var c=a.length,d=[];c--;)d[c]=b(a[c]);return d}function h(a,b){var c=a.split("@"),d="";return c.length>1&&(d=c[0]+"@",a=c[1]),a=a.replace(H,"."),d+g(a.split("."),b).join(".")}function i(a){for(var b,c,d=[],e=0,f=a.length;e<f;)b=a.charCodeAt(e++),b>=55296&&b<=56319&&e<f?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function j(a){return g(a,function(a){var b="";return a>65535&&(a-=65536,b+=L(a>>>10&1023|55296),a=56320|1023&a),b+=L(a)}).join("")}function k(a){return a-48<10?a-22:a-65<26?a-65:a-97<26?a-97:x}function l(a,b){return a+22+75*(a<26)-((0!=b)<<5)}function m(a,b,c){var d=0;for(a=c?K(a/B):a>>1,a+=K(a/b);a>J*z>>1;d+=x)a=K(a/J);return K(d+(J+1)*a/(a+A))}function n(a){var b,c,d,e,g,h,i,l,n,o,p=[],q=a.length,r=0,s=D,t=C;for(c=a.lastIndexOf(E),c<0&&(c=0),d=0;d<c;++d)a.charCodeAt(d)>=128&&f("not-basic"),p.push(a.charCodeAt(d));for(e=c>0?c+1:0;e<q;){for(g=r,h=1,i=x;e>=q&&f("invalid-input"),l=k(a.charCodeAt(e++)),(l>=x||l>K((w-r)/h))&&f("overflow"),r+=l*h,n=i<=t?y:i>=t+z?z:i-t,!(l<n);i+=x)o=x-n,h>K(w/o)&&f("overflow"),h*=o;b=p.length+1,t=m(r-g,b,0==g),K(r/b)>w-s&&f("overflow"),s+=K(r/b),r%=b,p.splice(r++,0,s)}return j(p)}function o(a){var b,c,d,e,g,h,j,k,n,o,p,q,r,s,t,u=[];for(a=i(a),q=a.length,b=D,c=0,g=C,h=0;h<q;++h)(p=a[h])<128&&u.push(L(p));for(d=e=u.length,e&&u.push(E);d<q;){for(j=w,h=0;h<q;++h)(p=a[h])>=b&&p<j&&(j=p);for(r=d+1,j-b>K((w-c)/r)&&f("overflow"),c+=(j-b)*r,b=j,h=0;h<q;++h)if(p=a[h],p<b&&++c>w&&f("overflow"),p==b){for(k=c,n=x;o=n<=g?y:n>=g+z?z:n-g,!(k<o);n+=x)t=k-o,s=x-o,u.push(L(l(o+t%s,0))),k=K(t/s);u.push(L(l(k,0))),g=m(c,r,d==e),c=0,++d}++c,++b}return u.join("")}function p(a){return h(a,function(a){return F.test(a)?n(a.slice(4).toLowerCase()):a})}function q(a){return h(a,function(a){return G.test(a)?"xn--"+o(a):a})}var r="object"==typeof d&&d&&!d.nodeType&&d,s="object"==typeof c&&c&&!c.nodeType&&c,t="object"==typeof b&&b;t.global!==t&&t.window!==t&&t.self!==t||(e=t);var u,v,w=2147483647,x=36,y=1,z=26,A=38,B=700,C=72,D=128,E="-",F=/^xn--/,G=/[^\x20-\x7E]/,H=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},J=x-y,K=Math.floor,L=String.fromCharCode;if(u={version:"1.4.1",ucs2:{decode:i,encode:j},decode:n,encode:o,toASCII:q,toUnicode:p},"function"==typeof a&&"object"==typeof a.amd&&a.amd)a("punycode",function(){return u});else if(r&&s)if(c.exports==r)s.exports=u;else for(v in u)u.hasOwnProperty(v)&&(r[v]=u[v]);else e.punycode=u}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],277:[function(a,b,c){"use strict";function d(a,b){return Object.prototype.hasOwnProperty.call(a,b)}b.exports=function(a,b,c,f){b=b||"&",c=c||"=";var g={};if("string"!=typeof a||0===a.length)return g;var h=/\+/g;a=a.split(b);var i=1e3;f&&"number"==typeof f.maxKeys&&(i=f.maxKeys);var j=a.length;i>0&&j>i&&(j=i);for(var k=0;k<j;++k){var l,m,n,o,p=a[k].replace(h,"%20"),q=p.indexOf(c);q>=0?(l=p.substr(0,q),m=p.substr(q+1)):(l=p,m=""),n=decodeURIComponent(l),o=decodeURIComponent(m),d(g,n)?e(g[n])?g[n].push(o):g[n]=[g[n],o]:g[n]=o}return g};var e=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}},{}],278:[function(a,b,c){"use strict";function d(a,b){if(a.map)return a.map(b);for(var c=[],d=0;d<a.length;d++)c.push(b(a[d],d));return c}var e=function(a){switch(typeof a){case"string":return a;case"boolean":return a?"true":"false";case"number":return isFinite(a)?a:"";default:return""}};b.exports=function(a,b,c,h){return b=b||"&",c=c||"=",null===a&&(a=void 0),"object"==typeof a?d(g(a),function(g){var h=encodeURIComponent(e(g))+c;return f(a[g])?d(a[g],function(a){return h+encodeURIComponent(e(a))}).join(b):h+encodeURIComponent(e(a[g]))}).join(b):h?encodeURIComponent(e(h))+c+encodeURIComponent(e(a)):""};var f=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},g=Object.keys||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}},{}],279:[function(a,b,c){"use strict";c.decode=c.parse=a("./decode"),c.encode=c.stringify=a("./encode")},{"./decode":277,"./encode":278}],280:[function(a,b,c){b.exports=a("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":281}],281:[function(a,b,c){"use strict";function d(a){if(!(this instanceof d))return new d(a);j.call(this,a),k.call(this,a),a&&!1===a.readable&&(this.readable=!1),a&&!1===a.writable&&(this.writable=!1),this.allowHalfOpen=!0,a&&!1===a.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",e)}function e(){this.allowHalfOpen||this._writableState.ended||g(f,this)}function f(a){a.end()}var g=a("process-nextick-args"),h=Object.keys||function(a){var b=[];for(var c in a)b.push(c);return b};b.exports=d;var i=a("core-util-is");i.inherits=a("inherits");var j=a("./_stream_readable"),k=a("./_stream_writable");i.inherits(d,j);for(var l=h(k.prototype),m=0;m<l.length;m++){var n=l[m];d.prototype[n]||(d.prototype[n]=k.prototype[n])}Object.defineProperty(d.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(a){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=a,this._writableState.destroyed=a)}}),d.prototype._destroy=function(a,b){this.push(null),this.end(),g(b,a)}},{"./_stream_readable":283,"./_stream_writable":285,"core-util-is":268,inherits:271,"process-nextick-args":274}],282:[function(a,b,c){"use strict";function d(a){if(!(this instanceof d))return new d(a);e.call(this,a)}b.exports=d;var e=a("./_stream_transform"),f=a("core-util-is");f.inherits=a("inherits"),f.inherits(d,e),d.prototype._transform=function(a,b,c){c(null,a)}},{"./_stream_transform":284,"core-util-is":268,inherits:271}],283:[function(a,b,c){(function(c,d){"use strict";function e(a){return L.from(a)}function f(a){return L.isBuffer(a)||a instanceof M}function g(a,b,c){if("function"==typeof a.prependListener)return a.prependListener(b,c);a._events&&a._events[b]?I(a._events[b])?a._events[b].unshift(c):a._events[b]=[c,a._events[b]]:a.on(b,c)}function h(b,c){H=H||a("./_stream_duplex"),b=b||{},this.objectMode=!!b.objectMode,c instanceof H&&(this.objectMode=this.objectMode||!!b.readableObjectMode);var d=b.highWaterMark,e=this.objectMode?16:16384;this.highWaterMark=d||0===d?d:e,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new R,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=b.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,b.encoding&&(Q||(Q=a("string_decoder/").StringDecoder),this.decoder=new Q(b.encoding),this.encoding=b.encoding)}function i(b){if(H=H||a("./_stream_duplex"),!(this instanceof i))return new i(b);this._readableState=new h(b,this),this.readable=!0,b&&("function"==typeof b.read&&(this._read=b.read),"function"==typeof b.destroy&&(this._destroy=b.destroy)),K.call(this)}function j(a,b,c,d,f){var g=a._readableState;if(null===b)g.reading=!1,p(a,g);else{var h;f||(h=l(g,b)),h?a.emit("error",h):g.objectMode||b&&b.length>0?("string"==typeof b||g.objectMode||Object.getPrototypeOf(b)===L.prototype||(b=e(b)),d?g.endEmitted?a.emit("error",new Error("stream.unshift() after end event")):k(a,g,b,!0):g.ended?a.emit("error",new Error("stream.push() after EOF")):(g.reading=!1,g.decoder&&!c?(b=g.decoder.write(b),g.objectMode||0!==b.length?k(a,g,b,!1):s(a,g)):k(a,g,b,!1))):d||(g.reading=!1)}return m(g)}function k(a,b,c,d){b.flowing&&0===b.length&&!b.sync?(a.emit("data",c),a.read(0)):(b.length+=b.objectMode?1:c.length,d?b.buffer.unshift(c):b.buffer.push(c),b.needReadable&&q(a)),s(a,b)}function l(a,b){var c;return f(b)||"string"==typeof b||void 0===b||a.objectMode||(c=new TypeError("Invalid non-string/buffer chunk")),c}function m(a){return!a.ended&&(a.needReadable||a.length<a.highWaterMark||0===a.length)}function n(a){return a>=U?a=U:(a--,a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a++),a}function o(a,b){return a<=0||0===b.length&&b.ended?0:b.objectMode?1:a!==a?b.flowing&&b.length?b.buffer.head.data.length:b.length:(a>b.highWaterMark&&(b.highWaterMark=n(a)),a<=b.length?a:b.ended?b.length:(b.needReadable=!0,0))}function p(a,b){if(!b.ended){if(b.decoder){var c=b.decoder.end();c&&c.length&&(b.buffer.push(c),b.length+=b.objectMode?1:c.length)}b.ended=!0,q(a)}}function q(a){var b=a._readableState;b.needReadable=!1,b.emittedReadable||(P("emitReadable",b.flowing),b.emittedReadable=!0,b.sync?G(r,a):r(a))}function r(a){P("emit readable"),a.emit("readable"),y(a)}function s(a,b){b.readingMore||(b.readingMore=!0,G(t,a,b))}function t(a,b){for(var c=b.length;!b.reading&&!b.flowing&&!b.ended&&b.length<b.highWaterMark&&(P("maybeReadMore read 0"),a.read(0),c!==b.length);)c=b.length;b.readingMore=!1}function u(a){return function(){var b=a._readableState;P("pipeOnDrain",b.awaitDrain),b.awaitDrain&&b.awaitDrain--,0===b.awaitDrain&&J(a,"data")&&(b.flowing=!0,y(a))}}function v(a){P("readable nexttick read 0"),a.read(0)}function w(a,b){b.resumeScheduled||(b.resumeScheduled=!0,G(x,a,b))}function x(a,b){b.reading||(P("resume read 0"),a.read(0)),b.resumeScheduled=!1,b.awaitDrain=0,a.emit("resume"),y(a),b.flowing&&!b.reading&&a.read(0)}function y(a){var b=a._readableState;for(P("flow",b.flowing);b.flowing&&null!==a.read(););}function z(a,b){if(0===b.length)return null;var c;return b.objectMode?c=b.buffer.shift():!a||a>=b.length?(c=b.decoder?b.buffer.join(""):1===b.buffer.length?b.buffer.head.data:b.buffer.concat(b.length),b.buffer.clear()):c=A(a,b.buffer,b.decoder),c}function A(a,b,c){var d;return a<b.head.data.length?(d=b.head.data.slice(0,a),b.head.data=b.head.data.slice(a)):d=a===b.head.data.length?b.shift():c?B(a,b):C(a,b),d}function B(a,b){var c=b.head,d=1,e=c.data;for(a-=e.length;c=c.next;){var f=c.data,g=a>f.length?f.length:a;if(g===f.length?e+=f:e+=f.slice(0,a),0===(a-=g)){g===f.length?(++d,c.next?b.head=c.next:b.head=b.tail=null):(b.head=c,c.data=f.slice(g));break}++d}return b.length-=d,e}function C(a,b){var c=L.allocUnsafe(a),d=b.head,e=1;for(d.data.copy(c),a-=d.data.length;d=d.next;){var f=d.data,g=a>f.length?f.length:a;if(f.copy(c,c.length-a,0,g),0===(a-=g)){g===f.length?(++e,d.next?b.head=d.next:b.head=b.tail=null):(b.head=d,d.data=f.slice(g));break}++e}return b.length-=e,c}function D(a){var b=a._readableState;if(b.length>0)throw new Error('"endReadable()" called on non-empty stream');b.endEmitted||(b.ended=!0,G(E,b,a))}function E(a,b){a.endEmitted||0!==a.length||(a.endEmitted=!0,b.readable=!1,b.emit("end"))}function F(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1}var G=a("process-nextick-args");b.exports=i;var H,I=a("isarray");i.ReadableState=h;var J=(a("events").EventEmitter,function(a,b){return a.listeners(b).length}),K=a("./internal/streams/stream"),L=a("safe-buffer").Buffer,M=d.Uint8Array||function(){},N=a("core-util-is");N.inherits=a("inherits");var O=a("util"),P=void 0;P=O&&O.debuglog?O.debuglog("stream"):function(){};var Q,R=a("./internal/streams/BufferList"),S=a("./internal/streams/destroy");N.inherits(i,K);var T=["error","close","destroy","pause","resume"];Object.defineProperty(i.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(a){this._readableState&&(this._readableState.destroyed=a)}}),i.prototype.destroy=S.destroy,i.prototype._undestroy=S.undestroy,i.prototype._destroy=function(a,b){this.push(null),b(a)},i.prototype.push=function(a,b){var c,d=this._readableState;return d.objectMode?c=!0:"string"==typeof a&&(b=b||d.defaultEncoding,b!==d.encoding&&(a=L.from(a,b),b=""),c=!0),j(this,a,b,!1,c)},i.prototype.unshift=function(a){return j(this,a,null,!0,!1)},i.prototype.isPaused=function(){return!1===this._readableState.flowing},i.prototype.setEncoding=function(b){return Q||(Q=a("string_decoder/").StringDecoder),this._readableState.decoder=new Q(b),this._readableState.encoding=b,this};var U=8388608;i.prototype.read=function(a){P("read",a),a=parseInt(a,10);var b=this._readableState,c=a;if(0!==a&&(b.emittedReadable=!1),0===a&&b.needReadable&&(b.length>=b.highWaterMark||b.ended))return P("read: emitReadable",b.length,b.ended),0===b.length&&b.ended?D(this):q(this),null;if(0===(a=o(a,b))&&b.ended)return 0===b.length&&D(this),null;var d=b.needReadable;P("need readable",d),(0===b.length||b.length-a<b.highWaterMark)&&(d=!0,P("length less than watermark",d)),b.ended||b.reading?(d=!1,P("reading or ended",d)):d&&(P("do read"),b.reading=!0,b.sync=!0,0===b.length&&(b.needReadable=!0),this._read(b.highWaterMark),b.sync=!1,b.reading||(a=o(c,b)));var e;return e=a>0?z(a,b):null,null===e?(b.needReadable=!0,a=0):b.length-=a,0===b.length&&(b.ended||(b.needReadable=!0),c!==a&&b.ended&&D(this)),null!==e&&this.emit("data",e),e},i.prototype._read=function(a){this.emit("error",new Error("_read() is not implemented"))},i.prototype.pipe=function(a,b){function d(a,b){P("onunpipe"),a===m&&b&&!1===b.hasUnpiped&&(b.hasUnpiped=!0,f())}function e(){P("onend"),a.end()}function f(){P("cleanup"),a.removeListener("close",j),a.removeListener("finish",k),a.removeListener("drain",q),a.removeListener("error",i),a.removeListener("unpipe",d),m.removeListener("end",e),m.removeListener("end",l),m.removeListener("data",h),r=!0,!n.awaitDrain||a._writableState&&!a._writableState.needDrain||q()}function h(b){P("ondata"),s=!1,!1!==a.write(b)||s||((1===n.pipesCount&&n.pipes===a||n.pipesCount>1&&-1!==F(n.pipes,a))&&!r&&(P("false write response, pause",m._readableState.awaitDrain),m._readableState.awaitDrain++,s=!0),m.pause())}function i(b){P("onerror",b),l(),a.removeListener("error",i),0===J(a,"error")&&a.emit("error",b)}function j(){a.removeListener("finish",k),l()}function k(){P("onfinish"),a.removeListener("close",j),l()}function l(){P("unpipe"),m.unpipe(a)}var m=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=a;break;case 1:n.pipes=[n.pipes,a];break;default:n.pipes.push(a)}n.pipesCount+=1,P("pipe count=%d opts=%j",n.pipesCount,b);var o=(!b||!1!==b.end)&&a!==c.stdout&&a!==c.stderr,p=o?e:l;n.endEmitted?G(p):m.once("end",p),a.on("unpipe",d);var q=u(m);a.on("drain",q);var r=!1,s=!1;return m.on("data",h),g(a,"error",i),a.once("close",j),a.once("finish",k),a.emit("pipe",m),n.flowing||(P("pipe resume"),m.resume()),a},i.prototype.unpipe=function(a){var b=this._readableState,c={hasUnpiped:!1};if(0===b.pipesCount)return this;if(1===b.pipesCount)return a&&a!==b.pipes?this:(a||(a=b.pipes),b.pipes=null,b.pipesCount=0,b.flowing=!1,a&&a.emit("unpipe",this,c),this);if(!a){var d=b.pipes,e=b.pipesCount;b.pipes=null,b.pipesCount=0,b.flowing=!1;for(var f=0;f<e;f++)d[f].emit("unpipe",this,c);return this}var g=F(b.pipes,a);return-1===g?this:(b.pipes.splice(g,1),b.pipesCount-=1,1===b.pipesCount&&(b.pipes=b.pipes[0]),a.emit("unpipe",this,c),this)},i.prototype.on=function(a,b){var c=K.prototype.on.call(this,a,b);if("data"===a)!1!==this._readableState.flowing&&this.resume();else if("readable"===a){var d=this._readableState;d.endEmitted||d.readableListening||(d.readableListening=d.needReadable=!0,d.emittedReadable=!1,d.reading?d.length&&q(this):G(v,this))}return c},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){var a=this._readableState;return a.flowing||(P("resume"),a.flowing=!0,w(this,a)),this},i.prototype.pause=function(){return P("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(P("pause"),this._readableState.flowing=!1,this.emit("pause")),this},i.prototype.wrap=function(a){var b=this._readableState,c=!1,d=this;a.on("end",function(){if(P("wrapped end"),b.decoder&&!b.ended){var a=b.decoder.end();a&&a.length&&d.push(a)}d.push(null)}),a.on("data",function(e){if(P("wrapped data"),b.decoder&&(e=b.decoder.write(e)),(!b.objectMode||null!==e&&void 0!==e)&&(b.objectMode||e&&e.length)){d.push(e)||(c=!0,a.pause())}});for(var e in a)void 0===this[e]&&"function"==typeof a[e]&&(this[e]=function(b){return function(){return a[b].apply(a,arguments)}}(e));for(var f=0;f<T.length;f++)a.on(T[f],d.emit.bind(d,T[f]));return d._read=function(b){P("wrapped _read",b),c&&(c=!1,a.resume())},d},i._fromList=z}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":281,"./internal/streams/BufferList":286,"./internal/streams/destroy":287,"./internal/streams/stream":288,_process:275,"core-util-is":268,events:269,inherits:271,isarray:273,"process-nextick-args":274,"safe-buffer":293,"string_decoder/":299,util:265}],284:[function(a,b,c){"use strict";function d(a){this.afterTransform=function(b,c){return e(a,b,c)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function e(a,b,c){var d=a._transformState;d.transforming=!1;var e=d.writecb;if(!e)return a.emit("error",new Error("write callback called multiple times"));d.writechunk=null,d.writecb=null,null!==c&&void 0!==c&&a.push(c),e(b);var f=a._readableState;f.reading=!1,(f.needReadable||f.length<f.highWaterMark)&&a._read(f.highWaterMark)}function f(a){if(!(this instanceof f))return new f(a);h.call(this,a),this._transformState=new d(this);var b=this;this._readableState.needReadable=!0,this._readableState.sync=!1,a&&("function"==typeof a.transform&&(this._transform=a.transform),"function"==typeof a.flush&&(this._flush=a.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(a,c){g(b,a,c)}):g(b)})}function g(a,b,c){if(b)return a.emit("error",b);null!==c&&void 0!==c&&a.push(c)
;var d=a._writableState,e=a._transformState;if(d.length)throw new Error("Calling transform done when ws.length != 0");if(e.transforming)throw new Error("Calling transform done when still transforming");return a.push(null)}b.exports=f;var h=a("./_stream_duplex"),i=a("core-util-is");i.inherits=a("inherits"),i.inherits(f,h),f.prototype.push=function(a,b){return this._transformState.needTransform=!1,h.prototype.push.call(this,a,b)},f.prototype._transform=function(a,b,c){throw new Error("_transform() is not implemented")},f.prototype._write=function(a,b,c){var d=this._transformState;if(d.writecb=c,d.writechunk=a,d.writeencoding=b,!d.transforming){var e=this._readableState;(d.needTransform||e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark)}},f.prototype._read=function(a){var b=this._transformState;null!==b.writechunk&&b.writecb&&!b.transforming?(b.transforming=!0,this._transform(b.writechunk,b.writeencoding,b.afterTransform)):b.needTransform=!0},f.prototype._destroy=function(a,b){var c=this;h.prototype._destroy.call(this,a,function(a){b(a),c.emit("close")})}},{"./_stream_duplex":281,"core-util-is":268,inherits:271}],285:[function(a,b,c){(function(c,d){"use strict";function e(a){var b=this;this.next=null,this.entry=null,this.finish=function(){A(b,a)}}function f(a){return H.from(a)}function g(a){return H.isBuffer(a)||a instanceof I}function h(){}function i(b,c){C=C||a("./_stream_duplex"),b=b||{},this.objectMode=!!b.objectMode,c instanceof C&&(this.objectMode=this.objectMode||!!b.writableObjectMode);var d=b.highWaterMark,f=this.objectMode?16:16384;this.highWaterMark=d||0===d?d:f,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var g=!1===b.decodeStrings;this.decodeStrings=!g,this.defaultEncoding=b.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){r(c,a)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}function j(b){if(C=C||a("./_stream_duplex"),!(K.call(j,this)||this instanceof C))return new j(b);this._writableState=new i(b,this),this.writable=!0,b&&("function"==typeof b.write&&(this._write=b.write),"function"==typeof b.writev&&(this._writev=b.writev),"function"==typeof b.destroy&&(this._destroy=b.destroy),"function"==typeof b.final&&(this._final=b.final)),G.call(this)}function k(a,b){var c=new Error("write after end");a.emit("error",c),B(b,c)}function l(a,b,c,d){var e=!0,f=!1;return null===c?f=new TypeError("May not write null values to stream"):"string"==typeof c||void 0===c||b.objectMode||(f=new TypeError("Invalid non-string/buffer chunk")),f&&(a.emit("error",f),B(d,f),e=!1),e}function m(a,b,c){return a.objectMode||!1===a.decodeStrings||"string"!=typeof b||(b=H.from(b,c)),b}function n(a,b,c,d,e,f){if(!c){var g=m(b,d,e);d!==g&&(c=!0,e="buffer",d=g)}var h=b.objectMode?1:d.length;b.length+=h;var i=b.length<b.highWaterMark;if(i||(b.needDrain=!0),b.writing||b.corked){var j=b.lastBufferedRequest;b.lastBufferedRequest={chunk:d,encoding:e,isBuf:c,callback:f,next:null},j?j.next=b.lastBufferedRequest:b.bufferedRequest=b.lastBufferedRequest,b.bufferedRequestCount+=1}else o(a,b,!1,h,d,e,f);return i}function o(a,b,c,d,e,f,g){b.writelen=d,b.writecb=g,b.writing=!0,b.sync=!0,c?a._writev(e,b.onwrite):a._write(e,f,b.onwrite),b.sync=!1}function p(a,b,c,d,e){--b.pendingcb,c?(B(e,d),B(y,a,b),a._writableState.errorEmitted=!0,a.emit("error",d)):(e(d),a._writableState.errorEmitted=!0,a.emit("error",d),y(a,b))}function q(a){a.writing=!1,a.writecb=null,a.length-=a.writelen,a.writelen=0}function r(a,b){var c=a._writableState,d=c.sync,e=c.writecb;if(q(c),b)p(a,c,d,b,e);else{var f=v(c);f||c.corked||c.bufferProcessing||!c.bufferedRequest||u(a,c),d?D(s,a,c,f,e):s(a,c,f,e)}}function s(a,b,c,d){c||t(a,b),b.pendingcb--,d(),y(a,b)}function t(a,b){0===b.length&&b.needDrain&&(b.needDrain=!1,a.emit("drain"))}function u(a,b){b.bufferProcessing=!0;var c=b.bufferedRequest;if(a._writev&&c&&c.next){var d=b.bufferedRequestCount,f=new Array(d),g=b.corkedRequestsFree;g.entry=c;for(var h=0,i=!0;c;)f[h]=c,c.isBuf||(i=!1),c=c.next,h+=1;f.allBuffers=i,o(a,b,!0,b.length,f,"",g.finish),b.pendingcb++,b.lastBufferedRequest=null,g.next?(b.corkedRequestsFree=g.next,g.next=null):b.corkedRequestsFree=new e(b)}else{for(;c;){var j=c.chunk,k=c.encoding,l=c.callback;if(o(a,b,!1,b.objectMode?1:j.length,j,k,l),c=c.next,b.writing)break}null===c&&(b.lastBufferedRequest=null)}b.bufferedRequestCount=0,b.bufferedRequest=c,b.bufferProcessing=!1}function v(a){return a.ending&&0===a.length&&null===a.bufferedRequest&&!a.finished&&!a.writing}function w(a,b){a._final(function(c){b.pendingcb--,c&&a.emit("error",c),b.prefinished=!0,a.emit("prefinish"),y(a,b)})}function x(a,b){b.prefinished||b.finalCalled||("function"==typeof a._final?(b.pendingcb++,b.finalCalled=!0,B(w,a,b)):(b.prefinished=!0,a.emit("prefinish")))}function y(a,b){var c=v(b);return c&&(x(a,b),0===b.pendingcb&&(b.finished=!0,a.emit("finish"))),c}function z(a,b,c){b.ending=!0,y(a,b),c&&(b.finished?B(c):a.once("finish",c)),b.ended=!0,a.writable=!1}function A(a,b,c){var d=a.entry;for(a.entry=null;d;){var e=d.callback;b.pendingcb--,e(c),d=d.next}b.corkedRequestsFree?b.corkedRequestsFree.next=a:b.corkedRequestsFree=a}var B=a("process-nextick-args");b.exports=j;var C,D=!c.browser&&["v0.10","v0.9."].indexOf(c.version.slice(0,5))>-1?setImmediate:B;j.WritableState=i;var E=a("core-util-is");E.inherits=a("inherits");var F={deprecate:a("util-deprecate")},G=a("./internal/streams/stream"),H=a("safe-buffer").Buffer,I=d.Uint8Array||function(){},J=a("./internal/streams/destroy");E.inherits(j,G),i.prototype.getBuffer=function(){for(var a=this.bufferedRequest,b=[];a;)b.push(a),a=a.next;return b},function(){try{Object.defineProperty(i.prototype,"buffer",{get:F.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(a){}}();var K;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(K=Function.prototype[Symbol.hasInstance],Object.defineProperty(j,Symbol.hasInstance,{value:function(a){return!!K.call(this,a)||a&&a._writableState instanceof i}})):K=function(a){return a instanceof this},j.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},j.prototype.write=function(a,b,c){var d=this._writableState,e=!1,i=g(a)&&!d.objectMode;return i&&!H.isBuffer(a)&&(a=f(a)),"function"==typeof b&&(c=b,b=null),i?b="buffer":b||(b=d.defaultEncoding),"function"!=typeof c&&(c=h),d.ended?k(this,c):(i||l(this,d,a,c))&&(d.pendingcb++,e=n(this,d,i,a,b,c)),e},j.prototype.cork=function(){this._writableState.corked++},j.prototype.uncork=function(){var a=this._writableState;a.corked&&(a.corked--,a.writing||a.corked||a.finished||a.bufferProcessing||!a.bufferedRequest||u(this,a))},j.prototype.setDefaultEncoding=function(a){if("string"==typeof a&&(a=a.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((a+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+a);return this._writableState.defaultEncoding=a,this},j.prototype._write=function(a,b,c){c(new Error("_write() is not implemented"))},j.prototype._writev=null,j.prototype.end=function(a,b,c){var d=this._writableState;"function"==typeof a?(c=a,a=null,b=null):"function"==typeof b&&(c=b,b=null),null!==a&&void 0!==a&&this.write(a,b),d.corked&&(d.corked=1,this.uncork()),d.ending||d.finished||z(this,d,c)},Object.defineProperty(j.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(a){this._writableState&&(this._writableState.destroyed=a)}}),j.prototype.destroy=J.destroy,j.prototype._undestroy=J.undestroy,j.prototype._destroy=function(a,b){this.end(),b(a)}}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":281,"./internal/streams/destroy":287,"./internal/streams/stream":288,_process:275,"core-util-is":268,inherits:271,"process-nextick-args":274,"safe-buffer":293,"util-deprecate":303}],286:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b,c){a.copy(b,c)}var f=a("safe-buffer").Buffer;b.exports=function(){function a(){d(this,a),this.head=null,this.tail=null,this.length=0}return a.prototype.push=function(a){var b={data:a,next:null};this.length>0?this.tail.next=b:this.head=b,this.tail=b,++this.length},a.prototype.unshift=function(a){var b={data:a,next:this.head};0===this.length&&(this.tail=b),this.head=b,++this.length},a.prototype.shift=function(){if(0!==this.length){var a=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,a}},a.prototype.clear=function(){this.head=this.tail=null,this.length=0},a.prototype.join=function(a){if(0===this.length)return"";for(var b=this.head,c=""+b.data;b=b.next;)c+=a+b.data;return c},a.prototype.concat=function(a){if(0===this.length)return f.alloc(0);if(1===this.length)return this.head.data;for(var b=f.allocUnsafe(a>>>0),c=this.head,d=0;c;)e(c.data,b,d),d+=c.data.length,c=c.next;return b},a}()},{"safe-buffer":293}],287:[function(a,b,c){"use strict";function d(a,b){var c=this,d=this._readableState&&this._readableState.destroyed,e=this._writableState&&this._writableState.destroyed;if(d||e)return void(b?b(a):!a||this._writableState&&this._writableState.errorEmitted||g(f,this,a));this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(a||null,function(a){!b&&a?(g(f,c,a),c._writableState&&(c._writableState.errorEmitted=!0)):b&&b(a)})}function e(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function f(a,b){a.emit("error",b)}var g=a("process-nextick-args");b.exports={destroy:d,undestroy:e}},{"process-nextick-args":274}],288:[function(a,b,c){b.exports=a("events").EventEmitter},{events:269}],289:[function(a,b,c){b.exports=a("./readable").PassThrough},{"./readable":290}],290:[function(a,b,c){c=b.exports=a("./lib/_stream_readable.js"),c.Stream=c,c.Readable=c,c.Writable=a("./lib/_stream_writable.js"),c.Duplex=a("./lib/_stream_duplex.js"),c.Transform=a("./lib/_stream_transform.js"),c.PassThrough=a("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":281,"./lib/_stream_passthrough.js":282,"./lib/_stream_readable.js":283,"./lib/_stream_transform.js":284,"./lib/_stream_writable.js":285}],291:[function(a,b,c){b.exports=a("./readable").Transform},{"./readable":290}],292:[function(a,b,c){b.exports=a("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":285}],293:[function(a,b,c){function d(a,b){for(var c in a)b[c]=a[c]}function e(a,b,c){return g(a,b,c)}var f=a("buffer"),g=f.Buffer;g.from&&g.alloc&&g.allocUnsafe&&g.allocUnsafeSlow?b.exports=f:(d(f,c),c.Buffer=e),d(g,e),e.from=function(a,b,c){if("number"==typeof a)throw new TypeError("Argument must not be a number");return g(a,b,c)},e.alloc=function(a,b,c){if("number"!=typeof a)throw new TypeError("Argument must be a number");var d=g(a);return void 0!==b?"string"==typeof c?d.fill(b,c):d.fill(b):d.fill(0),d},e.allocUnsafe=function(a){if("number"!=typeof a)throw new TypeError("Argument must be a number");return g(a)},e.allocUnsafeSlow=function(a){if("number"!=typeof a)throw new TypeError("Argument must be a number");return f.SlowBuffer(a)}},{buffer:266}],294:[function(a,b,c){function d(){e.call(this)}b.exports=d;var e=a("events").EventEmitter;a("inherits")(d,e),d.Readable=a("readable-stream/readable.js"),d.Writable=a("readable-stream/writable.js"),d.Duplex=a("readable-stream/duplex.js"),d.Transform=a("readable-stream/transform.js"),d.PassThrough=a("readable-stream/passthrough.js"),d.Stream=d,d.prototype.pipe=function(a,b){function c(b){a.writable&&!1===a.write(b)&&j.pause&&j.pause()}function d(){j.readable&&j.resume&&j.resume()}function f(){k||(k=!0,a.end())}function g(){k||(k=!0,"function"==typeof a.destroy&&a.destroy())}function h(a){if(i(),0===e.listenerCount(this,"error"))throw a}function i(){j.removeListener("data",c),a.removeListener("drain",d),j.removeListener("end",f),j.removeListener("close",g),j.removeListener("error",h),a.removeListener("error",h),j.removeListener("end",i),j.removeListener("close",i),a.removeListener("close",i)}var j=this;j.on("data",c),a.on("drain",d),a._isStdio||b&&!1===b.end||(j.on("end",f),j.on("close",g));var k=!1;return j.on("error",h),a.on("error",h),j.on("end",i),j.on("close",i),a.on("close",i),a.emit("pipe",j),a}},{events:269,inherits:271,"readable-stream/duplex.js":280,"readable-stream/passthrough.js":289,"readable-stream/readable.js":290,"readable-stream/transform.js":291,"readable-stream/writable.js":292}],295:[function(a,b,c){(function(b){var d=a("./lib/request"),e=a("xtend"),f=a("builtin-status-codes"),g=a("url"),h=c;h.request=function(a,c){a="string"==typeof a?g.parse(a):e(a);var f=-1===b.location.protocol.search(/^https?:$/)?"http:":"",h=a.protocol||f,i=a.hostname||a.host,j=a.port,k=a.path||"/";i&&-1!==i.indexOf(":")&&(i="["+i+"]"),a.url=(i?h+"//"+i:"")+(j?":"+j:"")+k,a.method=(a.method||"GET").toUpperCase(),a.headers=a.headers||{};var l=new d(a);return c&&l.on("response",c),l},h.get=function(a,b){var c=h.request(a,b);return c.end(),c},h.Agent=function(){},h.Agent.defaultMaxSockets=4,h.STATUS_CODES=f,h.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/request":297,"builtin-status-codes":267,url:301,xtend:304}],296:[function(a,b,c){(function(a){function b(){if(void 0!==f)return f;if(a.XMLHttpRequest){f=new a.XMLHttpRequest;try{f.open("GET",a.XDomainRequest?"/":"https://example.com")}catch(a){f=null}}else f=null;return f}function d(a){var c=b();if(!c)return!1;try{return c.responseType=a,c.responseType===a}catch(a){}return!1}function e(a){return"function"==typeof a}c.fetch=e(a.fetch)&&e(a.ReadableStream),c.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),c.blobConstructor=!0}catch(a){}var f,g=void 0!==a.ArrayBuffer,h=g&&e(a.ArrayBuffer.prototype.slice);c.arraybuffer=c.fetch||g&&d("arraybuffer"),c.msstream=!c.fetch&&h&&d("ms-stream"),c.mozchunkedarraybuffer=!c.fetch&&g&&d("moz-chunked-arraybuffer"),c.overrideMimeType=c.fetch||!!b()&&e(b().overrideMimeType),c.vbArray=e(a.VBArray),f=null}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],297:[function(a,b,c){(function(c,d,e){function f(a,b){return h.fetch&&b?"fetch":h.mozchunkedarraybuffer?"moz-chunked-arraybuffer":h.msstream?"ms-stream":h.arraybuffer&&a?"arraybuffer":h.vbArray&&a?"text:vbarray":"text"}function g(a){try{var b=a.status;return null!==b&&0!==b}catch(a){return!1}}var h=a("./capability"),i=a("inherits"),j=a("./response"),k=a("readable-stream"),l=a("to-arraybuffer"),m=j.IncomingMessage,n=j.readyStates,o=b.exports=function(a){var b=this;k.Writable.call(b),b._opts=a,b._body=[],b._headers={},a.auth&&b.setHeader("Authorization","Basic "+new e(a.auth).toString("base64")),Object.keys(a.headers).forEach(function(c){b.setHeader(c,a.headers[c])});var c,d=!0;if("disable-fetch"===a.mode||"timeout"in a)d=!1,c=!0;else if("prefer-streaming"===a.mode)c=!1;else if("allow-wrong-content-type"===a.mode)c=!h.overrideMimeType;else{if(a.mode&&"default"!==a.mode&&"prefer-fast"!==a.mode)throw new Error("Invalid value for opts.mode");c=!0}b._mode=f(c,d),b.on("finish",function(){b._onFinish()})};i(o,k.Writable),o.prototype.setHeader=function(a,b){var c=this,d=a.toLowerCase();-1===p.indexOf(d)&&(c._headers[d]={name:a,value:b})},o.prototype.getHeader=function(a){var b=this._headers[a.toLowerCase()];return b?b.value:null},o.prototype.removeHeader=function(a){delete this._headers[a.toLowerCase()]},o.prototype._onFinish=function(){var a=this;if(!a._destroyed){var b=a._opts,f=a._headers,g=null;"GET"!==b.method&&"HEAD"!==b.method&&(g=h.blobConstructor?new d.Blob(a._body.map(function(a){return l(a)}),{type:(f["content-type"]||{}).value||""}):e.concat(a._body).toString());var i=[];if(Object.keys(f).forEach(function(a){var b=f[a].name,c=f[a].value;Array.isArray(c)?c.forEach(function(a){i.push([b,a])}):i.push([b,c])}),"fetch"===a._mode)d.fetch(a._opts.url,{method:a._opts.method,headers:i,body:g||void 0,mode:"cors",credentials:b.withCredentials?"include":"same-origin"}).then(function(b){a._fetchResponse=b,a._connect()},function(b){a.emit("error",b)});else{var j=a._xhr=new d.XMLHttpRequest;try{j.open(a._opts.method,a._opts.url,!0)}catch(b){return void c.nextTick(function(){a.emit("error",b)})}"responseType"in j&&(j.responseType=a._mode.split(":")[0]),"withCredentials"in j&&(j.withCredentials=!!b.withCredentials),"text"===a._mode&&"overrideMimeType"in j&&j.overrideMimeType("text/plain; charset=x-user-defined"),"timeout"in b&&(j.timeout=b.timeout,j.ontimeout=function(){a.emit("timeout")}),i.forEach(function(a){j.setRequestHeader(a[0],a[1])}),a._response=null,j.onreadystatechange=function(){switch(j.readyState){case n.LOADING:case n.DONE:a._onXHRProgress()}},"moz-chunked-arraybuffer"===a._mode&&(j.onprogress=function(){a._onXHRProgress()}),j.onerror=function(){a._destroyed||a.emit("error",new Error("XHR error"))};try{j.send(g)}catch(b){return void c.nextTick(function(){a.emit("error",b)})}}}},o.prototype._onXHRProgress=function(){var a=this;g(a._xhr)&&!a._destroyed&&(a._response||a._connect(),a._response._onXHRProgress())},o.prototype._connect=function(){var a=this;a._destroyed||(a._response=new m(a._xhr,a._fetchResponse,a._mode),a._response.on("error",function(b){a.emit("error",b)}),a.emit("response",a._response))},o.prototype._write=function(a,b,c){this._body.push(a),c()},o.prototype.abort=o.prototype.destroy=function(){var a=this;a._destroyed=!0,a._response&&(a._response._destroyed=!0),a._xhr&&a._xhr.abort()},o.prototype.end=function(a,b,c){var d=this;"function"==typeof a&&(c=a,a=void 0),k.Writable.prototype.end.call(d,a,b,c)},o.prototype.flushHeaders=function(){},o.prototype.setTimeout=function(){},o.prototype.setNoDelay=function(){},o.prototype.setSocketKeepAlive=function(){};var p=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"]}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},a("buffer").Buffer)},{"./capability":296,"./response":298,_process:275,buffer:266,inherits:271,"readable-stream":290,"to-arraybuffer":300}],298:[function(a,b,c){(function(b,d,e){var f=a("./capability"),g=a("inherits"),h=a("readable-stream"),i=c.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},j=c.IncomingMessage=function(a,c,d){function g(){j.read().then(function(a){if(!i._destroyed){if(a.done)return void i.push(null);i.push(new e(a.value)),g()}}).catch(function(a){i.emit("error",a)})}var i=this;if(h.Readable.call(i),i._mode=d,i.headers={},i.rawHeaders=[],i.trailers={},i.rawTrailers=[],i.on("end",function(){b.nextTick(function(){i.emit("close")})}),"fetch"===d){i._fetchResponse=c,i.url=c.url,i.statusCode=c.status,i.statusMessage=c.statusText,c.headers.forEach(function(a,b){i.headers[b.toLowerCase()]=a,i.rawHeaders.push(b,a)});var j=c.body.getReader();g()}else{i._xhr=a,i._pos=0,i.url=a.responseURL,i.statusCode=a.status,i.statusMessage=a.statusText;if(a.getAllResponseHeaders().split(/\r?\n/).forEach(function(a){var b=a.match(/^([^:]+):\s*(.*)/);if(b){var c=b[1].toLowerCase();"set-cookie"===c?(void 0===i.headers[c]&&(i.headers[c]=[]),i.headers[c].push(b[2])):void 0!==i.headers[c]?i.headers[c]+=", "+b[2]:i.headers[c]=b[2],i.rawHeaders.push(b[1],b[2])}}),i._charset="x-user-defined",!f.overrideMimeType){var k=i.rawHeaders["mime-type"];if(k){var l=k.match(/;\s*charset=([^;])(;|$)/);l&&(i._charset=l[1].toLowerCase())}i._charset||(i._charset="utf-8")}}};g(j,h.Readable),j.prototype._read=function(){},j.prototype._onXHRProgress=function(){var a=this,b=a._xhr,c=null;switch(a._mode){case"text:vbarray":if(b.readyState!==i.DONE)break;try{c=new d.VBArray(b.responseBody).toArray()}catch(a){}if(null!==c){a.push(new e(c));break}case"text":try{c=b.responseText}catch(b){a._mode="text:vbarray";break}if(c.length>a._pos){var f=c.substr(a._pos);if("x-user-defined"===a._charset){for(var g=new e(f.length),h=0;h<f.length;h++)g[h]=255&f.charCodeAt(h);a.push(g)}else a.push(f,a._charset);a._pos=c.length}break;case"arraybuffer":if(b.readyState!==i.DONE||!b.response)break;c=b.response,a.push(new e(new Uint8Array(c)));break;case"moz-chunked-arraybuffer":if(c=b.response,b.readyState!==i.LOADING||!c)break;a.push(new e(new Uint8Array(c)));break;case"ms-stream":if(c=b.response,b.readyState!==i.LOADING)break;var j=new d.MSStreamReader;j.onprogress=function(){j.result.byteLength>a._pos&&(a.push(new e(new Uint8Array(j.result.slice(a._pos)))),a._pos=j.result.byteLength)},j.onload=function(){a.push(null)},j.readAsArrayBuffer(c)}a._xhr.readyState===i.DONE&&"ms-stream"!==a._mode&&a.push(null)}}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},a("buffer").Buffer)},{"./capability":296,_process:275,buffer:266,inherits:271,"readable-stream":290}],299:[function(a,b,c){"use strict";function d(a){if(!a)return"utf8";for(var b;;)switch(a){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return a;default:if(b)return;a=(""+a).toLowerCase(),b=!0}}function e(a){var b=d(a);if("string"!=typeof b&&(s.isEncoding===t||!t(a)))throw new Error("Unknown encoding: "+a);return b||a}function f(a){this.encoding=e(a);var b;switch(this.encoding){case"utf16le":this.text=m,this.end=n,b=4;break;case"utf8":this.fillLast=j,b=4;break;case"base64":this.text=o,this.end=p,b=3;break;default:return this.write=q,void(this.end=r)}this.lastNeed=0,this.lastTotal=0,this.lastChar=s.allocUnsafe(b)}function g(a){return a<=127?0:a>>5==6?2:a>>4==14?3:a>>3==30?4:-1}function h(a,b,c){var d=b.length-1;if(d<c)return 0;var e=g(b[d]);return e>=0?(e>0&&(a.lastNeed=e-1),e):--d<c?0:(e=g(b[d]))>=0?(e>0&&(a.lastNeed=e-2),e):--d<c?0:(e=g(b[d]),e>=0?(e>0&&(2===e?e=0:a.lastNeed=e-3),e):0)}function i(a,b,c){if(128!=(192&b[0]))return a.lastNeed=0,"".repeat(c);if(a.lastNeed>1&&b.length>1){if(128!=(192&b[1]))return a.lastNeed=1,"".repeat(c+1);if(a.lastNeed>2&&b.length>2&&128!=(192&b[2]))return a.lastNeed=2,"".repeat(c+2)}}function j(a){var b=this.lastTotal-this.lastNeed,c=i(this,a,b);return void 0!==c?c:this.lastNeed<=a.length?(a.copy(this.lastChar,b,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(a.copy(this.lastChar,b,0,a.length),void(this.lastNeed-=a.length))}function k(a,b){var c=h(this,a,b);if(!this.lastNeed)return a.toString("utf8",b);this.lastTotal=c;var d=a.length-(c-this.lastNeed);return a.copy(this.lastChar,0,d),a.toString("utf8",b,d)}function l(a){var b=a&&a.length?this.write(a):"";return this.lastNeed?b+"".repeat(this.lastTotal-this.lastNeed):b}function m(a,b){if((a.length-b)%2==0){var c=a.toString("utf16le",b);if(c){var d=c.charCodeAt(c.length-1);if(d>=55296&&d<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1],c.slice(0,-1)}return c}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=a[a.length-1],a.toString("utf16le",b,a.length-1)}function n(a){var b=a&&a.length?this.write(a):"";if(this.lastNeed){var c=this.lastTotal-this.lastNeed;return b+this.lastChar.toString("utf16le",0,c)}return b}function o(a,b){var c=(a.length-b)%3;return 0===c?a.toString("base64",b):(this.lastNeed=3-c,this.lastTotal=3,1===c?this.lastChar[0]=a[a.length-1]:(this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1]),a.toString("base64",b,a.length-c))}function p(a){var b=a&&a.length?this.write(a):"";return this.lastNeed?b+this.lastChar.toString("base64",0,3-this.lastNeed):b}function q(a){return a.toString(this.encoding)}function r(a){return a&&a.length?this.write(a):""}var s=a("safe-buffer").Buffer,t=s.isEncoding||function(a){switch((a=""+a)&&a.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};c.StringDecoder=f,f.prototype.write=function(a){if(0===a.length)return"";var b,c;if(this.lastNeed){if(void 0===(b=this.fillLast(a)))return"";c=this.lastNeed,this.lastNeed=0}else c=0;return c<a.length?b?b+this.text(a,c):this.text(a,c):b||""},f.prototype.end=l,f.prototype.text=k,f.prototype.fillLast=function(a){if(this.lastNeed<=a.length)return a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,a.length),this.lastNeed-=a.length}},{"safe-buffer":293}],300:[function(a,b,c){var d=a("buffer").Buffer;b.exports=function(a){if(a instanceof Uint8Array){if(0===a.byteOffset&&a.byteLength===a.buffer.byteLength)return a.buffer;if("function"==typeof a.buffer.slice)return a.buffer.slice(a.byteOffset,a.byteOffset+a.byteLength)}if(d.isBuffer(a)){for(var b=new Uint8Array(a.length),c=a.length,e=0;e<c;e++)b[e]=a[e];return b.buffer}throw new Error("Argument must be a Buffer")}},{buffer:266}],301:[function(a,b,c){"use strict";function d(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function e(a,b,c){if(a&&j.isObject(a)&&a instanceof d)return a;var e=new d;return e.parse(a,b,c),e}function f(a){return j.isString(a)&&(a=e(a)),a instanceof d?a.format():d.prototype.format.call(a)}function g(a,b){return e(a,!1,!0).resolve(b)}function h(a,b){return a?e(a,!1,!0).resolveObject(b):b}var i=a("punycode"),j=a("./util");c.parse=e,c.resolve=g,c.resolveObject=h,c.format=f,c.Url=d;var k=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,m=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,n=["<",">",'"',"`"," ","\r","\n","\t"],o=["{","}","|","\\","^","`"].concat(n),p=["'"].concat(o),q=["%","/","?",";","#"].concat(p),r=["/","?","#"],s=/^[+a-z0-9A-Z_-]{0,63}$/,t=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,u={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},w={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},x=a("querystring");d.prototype.parse=function(a,b,c){if(!j.isString(a))throw new TypeError("Parameter 'url' must be a string, not "+typeof a);var d=a.indexOf("?"),e=-1!==d&&d<a.indexOf("#")?"?":"#",f=a.split(e),g=/\\/g;f[0]=f[0].replace(g,"/"),a=f.join(e);var h=a;if(h=h.trim(),!c&&1===a.split("#").length){var l=m.exec(h);if(l)return this.path=h,this.href=h,this.pathname=l[1],l[2]?(this.search=l[2],this.query=b?x.parse(this.search.substr(1)):this.search.substr(1)):b&&(this.search="",this.query={}),this}var n=k.exec(h);if(n){n=n[0];var o=n.toLowerCase();this.protocol=o,h=h.substr(n.length)}if(c||n||h.match(/^\/\/[^@\/]+@[^@\/]+/)){var y="//"===h.substr(0,2);!y||n&&v[n]||(h=h.substr(2),this.slashes=!0)}if(!v[n]&&(y||n&&!w[n])){for(var z=-1,A=0;A<r.length;A++){var B=h.indexOf(r[A]);-1!==B&&(-1===z||B<z)&&(z=B)}var C,D;D=-1===z?h.lastIndexOf("@"):h.lastIndexOf("@",z),-1!==D&&(C=h.slice(0,D),h=h.slice(D+1),this.auth=decodeURIComponent(C)),z=-1;for(var A=0;A<q.length;A++){var B=h.indexOf(q[A]);-1!==B&&(-1===z||B<z)&&(z=B)}-1===z&&(z=h.length),this.host=h.slice(0,z),h=h.slice(z),this.parseHost(),this.hostname=this.hostname||"";var E="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!E)for(var F=this.hostname.split(/\./),A=0,G=F.length;A<G;A++){var H=F[A];if(H&&!H.match(s)){for(var I="",J=0,K=H.length;J<K;J++)H.charCodeAt(J)>127?I+="x":I+=H[J];if(!I.match(s)){var L=F.slice(0,A),M=F.slice(A+1),N=H.match(t);N&&(L.push(N[1]),M.unshift(N[2])),M.length&&(h="/"+M.join(".")+h),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),E||(this.hostname=i.toASCII(this.hostname));var O=this.port?":"+this.port:"",P=this.hostname||"";this.host=P+O,this.href+=this.host,E&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==h[0]&&(h="/"+h))}if(!u[o])for(var A=0,G=p.length;A<G;A++){var Q=p[A];if(-1!==h.indexOf(Q)){var R=encodeURIComponent(Q);R===Q&&(R=escape(Q)),h=h.split(Q).join(R)}}var S=h.indexOf("#");-1!==S&&(this.hash=h.substr(S),h=h.slice(0,S));var T=h.indexOf("?");if(-1!==T?(this.search=h.substr(T),this.query=h.substr(T+1),b&&(this.query=x.parse(this.query)),h=h.slice(0,T)):b&&(this.search="",this.query={}),h&&(this.pathname=h),w[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var O=this.pathname||"",U=this.search||"";this.path=O+U}return this.href=this.format(),this},d.prototype.format=function(){var a=this.auth||"";a&&(a=encodeURIComponent(a),a=a.replace(/%3A/i,":"),a+="@");var b=this.protocol||"",c=this.pathname||"",d=this.hash||"",e=!1,f="";this.host?e=a+this.host:this.hostname&&(e=a+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(e+=":"+this.port)),this.query&&j.isObject(this.query)&&Object.keys(this.query).length&&(f=x.stringify(this.query));var g=this.search||f&&"?"+f||"";return b&&":"!==b.substr(-1)&&(b+=":"),this.slashes||(!b||w[b])&&!1!==e?(e="//"+(e||""),c&&"/"!==c.charAt(0)&&(c="/"+c)):e||(e=""),d&&"#"!==d.charAt(0)&&(d="#"+d),g&&"?"!==g.charAt(0)&&(g="?"+g),c=c.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),g=g.replace("#","%23"),b+e+c+g+d},d.prototype.resolve=function(a){return this.resolveObject(e(a,!1,!0)).format()},d.prototype.resolveObject=function(a){if(j.isString(a)){var b=new d;b.parse(a,!1,!0),a=b}for(var c=new d,e=Object.keys(this),f=0;f<e.length;f++){var g=e[f];c[g]=this[g]}if(c.hash=a.hash,""===a.href)return c.href=c.format(),c;if(a.slashes&&!a.protocol){for(var h=Object.keys(a),i=0;i<h.length;i++){var k=h[i];"protocol"!==k&&(c[k]=a[k])}return w[c.protocol]&&c.hostname&&!c.pathname&&(c.path=c.pathname="/"),c.href=c.format(),c}if(a.protocol&&a.protocol!==c.protocol){if(!w[a.protocol]){for(var l=Object.keys(a),m=0;m<l.length;m++){var n=l[m];c[n]=a[n]}return c.href=c.format(),c}if(c.protocol=a.protocol,a.host||v[a.protocol])c.pathname=a.pathname;else{for(var o=(a.pathname||"").split("/");o.length&&!(a.host=o.shift()););a.host||(a.host=""),a.hostname||(a.hostname=""),""!==o[0]&&o.unshift(""),o.length<2&&o.unshift(""),c.pathname=o.join("/")}if(c.search=a.search,c.query=a.query,c.host=a.host||"",c.auth=a.auth,c.hostname=a.hostname||a.host,c.port=a.port,c.pathname||c.search){var p=c.pathname||"",q=c.search||"";c.path=p+q}return c.slashes=c.slashes||a.slashes,c.href=c.format(),c}var r=c.pathname&&"/"===c.pathname.charAt(0),s=a.host||a.pathname&&"/"===a.pathname.charAt(0),t=s||r||c.host&&a.pathname,u=t,x=c.pathname&&c.pathname.split("/")||[],o=a.pathname&&a.pathname.split("/")||[],y=c.protocol&&!w[c.protocol];if(y&&(c.hostname="",c.port=null,c.host&&(""===x[0]?x[0]=c.host:x.unshift(c.host)),c.host="",a.protocol&&(a.hostname=null,
a.port=null,a.host&&(""===o[0]?o[0]=a.host:o.unshift(a.host)),a.host=null),t=t&&(""===o[0]||""===x[0])),s)c.host=a.host||""===a.host?a.host:c.host,c.hostname=a.hostname||""===a.hostname?a.hostname:c.hostname,c.search=a.search,c.query=a.query,x=o;else if(o.length)x||(x=[]),x.pop(),x=x.concat(o),c.search=a.search,c.query=a.query;else if(!j.isNullOrUndefined(a.search)){if(y){c.hostname=c.host=x.shift();var z=!!(c.host&&c.host.indexOf("@")>0)&&c.host.split("@");z&&(c.auth=z.shift(),c.host=c.hostname=z.shift())}return c.search=a.search,c.query=a.query,j.isNull(c.pathname)&&j.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.href=c.format(),c}if(!x.length)return c.pathname=null,c.search?c.path="/"+c.search:c.path=null,c.href=c.format(),c;for(var A=x.slice(-1)[0],B=(c.host||a.host||x.length>1)&&("."===A||".."===A)||""===A,C=0,D=x.length;D>=0;D--)A=x[D],"."===A?x.splice(D,1):".."===A?(x.splice(D,1),C++):C&&(x.splice(D,1),C--);if(!t&&!u)for(;C--;C)x.unshift("..");!t||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),B&&"/"!==x.join("/").substr(-1)&&x.push("");var E=""===x[0]||x[0]&&"/"===x[0].charAt(0);if(y){c.hostname=c.host=E?"":x.length?x.shift():"";var z=!!(c.host&&c.host.indexOf("@")>0)&&c.host.split("@");z&&(c.auth=z.shift(),c.host=c.hostname=z.shift())}return t=t||c.host&&x.length,t&&!E&&x.unshift(""),x.length?c.pathname=x.join("/"):(c.pathname=null,c.path=null),j.isNull(c.pathname)&&j.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.auth=a.auth||c.auth,c.slashes=c.slashes||a.slashes,c.href=c.format(),c},d.prototype.parseHost=function(){var a=this.host,b=l.exec(a);b&&(b=b[0],":"!==b&&(this.port=b.substr(1)),a=a.substr(0,a.length-b.length)),a&&(this.hostname=a)}},{"./util":302,punycode:276,querystring:279}],302:[function(a,b,c){"use strict";b.exports={isString:function(a){return"string"==typeof a},isObject:function(a){return"object"==typeof a&&null!==a},isNull:function(a){return null===a},isNullOrUndefined:function(a){return null==a}}},{}],303:[function(a,b,c){(function(a){function c(a,b){function c(){if(!e){if(d("throwDeprecation"))throw new Error(b);d("traceDeprecation")?console.trace(b):console.warn(b),e=!0}return a.apply(this,arguments)}if(d("noDeprecation"))return a;var e=!1;return c}function d(b){try{if(!a.localStorage)return!1}catch(a){return!1}var c=a.localStorage[b];return null!=c&&"true"===String(c).toLowerCase()}b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],304:[function(a,b,c){function d(){for(var a={},b=0;b<arguments.length;b++){var c=arguments[b];for(var d in c)e.call(c,d)&&(a[d]=c[d])}return a}b.exports=d;var e=Object.prototype.hasOwnProperty},{}]},{},[15])(15)});